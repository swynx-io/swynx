const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-E8u6rLWJ.js","assets/index-L9M2fZM0.js","assets/index-BIGqtTdm.js","assets/index-BRzzSZf3.js","assets/index-B9wZdvYE.js","assets/index-B6wmcdnY.js","assets/index-KqCV0VQL.js","assets/index-CHSa0G3D.js","assets/index-CUeFNc6s.js","assets/index-CuSFnDuX.js","assets/index-C51rIbWp.js","assets/index-DxVSsxH2.js","assets/index-Caqt-Nub.js"])))=>i.map(i=>d[i]);
var Cv=Object.defineProperty;var Mv=(n,e,t)=>e in n?Cv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ax=(n,e,t)=>Mv(n,typeof e!="symbol"?e+"":e,t);function Av(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function E0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Th={exports:{}},Nl={},Dh={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function Ev(){if(Ex)return Ie;Ex=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function S(T,W,ce){this.props=T,this.context=W,this.refs=j,this.updater=ce||w}S.prototype.isReactComponent={},S.prototype.setState=function(T,W){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,W,"setState")},S.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function k(){}k.prototype=S.prototype;function C(T,W,ce){this.props=T,this.context=W,this.refs=j,this.updater=ce||w}var D=C.prototype=new k;D.constructor=C,v(D,S.prototype),D.isPureReactComponent=!0;var E=Array.isArray,I=Object.prototype.hasOwnProperty,U={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function _(T,W,ce){var ue,ke={},Ne=null,Re=null;if(W!=null)for(ue in W.ref!==void 0&&(Re=W.ref),W.key!==void 0&&(Ne=""+W.key),W)I.call(W,ue)&&!F.hasOwnProperty(ue)&&(ke[ue]=W[ue]);var Pe=arguments.length-2;if(Pe===1)ke.children=ce;else if(1<Pe){for(var Fe=Array(Pe),De=0;De<Pe;De++)Fe[De]=arguments[De+2];ke.children=Fe}if(T&&T.defaultProps)for(ue in Pe=T.defaultProps,Pe)ke[ue]===void 0&&(ke[ue]=Pe[ue]);return{$$typeof:n,type:T,key:Ne,ref:Re,props:ke,_owner:U.current}}function R(T,W){return{$$typeof:n,type:T.type,key:W,ref:T.ref,props:T.props,_owner:T._owner}}function G(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function Q(T){var W={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ce){return W[ce]})}var ne=/\/+/g;function ee(T,W){return typeof T=="object"&&T!==null&&T.key!=null?Q(""+T.key):W.toString(36)}function H(T,W,ce,ue,ke){var Ne=typeof T;(Ne==="undefined"||Ne==="boolean")&&(T=null);var Re=!1;if(T===null)Re=!0;else switch(Ne){case"string":case"number":Re=!0;break;case"object":switch(T.$$typeof){case n:case e:Re=!0}}if(Re)return Re=T,ke=ke(Re),T=ue===""?"."+ee(Re,0):ue,E(ke)?(ce="",T!=null&&(ce=T.replace(ne,"$&/")+"/"),H(ke,W,ce,"",function(De){return De})):ke!=null&&(G(ke)&&(ke=R(ke,ce+(!ke.key||Re&&Re.key===ke.key?"":(""+ke.key).replace(ne,"$&/")+"/")+T)),W.push(ke)),1;if(Re=0,ue=ue===""?".":ue+":",E(T))for(var Pe=0;Pe<T.length;Pe++){Ne=T[Pe];var Fe=ue+ee(Ne,Pe);Re+=H(Ne,W,ce,Fe,ke)}else if(Fe=y(T),typeof Fe=="function")for(T=Fe.call(T),Pe=0;!(Ne=T.next()).done;)Ne=Ne.value,Fe=ue+ee(Ne,Pe++),Re+=H(Ne,W,ce,Fe,ke);else if(Ne==="object")throw W=String(T),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Re}function V(T,W,ce){if(T==null)return T;var ue=[],ke=0;return H(T,ue,"","",function(Ne){return W.call(ce,Ne,ke++)}),ue}function q(T){if(T._status===-1){var W=T._result;W=W(),W.then(function(ce){(T._status===0||T._status===-1)&&(T._status=1,T._result=ce)},function(ce){(T._status===0||T._status===-1)&&(T._status=2,T._result=ce)}),T._status===-1&&(T._status=0,T._result=W)}if(T._status===1)return T._result.default;throw T._result}var de={current:null},Y={transition:null},X={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:Y,ReactCurrentOwner:U};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:V,forEach:function(T,W,ce){V(T,function(){W.apply(this,arguments)},ce)},count:function(T){var W=0;return V(T,function(){W++}),W},toArray:function(T){return V(T,function(W){return W})||[]},only:function(T){if(!G(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ie.Component=S,Ie.Fragment=t,Ie.Profiler=i,Ie.PureComponent=C,Ie.StrictMode=s,Ie.Suspense=u,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ie.act=ie,Ie.cloneElement=function(T,W,ce){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ue=v({},T.props),ke=T.key,Ne=T.ref,Re=T._owner;if(W!=null){if(W.ref!==void 0&&(Ne=W.ref,Re=U.current),W.key!==void 0&&(ke=""+W.key),T.type&&T.type.defaultProps)var Pe=T.type.defaultProps;for(Fe in W)I.call(W,Fe)&&!F.hasOwnProperty(Fe)&&(ue[Fe]=W[Fe]===void 0&&Pe!==void 0?Pe[Fe]:W[Fe])}var Fe=arguments.length-2;if(Fe===1)ue.children=ce;else if(1<Fe){Pe=Array(Fe);for(var De=0;De<Fe;De++)Pe[De]=arguments[De+2];ue.children=Pe}return{$$typeof:n,type:T.type,key:ke,ref:Ne,props:ue,_owner:Re}},Ie.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:o,_context:T},T.Consumer=T},Ie.createElement=_,Ie.createFactory=function(T){var W=_.bind(null,T);return W.type=T,W},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(T){return{$$typeof:d,render:T}},Ie.isValidElement=G,Ie.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:q}},Ie.memo=function(T,W){return{$$typeof:m,type:T,compare:W===void 0?null:W}},Ie.startTransition=function(T){var W=Y.transition;Y.transition={};try{T()}finally{Y.transition=W}},Ie.unstable_act=ie,Ie.useCallback=function(T,W){return de.current.useCallback(T,W)},Ie.useContext=function(T){return de.current.useContext(T)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(T){return de.current.useDeferredValue(T)},Ie.useEffect=function(T,W){return de.current.useEffect(T,W)},Ie.useId=function(){return de.current.useId()},Ie.useImperativeHandle=function(T,W,ce){return de.current.useImperativeHandle(T,W,ce)},Ie.useInsertionEffect=function(T,W){return de.current.useInsertionEffect(T,W)},Ie.useLayoutEffect=function(T,W){return de.current.useLayoutEffect(T,W)},Ie.useMemo=function(T,W){return de.current.useMemo(T,W)},Ie.useReducer=function(T,W,ce){return de.current.useReducer(T,W,ce)},Ie.useRef=function(T){return de.current.useRef(T)},Ie.useState=function(T){return de.current.useState(T)},Ie.useSyncExternalStore=function(T,W,ce){return de.current.useSyncExternalStore(T,W,ce)},Ie.useTransition=function(){return de.current.useTransition()},Ie.version="18.3.1",Ie}var Lx;function Sc(){return Lx||(Lx=1,Dh.exports=Ev()),Dh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function Lv(){if(Px)return Nl;Px=1;var n=Sc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,u,m){var p,g={},y=null,w=null;m!==void 0&&(y=""+m),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(w=u.ref);for(p in u)s.call(u,p)&&!o.hasOwnProperty(p)&&(g[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)g[p]===void 0&&(g[p]=u[p]);return{$$typeof:e,type:d,key:y,ref:w,props:g,_owner:i.current}}return Nl.Fragment=t,Nl.jsx=c,Nl.jsxs=c,Nl}var Tx;function Pv(){return Tx||(Tx=1,Th.exports=Lv()),Th.exports}var r=Pv(),M=Sc();const L0=E0(M),Tv=Av({__proto__:null,default:L0},[M]);var po={},Rh={exports:{}},rs={},Oh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function Dv(){return Dx||(Dx=1,(function(n){function e(Y,X){var ie=Y.length;Y.push(X);e:for(;0<ie;){var T=ie-1>>>1,W=Y[T];if(0<i(W,X))Y[T]=X,Y[ie]=W,ie=T;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var X=Y[0],ie=Y.pop();if(ie!==X){Y[0]=ie;e:for(var T=0,W=Y.length,ce=W>>>1;T<ce;){var ue=2*(T+1)-1,ke=Y[ue],Ne=ue+1,Re=Y[Ne];if(0>i(ke,ie))Ne<W&&0>i(Re,ke)?(Y[T]=Re,Y[Ne]=ie,T=Ne):(Y[T]=ke,Y[ue]=ie,T=ue);else if(Ne<W&&0>i(Re,ie))Y[T]=Re,Y[Ne]=ie,T=Ne;else break e}}return X}function i(Y,X){var ie=Y.sortIndex-X.sortIndex;return ie!==0?ie:Y.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var u=[],m=[],p=1,g=null,y=3,w=!1,v=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(Y){for(var X=t(m);X!==null;){if(X.callback===null)s(m);else if(X.startTime<=Y)s(m),X.sortIndex=X.expirationTime,e(u,X);else break;X=t(m)}}function E(Y){if(j=!1,D(Y),!v)if(t(u)!==null)v=!0,q(I);else{var X=t(m);X!==null&&de(E,X.startTime-Y)}}function I(Y,X){v=!1,j&&(j=!1,k(_),_=-1),w=!0;var ie=y;try{for(D(X),g=t(u);g!==null&&(!(g.expirationTime>X)||Y&&!Q());){var T=g.callback;if(typeof T=="function"){g.callback=null,y=g.priorityLevel;var W=T(g.expirationTime<=X);X=n.unstable_now(),typeof W=="function"?g.callback=W:g===t(u)&&s(u),D(X)}else s(u);g=t(u)}if(g!==null)var ce=!0;else{var ue=t(m);ue!==null&&de(E,ue.startTime-X),ce=!1}return ce}finally{g=null,y=ie,w=!1}}var U=!1,F=null,_=-1,R=5,G=-1;function Q(){return!(n.unstable_now()-G<R)}function ne(){if(F!==null){var Y=n.unstable_now();G=Y;var X=!0;try{X=F(!0,Y)}finally{X?ee():(U=!1,F=null)}}else U=!1}var ee;if(typeof C=="function")ee=function(){C(ne)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=ne,ee=function(){V.postMessage(null)}}else ee=function(){S(ne,0)};function q(Y){F=Y,U||(U=!0,ee())}function de(Y,X){_=S(function(){Y(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_continueExecution=function(){v||w||(v=!0,q(I))},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var ie=y;y=X;try{return Y()}finally{y=ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Y,X){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ie=y;y=Y;try{return X()}finally{y=ie}},n.unstable_scheduleCallback=function(Y,X,ie){var T=n.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?T+ie:T):ie=T,Y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,Y={id:p++,callback:X,priorityLevel:Y,startTime:ie,expirationTime:W,sortIndex:-1},ie>T?(Y.sortIndex=ie,e(m,Y),t(u)===null&&Y===t(m)&&(j?(k(_),_=-1):j=!0,de(E,ie-T))):(Y.sortIndex=W,e(u,Y),v||w||(v=!0,q(I))),Y},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(Y){var X=y;return function(){var ie=y;y=X;try{return Y.apply(this,arguments)}finally{y=ie}}}})(Fh)),Fh}var Rx;function Rv(){return Rx||(Rx=1,Oh.exports=Dv()),Oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function Ov(){if(Ox)return rs;Ox=1;var n=Sc(),e=Rv();function t(l){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+l,h=1;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+l+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function o(l,a){c(l,a),c(l+"Capture",a)}function c(l,a){for(i[l]=a,l=0;l<a.length;l++)s.add(a[l])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(l){return u.call(g,l)?!0:u.call(p,l)?!1:m.test(l)?g[l]=!0:(p[l]=!0,!1)}function w(l,a,h,f){if(h!==null&&h.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:h!==null?!h.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function v(l,a,h,f){if(a===null||typeof a>"u"||w(l,a,h,f))return!0;if(f)return!1;if(h!==null)switch(h.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function j(l,a,h,f,x,b,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=l,this.type=a,this.sanitizeURL=b,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){S[l]=new j(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var a=l[0];S[a]=new j(a,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){S[l]=new j(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){S[l]=new j(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){S[l]=new j(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){S[l]=new j(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){S[l]=new j(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){S[l]=new j(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){S[l]=new j(l,5,!1,l.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function C(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var a=l.replace(k,C);S[a]=new j(a,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var a=l.replace(k,C);S[a]=new j(a,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var a=l.replace(k,C);S[a]=new j(a,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){S[l]=new j(l,1,!1,l.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){S[l]=new j(l,1,!1,l.toLowerCase(),null,!0,!0)});function D(l,a,h,f){var x=S.hasOwnProperty(a)?S[a]:null;(x!==null?x.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(v(a,h,x,f)&&(h=null),f||x===null?y(a)&&(h===null?l.removeAttribute(a):l.setAttribute(a,""+h)):x.mustUseProperty?l[x.propertyName]=h===null?x.type===3?!1:"":h:(a=x.attributeName,f=x.attributeNamespace,h===null?l.removeAttribute(a):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,f?l.setAttributeNS(f,a,h):l.setAttribute(a,h))))}var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),U=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),Q=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),Y=Symbol.iterator;function X(l){return l===null||typeof l!="object"?null:(l=Y&&l[Y]||l["@@iterator"],typeof l=="function"?l:null)}var ie=Object.assign,T;function W(l){if(T===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);T=a&&a[1]||""}return`
`+T+l}var ce=!1;function ue(l,a){if(!l||ce)return"";ce=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch($){var f=$}Reflect.construct(l,[],a)}else{try{a.call()}catch($){f=$}l.call(a.prototype)}else{try{throw Error()}catch($){f=$}l()}}catch($){if($&&f&&typeof $.stack=="string"){for(var x=$.stack.split(`
`),b=f.stack.split(`
`),N=x.length-1,A=b.length-1;1<=N&&0<=A&&x[N]!==b[A];)A--;for(;1<=N&&0<=A;N--,A--)if(x[N]!==b[A]){if(N!==1||A!==1)do if(N--,A--,0>A||x[N]!==b[A]){var L=`
`+x[N].replace(" at new "," at ");return l.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",l.displayName)),L}while(1<=N&&0<=A);break}}}finally{ce=!1,Error.prepareStackTrace=h}return(l=l?l.displayName||l.name:"")?W(l):""}function ke(l){switch(l.tag){case 5:return W(l.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return l=ue(l.type,!1),l;case 11:return l=ue(l.type.render,!1),l;case 1:return l=ue(l.type,!0),l;default:return""}}function Ne(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case F:return"Fragment";case U:return"Portal";case R:return"Profiler";case _:return"StrictMode";case ee:return"Suspense";case H:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Q:return(l.displayName||"Context")+".Consumer";case G:return(l._context.displayName||"Context")+".Provider";case ne:var a=l.render;return l=l.displayName,l||(l=a.displayName||a.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case V:return a=l.displayName||null,a!==null?a:Ne(l.type)||"Memo";case q:a=l._payload,l=l._init;try{return Ne(l(a))}catch{}}return null}function Re(l){var a=l.type;switch(l.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=a.render,l=l.displayName||l.name||"",a.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(a);case 8:return a===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Pe(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Fe(l){var a=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function De(l){var a=Fe(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,a),f=""+l[a];if(!l.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,b=h.set;return Object.defineProperty(l,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){f=""+N,b.call(this,N)}}),Object.defineProperty(l,a,{enumerable:h.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){l._valueTracker=null,delete l[a]}}}}function pt(l){l._valueTracker||(l._valueTracker=De(l))}function Ye(l){if(!l)return!1;var a=l._valueTracker;if(!a)return!0;var h=a.getValue(),f="";return l&&(f=Fe(l)?l.checked?"true":"false":l.value),l=f,l!==h?(a.setValue(l),!0):!1}function Lt(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Jt(l,a){var h=a.checked;return ie({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??l._wrapperState.initialChecked})}function hs(l,a){var h=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;h=Pe(a.value!=null?a.value:h),l._wrapperState={initialChecked:f,initialValue:h,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function us(l,a){a=a.checked,a!=null&&D(l,"checked",a,!1)}function Le(l,a){us(l,a);var h=Pe(a.value),f=a.type;if(h!=null)f==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+h):l.value!==""+h&&(l.value=""+h);else if(f==="submit"||f==="reset"){l.removeAttribute("value");return}a.hasOwnProperty("value")?nt(l,a.type,h):a.hasOwnProperty("defaultValue")&&nt(l,a.type,Pe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(l.defaultChecked=!!a.defaultChecked)}function pe(l,a,h){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+l._wrapperState.initialValue,h||a===l.value||(l.value=a),l.defaultValue=a}h=l.name,h!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,h!==""&&(l.name=h)}function nt(l,a,h){(a!=="number"||Lt(l.ownerDocument)!==l)&&(h==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+h&&(l.defaultValue=""+h))}var P=Array.isArray;function ae(l,a,h,f){if(l=l.options,a){a={};for(var x=0;x<h.length;x++)a["$"+h[x]]=!0;for(h=0;h<l.length;h++)x=a.hasOwnProperty("$"+l[h].value),l[h].selected!==x&&(l[h].selected=x),x&&f&&(l[h].defaultSelected=!0)}else{for(h=""+Pe(h),a=null,x=0;x<l.length;x++){if(l[x].value===h){l[x].selected=!0,f&&(l[x].defaultSelected=!0);return}a!==null||l[x].disabled||(a=l[x])}a!==null&&(a.selected=!0)}}function Ae(l,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},a,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Se(l,a){var h=a.value;if(h==null){if(h=a.children,a=a.defaultValue,h!=null){if(a!=null)throw Error(t(92));if(P(h)){if(1<h.length)throw Error(t(93));h=h[0]}a=h}a==null&&(a=""),h=a}l._wrapperState={initialValue:Pe(h)}}function Te(l,a){var h=Pe(a.value),f=Pe(a.defaultValue);h!=null&&(h=""+h,h!==l.value&&(l.value=h),a.defaultValue==null&&l.defaultValue!==h&&(l.defaultValue=h)),f!=null&&(l.defaultValue=""+f)}function at(l){var a=l.textContent;a===l._wrapperState.initialValue&&a!==""&&a!==null&&(l.value=a)}function Vt(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(l,a){return l==null||l==="http://www.w3.org/1999/xhtml"?Vt(a):l==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var _e,en=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,f,x){MSApp.execUnsafeLocalFunction(function(){return l(a,h,f,x)})}:l})(function(l,a){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=a;else{for(_e=_e||document.createElement("div"),_e.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=_e.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;a.firstChild;)l.appendChild(a.firstChild)}});function fs(l,a){if(a){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=a;return}}l.textContent=a}var qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hc=["Webkit","ms","Moz","O"];Object.keys(qt).forEach(function(l){Hc.forEach(function(a){a=a+l.charAt(0).toUpperCase()+l.substring(1),qt[a]=qt[l]})});function zi(l,a,h){return a==null||typeof a=="boolean"||a===""?"":h||typeof a!="number"||a===0||qt.hasOwnProperty(l)&&qt[l]?(""+a).trim():a+"px"}function pr(l,a){l=l.style;for(var h in a)if(a.hasOwnProperty(h)){var f=h.indexOf("--")===0,x=zi(h,a[h],f);h==="float"&&(h="cssFloat"),f?l.setProperty(h,x):l[h]=x}}var $i=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vc(l,a){if(a){if($i[l]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Uc(l,a){if(l.indexOf("-")===-1)return typeof a.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function Kc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Gc=null,Wr=null,Hr=null;function Uf(l){if(l=ol(l)){if(typeof Gc!="function")throw Error(t(280));var a=l.stateNode;a&&(a=Ea(a),Gc(l.stateNode,l.type,a))}}function qf(l){Wr?Hr?Hr.push(l):Hr=[l]:Wr=l}function Kf(){if(Wr){var l=Wr,a=Hr;if(Hr=Wr=null,Uf(l),a)for(l=0;l<a.length;l++)Uf(a[l])}}function Gf(l,a){return l(a)}function Qf(){}var Qc=!1;function Yf(l,a,h){if(Qc)return l(a,h);Qc=!0;try{return Gf(l,a,h)}finally{Qc=!1,(Wr!==null||Hr!==null)&&(Qf(),Kf())}}function _i(l,a){var h=l.stateNode;if(h===null)return null;var f=Ea(h);if(f===null)return null;h=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(l=l.type,f=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!f;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(t(231,a,typeof h));return h}var Yc=!1;if(d)try{var Wi={};Object.defineProperty(Wi,"passive",{get:function(){Yc=!0}}),window.addEventListener("test",Wi,Wi),window.removeEventListener("test",Wi,Wi)}catch{Yc=!1}function Tb(l,a,h,f,x,b,N,A,L){var $=Array.prototype.slice.call(arguments,3);try{a.apply(h,$)}catch(Z){this.onError(Z)}}var Hi=!1,aa=null,oa=!1,Xc=null,Db={onError:function(l){Hi=!0,aa=l}};function Rb(l,a,h,f,x,b,N,A,L){Hi=!1,aa=null,Tb.apply(Db,arguments)}function Ob(l,a,h,f,x,b,N,A,L){if(Rb.apply(this,arguments),Hi){if(Hi){var $=aa;Hi=!1,aa=null}else throw Error(t(198));oa||(oa=!0,Xc=$)}}function xr(l){var a=l,h=l;if(l.alternate)for(;a.return;)a=a.return;else{l=a;do a=l,(a.flags&4098)!==0&&(h=a.return),l=a.return;while(l)}return a.tag===3?h:null}function Xf(l){if(l.tag===13){var a=l.memoizedState;if(a===null&&(l=l.alternate,l!==null&&(a=l.memoizedState)),a!==null)return a.dehydrated}return null}function Jf(l){if(xr(l)!==l)throw Error(t(188))}function Fb(l){var a=l.alternate;if(!a){if(a=xr(l),a===null)throw Error(t(188));return a!==l?null:l}for(var h=l,f=a;;){var x=h.return;if(x===null)break;var b=x.alternate;if(b===null){if(f=x.return,f!==null){h=f;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===h)return Jf(x),l;if(b===f)return Jf(x),a;b=b.sibling}throw Error(t(188))}if(h.return!==f.return)h=x,f=b;else{for(var N=!1,A=x.child;A;){if(A===h){N=!0,h=x,f=b;break}if(A===f){N=!0,f=x,h=b;break}A=A.sibling}if(!N){for(A=b.child;A;){if(A===h){N=!0,h=b,f=x;break}if(A===f){N=!0,f=b,h=x;break}A=A.sibling}if(!N)throw Error(t(189))}}if(h.alternate!==f)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?l:a}function Zf(l){return l=Fb(l),l!==null?em(l):null}function em(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var a=em(l);if(a!==null)return a;l=l.sibling}return null}var tm=e.unstable_scheduleCallback,sm=e.unstable_cancelCallback,Bb=e.unstable_shouldYield,Ib=e.unstable_requestPaint,dt=e.unstable_now,zb=e.unstable_getCurrentPriorityLevel,Jc=e.unstable_ImmediatePriority,nm=e.unstable_UserBlockingPriority,ca=e.unstable_NormalPriority,$b=e.unstable_LowPriority,rm=e.unstable_IdlePriority,da=null,tn=null;function _b(l){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(da,l,void 0,(l.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:Vb,Wb=Math.log,Hb=Math.LN2;function Vb(l){return l>>>=0,l===0?32:31-(Wb(l)/Hb|0)|0}var ha=64,ua=4194304;function Vi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function fa(l,a){var h=l.pendingLanes;if(h===0)return 0;var f=0,x=l.suspendedLanes,b=l.pingedLanes,N=h&268435455;if(N!==0){var A=N&~x;A!==0?f=Vi(A):(b&=N,b!==0&&(f=Vi(b)))}else N=h&~x,N!==0?f=Vi(N):b!==0&&(f=Vi(b));if(f===0)return 0;if(a!==0&&a!==f&&(a&x)===0&&(x=f&-f,b=a&-a,x>=b||x===16&&(b&4194240)!==0))return a;if((f&4)!==0&&(f|=h&16),a=l.entangledLanes,a!==0)for(l=l.entanglements,a&=f;0<a;)h=31-Bs(a),x=1<<h,f|=l[h],a&=~x;return f}function Ub(l,a){switch(l){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qb(l,a){for(var h=l.suspendedLanes,f=l.pingedLanes,x=l.expirationTimes,b=l.pendingLanes;0<b;){var N=31-Bs(b),A=1<<N,L=x[N];L===-1?((A&h)===0||(A&f)!==0)&&(x[N]=Ub(A,a)):L<=a&&(l.expiredLanes|=A),b&=~A}}function Zc(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function im(){var l=ha;return ha<<=1,(ha&4194240)===0&&(ha=64),l}function ed(l){for(var a=[],h=0;31>h;h++)a.push(l);return a}function Ui(l,a,h){l.pendingLanes|=a,a!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,a=31-Bs(a),l[a]=h}function Kb(l,a){var h=l.pendingLanes&~a;l.pendingLanes=a,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=a,l.mutableReadLanes&=a,l.entangledLanes&=a,a=l.entanglements;var f=l.eventTimes;for(l=l.expirationTimes;0<h;){var x=31-Bs(h),b=1<<x;a[x]=0,f[x]=-1,l[x]=-1,h&=~b}}function td(l,a){var h=l.entangledLanes|=a;for(l=l.entanglements;h;){var f=31-Bs(h),x=1<<f;x&a|l[f]&a&&(l[f]|=a),h&=~x}}var qe=0;function lm(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var am,sd,om,cm,dm,nd=!1,ma=[],Fn=null,Bn=null,In=null,qi=new Map,Ki=new Map,zn=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(l,a){switch(l){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":qi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(a.pointerId)}}function Gi(l,a,h,f,x,b){return l===null||l.nativeEvent!==b?(l={blockedOn:a,domEventName:h,eventSystemFlags:f,nativeEvent:b,targetContainers:[x]},a!==null&&(a=ol(a),a!==null&&sd(a)),l):(l.eventSystemFlags|=f,a=l.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),l)}function Qb(l,a,h,f,x){switch(a){case"focusin":return Fn=Gi(Fn,l,a,h,f,x),!0;case"dragenter":return Bn=Gi(Bn,l,a,h,f,x),!0;case"mouseover":return In=Gi(In,l,a,h,f,x),!0;case"pointerover":var b=x.pointerId;return qi.set(b,Gi(qi.get(b)||null,l,a,h,f,x)),!0;case"gotpointercapture":return b=x.pointerId,Ki.set(b,Gi(Ki.get(b)||null,l,a,h,f,x)),!0}return!1}function um(l){var a=gr(l.target);if(a!==null){var h=xr(a);if(h!==null){if(a=h.tag,a===13){if(a=Xf(h),a!==null){l.blockedOn=a,dm(l.priority,function(){om(h)});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function pa(l){if(l.blockedOn!==null)return!1;for(var a=l.targetContainers;0<a.length;){var h=id(l.domEventName,l.eventSystemFlags,a[0],l.nativeEvent);if(h===null){h=l.nativeEvent;var f=new h.constructor(h.type,h);qc=f,h.target.dispatchEvent(f),qc=null}else return a=ol(h),a!==null&&sd(a),l.blockedOn=h,!1;a.shift()}return!0}function fm(l,a,h){pa(l)&&h.delete(a)}function Yb(){nd=!1,Fn!==null&&pa(Fn)&&(Fn=null),Bn!==null&&pa(Bn)&&(Bn=null),In!==null&&pa(In)&&(In=null),qi.forEach(fm),Ki.forEach(fm)}function Qi(l,a){l.blockedOn===a&&(l.blockedOn=null,nd||(nd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yb)))}function Yi(l){function a(x){return Qi(x,l)}if(0<ma.length){Qi(ma[0],l);for(var h=1;h<ma.length;h++){var f=ma[h];f.blockedOn===l&&(f.blockedOn=null)}}for(Fn!==null&&Qi(Fn,l),Bn!==null&&Qi(Bn,l),In!==null&&Qi(In,l),qi.forEach(a),Ki.forEach(a),h=0;h<zn.length;h++)f=zn[h],f.blockedOn===l&&(f.blockedOn=null);for(;0<zn.length&&(h=zn[0],h.blockedOn===null);)um(h),h.blockedOn===null&&zn.shift()}var Vr=E.ReactCurrentBatchConfig,xa=!0;function Xb(l,a,h,f){var x=qe,b=Vr.transition;Vr.transition=null;try{qe=1,rd(l,a,h,f)}finally{qe=x,Vr.transition=b}}function Jb(l,a,h,f){var x=qe,b=Vr.transition;Vr.transition=null;try{qe=4,rd(l,a,h,f)}finally{qe=x,Vr.transition=b}}function rd(l,a,h,f){if(xa){var x=id(l,a,h,f);if(x===null)jd(l,a,f,ga,h),hm(l,f);else if(Qb(x,l,a,h,f))f.stopPropagation();else if(hm(l,f),a&4&&-1<Gb.indexOf(l)){for(;x!==null;){var b=ol(x);if(b!==null&&am(b),b=id(l,a,h,f),b===null&&jd(l,a,f,ga,h),b===x)break;x=b}x!==null&&f.stopPropagation()}else jd(l,a,f,null,h)}}var ga=null;function id(l,a,h,f){if(ga=null,l=Kc(f),l=gr(l),l!==null)if(a=xr(l),a===null)l=null;else if(h=a.tag,h===13){if(l=Xf(a),l!==null)return l;l=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;l=null}else a!==l&&(l=null);return ga=l,null}function mm(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zb()){case Jc:return 1;case nm:return 4;case ca:case $b:return 16;case rm:return 536870912;default:return 16}default:return 16}}var $n=null,ld=null,ya=null;function pm(){if(ya)return ya;var l,a=ld,h=a.length,f,x="value"in $n?$n.value:$n.textContent,b=x.length;for(l=0;l<h&&a[l]===x[l];l++);var N=h-l;for(f=1;f<=N&&a[h-f]===x[b-f];f++);return ya=x.slice(l,1<f?1-f:void 0)}function ba(l){var a=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&a===13&&(l=13)):l=a,l===10&&(l=13),32<=l||l===13?l:0}function wa(){return!0}function xm(){return!1}function ms(l){function a(h,f,x,b,N){this._reactName=h,this._targetInst=x,this.type=f,this.nativeEvent=b,this.target=N,this.currentTarget=null;for(var A in l)l.hasOwnProperty(A)&&(h=l[A],this[A]=h?h(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?wa:xm,this.isPropagationStopped=xm,this}return ie(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),a}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=ms(Ur),Xi=ie({},Ur,{view:0,detail:0}),Zb=ms(Xi),od,cd,Ji,va=ie({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ji&&(Ji&&l.type==="mousemove"?(od=l.screenX-Ji.screenX,cd=l.screenY-Ji.screenY):cd=od=0,Ji=l),od)},movementY:function(l){return"movementY"in l?l.movementY:cd}}),gm=ms(va),ew=ie({},va,{dataTransfer:0}),tw=ms(ew),sw=ie({},Xi,{relatedTarget:0}),dd=ms(sw),nw=ie({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),rw=ms(nw),iw=ie({},Ur,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),lw=ms(iw),aw=ie({},Ur,{data:0}),ym=ms(aw),ow={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hw(l){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(l):(l=dw[l])?!!a[l]:!1}function hd(){return hw}var uw=ie({},Xi,{key:function(l){if(l.key){var a=ow[l.key]||l.key;if(a!=="Unidentified")return a}return l.type==="keypress"?(l=ba(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?cw[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(l){return l.type==="keypress"?ba(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ba(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),fw=ms(uw),mw=ie({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bm=ms(mw),pw=ie({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),xw=ms(pw),gw=ie({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),yw=ms(gw),bw=ie({},va,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ww=ms(bw),vw=[9,13,27,32],ud=d&&"CompositionEvent"in window,Zi=null;d&&"documentMode"in document&&(Zi=document.documentMode);var jw=d&&"TextEvent"in window&&!Zi,wm=d&&(!ud||Zi&&8<Zi&&11>=Zi),vm=" ",jm=!1;function Nm(l,a){switch(l){case"keyup":return vw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function km(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var qr=!1;function Nw(l,a){switch(l){case"compositionend":return km(a);case"keypress":return a.which!==32?null:(jm=!0,vm);case"textInput":return l=a.data,l===vm&&jm?null:l;default:return null}}function kw(l,a){if(qr)return l==="compositionend"||!ud&&Nm(l,a)?(l=pm(),ya=ld=$n=null,qr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return wm&&a.locale!=="ko"?null:a.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sm(l){var a=l&&l.nodeName&&l.nodeName.toLowerCase();return a==="input"?!!Sw[l.type]:a==="textarea"}function Cm(l,a,h,f){qf(f),a=Ca(a,"onChange"),0<a.length&&(h=new ad("onChange","change",null,h,f),l.push({event:h,listeners:a}))}var el=null,tl=null;function Cw(l){Vm(l,0)}function ja(l){var a=Xr(l);if(Ye(a))return l}function Mw(l,a){if(l==="change")return a}var Mm=!1;if(d){var fd;if(d){var md="oninput"in document;if(!md){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),md=typeof Am.oninput=="function"}fd=md}else fd=!1;Mm=fd&&(!document.documentMode||9<document.documentMode)}function Em(){el&&(el.detachEvent("onpropertychange",Lm),tl=el=null)}function Lm(l){if(l.propertyName==="value"&&ja(tl)){var a=[];Cm(a,tl,l,Kc(l)),Yf(Cw,a)}}function Aw(l,a,h){l==="focusin"?(Em(),el=a,tl=h,el.attachEvent("onpropertychange",Lm)):l==="focusout"&&Em()}function Ew(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ja(tl)}function Lw(l,a){if(l==="click")return ja(a)}function Pw(l,a){if(l==="input"||l==="change")return ja(a)}function Tw(l,a){return l===a&&(l!==0||1/l===1/a)||l!==l&&a!==a}var Is=typeof Object.is=="function"?Object.is:Tw;function sl(l,a){if(Is(l,a))return!0;if(typeof l!="object"||l===null||typeof a!="object"||a===null)return!1;var h=Object.keys(l),f=Object.keys(a);if(h.length!==f.length)return!1;for(f=0;f<h.length;f++){var x=h[f];if(!u.call(a,x)||!Is(l[x],a[x]))return!1}return!0}function Pm(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Tm(l,a){var h=Pm(l);l=0;for(var f;h;){if(h.nodeType===3){if(f=l+h.textContent.length,l<=a&&f>=a)return{node:h,offset:a-l};l=f}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Pm(h)}}function Dm(l,a){return l&&a?l===a?!0:l&&l.nodeType===3?!1:a&&a.nodeType===3?Dm(l,a.parentNode):"contains"in l?l.contains(a):l.compareDocumentPosition?!!(l.compareDocumentPosition(a)&16):!1:!1}function Rm(){for(var l=window,a=Lt();a instanceof l.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)l=a.contentWindow;else break;a=Lt(l.document)}return a}function pd(l){var a=l&&l.nodeName&&l.nodeName.toLowerCase();return a&&(a==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||a==="textarea"||l.contentEditable==="true")}function Dw(l){var a=Rm(),h=l.focusedElem,f=l.selectionRange;if(a!==h&&h&&h.ownerDocument&&Dm(h.ownerDocument.documentElement,h)){if(f!==null&&pd(h)){if(a=f.start,l=f.end,l===void 0&&(l=a),"selectionStart"in h)h.selectionStart=a,h.selectionEnd=Math.min(l,h.value.length);else if(l=(a=h.ownerDocument||document)&&a.defaultView||window,l.getSelection){l=l.getSelection();var x=h.textContent.length,b=Math.min(f.start,x);f=f.end===void 0?b:Math.min(f.end,x),!l.extend&&b>f&&(x=f,f=b,b=x),x=Tm(h,b);var N=Tm(h,f);x&&N&&(l.rangeCount!==1||l.anchorNode!==x.node||l.anchorOffset!==x.offset||l.focusNode!==N.node||l.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),l.removeAllRanges(),b>f?(l.addRange(a),l.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),l.addRange(a)))}}for(a=[],l=h;l=l.parentNode;)l.nodeType===1&&a.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<a.length;h++)l=a[h],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Rw=d&&"documentMode"in document&&11>=document.documentMode,Kr=null,xd=null,nl=null,gd=!1;function Om(l,a,h){var f=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;gd||Kr==null||Kr!==Lt(f)||(f=Kr,"selectionStart"in f&&pd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),nl&&sl(nl,f)||(nl=f,f=Ca(xd,"onSelect"),0<f.length&&(a=new ad("onSelect","select",null,a,h),l.push({event:a,listeners:f}),a.target=Kr)))}function Na(l,a){var h={};return h[l.toLowerCase()]=a.toLowerCase(),h["Webkit"+l]="webkit"+a,h["Moz"+l]="moz"+a,h}var Gr={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},yd={},Fm={};d&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ka(l){if(yd[l])return yd[l];if(!Gr[l])return l;var a=Gr[l],h;for(h in a)if(a.hasOwnProperty(h)&&h in Fm)return yd[l]=a[h];return l}var Bm=ka("animationend"),Im=ka("animationiteration"),zm=ka("animationstart"),$m=ka("transitionend"),_m=new Map,Wm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _n(l,a){_m.set(l,a),o(a,[l])}for(var bd=0;bd<Wm.length;bd++){var wd=Wm[bd],Ow=wd.toLowerCase(),Fw=wd[0].toUpperCase()+wd.slice(1);_n(Ow,"on"+Fw)}_n(Bm,"onAnimationEnd"),_n(Im,"onAnimationIteration"),_n(zm,"onAnimationStart"),_n("dblclick","onDoubleClick"),_n("focusin","onFocus"),_n("focusout","onBlur"),_n($m,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Hm(l,a,h){var f=l.type||"unknown-event";l.currentTarget=h,Ob(f,a,void 0,l),l.currentTarget=null}function Vm(l,a){a=(a&4)!==0;for(var h=0;h<l.length;h++){var f=l[h],x=f.event;f=f.listeners;e:{var b=void 0;if(a)for(var N=f.length-1;0<=N;N--){var A=f[N],L=A.instance,$=A.currentTarget;if(A=A.listener,L!==b&&x.isPropagationStopped())break e;Hm(x,A,$),b=L}else for(N=0;N<f.length;N++){if(A=f[N],L=A.instance,$=A.currentTarget,A=A.listener,L!==b&&x.isPropagationStopped())break e;Hm(x,A,$),b=L}}}if(oa)throw l=Xc,oa=!1,Xc=null,l}function et(l,a){var h=a[Ad];h===void 0&&(h=a[Ad]=new Set);var f=l+"__bubble";h.has(f)||(Um(a,l,2,!1),h.add(f))}function vd(l,a,h){var f=0;a&&(f|=4),Um(h,l,f,a)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function il(l){if(!l[Sa]){l[Sa]=!0,s.forEach(function(h){h!=="selectionchange"&&(Bw.has(h)||vd(h,!1,l),vd(h,!0,l))});var a=l.nodeType===9?l:l.ownerDocument;a===null||a[Sa]||(a[Sa]=!0,vd("selectionchange",!1,a))}}function Um(l,a,h,f){switch(mm(a)){case 1:var x=Xb;break;case 4:x=Jb;break;default:x=rd}h=x.bind(null,a,h,l),x=void 0,!Yc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),f?x!==void 0?l.addEventListener(a,h,{capture:!0,passive:x}):l.addEventListener(a,h,!0):x!==void 0?l.addEventListener(a,h,{passive:x}):l.addEventListener(a,h,!1)}function jd(l,a,h,f,x){var b=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var N=f.tag;if(N===3||N===4){var A=f.stateNode.containerInfo;if(A===x||A.nodeType===8&&A.parentNode===x)break;if(N===4)for(N=f.return;N!==null;){var L=N.tag;if((L===3||L===4)&&(L=N.stateNode.containerInfo,L===x||L.nodeType===8&&L.parentNode===x))return;N=N.return}for(;A!==null;){if(N=gr(A),N===null)return;if(L=N.tag,L===5||L===6){f=b=N;continue e}A=A.parentNode}}f=f.return}Yf(function(){var $=b,Z=Kc(h),se=[];e:{var J=_m.get(l);if(J!==void 0){var he=ad,xe=l;switch(l){case"keypress":if(ba(h)===0)break e;case"keydown":case"keyup":he=fw;break;case"focusin":xe="focus",he=dd;break;case"focusout":xe="blur",he=dd;break;case"beforeblur":case"afterblur":he=dd;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=xw;break;case Bm:case Im:case zm:he=rw;break;case $m:he=yw;break;case"scroll":he=Zb;break;case"wheel":he=ww;break;case"copy":case"cut":case"paste":he=lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=bm}var ge=(a&4)!==0,ht=!ge&&l==="scroll",B=ge?J!==null?J+"Capture":null:J;ge=[];for(var O=$,z;O!==null;){z=O;var le=z.stateNode;if(z.tag===5&&le!==null&&(z=le,B!==null&&(le=_i(O,B),le!=null&&ge.push(ll(O,le,z)))),ht)break;O=O.return}0<ge.length&&(J=new he(J,xe,null,h,Z),se.push({event:J,listeners:ge}))}}if((a&7)===0){e:{if(J=l==="mouseover"||l==="pointerover",he=l==="mouseout"||l==="pointerout",J&&h!==qc&&(xe=h.relatedTarget||h.fromElement)&&(gr(xe)||xe[jn]))break e;if((he||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,he?(xe=h.relatedTarget||h.toElement,he=$,xe=xe?gr(xe):null,xe!==null&&(ht=xr(xe),xe!==ht||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(he=null,xe=$),he!==xe)){if(ge=gm,le="onMouseLeave",B="onMouseEnter",O="mouse",(l==="pointerout"||l==="pointerover")&&(ge=bm,le="onPointerLeave",B="onPointerEnter",O="pointer"),ht=he==null?J:Xr(he),z=xe==null?J:Xr(xe),J=new ge(le,O+"leave",he,h,Z),J.target=ht,J.relatedTarget=z,le=null,gr(Z)===$&&(ge=new ge(B,O+"enter",xe,h,Z),ge.target=z,ge.relatedTarget=ht,le=ge),ht=le,he&&xe)t:{for(ge=he,B=xe,O=0,z=ge;z;z=Qr(z))O++;for(z=0,le=B;le;le=Qr(le))z++;for(;0<O-z;)ge=Qr(ge),O--;for(;0<z-O;)B=Qr(B),z--;for(;O--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=Qr(ge),B=Qr(B)}ge=null}else ge=null;he!==null&&qm(se,J,he,ge,!1),xe!==null&&ht!==null&&qm(se,ht,xe,ge,!0)}}e:{if(J=$?Xr($):window,he=J.nodeName&&J.nodeName.toLowerCase(),he==="select"||he==="input"&&J.type==="file")var be=Mw;else if(Sm(J))if(Mm)be=Pw;else{be=Ew;var Ce=Aw}else(he=J.nodeName)&&he.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(be=Lw);if(be&&(be=be(l,$))){Cm(se,be,h,Z);break e}Ce&&Ce(l,J,$),l==="focusout"&&(Ce=J._wrapperState)&&Ce.controlled&&J.type==="number"&&nt(J,"number",J.value)}switch(Ce=$?Xr($):window,l){case"focusin":(Sm(Ce)||Ce.contentEditable==="true")&&(Kr=Ce,xd=$,nl=null);break;case"focusout":nl=xd=Kr=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,Om(se,h,Z);break;case"selectionchange":if(Rw)break;case"keydown":case"keyup":Om(se,h,Z)}var Me;if(ud)e:{switch(l){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else qr?Nm(l,h)&&(Ee="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(Ee="onCompositionStart");Ee&&(wm&&h.locale!=="ko"&&(qr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&qr&&(Me=pm()):($n=Z,ld="value"in $n?$n.value:$n.textContent,qr=!0)),Ce=Ca($,Ee),0<Ce.length&&(Ee=new ym(Ee,l,null,h,Z),se.push({event:Ee,listeners:Ce}),Me?Ee.data=Me:(Me=km(h),Me!==null&&(Ee.data=Me)))),(Me=jw?Nw(l,h):kw(l,h))&&($=Ca($,"onBeforeInput"),0<$.length&&(Z=new ym("onBeforeInput","beforeinput",null,h,Z),se.push({event:Z,listeners:$}),Z.data=Me))}Vm(se,a)})}function ll(l,a,h){return{instance:l,listener:a,currentTarget:h}}function Ca(l,a){for(var h=a+"Capture",f=[];l!==null;){var x=l,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=_i(l,h),b!=null&&f.unshift(ll(l,b,x)),b=_i(l,a),b!=null&&f.push(ll(l,b,x))),l=l.return}return f}function Qr(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function qm(l,a,h,f,x){for(var b=a._reactName,N=[];h!==null&&h!==f;){var A=h,L=A.alternate,$=A.stateNode;if(L!==null&&L===f)break;A.tag===5&&$!==null&&(A=$,x?(L=_i(h,b),L!=null&&N.unshift(ll(h,L,A))):x||(L=_i(h,b),L!=null&&N.push(ll(h,L,A)))),h=h.return}N.length!==0&&l.push({event:a,listeners:N})}var Iw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function Km(l){return(typeof l=="string"?l:""+l).replace(Iw,`
`).replace(zw,"")}function Ma(l,a,h){if(a=Km(a),Km(l)!==a&&h)throw Error(t(425))}function Aa(){}var Nd=null,kd=null;function Sd(l,a){return l==="textarea"||l==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cd=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,Gm=typeof Promise=="function"?Promise:void 0,_w=typeof queueMicrotask=="function"?queueMicrotask:typeof Gm<"u"?function(l){return Gm.resolve(null).then(l).catch(Ww)}:Cd;function Ww(l){setTimeout(function(){throw l})}function Md(l,a){var h=a,f=0;do{var x=h.nextSibling;if(l.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(f===0){l.removeChild(x),Yi(a);return}f--}else h!=="$"&&h!=="$?"&&h!=="$!"||f++;h=x}while(h);Yi(a)}function Wn(l){for(;l!=null;l=l.nextSibling){var a=l.nodeType;if(a===1||a===3)break;if(a===8){if(a=l.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return l}function Qm(l){l=l.previousSibling;for(var a=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return l;a--}else h==="/$"&&a++}l=l.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),sn="__reactFiber$"+Yr,al="__reactProps$"+Yr,jn="__reactContainer$"+Yr,Ad="__reactEvents$"+Yr,Hw="__reactListeners$"+Yr,Vw="__reactHandles$"+Yr;function gr(l){var a=l[sn];if(a)return a;for(var h=l.parentNode;h;){if(a=h[jn]||h[sn]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(l=Qm(l);l!==null;){if(h=l[sn])return h;l=Qm(l)}return a}l=h,h=l.parentNode}return null}function ol(l){return l=l[sn]||l[jn],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Xr(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Ea(l){return l[al]||null}var Ed=[],Jr=-1;function Hn(l){return{current:l}}function tt(l){0>Jr||(l.current=Ed[Jr],Ed[Jr]=null,Jr--)}function Xe(l,a){Jr++,Ed[Jr]=l.current,l.current=a}var Vn={},Ot=Hn(Vn),Zt=Hn(!1),yr=Vn;function Zr(l,a){var h=l.type.contextTypes;if(!h)return Vn;var f=l.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in h)x[b]=a[b];return f&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=a,l.__reactInternalMemoizedMaskedChildContext=x),x}function es(l){return l=l.childContextTypes,l!=null}function La(){tt(Zt),tt(Ot)}function Ym(l,a,h){if(Ot.current!==Vn)throw Error(t(168));Xe(Ot,a),Xe(Zt,h)}function Xm(l,a,h){var f=l.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return h;f=f.getChildContext();for(var x in f)if(!(x in a))throw Error(t(108,Re(l)||"Unknown",x));return ie({},h,f)}function Pa(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Vn,yr=Ot.current,Xe(Ot,l),Xe(Zt,Zt.current),!0}function Jm(l,a,h){var f=l.stateNode;if(!f)throw Error(t(169));h?(l=Xm(l,a,yr),f.__reactInternalMemoizedMergedChildContext=l,tt(Zt),tt(Ot),Xe(Ot,l)):tt(Zt),Xe(Zt,h)}var Nn=null,Ta=!1,Ld=!1;function Zm(l){Nn===null?Nn=[l]:Nn.push(l)}function Uw(l){Ta=!0,Zm(l)}function Un(){if(!Ld&&Nn!==null){Ld=!0;var l=0,a=qe;try{var h=Nn;for(qe=1;l<h.length;l++){var f=h[l];do f=f(!0);while(f!==null)}Nn=null,Ta=!1}catch(x){throw Nn!==null&&(Nn=Nn.slice(l+1)),tm(Jc,Un),x}finally{qe=a,Ld=!1}}return null}var ei=[],ti=0,Da=null,Ra=0,js=[],Ns=0,br=null,kn=1,Sn="";function wr(l,a){ei[ti++]=Ra,ei[ti++]=Da,Da=l,Ra=a}function ep(l,a,h){js[Ns++]=kn,js[Ns++]=Sn,js[Ns++]=br,br=l;var f=kn;l=Sn;var x=32-Bs(f)-1;f&=~(1<<x),h+=1;var b=32-Bs(a)+x;if(30<b){var N=x-x%5;b=(f&(1<<N)-1).toString(32),f>>=N,x-=N,kn=1<<32-Bs(a)+x|h<<x|f,Sn=b+l}else kn=1<<b|h<<x|f,Sn=l}function Pd(l){l.return!==null&&(wr(l,1),ep(l,1,0))}function Td(l){for(;l===Da;)Da=ei[--ti],ei[ti]=null,Ra=ei[--ti],ei[ti]=null;for(;l===br;)br=js[--Ns],js[Ns]=null,Sn=js[--Ns],js[Ns]=null,kn=js[--Ns],js[Ns]=null}var ps=null,xs=null,st=!1,zs=null;function tp(l,a){var h=Ms(5,null,null,0);h.elementType="DELETED",h.stateNode=a,h.return=l,a=l.deletions,a===null?(l.deletions=[h],l.flags|=16):a.push(h)}function sp(l,a){switch(l.tag){case 5:var h=l.type;return a=a.nodeType!==1||h.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(l.stateNode=a,ps=l,xs=Wn(a.firstChild),!0):!1;case 6:return a=l.pendingProps===""||a.nodeType!==3?null:a,a!==null?(l.stateNode=a,ps=l,xs=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(h=br!==null?{id:kn,overflow:Sn}:null,l.memoizedState={dehydrated:a,treeContext:h,retryLane:1073741824},h=Ms(18,null,null,0),h.stateNode=a,h.return=l,l.child=h,ps=l,xs=null,!0):!1;default:return!1}}function Dd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Rd(l){if(st){var a=xs;if(a){var h=a;if(!sp(l,a)){if(Dd(l))throw Error(t(418));a=Wn(h.nextSibling);var f=ps;a&&sp(l,a)?tp(f,h):(l.flags=l.flags&-4097|2,st=!1,ps=l)}}else{if(Dd(l))throw Error(t(418));l.flags=l.flags&-4097|2,st=!1,ps=l}}}function np(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;ps=l}function Oa(l){if(l!==ps)return!1;if(!st)return np(l),st=!0,!1;var a;if((a=l.tag!==3)&&!(a=l.tag!==5)&&(a=l.type,a=a!=="head"&&a!=="body"&&!Sd(l.type,l.memoizedProps)),a&&(a=xs)){if(Dd(l))throw rp(),Error(t(418));for(;a;)tp(l,a),a=Wn(a.nextSibling)}if(np(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,a=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"){if(a===0){xs=Wn(l.nextSibling);break e}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++}l=l.nextSibling}xs=null}}else xs=ps?Wn(l.stateNode.nextSibling):null;return!0}function rp(){for(var l=xs;l;)l=Wn(l.nextSibling)}function si(){xs=ps=null,st=!1}function Od(l){zs===null?zs=[l]:zs.push(l)}var qw=E.ReactCurrentBatchConfig;function cl(l,a,h){if(l=h.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var f=h.stateNode}if(!f)throw Error(t(147,l));var x=f,b=""+l;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(N){var A=x.refs;N===null?delete A[b]:A[b]=N},a._stringRef=b,a)}if(typeof l!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,l))}return l}function Fa(l,a){throw l=Object.prototype.toString.call(a),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":l))}function ip(l){var a=l._init;return a(l._payload)}function lp(l){function a(B,O){if(l){var z=B.deletions;z===null?(B.deletions=[O],B.flags|=16):z.push(O)}}function h(B,O){if(!l)return null;for(;O!==null;)a(B,O),O=O.sibling;return null}function f(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function x(B,O){return B=Zn(B,O),B.index=0,B.sibling=null,B}function b(B,O,z){return B.index=z,l?(z=B.alternate,z!==null?(z=z.index,z<O?(B.flags|=2,O):z):(B.flags|=2,O)):(B.flags|=1048576,O)}function N(B){return l&&B.alternate===null&&(B.flags|=2),B}function A(B,O,z,le){return O===null||O.tag!==6?(O=Ch(z,B.mode,le),O.return=B,O):(O=x(O,z),O.return=B,O)}function L(B,O,z,le){var be=z.type;return be===F?Z(B,O,z.props.children,le,z.key):O!==null&&(O.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===q&&ip(be)===O.type)?(le=x(O,z.props),le.ref=cl(B,O,z),le.return=B,le):(le=lo(z.type,z.key,z.props,null,B.mode,le),le.ref=cl(B,O,z),le.return=B,le)}function $(B,O,z,le){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=Mh(z,B.mode,le),O.return=B,O):(O=x(O,z.children||[]),O.return=B,O)}function Z(B,O,z,le,be){return O===null||O.tag!==7?(O=Ar(z,B.mode,le,be),O.return=B,O):(O=x(O,z),O.return=B,O)}function se(B,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Ch(""+O,B.mode,z),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return z=lo(O.type,O.key,O.props,null,B.mode,z),z.ref=cl(B,null,O),z.return=B,z;case U:return O=Mh(O,B.mode,z),O.return=B,O;case q:var le=O._init;return se(B,le(O._payload),z)}if(P(O)||X(O))return O=Ar(O,B.mode,z,null),O.return=B,O;Fa(B,O)}return null}function J(B,O,z,le){var be=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return be!==null?null:A(B,O,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===be?L(B,O,z,le):null;case U:return z.key===be?$(B,O,z,le):null;case q:return be=z._init,J(B,O,be(z._payload),le)}if(P(z)||X(z))return be!==null?null:Z(B,O,z,le,null);Fa(B,z)}return null}function he(B,O,z,le,be){if(typeof le=="string"&&le!==""||typeof le=="number")return B=B.get(z)||null,A(O,B,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case I:return B=B.get(le.key===null?z:le.key)||null,L(O,B,le,be);case U:return B=B.get(le.key===null?z:le.key)||null,$(O,B,le,be);case q:var Ce=le._init;return he(B,O,z,Ce(le._payload),be)}if(P(le)||X(le))return B=B.get(z)||null,Z(O,B,le,be,null);Fa(O,le)}return null}function xe(B,O,z,le){for(var be=null,Ce=null,Me=O,Ee=O=0,At=null;Me!==null&&Ee<z.length;Ee++){Me.index>Ee?(At=Me,Me=null):At=Me.sibling;var He=J(B,Me,z[Ee],le);if(He===null){Me===null&&(Me=At);break}l&&Me&&He.alternate===null&&a(B,Me),O=b(He,O,Ee),Ce===null?be=He:Ce.sibling=He,Ce=He,Me=At}if(Ee===z.length)return h(B,Me),st&&wr(B,Ee),be;if(Me===null){for(;Ee<z.length;Ee++)Me=se(B,z[Ee],le),Me!==null&&(O=b(Me,O,Ee),Ce===null?be=Me:Ce.sibling=Me,Ce=Me);return st&&wr(B,Ee),be}for(Me=f(B,Me);Ee<z.length;Ee++)At=he(Me,B,Ee,z[Ee],le),At!==null&&(l&&At.alternate!==null&&Me.delete(At.key===null?Ee:At.key),O=b(At,O,Ee),Ce===null?be=At:Ce.sibling=At,Ce=At);return l&&Me.forEach(function(er){return a(B,er)}),st&&wr(B,Ee),be}function ge(B,O,z,le){var be=X(z);if(typeof be!="function")throw Error(t(150));if(z=be.call(z),z==null)throw Error(t(151));for(var Ce=be=null,Me=O,Ee=O=0,At=null,He=z.next();Me!==null&&!He.done;Ee++,He=z.next()){Me.index>Ee?(At=Me,Me=null):At=Me.sibling;var er=J(B,Me,He.value,le);if(er===null){Me===null&&(Me=At);break}l&&Me&&er.alternate===null&&a(B,Me),O=b(er,O,Ee),Ce===null?be=er:Ce.sibling=er,Ce=er,Me=At}if(He.done)return h(B,Me),st&&wr(B,Ee),be;if(Me===null){for(;!He.done;Ee++,He=z.next())He=se(B,He.value,le),He!==null&&(O=b(He,O,Ee),Ce===null?be=He:Ce.sibling=He,Ce=He);return st&&wr(B,Ee),be}for(Me=f(B,Me);!He.done;Ee++,He=z.next())He=he(Me,B,Ee,He.value,le),He!==null&&(l&&He.alternate!==null&&Me.delete(He.key===null?Ee:He.key),O=b(He,O,Ee),Ce===null?be=He:Ce.sibling=He,Ce=He);return l&&Me.forEach(function(Sv){return a(B,Sv)}),st&&wr(B,Ee),be}function ht(B,O,z,le){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var be=z.key,Ce=O;Ce!==null;){if(Ce.key===be){if(be=z.type,be===F){if(Ce.tag===7){h(B,Ce.sibling),O=x(Ce,z.props.children),O.return=B,B=O;break e}}else if(Ce.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===q&&ip(be)===Ce.type){h(B,Ce.sibling),O=x(Ce,z.props),O.ref=cl(B,Ce,z),O.return=B,B=O;break e}h(B,Ce);break}else a(B,Ce);Ce=Ce.sibling}z.type===F?(O=Ar(z.props.children,B.mode,le,z.key),O.return=B,B=O):(le=lo(z.type,z.key,z.props,null,B.mode,le),le.ref=cl(B,O,z),le.return=B,B=le)}return N(B);case U:e:{for(Ce=z.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){h(B,O.sibling),O=x(O,z.children||[]),O.return=B,B=O;break e}else{h(B,O);break}else a(B,O);O=O.sibling}O=Mh(z,B.mode,le),O.return=B,B=O}return N(B);case q:return Ce=z._init,ht(B,O,Ce(z._payload),le)}if(P(z))return xe(B,O,z,le);if(X(z))return ge(B,O,z,le);Fa(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(h(B,O.sibling),O=x(O,z),O.return=B,B=O):(h(B,O),O=Ch(z,B.mode,le),O.return=B,B=O),N(B)):h(B,O)}return ht}var ni=lp(!0),ap=lp(!1),Ba=Hn(null),Ia=null,ri=null,Fd=null;function Bd(){Fd=ri=Ia=null}function Id(l){var a=Ba.current;tt(Ba),l._currentValue=a}function zd(l,a,h){for(;l!==null;){var f=l.alternate;if((l.childLanes&a)!==a?(l.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),l===h)break;l=l.return}}function ii(l,a){Ia=l,Fd=ri=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&a)!==0&&(ts=!0),l.firstContext=null)}function ks(l){var a=l._currentValue;if(Fd!==l)if(l={context:l,memoizedValue:a,next:null},ri===null){if(Ia===null)throw Error(t(308));ri=l,Ia.dependencies={lanes:0,firstContext:l}}else ri=ri.next=l;return a}var vr=null;function $d(l){vr===null?vr=[l]:vr.push(l)}function op(l,a,h,f){var x=a.interleaved;return x===null?(h.next=h,$d(a)):(h.next=x.next,x.next=h),a.interleaved=h,Cn(l,f)}function Cn(l,a){l.lanes|=a;var h=l.alternate;for(h!==null&&(h.lanes|=a),h=l,l=l.return;l!==null;)l.childLanes|=a,h=l.alternate,h!==null&&(h.childLanes|=a),h=l,l=l.return;return h.tag===3?h.stateNode:null}var qn=!1;function _d(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(l,a){l=l.updateQueue,a.updateQueue===l&&(a.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Mn(l,a){return{eventTime:l,lane:a,tag:0,payload:null,callback:null,next:null}}function Kn(l,a,h){var f=l.updateQueue;if(f===null)return null;if(f=f.shared,(We&2)!==0){var x=f.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),f.pending=a,Cn(l,h)}return x=f.interleaved,x===null?(a.next=a,$d(f)):(a.next=x.next,x.next=a),f.interleaved=a,Cn(l,h)}function za(l,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194240)!==0)){var f=a.lanes;f&=l.pendingLanes,h|=f,a.lanes=h,td(l,h)}}function dp(l,a){var h=l.updateQueue,f=l.alternate;if(f!==null&&(f=f.updateQueue,h===f)){var x=null,b=null;if(h=h.firstBaseUpdate,h!==null){do{var N={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};b===null?x=b=N:b=b.next=N,h=h.next}while(h!==null);b===null?x=b=a:b=b.next=a}else x=b=a;h={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:f.shared,effects:f.effects},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=a:l.next=a,h.lastBaseUpdate=a}function $a(l,a,h,f){var x=l.updateQueue;qn=!1;var b=x.firstBaseUpdate,N=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,$=L.next;L.next=null,N===null?b=$:N.next=$,N=L;var Z=l.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==N&&(A===null?Z.firstBaseUpdate=$:A.next=$,Z.lastBaseUpdate=L))}if(b!==null){var se=x.baseState;N=0,Z=$=L=null,A=b;do{var J=A.lane,he=A.eventTime;if((f&J)===J){Z!==null&&(Z=Z.next={eventTime:he,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var xe=l,ge=A;switch(J=a,he=h,ge.tag){case 1:if(xe=ge.payload,typeof xe=="function"){se=xe.call(he,se,J);break e}se=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ge.payload,J=typeof xe=="function"?xe.call(he,se,J):xe,J==null)break e;se=ie({},se,J);break e;case 2:qn=!0}}A.callback!==null&&A.lane!==0&&(l.flags|=64,J=x.effects,J===null?x.effects=[A]:J.push(A))}else he={eventTime:he,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?($=Z=he,L=se):Z=Z.next=he,N|=J;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;J=A,A=J.next,J.next=null,x.lastBaseUpdate=J,x.shared.pending=null}}while(!0);if(Z===null&&(L=se),x.baseState=L,x.firstBaseUpdate=$,x.lastBaseUpdate=Z,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else b===null&&(x.shared.lanes=0);kr|=N,l.lanes=N,l.memoizedState=se}}function hp(l,a,h){if(l=a.effects,a.effects=null,l!==null)for(a=0;a<l.length;a++){var f=l[a],x=f.callback;if(x!==null){if(f.callback=null,f=h,typeof x!="function")throw Error(t(191,x));x.call(f)}}}var dl={},nn=Hn(dl),hl=Hn(dl),ul=Hn(dl);function jr(l){if(l===dl)throw Error(t(174));return l}function Wd(l,a){switch(Xe(ul,a),Xe(hl,l),Xe(nn,dl),l=a.nodeType,l){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ut(null,"");break;default:l=l===8?a.parentNode:a,a=l.namespaceURI||null,l=l.tagName,a=Ut(a,l)}tt(nn),Xe(nn,a)}function li(){tt(nn),tt(hl),tt(ul)}function up(l){jr(ul.current);var a=jr(nn.current),h=Ut(a,l.type);a!==h&&(Xe(hl,l),Xe(nn,h))}function Hd(l){hl.current===l&&(tt(nn),tt(hl))}var rt=Hn(0);function _a(l){for(var a=l;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break;for(;a.sibling===null;){if(a.return===null||a.return===l)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Vd=[];function Ud(){for(var l=0;l<Vd.length;l++)Vd[l]._workInProgressVersionPrimary=null;Vd.length=0}var Wa=E.ReactCurrentDispatcher,qd=E.ReactCurrentBatchConfig,Nr=0,it=null,wt=null,Ct=null,Ha=!1,fl=!1,ml=0,Kw=0;function Ft(){throw Error(t(321))}function Kd(l,a){if(a===null)return!1;for(var h=0;h<a.length&&h<l.length;h++)if(!Is(l[h],a[h]))return!1;return!0}function Gd(l,a,h,f,x,b){if(Nr=b,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Wa.current=l===null||l.memoizedState===null?Xw:Jw,l=h(f,x),fl){b=0;do{if(fl=!1,ml=0,25<=b)throw Error(t(301));b+=1,Ct=wt=null,a.updateQueue=null,Wa.current=Zw,l=h(f,x)}while(fl)}if(Wa.current=qa,a=wt!==null&&wt.next!==null,Nr=0,Ct=wt=it=null,Ha=!1,a)throw Error(t(300));return l}function Qd(){var l=ml!==0;return ml=0,l}function rn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=l:Ct=Ct.next=l,Ct}function Ss(){if(wt===null){var l=it.alternate;l=l!==null?l.memoizedState:null}else l=wt.next;var a=Ct===null?it.memoizedState:Ct.next;if(a!==null)Ct=a,wt=l;else{if(l===null)throw Error(t(310));wt=l,l={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Ct===null?it.memoizedState=Ct=l:Ct=Ct.next=l}return Ct}function pl(l,a){return typeof a=="function"?a(l):a}function Yd(l){var a=Ss(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var f=wt,x=f.baseQueue,b=h.pending;if(b!==null){if(x!==null){var N=x.next;x.next=b.next,b.next=N}f.baseQueue=x=b,h.pending=null}if(x!==null){b=x.next,f=f.baseState;var A=N=null,L=null,$=b;do{var Z=$.lane;if((Nr&Z)===Z)L!==null&&(L=L.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),f=$.hasEagerState?$.eagerState:l(f,$.action);else{var se={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};L===null?(A=L=se,N=f):L=L.next=se,it.lanes|=Z,kr|=Z}$=$.next}while($!==null&&$!==b);L===null?N=f:L.next=A,Is(f,a.memoizedState)||(ts=!0),a.memoizedState=f,a.baseState=N,a.baseQueue=L,h.lastRenderedState=f}if(l=h.interleaved,l!==null){x=l;do b=x.lane,it.lanes|=b,kr|=b,x=x.next;while(x!==l)}else x===null&&(h.lanes=0);return[a.memoizedState,h.dispatch]}function Xd(l){var a=Ss(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var f=h.dispatch,x=h.pending,b=a.memoizedState;if(x!==null){h.pending=null;var N=x=x.next;do b=l(b,N.action),N=N.next;while(N!==x);Is(b,a.memoizedState)||(ts=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),h.lastRenderedState=b}return[b,f]}function fp(){}function mp(l,a){var h=it,f=Ss(),x=a(),b=!Is(f.memoizedState,x);if(b&&(f.memoizedState=x,ts=!0),f=f.queue,Jd(gp.bind(null,h,f,l),[l]),f.getSnapshot!==a||b||Ct!==null&&Ct.memoizedState.tag&1){if(h.flags|=2048,xl(9,xp.bind(null,h,f,x,a),void 0,null),Mt===null)throw Error(t(349));(Nr&30)!==0||pp(h,a,x)}return x}function pp(l,a,h){l.flags|=16384,l={getSnapshot:a,value:h},a=it.updateQueue,a===null?(a={lastEffect:null,stores:null},it.updateQueue=a,a.stores=[l]):(h=a.stores,h===null?a.stores=[l]:h.push(l))}function xp(l,a,h,f){a.value=h,a.getSnapshot=f,yp(a)&&bp(l)}function gp(l,a,h){return h(function(){yp(a)&&bp(l)})}function yp(l){var a=l.getSnapshot;l=l.value;try{var h=a();return!Is(l,h)}catch{return!0}}function bp(l){var a=Cn(l,1);a!==null&&Hs(a,l,1,-1)}function wp(l){var a=rn();return typeof l=="function"&&(l=l()),a.memoizedState=a.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pl,lastRenderedState:l},a.queue=l,l=l.dispatch=Yw.bind(null,it,l),[a.memoizedState,l]}function xl(l,a,h,f){return l={tag:l,create:a,destroy:h,deps:f,next:null},a=it.updateQueue,a===null?(a={lastEffect:null,stores:null},it.updateQueue=a,a.lastEffect=l.next=l):(h=a.lastEffect,h===null?a.lastEffect=l.next=l:(f=h.next,h.next=l,l.next=f,a.lastEffect=l)),l}function vp(){return Ss().memoizedState}function Va(l,a,h,f){var x=rn();it.flags|=l,x.memoizedState=xl(1|a,h,void 0,f===void 0?null:f)}function Ua(l,a,h,f){var x=Ss();f=f===void 0?null:f;var b=void 0;if(wt!==null){var N=wt.memoizedState;if(b=N.destroy,f!==null&&Kd(f,N.deps)){x.memoizedState=xl(a,h,b,f);return}}it.flags|=l,x.memoizedState=xl(1|a,h,b,f)}function jp(l,a){return Va(8390656,8,l,a)}function Jd(l,a){return Ua(2048,8,l,a)}function Np(l,a){return Ua(4,2,l,a)}function kp(l,a){return Ua(4,4,l,a)}function Sp(l,a){if(typeof a=="function")return l=l(),a(l),function(){a(null)};if(a!=null)return l=l(),a.current=l,function(){a.current=null}}function Cp(l,a,h){return h=h!=null?h.concat([l]):null,Ua(4,4,Sp.bind(null,a,l),h)}function Zd(){}function Mp(l,a){var h=Ss();a=a===void 0?null:a;var f=h.memoizedState;return f!==null&&a!==null&&Kd(a,f[1])?f[0]:(h.memoizedState=[l,a],l)}function Ap(l,a){var h=Ss();a=a===void 0?null:a;var f=h.memoizedState;return f!==null&&a!==null&&Kd(a,f[1])?f[0]:(l=l(),h.memoizedState=[l,a],l)}function Ep(l,a,h){return(Nr&21)===0?(l.baseState&&(l.baseState=!1,ts=!0),l.memoizedState=h):(Is(h,a)||(h=im(),it.lanes|=h,kr|=h,l.baseState=!0),a)}function Gw(l,a){var h=qe;qe=h!==0&&4>h?h:4,l(!0);var f=qd.transition;qd.transition={};try{l(!1),a()}finally{qe=h,qd.transition=f}}function Lp(){return Ss().memoizedState}function Qw(l,a,h){var f=Xn(l);if(h={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null},Pp(l))Tp(a,h);else if(h=op(l,a,h,f),h!==null){var x=Gt();Hs(h,l,f,x),Dp(h,a,f)}}function Yw(l,a,h){var f=Xn(l),x={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null};if(Pp(l))Tp(a,x);else{var b=l.alternate;if(l.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var N=a.lastRenderedState,A=b(N,h);if(x.hasEagerState=!0,x.eagerState=A,Is(A,N)){var L=a.interleaved;L===null?(x.next=x,$d(a)):(x.next=L.next,L.next=x),a.interleaved=x;return}}catch{}finally{}h=op(l,a,x,f),h!==null&&(x=Gt(),Hs(h,l,f,x),Dp(h,a,f))}}function Pp(l){var a=l.alternate;return l===it||a!==null&&a===it}function Tp(l,a){fl=Ha=!0;var h=l.pending;h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a}function Dp(l,a,h){if((h&4194240)!==0){var f=a.lanes;f&=l.pendingLanes,h|=f,a.lanes=h,td(l,h)}}var qa={readContext:ks,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Xw={readContext:ks,useCallback:function(l,a){return rn().memoizedState=[l,a===void 0?null:a],l},useContext:ks,useEffect:jp,useImperativeHandle:function(l,a,h){return h=h!=null?h.concat([l]):null,Va(4194308,4,Sp.bind(null,a,l),h)},useLayoutEffect:function(l,a){return Va(4194308,4,l,a)},useInsertionEffect:function(l,a){return Va(4,2,l,a)},useMemo:function(l,a){var h=rn();return a=a===void 0?null:a,l=l(),h.memoizedState=[l,a],l},useReducer:function(l,a,h){var f=rn();return a=h!==void 0?h(a):a,f.memoizedState=f.baseState=a,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:a},f.queue=l,l=l.dispatch=Qw.bind(null,it,l),[f.memoizedState,l]},useRef:function(l){var a=rn();return l={current:l},a.memoizedState=l},useState:wp,useDebugValue:Zd,useDeferredValue:function(l){return rn().memoizedState=l},useTransition:function(){var l=wp(!1),a=l[0];return l=Gw.bind(null,l[1]),rn().memoizedState=l,[a,l]},useMutableSource:function(){},useSyncExternalStore:function(l,a,h){var f=it,x=rn();if(st){if(h===void 0)throw Error(t(407));h=h()}else{if(h=a(),Mt===null)throw Error(t(349));(Nr&30)!==0||pp(f,a,h)}x.memoizedState=h;var b={value:h,getSnapshot:a};return x.queue=b,jp(gp.bind(null,f,b,l),[l]),f.flags|=2048,xl(9,xp.bind(null,f,b,h,a),void 0,null),h},useId:function(){var l=rn(),a=Mt.identifierPrefix;if(st){var h=Sn,f=kn;h=(f&~(1<<32-Bs(f)-1)).toString(32)+h,a=":"+a+"R"+h,h=ml++,0<h&&(a+="H"+h.toString(32)),a+=":"}else h=Kw++,a=":"+a+"r"+h.toString(32)+":";return l.memoizedState=a},unstable_isNewReconciler:!1},Jw={readContext:ks,useCallback:Mp,useContext:ks,useEffect:Jd,useImperativeHandle:Cp,useInsertionEffect:Np,useLayoutEffect:kp,useMemo:Ap,useReducer:Yd,useRef:vp,useState:function(){return Yd(pl)},useDebugValue:Zd,useDeferredValue:function(l){var a=Ss();return Ep(a,wt.memoizedState,l)},useTransition:function(){var l=Yd(pl)[0],a=Ss().memoizedState;return[l,a]},useMutableSource:fp,useSyncExternalStore:mp,useId:Lp,unstable_isNewReconciler:!1},Zw={readContext:ks,useCallback:Mp,useContext:ks,useEffect:Jd,useImperativeHandle:Cp,useInsertionEffect:Np,useLayoutEffect:kp,useMemo:Ap,useReducer:Xd,useRef:vp,useState:function(){return Xd(pl)},useDebugValue:Zd,useDeferredValue:function(l){var a=Ss();return wt===null?a.memoizedState=l:Ep(a,wt.memoizedState,l)},useTransition:function(){var l=Xd(pl)[0],a=Ss().memoizedState;return[l,a]},useMutableSource:fp,useSyncExternalStore:mp,useId:Lp,unstable_isNewReconciler:!1};function $s(l,a){if(l&&l.defaultProps){a=ie({},a),l=l.defaultProps;for(var h in l)a[h]===void 0&&(a[h]=l[h]);return a}return a}function eh(l,a,h,f){a=l.memoizedState,h=h(f,a),h=h==null?a:ie({},a,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Ka={isMounted:function(l){return(l=l._reactInternals)?xr(l)===l:!1},enqueueSetState:function(l,a,h){l=l._reactInternals;var f=Gt(),x=Xn(l),b=Mn(f,x);b.payload=a,h!=null&&(b.callback=h),a=Kn(l,b,x),a!==null&&(Hs(a,l,x,f),za(a,l,x))},enqueueReplaceState:function(l,a,h){l=l._reactInternals;var f=Gt(),x=Xn(l),b=Mn(f,x);b.tag=1,b.payload=a,h!=null&&(b.callback=h),a=Kn(l,b,x),a!==null&&(Hs(a,l,x,f),za(a,l,x))},enqueueForceUpdate:function(l,a){l=l._reactInternals;var h=Gt(),f=Xn(l),x=Mn(h,f);x.tag=2,a!=null&&(x.callback=a),a=Kn(l,x,f),a!==null&&(Hs(a,l,f,h),za(a,l,f))}};function Rp(l,a,h,f,x,b,N){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(f,b,N):a.prototype&&a.prototype.isPureReactComponent?!sl(h,f)||!sl(x,b):!0}function Op(l,a,h){var f=!1,x=Vn,b=a.contextType;return typeof b=="object"&&b!==null?b=ks(b):(x=es(a)?yr:Ot.current,f=a.contextTypes,b=(f=f!=null)?Zr(l,x):Vn),a=new a(h,b),l.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ka,l.stateNode=a,a._reactInternals=l,f&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=x,l.__reactInternalMemoizedMaskedChildContext=b),a}function Fp(l,a,h,f){l=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,f),a.state!==l&&Ka.enqueueReplaceState(a,a.state,null)}function th(l,a,h,f){var x=l.stateNode;x.props=h,x.state=l.memoizedState,x.refs={},_d(l);var b=a.contextType;typeof b=="object"&&b!==null?x.context=ks(b):(b=es(a)?yr:Ot.current,x.context=Zr(l,b)),x.state=l.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(eh(l,a,b,h),x.state=l.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&Ka.enqueueReplaceState(x,x.state,null),$a(l,h,x,f),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308)}function ai(l,a){try{var h="",f=a;do h+=ke(f),f=f.return;while(f);var x=h}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:l,source:a,stack:x,digest:null}}function sh(l,a,h){return{value:l,source:null,stack:h??null,digest:a??null}}function nh(l,a){try{console.error(a.value)}catch(h){setTimeout(function(){throw h})}}var ev=typeof WeakMap=="function"?WeakMap:Map;function Bp(l,a,h){h=Mn(-1,h),h.tag=3,h.payload={element:null};var f=a.value;return h.callback=function(){eo||(eo=!0,yh=f),nh(l,a)},h}function Ip(l,a,h){h=Mn(-1,h),h.tag=3;var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var x=a.value;h.payload=function(){return f(x)},h.callback=function(){nh(l,a)}}var b=l.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(h.callback=function(){nh(l,a),typeof f!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),h}function zp(l,a,h){var f=l.pingCache;if(f===null){f=l.pingCache=new ev;var x=new Set;f.set(a,x)}else x=f.get(a),x===void 0&&(x=new Set,f.set(a,x));x.has(h)||(x.add(h),l=mv.bind(null,l,a,h),a.then(l,l))}function $p(l){do{var a;if((a=l.tag===13)&&(a=l.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return l;l=l.return}while(l!==null);return null}function _p(l,a,h,f,x){return(l.mode&1)===0?(l===a?l.flags|=65536:(l.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(a=Mn(-1,1),a.tag=2,Kn(h,a,1))),h.lanes|=1),l):(l.flags|=65536,l.lanes=x,l)}var tv=E.ReactCurrentOwner,ts=!1;function Kt(l,a,h,f){a.child=l===null?ap(a,null,h,f):ni(a,l.child,h,f)}function Wp(l,a,h,f,x){h=h.render;var b=a.ref;return ii(a,x),f=Gd(l,a,h,f,b,x),h=Qd(),l!==null&&!ts?(a.updateQueue=l.updateQueue,a.flags&=-2053,l.lanes&=~x,An(l,a,x)):(st&&h&&Pd(a),a.flags|=1,Kt(l,a,f,x),a.child)}function Hp(l,a,h,f,x){if(l===null){var b=h.type;return typeof b=="function"&&!Sh(b)&&b.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(a.tag=15,a.type=b,Vp(l,a,b,f,x)):(l=lo(h.type,null,f,a,a.mode,x),l.ref=a.ref,l.return=a,a.child=l)}if(b=l.child,(l.lanes&x)===0){var N=b.memoizedProps;if(h=h.compare,h=h!==null?h:sl,h(N,f)&&l.ref===a.ref)return An(l,a,x)}return a.flags|=1,l=Zn(b,f),l.ref=a.ref,l.return=a,a.child=l}function Vp(l,a,h,f,x){if(l!==null){var b=l.memoizedProps;if(sl(b,f)&&l.ref===a.ref)if(ts=!1,a.pendingProps=f=b,(l.lanes&x)!==0)(l.flags&131072)!==0&&(ts=!0);else return a.lanes=l.lanes,An(l,a,x)}return rh(l,a,h,f,x)}function Up(l,a,h){var f=a.pendingProps,x=f.children,b=l!==null?l.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ci,gs),gs|=h;else{if((h&1073741824)===0)return l=b!==null?b.baseLanes|h:h,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:l,cachePool:null,transitions:null},a.updateQueue=null,Xe(ci,gs),gs|=l,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=b!==null?b.baseLanes:h,Xe(ci,gs),gs|=f}else b!==null?(f=b.baseLanes|h,a.memoizedState=null):f=h,Xe(ci,gs),gs|=f;return Kt(l,a,x,h),a.child}function qp(l,a){var h=a.ref;(l===null&&h!==null||l!==null&&l.ref!==h)&&(a.flags|=512,a.flags|=2097152)}function rh(l,a,h,f,x){var b=es(h)?yr:Ot.current;return b=Zr(a,b),ii(a,x),h=Gd(l,a,h,f,b,x),f=Qd(),l!==null&&!ts?(a.updateQueue=l.updateQueue,a.flags&=-2053,l.lanes&=~x,An(l,a,x)):(st&&f&&Pd(a),a.flags|=1,Kt(l,a,h,x),a.child)}function Kp(l,a,h,f,x){if(es(h)){var b=!0;Pa(a)}else b=!1;if(ii(a,x),a.stateNode===null)Qa(l,a),Op(a,h,f),th(a,h,f,x),f=!0;else if(l===null){var N=a.stateNode,A=a.memoizedProps;N.props=A;var L=N.context,$=h.contextType;typeof $=="object"&&$!==null?$=ks($):($=es(h)?yr:Ot.current,$=Zr(a,$));var Z=h.getDerivedStateFromProps,se=typeof Z=="function"||typeof N.getSnapshotBeforeUpdate=="function";se||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(A!==f||L!==$)&&Fp(a,N,f,$),qn=!1;var J=a.memoizedState;N.state=J,$a(a,f,N,x),L=a.memoizedState,A!==f||J!==L||Zt.current||qn?(typeof Z=="function"&&(eh(a,h,Z,f),L=a.memoizedState),(A=qn||Rp(a,h,A,f,J,L,$))?(se||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=L),N.props=f,N.state=L,N.context=$,f=A):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{N=a.stateNode,cp(l,a),A=a.memoizedProps,$=a.type===a.elementType?A:$s(a.type,A),N.props=$,se=a.pendingProps,J=N.context,L=h.contextType,typeof L=="object"&&L!==null?L=ks(L):(L=es(h)?yr:Ot.current,L=Zr(a,L));var he=h.getDerivedStateFromProps;(Z=typeof he=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(A!==se||J!==L)&&Fp(a,N,f,L),qn=!1,J=a.memoizedState,N.state=J,$a(a,f,N,x);var xe=a.memoizedState;A!==se||J!==xe||Zt.current||qn?(typeof he=="function"&&(eh(a,h,he,f),xe=a.memoizedState),($=qn||Rp(a,h,$,f,J,xe,L)||!1)?(Z||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,xe,L),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,xe,L)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=xe),N.props=f,N.state=xe,N.context=L,f=$):(typeof N.componentDidUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=1024),f=!1)}return ih(l,a,h,f,b,x)}function ih(l,a,h,f,x,b){qp(l,a);var N=(a.flags&128)!==0;if(!f&&!N)return x&&Jm(a,h,!1),An(l,a,b);f=a.stateNode,tv.current=a;var A=N&&typeof h.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,l!==null&&N?(a.child=ni(a,l.child,null,b),a.child=ni(a,null,A,b)):Kt(l,a,A,b),a.memoizedState=f.state,x&&Jm(a,h,!0),a.child}function Gp(l){var a=l.stateNode;a.pendingContext?Ym(l,a.pendingContext,a.pendingContext!==a.context):a.context&&Ym(l,a.context,!1),Wd(l,a.containerInfo)}function Qp(l,a,h,f,x){return si(),Od(x),a.flags|=256,Kt(l,a,h,f),a.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function ah(l){return{baseLanes:l,cachePool:null,transitions:null}}function Yp(l,a,h){var f=a.pendingProps,x=rt.current,b=!1,N=(a.flags&128)!==0,A;if((A=N)||(A=l!==null&&l.memoizedState===null?!1:(x&2)!==0),A?(b=!0,a.flags&=-129):(l===null||l.memoizedState!==null)&&(x|=1),Xe(rt,x&1),l===null)return Rd(a),l=a.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((a.mode&1)===0?a.lanes=1:l.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=f.children,l=f.fallback,b?(f=a.mode,b=a.child,N={mode:"hidden",children:N},(f&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=N):b=ao(N,f,0,null),l=Ar(l,f,h,null),b.return=a,l.return=a,b.sibling=l,a.child=b,a.child.memoizedState=ah(h),a.memoizedState=lh,l):oh(a,N));if(x=l.memoizedState,x!==null&&(A=x.dehydrated,A!==null))return sv(l,a,N,f,A,x,h);if(b){b=f.fallback,N=a.mode,x=l.child,A=x.sibling;var L={mode:"hidden",children:f.children};return(N&1)===0&&a.child!==x?(f=a.child,f.childLanes=0,f.pendingProps=L,a.deletions=null):(f=Zn(x,L),f.subtreeFlags=x.subtreeFlags&14680064),A!==null?b=Zn(A,b):(b=Ar(b,N,h,null),b.flags|=2),b.return=a,f.return=a,f.sibling=b,a.child=f,f=b,b=a.child,N=l.child.memoizedState,N=N===null?ah(h):{baseLanes:N.baseLanes|h,cachePool:null,transitions:N.transitions},b.memoizedState=N,b.childLanes=l.childLanes&~h,a.memoizedState=lh,f}return b=l.child,l=b.sibling,f=Zn(b,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=h),f.return=a,f.sibling=null,l!==null&&(h=a.deletions,h===null?(a.deletions=[l],a.flags|=16):h.push(l)),a.child=f,a.memoizedState=null,f}function oh(l,a){return a=ao({mode:"visible",children:a},l.mode,0,null),a.return=l,l.child=a}function Ga(l,a,h,f){return f!==null&&Od(f),ni(a,l.child,null,h),l=oh(a,a.pendingProps.children),l.flags|=2,a.memoizedState=null,l}function sv(l,a,h,f,x,b,N){if(h)return a.flags&256?(a.flags&=-257,f=sh(Error(t(422))),Ga(l,a,N,f)):a.memoizedState!==null?(a.child=l.child,a.flags|=128,null):(b=f.fallback,x=a.mode,f=ao({mode:"visible",children:f.children},x,0,null),b=Ar(b,x,N,null),b.flags|=2,f.return=a,b.return=a,f.sibling=b,a.child=f,(a.mode&1)!==0&&ni(a,l.child,null,N),a.child.memoizedState=ah(N),a.memoizedState=lh,b);if((a.mode&1)===0)return Ga(l,a,N,null);if(x.data==="$!"){if(f=x.nextSibling&&x.nextSibling.dataset,f)var A=f.dgst;return f=A,b=Error(t(419)),f=sh(b,f,void 0),Ga(l,a,N,f)}if(A=(N&l.childLanes)!==0,ts||A){if(f=Mt,f!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(f.suspendedLanes|N))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,Cn(l,x),Hs(f,l,x,-1))}return kh(),f=sh(Error(t(421))),Ga(l,a,N,f)}return x.data==="$?"?(a.flags|=128,a.child=l.child,a=pv.bind(null,l),x._reactRetry=a,null):(l=b.treeContext,xs=Wn(x.nextSibling),ps=a,st=!0,zs=null,l!==null&&(js[Ns++]=kn,js[Ns++]=Sn,js[Ns++]=br,kn=l.id,Sn=l.overflow,br=a),a=oh(a,f.children),a.flags|=4096,a)}function Xp(l,a,h){l.lanes|=a;var f=l.alternate;f!==null&&(f.lanes|=a),zd(l.return,a,h)}function ch(l,a,h,f,x){var b=l.memoizedState;b===null?l.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:h,tailMode:x}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=h,b.tailMode=x)}function Jp(l,a,h){var f=a.pendingProps,x=f.revealOrder,b=f.tail;if(Kt(l,a,f.children,h),f=rt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=a.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Xp(l,h,a);else if(l.tag===19)Xp(l,h,a);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}f&=1}if(Xe(rt,f),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(h=a.child,x=null;h!==null;)l=h.alternate,l!==null&&_a(l)===null&&(x=h),h=h.sibling;h=x,h===null?(x=a.child,a.child=null):(x=h.sibling,h.sibling=null),ch(a,!1,x,h,b);break;case"backwards":for(h=null,x=a.child,a.child=null;x!==null;){if(l=x.alternate,l!==null&&_a(l)===null){a.child=x;break}l=x.sibling,x.sibling=h,h=x,x=l}ch(a,!0,h,null,b);break;case"together":ch(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qa(l,a){(a.mode&1)===0&&l!==null&&(l.alternate=null,a.alternate=null,a.flags|=2)}function An(l,a,h){if(l!==null&&(a.dependencies=l.dependencies),kr|=a.lanes,(h&a.childLanes)===0)return null;if(l!==null&&a.child!==l.child)throw Error(t(153));if(a.child!==null){for(l=a.child,h=Zn(l,l.pendingProps),a.child=h,h.return=a;l.sibling!==null;)l=l.sibling,h=h.sibling=Zn(l,l.pendingProps),h.return=a;h.sibling=null}return a.child}function nv(l,a,h){switch(a.tag){case 3:Gp(a),si();break;case 5:up(a);break;case 1:es(a.type)&&Pa(a);break;case 4:Wd(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,x=a.memoizedProps.value;Xe(Ba,f._currentValue),f._currentValue=x;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Xe(rt,rt.current&1),a.flags|=128,null):(h&a.child.childLanes)!==0?Yp(l,a,h):(Xe(rt,rt.current&1),l=An(l,a,h),l!==null?l.sibling:null);Xe(rt,rt.current&1);break;case 19:if(f=(h&a.childLanes)!==0,(l.flags&128)!==0){if(f)return Jp(l,a,h);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Xe(rt,rt.current),f)break;return null;case 22:case 23:return a.lanes=0,Up(l,a,h)}return An(l,a,h)}var Zp,dh,ex,tx;Zp=function(l,a){for(var h=a.child;h!==null;){if(h.tag===5||h.tag===6)l.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},dh=function(){},ex=function(l,a,h,f){var x=l.memoizedProps;if(x!==f){l=a.stateNode,jr(nn.current);var b=null;switch(h){case"input":x=Jt(l,x),f=Jt(l,f),b=[];break;case"select":x=ie({},x,{value:void 0}),f=ie({},f,{value:void 0}),b=[];break;case"textarea":x=Ae(l,x),f=Ae(l,f),b=[];break;default:typeof x.onClick!="function"&&typeof f.onClick=="function"&&(l.onclick=Aa)}Vc(h,f);var N;h=null;for($ in x)if(!f.hasOwnProperty($)&&x.hasOwnProperty($)&&x[$]!=null)if($==="style"){var A=x[$];for(N in A)A.hasOwnProperty(N)&&(h||(h={}),h[N]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?b||(b=[]):(b=b||[]).push($,null));for($ in f){var L=f[$];if(A=x!=null?x[$]:void 0,f.hasOwnProperty($)&&L!==A&&(L!=null||A!=null))if($==="style")if(A){for(N in A)!A.hasOwnProperty(N)||L&&L.hasOwnProperty(N)||(h||(h={}),h[N]="");for(N in L)L.hasOwnProperty(N)&&A[N]!==L[N]&&(h||(h={}),h[N]=L[N])}else h||(b||(b=[]),b.push($,h)),h=L;else $==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(b=b||[]).push($,L)):$==="children"?typeof L!="string"&&typeof L!="number"||(b=b||[]).push($,""+L):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(i.hasOwnProperty($)?(L!=null&&$==="onScroll"&&et("scroll",l),b||A===L||(b=[])):(b=b||[]).push($,L))}h&&(b=b||[]).push("style",h);var $=b;(a.updateQueue=$)&&(a.flags|=4)}},tx=function(l,a,h,f){h!==f&&(a.flags|=4)};function gl(l,a){if(!st)switch(l.tailMode){case"hidden":a=l.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?a||l.tail===null?l.tail=null:l.tail.sibling=null:f.sibling=null}}function Bt(l){var a=l.alternate!==null&&l.alternate.child===l.child,h=0,f=0;if(a)for(var x=l.child;x!==null;)h|=x.lanes|x.childLanes,f|=x.subtreeFlags&14680064,f|=x.flags&14680064,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)h|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=f,l.childLanes=h,a}function rv(l,a,h){var f=a.pendingProps;switch(Td(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return es(a.type)&&La(),Bt(a),null;case 3:return f=a.stateNode,li(),tt(Zt),tt(Ot),Ud(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Oa(a)?a.flags|=4:l===null||l.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,zs!==null&&(vh(zs),zs=null))),dh(l,a),Bt(a),null;case 5:Hd(a);var x=jr(ul.current);if(h=a.type,l!==null&&a.stateNode!=null)ex(l,a,h,f,x),l.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Bt(a),null}if(l=jr(nn.current),Oa(a)){f=a.stateNode,h=a.type;var b=a.memoizedProps;switch(f[sn]=a,f[al]=b,l=(a.mode&1)!==0,h){case"dialog":et("cancel",f),et("close",f);break;case"iframe":case"object":case"embed":et("load",f);break;case"video":case"audio":for(x=0;x<rl.length;x++)et(rl[x],f);break;case"source":et("error",f);break;case"img":case"image":case"link":et("error",f),et("load",f);break;case"details":et("toggle",f);break;case"input":hs(f,b),et("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!b.multiple},et("invalid",f);break;case"textarea":Se(f,b),et("invalid",f)}Vc(h,b),x=null;for(var N in b)if(b.hasOwnProperty(N)){var A=b[N];N==="children"?typeof A=="string"?f.textContent!==A&&(b.suppressHydrationWarning!==!0&&Ma(f.textContent,A,l),x=["children",A]):typeof A=="number"&&f.textContent!==""+A&&(b.suppressHydrationWarning!==!0&&Ma(f.textContent,A,l),x=["children",""+A]):i.hasOwnProperty(N)&&A!=null&&N==="onScroll"&&et("scroll",f)}switch(h){case"input":pt(f),pe(f,b,!0);break;case"textarea":pt(f),at(f);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(f.onclick=Aa)}f=x,a.updateQueue=f,f!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Vt(h)),l==="http://www.w3.org/1999/xhtml"?h==="script"?(l=N.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof f.is=="string"?l=N.createElement(h,{is:f.is}):(l=N.createElement(h),h==="select"&&(N=l,f.multiple?N.multiple=!0:f.size&&(N.size=f.size))):l=N.createElementNS(l,h),l[sn]=a,l[al]=f,Zp(l,a,!1,!1),a.stateNode=l;e:{switch(N=Uc(h,f),h){case"dialog":et("cancel",l),et("close",l),x=f;break;case"iframe":case"object":case"embed":et("load",l),x=f;break;case"video":case"audio":for(x=0;x<rl.length;x++)et(rl[x],l);x=f;break;case"source":et("error",l),x=f;break;case"img":case"image":case"link":et("error",l),et("load",l),x=f;break;case"details":et("toggle",l),x=f;break;case"input":hs(l,f),x=Jt(l,f),et("invalid",l);break;case"option":x=f;break;case"select":l._wrapperState={wasMultiple:!!f.multiple},x=ie({},f,{value:void 0}),et("invalid",l);break;case"textarea":Se(l,f),x=Ae(l,f),et("invalid",l);break;default:x=f}Vc(h,x),A=x;for(b in A)if(A.hasOwnProperty(b)){var L=A[b];b==="style"?pr(l,L):b==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&en(l,L)):b==="children"?typeof L=="string"?(h!=="textarea"||L!=="")&&fs(l,L):typeof L=="number"&&fs(l,""+L):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?L!=null&&b==="onScroll"&&et("scroll",l):L!=null&&D(l,b,L,N))}switch(h){case"input":pt(l),pe(l,f,!1);break;case"textarea":pt(l),at(l);break;case"option":f.value!=null&&l.setAttribute("value",""+Pe(f.value));break;case"select":l.multiple=!!f.multiple,b=f.value,b!=null?ae(l,!!f.multiple,b,!1):f.defaultValue!=null&&ae(l,!!f.multiple,f.defaultValue,!0);break;default:typeof x.onClick=="function"&&(l.onclick=Aa)}switch(h){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Bt(a),null;case 6:if(l&&a.stateNode!=null)tx(l,a,l.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(h=jr(ul.current),jr(nn.current),Oa(a)){if(f=a.stateNode,h=a.memoizedProps,f[sn]=a,(b=f.nodeValue!==h)&&(l=ps,l!==null))switch(l.tag){case 3:Ma(f.nodeValue,h,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ma(f.nodeValue,h,(l.mode&1)!==0)}b&&(a.flags|=4)}else f=(h.nodeType===9?h:h.ownerDocument).createTextNode(f),f[sn]=a,a.stateNode=f}return Bt(a),null;case 13:if(tt(rt),f=a.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(st&&xs!==null&&(a.mode&1)!==0&&(a.flags&128)===0)rp(),si(),a.flags|=98560,b=!1;else if(b=Oa(a),f!==null&&f.dehydrated!==null){if(l===null){if(!b)throw Error(t(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[sn]=a}else si(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),b=!1}else zs!==null&&(vh(zs),zs=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=h,a):(f=f!==null,f!==(l!==null&&l.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(l===null||(rt.current&1)!==0?vt===0&&(vt=3):kh())),a.updateQueue!==null&&(a.flags|=4),Bt(a),null);case 4:return li(),dh(l,a),l===null&&il(a.stateNode.containerInfo),Bt(a),null;case 10:return Id(a.type._context),Bt(a),null;case 17:return es(a.type)&&La(),Bt(a),null;case 19:if(tt(rt),b=a.memoizedState,b===null)return Bt(a),null;if(f=(a.flags&128)!==0,N=b.rendering,N===null)if(f)gl(b,!1);else{if(vt!==0||l!==null&&(l.flags&128)!==0)for(l=a.child;l!==null;){if(N=_a(l),N!==null){for(a.flags|=128,gl(b,!1),f=N.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=h,h=a.child;h!==null;)b=h,l=f,b.flags&=14680066,N=b.alternate,N===null?(b.childLanes=0,b.lanes=l,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=N.childLanes,b.lanes=N.lanes,b.child=N.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=N.memoizedProps,b.memoizedState=N.memoizedState,b.updateQueue=N.updateQueue,b.type=N.type,l=N.dependencies,b.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),h=h.sibling;return Xe(rt,rt.current&1|2),a.child}l=l.sibling}b.tail!==null&&dt()>di&&(a.flags|=128,f=!0,gl(b,!1),a.lanes=4194304)}else{if(!f)if(l=_a(N),l!==null){if(a.flags|=128,f=!0,h=l.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),gl(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!st)return Bt(a),null}else 2*dt()-b.renderingStartTime>di&&h!==1073741824&&(a.flags|=128,f=!0,gl(b,!1),a.lanes=4194304);b.isBackwards?(N.sibling=a.child,a.child=N):(h=b.last,h!==null?h.sibling=N:a.child=N,b.last=N)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=dt(),a.sibling=null,h=rt.current,Xe(rt,f?h&1|2:h&1),a):(Bt(a),null);case 22:case 23:return Nh(),f=a.memoizedState!==null,l!==null&&l.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(gs&1073741824)!==0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function iv(l,a){switch(Td(a),a.tag){case 1:return es(a.type)&&La(),l=a.flags,l&65536?(a.flags=l&-65537|128,a):null;case 3:return li(),tt(Zt),tt(Ot),Ud(),l=a.flags,(l&65536)!==0&&(l&128)===0?(a.flags=l&-65537|128,a):null;case 5:return Hd(a),null;case 13:if(tt(rt),l=a.memoizedState,l!==null&&l.dehydrated!==null){if(a.alternate===null)throw Error(t(340));si()}return l=a.flags,l&65536?(a.flags=l&-65537|128,a):null;case 19:return tt(rt),null;case 4:return li(),null;case 10:return Id(a.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var Ya=!1,It=!1,lv=typeof WeakSet=="function"?WeakSet:Set,fe=null;function oi(l,a){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(f){ot(l,a,f)}else h.current=null}function hh(l,a,h){try{h()}catch(f){ot(l,a,f)}}var sx=!1;function av(l,a){if(Nd=xa,l=Rm(),pd(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var f=h.getSelection&&h.getSelection();if(f&&f.rangeCount!==0){h=f.anchorNode;var x=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{h.nodeType,b.nodeType}catch{h=null;break e}var N=0,A=-1,L=-1,$=0,Z=0,se=l,J=null;t:for(;;){for(var he;se!==h||x!==0&&se.nodeType!==3||(A=N+x),se!==b||f!==0&&se.nodeType!==3||(L=N+f),se.nodeType===3&&(N+=se.nodeValue.length),(he=se.firstChild)!==null;)J=se,se=he;for(;;){if(se===l)break t;if(J===h&&++$===x&&(A=N),J===b&&++Z===f&&(L=N),(he=se.nextSibling)!==null)break;se=J,J=se.parentNode}se=he}h=A===-1||L===-1?null:{start:A,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(kd={focusedElem:l,selectionRange:h},xa=!1,fe=a;fe!==null;)if(a=fe,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,fe=l;else for(;fe!==null;){a=fe;try{var xe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var ge=xe.memoizedProps,ht=xe.memoizedState,B=a.stateNode,O=B.getSnapshotBeforeUpdate(a.elementType===a.type?ge:$s(a.type,ge),ht);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){ot(a,a.return,le)}if(l=a.sibling,l!==null){l.return=a.return,fe=l;break}fe=a.return}return xe=sx,sx=!1,xe}function yl(l,a,h){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&l)===l){var b=x.destroy;x.destroy=void 0,b!==void 0&&hh(a,h,b)}x=x.next}while(x!==f)}}function Xa(l,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&l)===l){var f=h.create;h.destroy=f()}h=h.next}while(h!==a)}}function uh(l){var a=l.ref;if(a!==null){var h=l.stateNode;switch(l.tag){case 5:l=h;break;default:l=h}typeof a=="function"?a(l):a.current=l}}function nx(l){var a=l.alternate;a!==null&&(l.alternate=null,nx(a)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(a=l.stateNode,a!==null&&(delete a[sn],delete a[al],delete a[Ad],delete a[Hw],delete a[Vw])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function rx(l){return l.tag===5||l.tag===3||l.tag===4}function ix(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||rx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function fh(l,a,h){var f=l.tag;if(f===5||f===6)l=l.stateNode,a?h.nodeType===8?h.parentNode.insertBefore(l,a):h.insertBefore(l,a):(h.nodeType===8?(a=h.parentNode,a.insertBefore(l,h)):(a=h,a.appendChild(l)),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=Aa));else if(f!==4&&(l=l.child,l!==null))for(fh(l,a,h),l=l.sibling;l!==null;)fh(l,a,h),l=l.sibling}function mh(l,a,h){var f=l.tag;if(f===5||f===6)l=l.stateNode,a?h.insertBefore(l,a):h.appendChild(l);else if(f!==4&&(l=l.child,l!==null))for(mh(l,a,h),l=l.sibling;l!==null;)mh(l,a,h),l=l.sibling}var Pt=null,_s=!1;function Gn(l,a,h){for(h=h.child;h!==null;)lx(l,a,h),h=h.sibling}function lx(l,a,h){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(da,h)}catch{}switch(h.tag){case 5:It||oi(h,a);case 6:var f=Pt,x=_s;Pt=null,Gn(l,a,h),Pt=f,_s=x,Pt!==null&&(_s?(l=Pt,h=h.stateNode,l.nodeType===8?l.parentNode.removeChild(h):l.removeChild(h)):Pt.removeChild(h.stateNode));break;case 18:Pt!==null&&(_s?(l=Pt,h=h.stateNode,l.nodeType===8?Md(l.parentNode,h):l.nodeType===1&&Md(l,h),Yi(l)):Md(Pt,h.stateNode));break;case 4:f=Pt,x=_s,Pt=h.stateNode.containerInfo,_s=!0,Gn(l,a,h),Pt=f,_s=x;break;case 0:case 11:case 14:case 15:if(!It&&(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){x=f=f.next;do{var b=x,N=b.destroy;b=b.tag,N!==void 0&&((b&2)!==0||(b&4)!==0)&&hh(h,a,N),x=x.next}while(x!==f)}Gn(l,a,h);break;case 1:if(!It&&(oi(h,a),f=h.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(A){ot(h,a,A)}Gn(l,a,h);break;case 21:Gn(l,a,h);break;case 22:h.mode&1?(It=(f=It)||h.memoizedState!==null,Gn(l,a,h),It=f):Gn(l,a,h);break;default:Gn(l,a,h)}}function ax(l){var a=l.updateQueue;if(a!==null){l.updateQueue=null;var h=l.stateNode;h===null&&(h=l.stateNode=new lv),a.forEach(function(f){var x=xv.bind(null,l,f);h.has(f)||(h.add(f),f.then(x,x))})}}function Ws(l,a){var h=a.deletions;if(h!==null)for(var f=0;f<h.length;f++){var x=h[f];try{var b=l,N=a,A=N;e:for(;A!==null;){switch(A.tag){case 5:Pt=A.stateNode,_s=!1;break e;case 3:Pt=A.stateNode.containerInfo,_s=!0;break e;case 4:Pt=A.stateNode.containerInfo,_s=!0;break e}A=A.return}if(Pt===null)throw Error(t(160));lx(b,N,x),Pt=null,_s=!1;var L=x.alternate;L!==null&&(L.return=null),x.return=null}catch($){ot(x,a,$)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ox(a,l),a=a.sibling}function ox(l,a){var h=l.alternate,f=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ws(a,l),ln(l),f&4){try{yl(3,l,l.return),Xa(3,l)}catch(ge){ot(l,l.return,ge)}try{yl(5,l,l.return)}catch(ge){ot(l,l.return,ge)}}break;case 1:Ws(a,l),ln(l),f&512&&h!==null&&oi(h,h.return);break;case 5:if(Ws(a,l),ln(l),f&512&&h!==null&&oi(h,h.return),l.flags&32){var x=l.stateNode;try{fs(x,"")}catch(ge){ot(l,l.return,ge)}}if(f&4&&(x=l.stateNode,x!=null)){var b=l.memoizedProps,N=h!==null?h.memoizedProps:b,A=l.type,L=l.updateQueue;if(l.updateQueue=null,L!==null)try{A==="input"&&b.type==="radio"&&b.name!=null&&us(x,b),Uc(A,N);var $=Uc(A,b);for(N=0;N<L.length;N+=2){var Z=L[N],se=L[N+1];Z==="style"?pr(x,se):Z==="dangerouslySetInnerHTML"?en(x,se):Z==="children"?fs(x,se):D(x,Z,se,$)}switch(A){case"input":Le(x,b);break;case"textarea":Te(x,b);break;case"select":var J=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var he=b.value;he!=null?ae(x,!!b.multiple,he,!1):J!==!!b.multiple&&(b.defaultValue!=null?ae(x,!!b.multiple,b.defaultValue,!0):ae(x,!!b.multiple,b.multiple?[]:"",!1))}x[al]=b}catch(ge){ot(l,l.return,ge)}}break;case 6:if(Ws(a,l),ln(l),f&4){if(l.stateNode===null)throw Error(t(162));x=l.stateNode,b=l.memoizedProps;try{x.nodeValue=b}catch(ge){ot(l,l.return,ge)}}break;case 3:if(Ws(a,l),ln(l),f&4&&h!==null&&h.memoizedState.isDehydrated)try{Yi(a.containerInfo)}catch(ge){ot(l,l.return,ge)}break;case 4:Ws(a,l),ln(l);break;case 13:Ws(a,l),ln(l),x=l.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(gh=dt())),f&4&&ax(l);break;case 22:if(Z=h!==null&&h.memoizedState!==null,l.mode&1?(It=($=It)||Z,Ws(a,l),It=$):Ws(a,l),ln(l),f&8192){if($=l.memoizedState!==null,(l.stateNode.isHidden=$)&&!Z&&(l.mode&1)!==0)for(fe=l,Z=l.child;Z!==null;){for(se=fe=Z;fe!==null;){switch(J=fe,he=J.child,J.tag){case 0:case 11:case 14:case 15:yl(4,J,J.return);break;case 1:oi(J,J.return);var xe=J.stateNode;if(typeof xe.componentWillUnmount=="function"){f=J,h=J.return;try{a=f,xe.props=a.memoizedProps,xe.state=a.memoizedState,xe.componentWillUnmount()}catch(ge){ot(f,h,ge)}}break;case 5:oi(J,J.return);break;case 22:if(J.memoizedState!==null){hx(se);continue}}he!==null?(he.return=J,fe=he):hx(se)}Z=Z.sibling}e:for(Z=null,se=l;;){if(se.tag===5){if(Z===null){Z=se;try{x=se.stateNode,$?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(A=se.stateNode,L=se.memoizedProps.style,N=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=zi("display",N))}catch(ge){ot(l,l.return,ge)}}}else if(se.tag===6){if(Z===null)try{se.stateNode.nodeValue=$?"":se.memoizedProps}catch(ge){ot(l,l.return,ge)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===l)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===l)break e;for(;se.sibling===null;){if(se.return===null||se.return===l)break e;Z===se&&(Z=null),se=se.return}Z===se&&(Z=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Ws(a,l),ln(l),f&4&&ax(l);break;case 21:break;default:Ws(a,l),ln(l)}}function ln(l){var a=l.flags;if(a&2){try{e:{for(var h=l.return;h!==null;){if(rx(h)){var f=h;break e}h=h.return}throw Error(t(160))}switch(f.tag){case 5:var x=f.stateNode;f.flags&32&&(fs(x,""),f.flags&=-33);var b=ix(l);mh(l,b,x);break;case 3:case 4:var N=f.stateNode.containerInfo,A=ix(l);fh(l,A,N);break;default:throw Error(t(161))}}catch(L){ot(l,l.return,L)}l.flags&=-3}a&4096&&(l.flags&=-4097)}function ov(l,a,h){fe=l,cx(l)}function cx(l,a,h){for(var f=(l.mode&1)!==0;fe!==null;){var x=fe,b=x.child;if(x.tag===22&&f){var N=x.memoizedState!==null||Ya;if(!N){var A=x.alternate,L=A!==null&&A.memoizedState!==null||It;A=Ya;var $=It;if(Ya=N,(It=L)&&!$)for(fe=x;fe!==null;)N=fe,L=N.child,N.tag===22&&N.memoizedState!==null?ux(x):L!==null?(L.return=N,fe=L):ux(x);for(;b!==null;)fe=b,cx(b),b=b.sibling;fe=x,Ya=A,It=$}dx(l)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,fe=b):dx(l)}}function dx(l){for(;fe!==null;){var a=fe;if((a.flags&8772)!==0){var h=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:It||Xa(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!It)if(h===null)f.componentDidMount();else{var x=a.elementType===a.type?h.memoizedProps:$s(a.type,h.memoizedProps);f.componentDidUpdate(x,h.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&hp(a,b,f);break;case 3:var N=a.updateQueue;if(N!==null){if(h=null,a.child!==null)switch(a.child.tag){case 5:h=a.child.stateNode;break;case 1:h=a.child.stateNode}hp(a,N,h)}break;case 5:var A=a.stateNode;if(h===null&&a.flags&4){h=A;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&h.focus();break;case"img":L.src&&(h.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var $=a.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var se=Z.dehydrated;se!==null&&Yi(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}It||a.flags&512&&uh(a)}catch(J){ot(a,a.return,J)}}if(a===l){fe=null;break}if(h=a.sibling,h!==null){h.return=a.return,fe=h;break}fe=a.return}}function hx(l){for(;fe!==null;){var a=fe;if(a===l){fe=null;break}var h=a.sibling;if(h!==null){h.return=a.return,fe=h;break}fe=a.return}}function ux(l){for(;fe!==null;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var h=a.return;try{Xa(4,a)}catch(L){ot(a,h,L)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var x=a.return;try{f.componentDidMount()}catch(L){ot(a,x,L)}}var b=a.return;try{uh(a)}catch(L){ot(a,b,L)}break;case 5:var N=a.return;try{uh(a)}catch(L){ot(a,N,L)}}}catch(L){ot(a,a.return,L)}if(a===l){fe=null;break}var A=a.sibling;if(A!==null){A.return=a.return,fe=A;break}fe=a.return}}var cv=Math.ceil,Ja=E.ReactCurrentDispatcher,ph=E.ReactCurrentOwner,Cs=E.ReactCurrentBatchConfig,We=0,Mt=null,xt=null,Tt=0,gs=0,ci=Hn(0),vt=0,bl=null,kr=0,Za=0,xh=0,wl=null,ss=null,gh=0,di=1/0,En=null,eo=!1,yh=null,Qn=null,to=!1,Yn=null,so=0,vl=0,bh=null,no=-1,ro=0;function Gt(){return(We&6)!==0?dt():no!==-1?no:no=dt()}function Xn(l){return(l.mode&1)===0?1:(We&2)!==0&&Tt!==0?Tt&-Tt:qw.transition!==null?(ro===0&&(ro=im()),ro):(l=qe,l!==0||(l=window.event,l=l===void 0?16:mm(l.type)),l)}function Hs(l,a,h,f){if(50<vl)throw vl=0,bh=null,Error(t(185));Ui(l,h,f),((We&2)===0||l!==Mt)&&(l===Mt&&((We&2)===0&&(Za|=h),vt===4&&Jn(l,Tt)),ns(l,f),h===1&&We===0&&(a.mode&1)===0&&(di=dt()+500,Ta&&Un()))}function ns(l,a){var h=l.callbackNode;qb(l,a);var f=fa(l,l===Mt?Tt:0);if(f===0)h!==null&&sm(h),l.callbackNode=null,l.callbackPriority=0;else if(a=f&-f,l.callbackPriority!==a){if(h!=null&&sm(h),a===1)l.tag===0?Uw(mx.bind(null,l)):Zm(mx.bind(null,l)),_w(function(){(We&6)===0&&Un()}),h=null;else{switch(lm(f)){case 1:h=Jc;break;case 4:h=nm;break;case 16:h=ca;break;case 536870912:h=rm;break;default:h=ca}h=jx(h,fx.bind(null,l))}l.callbackPriority=a,l.callbackNode=h}}function fx(l,a){if(no=-1,ro=0,(We&6)!==0)throw Error(t(327));var h=l.callbackNode;if(hi()&&l.callbackNode!==h)return null;var f=fa(l,l===Mt?Tt:0);if(f===0)return null;if((f&30)!==0||(f&l.expiredLanes)!==0||a)a=io(l,f);else{a=f;var x=We;We|=2;var b=xx();(Mt!==l||Tt!==a)&&(En=null,di=dt()+500,Cr(l,a));do try{uv();break}catch(A){px(l,A)}while(!0);Bd(),Ja.current=b,We=x,xt!==null?a=0:(Mt=null,Tt=0,a=vt)}if(a!==0){if(a===2&&(x=Zc(l),x!==0&&(f=x,a=wh(l,x))),a===1)throw h=bl,Cr(l,0),Jn(l,f),ns(l,dt()),h;if(a===6)Jn(l,f);else{if(x=l.current.alternate,(f&30)===0&&!dv(x)&&(a=io(l,f),a===2&&(b=Zc(l),b!==0&&(f=b,a=wh(l,b))),a===1))throw h=bl,Cr(l,0),Jn(l,f),ns(l,dt()),h;switch(l.finishedWork=x,l.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Mr(l,ss,En);break;case 3:if(Jn(l,f),(f&130023424)===f&&(a=gh+500-dt(),10<a)){if(fa(l,0)!==0)break;if(x=l.suspendedLanes,(x&f)!==f){Gt(),l.pingedLanes|=l.suspendedLanes&x;break}l.timeoutHandle=Cd(Mr.bind(null,l,ss,En),a);break}Mr(l,ss,En);break;case 4:if(Jn(l,f),(f&4194240)===f)break;for(a=l.eventTimes,x=-1;0<f;){var N=31-Bs(f);b=1<<N,N=a[N],N>x&&(x=N),f&=~b}if(f=x,f=dt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*cv(f/1960))-f,10<f){l.timeoutHandle=Cd(Mr.bind(null,l,ss,En),f);break}Mr(l,ss,En);break;case 5:Mr(l,ss,En);break;default:throw Error(t(329))}}}return ns(l,dt()),l.callbackNode===h?fx.bind(null,l):null}function wh(l,a){var h=wl;return l.current.memoizedState.isDehydrated&&(Cr(l,a).flags|=256),l=io(l,a),l!==2&&(a=ss,ss=h,a!==null&&vh(a)),l}function vh(l){ss===null?ss=l:ss.push.apply(ss,l)}function dv(l){for(var a=l;;){if(a.flags&16384){var h=a.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var f=0;f<h.length;f++){var x=h[f],b=x.getSnapshot;x=x.value;try{if(!Is(b(),x))return!1}catch{return!1}}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===l)break;for(;a.sibling===null;){if(a.return===null||a.return===l)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Jn(l,a){for(a&=~xh,a&=~Za,l.suspendedLanes|=a,l.pingedLanes&=~a,l=l.expirationTimes;0<a;){var h=31-Bs(a),f=1<<h;l[h]=-1,a&=~f}}function mx(l){if((We&6)!==0)throw Error(t(327));hi();var a=fa(l,0);if((a&1)===0)return ns(l,dt()),null;var h=io(l,a);if(l.tag!==0&&h===2){var f=Zc(l);f!==0&&(a=f,h=wh(l,f))}if(h===1)throw h=bl,Cr(l,0),Jn(l,a),ns(l,dt()),h;if(h===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=a,Mr(l,ss,En),ns(l,dt()),null}function jh(l,a){var h=We;We|=1;try{return l(a)}finally{We=h,We===0&&(di=dt()+500,Ta&&Un())}}function Sr(l){Yn!==null&&Yn.tag===0&&(We&6)===0&&hi();var a=We;We|=1;var h=Cs.transition,f=qe;try{if(Cs.transition=null,qe=1,l)return l()}finally{qe=f,Cs.transition=h,We=a,(We&6)===0&&Un()}}function Nh(){gs=ci.current,tt(ci)}function Cr(l,a){l.finishedWork=null,l.finishedLanes=0;var h=l.timeoutHandle;if(h!==-1&&(l.timeoutHandle=-1,$w(h)),xt!==null)for(h=xt.return;h!==null;){var f=h;switch(Td(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&La();break;case 3:li(),tt(Zt),tt(Ot),Ud();break;case 5:Hd(f);break;case 4:li();break;case 13:tt(rt);break;case 19:tt(rt);break;case 10:Id(f.type._context);break;case 22:case 23:Nh()}h=h.return}if(Mt=l,xt=l=Zn(l.current,null),Tt=gs=a,vt=0,bl=null,xh=Za=kr=0,ss=wl=null,vr!==null){for(a=0;a<vr.length;a++)if(h=vr[a],f=h.interleaved,f!==null){h.interleaved=null;var x=f.next,b=h.pending;if(b!==null){var N=b.next;b.next=x,f.next=N}h.pending=f}vr=null}return l}function px(l,a){do{var h=xt;try{if(Bd(),Wa.current=qa,Ha){for(var f=it.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Ha=!1}if(Nr=0,Ct=wt=it=null,fl=!1,ml=0,ph.current=null,h===null||h.return===null){vt=1,bl=a,xt=null;break}e:{var b=l,N=h.return,A=h,L=a;if(a=Tt,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var $=L,Z=A,se=Z.tag;if((Z.mode&1)===0&&(se===0||se===11||se===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var he=$p(N);if(he!==null){he.flags&=-257,_p(he,N,A,b,a),he.mode&1&&zp(b,$,a),a=he,L=$;var xe=a.updateQueue;if(xe===null){var ge=new Set;ge.add(L),a.updateQueue=ge}else xe.add(L);break e}else{if((a&1)===0){zp(b,$,a),kh();break e}L=Error(t(426))}}else if(st&&A.mode&1){var ht=$p(N);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),_p(ht,N,A,b,a),Od(ai(L,A));break e}}b=L=ai(L,A),vt!==4&&(vt=2),wl===null?wl=[b]:wl.push(b),b=N;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var B=Bp(b,L,a);dp(b,B);break e;case 1:A=L;var O=b.type,z=b.stateNode;if((b.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Qn===null||!Qn.has(z)))){b.flags|=65536,a&=-a,b.lanes|=a;var le=Ip(b,A,a);dp(b,le);break e}}b=b.return}while(b!==null)}yx(h)}catch(be){a=be,xt===h&&h!==null&&(xt=h=h.return);continue}break}while(!0)}function xx(){var l=Ja.current;return Ja.current=qa,l===null?qa:l}function kh(){(vt===0||vt===3||vt===2)&&(vt=4),Mt===null||(kr&268435455)===0&&(Za&268435455)===0||Jn(Mt,Tt)}function io(l,a){var h=We;We|=2;var f=xx();(Mt!==l||Tt!==a)&&(En=null,Cr(l,a));do try{hv();break}catch(x){px(l,x)}while(!0);if(Bd(),We=h,Ja.current=f,xt!==null)throw Error(t(261));return Mt=null,Tt=0,vt}function hv(){for(;xt!==null;)gx(xt)}function uv(){for(;xt!==null&&!Bb();)gx(xt)}function gx(l){var a=vx(l.alternate,l,gs);l.memoizedProps=l.pendingProps,a===null?yx(l):xt=a,ph.current=null}function yx(l){var a=l;do{var h=a.alternate;if(l=a.return,(a.flags&32768)===0){if(h=rv(h,a,gs),h!==null){xt=h;return}}else{if(h=iv(h,a),h!==null){h.flags&=32767,xt=h;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{vt=6,xt=null;return}}if(a=a.sibling,a!==null){xt=a;return}xt=a=l}while(a!==null);vt===0&&(vt=5)}function Mr(l,a,h){var f=qe,x=Cs.transition;try{Cs.transition=null,qe=1,fv(l,a,h,f)}finally{Cs.transition=x,qe=f}return null}function fv(l,a,h,f){do hi();while(Yn!==null);if((We&6)!==0)throw Error(t(327));h=l.finishedWork;var x=l.finishedLanes;if(h===null)return null;if(l.finishedWork=null,l.finishedLanes=0,h===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var b=h.lanes|h.childLanes;if(Kb(l,b),l===Mt&&(xt=Mt=null,Tt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||to||(to=!0,jx(ca,function(){return hi(),null})),b=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||b){b=Cs.transition,Cs.transition=null;var N=qe;qe=1;var A=We;We|=4,ph.current=null,av(l,h),ox(h,l),Dw(kd),xa=!!Nd,kd=Nd=null,l.current=h,ov(h),Ib(),We=A,qe=N,Cs.transition=b}else l.current=h;if(to&&(to=!1,Yn=l,so=x),b=l.pendingLanes,b===0&&(Qn=null),_b(h.stateNode),ns(l,dt()),a!==null)for(f=l.onRecoverableError,h=0;h<a.length;h++)x=a[h],f(x.value,{componentStack:x.stack,digest:x.digest});if(eo)throw eo=!1,l=yh,yh=null,l;return(so&1)!==0&&l.tag!==0&&hi(),b=l.pendingLanes,(b&1)!==0?l===bh?vl++:(vl=0,bh=l):vl=0,Un(),null}function hi(){if(Yn!==null){var l=lm(so),a=Cs.transition,h=qe;try{if(Cs.transition=null,qe=16>l?16:l,Yn===null)var f=!1;else{if(l=Yn,Yn=null,so=0,(We&6)!==0)throw Error(t(331));var x=We;for(We|=4,fe=l.current;fe!==null;){var b=fe,N=b.child;if((fe.flags&16)!==0){var A=b.deletions;if(A!==null){for(var L=0;L<A.length;L++){var $=A[L];for(fe=$;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:yl(8,Z,b)}var se=Z.child;if(se!==null)se.return=Z,fe=se;else for(;fe!==null;){Z=fe;var J=Z.sibling,he=Z.return;if(nx(Z),Z===$){fe=null;break}if(J!==null){J.return=he,fe=J;break}fe=he}}}var xe=b.alternate;if(xe!==null){var ge=xe.child;if(ge!==null){xe.child=null;do{var ht=ge.sibling;ge.sibling=null,ge=ht}while(ge!==null)}}fe=b}}if((b.subtreeFlags&2064)!==0&&N!==null)N.return=b,fe=N;else e:for(;fe!==null;){if(b=fe,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:yl(9,b,b.return)}var B=b.sibling;if(B!==null){B.return=b.return,fe=B;break e}fe=b.return}}var O=l.current;for(fe=O;fe!==null;){N=fe;var z=N.child;if((N.subtreeFlags&2064)!==0&&z!==null)z.return=N,fe=z;else e:for(N=O;fe!==null;){if(A=fe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Xa(9,A)}}catch(be){ot(A,A.return,be)}if(A===N){fe=null;break e}var le=A.sibling;if(le!==null){le.return=A.return,fe=le;break e}fe=A.return}}if(We=x,Un(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(da,l)}catch{}f=!0}return f}finally{qe=h,Cs.transition=a}}return!1}function bx(l,a,h){a=ai(h,a),a=Bp(l,a,1),l=Kn(l,a,1),a=Gt(),l!==null&&(Ui(l,1,a),ns(l,a))}function ot(l,a,h){if(l.tag===3)bx(l,l,h);else for(;a!==null;){if(a.tag===3){bx(a,l,h);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Qn===null||!Qn.has(f))){l=ai(h,l),l=Ip(a,l,1),a=Kn(a,l,1),l=Gt(),a!==null&&(Ui(a,1,l),ns(a,l));break}}a=a.return}}function mv(l,a,h){var f=l.pingCache;f!==null&&f.delete(a),a=Gt(),l.pingedLanes|=l.suspendedLanes&h,Mt===l&&(Tt&h)===h&&(vt===4||vt===3&&(Tt&130023424)===Tt&&500>dt()-gh?Cr(l,0):xh|=h),ns(l,a)}function wx(l,a){a===0&&((l.mode&1)===0?a=1:(a=ua,ua<<=1,(ua&130023424)===0&&(ua=4194304)));var h=Gt();l=Cn(l,a),l!==null&&(Ui(l,a,h),ns(l,h))}function pv(l){var a=l.memoizedState,h=0;a!==null&&(h=a.retryLane),wx(l,h)}function xv(l,a){var h=0;switch(l.tag){case 13:var f=l.stateNode,x=l.memoizedState;x!==null&&(h=x.retryLane);break;case 19:f=l.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),wx(l,h)}var vx;vx=function(l,a,h){if(l!==null)if(l.memoizedProps!==a.pendingProps||Zt.current)ts=!0;else{if((l.lanes&h)===0&&(a.flags&128)===0)return ts=!1,nv(l,a,h);ts=(l.flags&131072)!==0}else ts=!1,st&&(a.flags&1048576)!==0&&ep(a,Ra,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Qa(l,a),l=a.pendingProps;var x=Zr(a,Ot.current);ii(a,h),x=Gd(null,a,f,l,x,h);var b=Qd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,es(f)?(b=!0,Pa(a)):b=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,_d(a),x.updater=Ka,a.stateNode=x,x._reactInternals=a,th(a,f,l,h),a=ih(null,a,f,!0,b,h)):(a.tag=0,st&&b&&Pd(a),Kt(null,a,x,h),a=a.child),a;case 16:f=a.elementType;e:{switch(Qa(l,a),l=a.pendingProps,x=f._init,f=x(f._payload),a.type=f,x=a.tag=yv(f),l=$s(f,l),x){case 0:a=rh(null,a,f,l,h);break e;case 1:a=Kp(null,a,f,l,h);break e;case 11:a=Wp(null,a,f,l,h);break e;case 14:a=Hp(null,a,f,$s(f.type,l),h);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:$s(f,x),rh(l,a,f,x,h);case 1:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:$s(f,x),Kp(l,a,f,x,h);case 3:e:{if(Gp(a),l===null)throw Error(t(387));f=a.pendingProps,b=a.memoizedState,x=b.element,cp(l,a),$a(a,f,null,h);var N=a.memoizedState;if(f=N.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){x=ai(Error(t(423)),a),a=Qp(l,a,f,h,x);break e}else if(f!==x){x=ai(Error(t(424)),a),a=Qp(l,a,f,h,x);break e}else for(xs=Wn(a.stateNode.containerInfo.firstChild),ps=a,st=!0,zs=null,h=ap(a,null,f,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(si(),f===x){a=An(l,a,h);break e}Kt(l,a,f,h)}a=a.child}return a;case 5:return up(a),l===null&&Rd(a),f=a.type,x=a.pendingProps,b=l!==null?l.memoizedProps:null,N=x.children,Sd(f,x)?N=null:b!==null&&Sd(f,b)&&(a.flags|=32),qp(l,a),Kt(l,a,N,h),a.child;case 6:return l===null&&Rd(a),null;case 13:return Yp(l,a,h);case 4:return Wd(a,a.stateNode.containerInfo),f=a.pendingProps,l===null?a.child=ni(a,null,f,h):Kt(l,a,f,h),a.child;case 11:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:$s(f,x),Wp(l,a,f,x,h);case 7:return Kt(l,a,a.pendingProps,h),a.child;case 8:return Kt(l,a,a.pendingProps.children,h),a.child;case 12:return Kt(l,a,a.pendingProps.children,h),a.child;case 10:e:{if(f=a.type._context,x=a.pendingProps,b=a.memoizedProps,N=x.value,Xe(Ba,f._currentValue),f._currentValue=N,b!==null)if(Is(b.value,N)){if(b.children===x.children&&!Zt.current){a=An(l,a,h);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var A=b.dependencies;if(A!==null){N=b.child;for(var L=A.firstContext;L!==null;){if(L.context===f){if(b.tag===1){L=Mn(-1,h&-h),L.tag=2;var $=b.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?L.next=L:(L.next=Z.next,Z.next=L),$.pending=L}}b.lanes|=h,L=b.alternate,L!==null&&(L.lanes|=h),zd(b.return,h,a),A.lanes|=h;break}L=L.next}}else if(b.tag===10)N=b.type===a.type?null:b.child;else if(b.tag===18){if(N=b.return,N===null)throw Error(t(341));N.lanes|=h,A=N.alternate,A!==null&&(A.lanes|=h),zd(N,h,a),N=b.sibling}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===a){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}Kt(l,a,x.children,h),a=a.child}return a;case 9:return x=a.type,f=a.pendingProps.children,ii(a,h),x=ks(x),f=f(x),a.flags|=1,Kt(l,a,f,h),a.child;case 14:return f=a.type,x=$s(f,a.pendingProps),x=$s(f.type,x),Hp(l,a,f,x,h);case 15:return Vp(l,a,a.type,a.pendingProps,h);case 17:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:$s(f,x),Qa(l,a),a.tag=1,es(f)?(l=!0,Pa(a)):l=!1,ii(a,h),Op(a,f,x),th(a,f,x,h),ih(null,a,f,!0,l,h);case 19:return Jp(l,a,h);case 22:return Up(l,a,h)}throw Error(t(156,a.tag))};function jx(l,a){return tm(l,a)}function gv(l,a,h,f){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(l,a,h,f){return new gv(l,a,h,f)}function Sh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function yv(l){if(typeof l=="function")return Sh(l)?1:0;if(l!=null){if(l=l.$$typeof,l===ne)return 11;if(l===V)return 14}return 2}function Zn(l,a){var h=l.alternate;return h===null?(h=Ms(l.tag,a,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=a,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&14680064,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,a=l.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h}function lo(l,a,h,f,x,b){var N=2;if(f=l,typeof l=="function")Sh(l)&&(N=1);else if(typeof l=="string")N=5;else e:switch(l){case F:return Ar(h.children,x,b,a);case _:N=8,x|=8;break;case R:return l=Ms(12,h,a,x|2),l.elementType=R,l.lanes=b,l;case ee:return l=Ms(13,h,a,x),l.elementType=ee,l.lanes=b,l;case H:return l=Ms(19,h,a,x),l.elementType=H,l.lanes=b,l;case de:return ao(h,x,b,a);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case G:N=10;break e;case Q:N=9;break e;case ne:N=11;break e;case V:N=14;break e;case q:N=16,f=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return a=Ms(N,h,a,x),a.elementType=l,a.type=f,a.lanes=b,a}function Ar(l,a,h,f){return l=Ms(7,l,f,a),l.lanes=h,l}function ao(l,a,h,f){return l=Ms(22,l,f,a),l.elementType=de,l.lanes=h,l.stateNode={isHidden:!1},l}function Ch(l,a,h){return l=Ms(6,l,null,a),l.lanes=h,l}function Mh(l,a,h){return a=Ms(4,l.children!==null?l.children:[],l.key,a),a.lanes=h,a.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},a}function bv(l,a,h,f,x){this.tag=a,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=f,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ah(l,a,h,f,x,b,N,A,L){return l=new bv(l,a,h,A,L),a===1?(a=1,b===!0&&(a|=8)):a=0,b=Ms(3,null,null,a),l.current=b,b.stateNode=l,b.memoizedState={element:f,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},_d(b),l}function wv(l,a,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:f==null?null:""+f,children:l,containerInfo:a,implementation:h}}function Nx(l){if(!l)return Vn;l=l._reactInternals;e:{if(xr(l)!==l||l.tag!==1)throw Error(t(170));var a=l;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(es(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(l.tag===1){var h=l.type;if(es(h))return Xm(l,h,a)}return a}function kx(l,a,h,f,x,b,N,A,L){return l=Ah(h,f,!0,l,x,b,N,A,L),l.context=Nx(null),h=l.current,f=Gt(),x=Xn(h),b=Mn(f,x),b.callback=a??null,Kn(h,b,x),l.current.lanes=x,Ui(l,x,f),ns(l,f),l}function oo(l,a,h,f){var x=a.current,b=Gt(),N=Xn(x);return h=Nx(h),a.context===null?a.context=h:a.pendingContext=h,a=Mn(b,N),a.payload={element:l},f=f===void 0?null:f,f!==null&&(a.callback=f),l=Kn(x,a,N),l!==null&&(Hs(l,x,N,b),za(l,x,N)),N}function co(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Sx(l,a){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<a?h:a}}function Eh(l,a){Sx(l,a),(l=l.alternate)&&Sx(l,a)}function vv(){return null}var Cx=typeof reportError=="function"?reportError:function(l){console.error(l)};function Lh(l){this._internalRoot=l}ho.prototype.render=Lh.prototype.render=function(l){var a=this._internalRoot;if(a===null)throw Error(t(409));oo(l,a,null,null)},ho.prototype.unmount=Lh.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var a=l.containerInfo;Sr(function(){oo(null,l,null,null)}),a[jn]=null}};function ho(l){this._internalRoot=l}ho.prototype.unstable_scheduleHydration=function(l){if(l){var a=cm();l={blockedOn:null,target:l,priority:a};for(var h=0;h<zn.length&&a!==0&&a<zn[h].priority;h++);zn.splice(h,0,l),h===0&&um(l)}};function Ph(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function uo(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Mx(){}function jv(l,a,h,f,x){if(x){if(typeof f=="function"){var b=f;f=function(){var $=co(N);b.call($)}}var N=kx(a,f,l,0,null,!1,!1,"",Mx);return l._reactRootContainer=N,l[jn]=N.current,il(l.nodeType===8?l.parentNode:l),Sr(),N}for(;x=l.lastChild;)l.removeChild(x);if(typeof f=="function"){var A=f;f=function(){var $=co(L);A.call($)}}var L=Ah(l,0,!1,null,null,!1,!1,"",Mx);return l._reactRootContainer=L,l[jn]=L.current,il(l.nodeType===8?l.parentNode:l),Sr(function(){oo(a,L,h,f)}),L}function fo(l,a,h,f,x){var b=h._reactRootContainer;if(b){var N=b;if(typeof x=="function"){var A=x;x=function(){var L=co(N);A.call(L)}}oo(a,N,l,x)}else N=jv(h,a,l,x,f);return co(N)}am=function(l){switch(l.tag){case 3:var a=l.stateNode;if(a.current.memoizedState.isDehydrated){var h=Vi(a.pendingLanes);h!==0&&(td(a,h|1),ns(a,dt()),(We&6)===0&&(di=dt()+500,Un()))}break;case 13:Sr(function(){var f=Cn(l,1);if(f!==null){var x=Gt();Hs(f,l,1,x)}}),Eh(l,1)}},sd=function(l){if(l.tag===13){var a=Cn(l,134217728);if(a!==null){var h=Gt();Hs(a,l,134217728,h)}Eh(l,134217728)}},om=function(l){if(l.tag===13){var a=Xn(l),h=Cn(l,a);if(h!==null){var f=Gt();Hs(h,l,a,f)}Eh(l,a)}},cm=function(){return qe},dm=function(l,a){var h=qe;try{return qe=l,a()}finally{qe=h}},Gc=function(l,a,h){switch(a){case"input":if(Le(l,h),a=h.name,h.type==="radio"&&a!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<h.length;a++){var f=h[a];if(f!==l&&f.form===l.form){var x=Ea(f);if(!x)throw Error(t(90));Ye(f),Le(f,x)}}}break;case"textarea":Te(l,h);break;case"select":a=h.value,a!=null&&ae(l,!!h.multiple,a,!1)}},Gf=jh,Qf=Sr;var Nv={usingClientEntryPoint:!1,Events:[ol,Xr,Ea,qf,Kf,jh]},jl={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kv={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Zf(l),l===null?null:l.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||vv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{da=mo.inject(kv),tn=mo}catch{}}return rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv,rs.createPortal=function(l,a){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ph(a))throw Error(t(200));return wv(l,a,null,h)},rs.createRoot=function(l,a){if(!Ph(l))throw Error(t(299));var h=!1,f="",x=Cx;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ah(l,1,!1,null,null,h,!1,f,x),l[jn]=a.current,il(l.nodeType===8?l.parentNode:l),new Lh(a)},rs.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var a=l._reactInternals;if(a===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=Zf(a),l=l===null?null:l.stateNode,l},rs.flushSync=function(l){return Sr(l)},rs.hydrate=function(l,a,h){if(!uo(a))throw Error(t(200));return fo(null,l,a,!0,h)},rs.hydrateRoot=function(l,a,h){if(!Ph(l))throw Error(t(405));var f=h!=null&&h.hydratedSources||null,x=!1,b="",N=Cx;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),a=kx(a,null,l,1,h??null,x,!1,b,N),l[jn]=a.current,il(l),f)for(l=0;l<f.length;l++)h=f[l],x=h._getVersion,x=x(h._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[h,x]:a.mutableSourceEagerHydrationData.push(h,x);return new ho(a)},rs.render=function(l,a,h){if(!uo(a))throw Error(t(200));return fo(null,l,a,!1,h)},rs.unmountComponentAtNode=function(l){if(!uo(l))throw Error(t(40));return l._reactRootContainer?(Sr(function(){fo(null,null,l,!1,function(){l._reactRootContainer=null,l[jn]=null})}),!0):!1},rs.unstable_batchedUpdates=jh,rs.unstable_renderSubtreeIntoContainer=function(l,a,h,f){if(!uo(h))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return fo(l,a,h,!1,f)},rs.version="18.3.1-next-f1338f8080-20240426",rs}var Fx;function Fv(){if(Fx)return Rh.exports;Fx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=Ov(),Rh.exports}var Bx;function Bv(){if(Bx)return po;Bx=1;var n=Fv();return po.createRoot=n.createRoot,po.hydrateRoot=n.hydrateRoot,po}var Iv=Bv();const zv=E0(Iv);function $v(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,i,o,c=[],d="",u=n.split("/");for(u[0]||u.shift();i=u.shift();)t=i[0],t==="*"?(c.push(t),d+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=i.indexOf("?",1),o=i.indexOf(".",1),c.push(i.substring(1,~s?s:~o?o:i.length)),d+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(d+=(~s?"?":"")+"\\"+i.substring(o))):d+="/"+i;return{keys:c,pattern:new RegExp("^"+d+(e?"(?=$|/)":"/?$"),"i")}}var Bh={exports:{}},Ih={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function _v(){if(Ix)return Ih;Ix=1;var n=Sc();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function d(g,y){var w=y(),v=s({inst:{value:w,getSnapshot:y}}),j=v[0].inst,S=v[1];return o(function(){j.value=w,j.getSnapshot=y,u(j)&&S({inst:j})},[g,w,y]),i(function(){return u(j)&&S({inst:j}),g(function(){u(j)&&S({inst:j})})},[g]),c(w),w}function u(g){var y=g.getSnapshot;g=g.value;try{var w=y();return!t(g,w)}catch{return!0}}function m(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Ih.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Ih}var zx;function Wv(){return zx||(zx=1,Bh.exports=_v()),Bh.exports}var Hv=Wv();const Vv=Tv.useInsertionEffect,Uv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qv=Uv?M.useLayoutEffect:M.useEffect,Kv=Vv||qv,P0=n=>{const e=M.useRef([n,(...t)=>e[0](...t)]).current;return Kv(()=>{e[0]=n}),e[1]},Gv="popstate",ff="pushState",mf="replaceState",Qv="hashchange",$x=[Gv,ff,mf,Qv],Yv=n=>{for(const e of $x)addEventListener(e,n);return()=>{for(const e of $x)removeEventListener(e,n)}},T0=(n,e)=>Hv.useSyncExternalStore(Yv,n,e),_x=()=>location.search,Xv=({ssrSearch:n}={})=>T0(_x,n!=null?()=>n:_x),Wx=()=>location.pathname,Jv=({ssrPath:n}={})=>T0(Wx,n!=null?()=>n:Wx),Zv=(n,{replace:e=!1,state:t=null}={})=>history[e?mf:ff](t,"",n),ej=(n={})=>[Jv(n),Zv],Hx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Hx]>"u"){for(const n of[ff,mf]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,Hx,{value:!0})}const tj=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",D0=(n="")=>n==="/"?"":n,sj=(n,e)=>n[0]==="~"?n.slice(1):D0(e)+n,nj=(n="",e)=>tj(Vx(D0(n)),Vx(e)),Vx=n=>{try{return decodeURI(n)}catch{return n}},R0={hook:ej,searchHook:Xv,parser:$v,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n,aroundNav:(n,e,t)=>n(e,t)},O0=M.createContext(R0),Yl=()=>M.useContext(O0),F0={},B0=M.createContext(F0),I0=()=>M.useContext(B0),Cc=n=>{const[e,t]=n.hook(n);return[nj(n.base,e),P0((s,i)=>n.aroundNav(t,sj(s,n.base),i))]},Fi=()=>Cc(Yl()),z0=(n,e,t,s)=>{const{pattern:i,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),c=i.exec(t)||[],[d,...u]=c;return d!==void 0?[!0,(()=>{const m=o!==!1?Object.fromEntries(o.map((g,y)=>[g,u[y]])):c.groups;let p={...u};return m&&Object.assign(p,m),p})(),...s?[d]:[]]:[!1,null]},rj=({children:n,...e})=>{var p,g,y;const t=Yl(),s=e.hook?R0:t;let i=s;const[o,c=e.ssrSearch??""]=((p=e.ssrPath)==null?void 0:p.split("?"))??[];o&&(e.ssrSearch=c,e.ssrPath=o),e.hrefs=e.hrefs??((g=e.hook)==null?void 0:g.hrefs),e.searchHook=e.searchHook??((y=e.hook)==null?void 0:y.searchHook);let d=M.useRef({}),u=d.current,m=u;for(let w in s){const v=w==="base"?s[w]+(e[w]??""):e[w]??s[w];u===m&&v!==m[w]&&(d.current=m={...m}),m[w]=v,(v!==s[w]||v!==i[w])&&(i=m)}return M.createElement(O0.Provider,{value:i,children:n})},Ux=({children:n,component:e},t)=>e?M.createElement(e,{params:t}):typeof n=="function"?n(t):n,ij=n=>{let e=M.useRef(F0);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([s,i])=>i!==t[s])?n:t},ct=({path:n,nest:e,match:t,...s})=>{const i=Yl(),[o]=Cc(i),[c,d,u]=t??z0(i.parser,n,o,e),m=ij({...I0(),...d});if(!c)return null;const p=u?M.createElement(rj,{base:u},Ux(s,m)):Ux(s,m);return M.createElement(B0.Provider,{value:m,children:p})},Mc=M.forwardRef((n,e)=>{const t=Yl(),[s,i]=Cc(t),{to:o="",href:c=o,onClick:d,asChild:u,children:m,className:p,replace:g,state:y,transition:w,...v}=n,j=P0(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(d==null||d(k),k.defaultPrevented||(k.preventDefault(),i(c,n)))}),S=t.hrefs(c[0]==="~"?c.slice(1):t.base+c,t);return u&&M.isValidElement(m)?M.cloneElement(m,{onClick:j,href:S}):M.createElement("a",{...v,onClick:j,href:S,className:p!=null&&p.call?p(s===c):p,children:m,ref:e})}),$0=n=>Array.isArray(n)?n.flatMap(e=>$0(e&&e.type===M.Fragment?e.props.children:e)):[n],_0=({children:n,location:e})=>{const t=Yl(),[s]=Cc(t);for(const i of $0(n)){let o=0;if(M.isValidElement(i)&&(o=z0(t.parser,i.props.path,e||s,i.props.nest))[0])return M.cloneElement(i,{match:o})}return null};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W0=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:c,...d},u)=>M.createElement("svg",{ref:u,...aj,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:W0("lucide",i),...d},[...c.map(([m,p])=>M.createElement(m,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(n,e)=>{const t=M.forwardRef(({className:s,...i},o)=>M.createElement(oj,{ref:o,iconNode:e,className:W0(`lucide-${lj(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=re("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=re("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=re("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=re("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=re("CircleArrowRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=re("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=re("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=re("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=re("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=re("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=re("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=re("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=re("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=re("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=re("FileX2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=re("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=re("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=re("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=re("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=re("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=re("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=re("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=re("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=re("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=re("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=re("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=re("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=re("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=re("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=re("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=re("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=re("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=re("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=re("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=re("Radar",[["path",{d:"M19.07 4.93A10 10 0 0 0 6.99 3.34",key:"z3du51"}],["path",{d:"M4 6h.01",key:"oypzma"}],["path",{d:"M2.29 9.62A10 10 0 1 0 21.31 8.35",key:"qzzz0"}],["path",{d:"M16.24 7.76A6 6 0 1 0 8.23 16.67",key:"1yjesh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M17.99 11.66A6 6 0 0 1 15.77 16.67",key:"1u2y91"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"m13.41 10.59 5.66-5.66",key:"mhq4k0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=re("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=re("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=re("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=re("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=re("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=re("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=re("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=re("SquareDashed",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=re("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=re("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=re("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=re("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),xi="";async function Be(n,e){const t=await fetch(`${xi}${n}`);if(!t.ok)throw new Error(`API error: ${t.status}`);const s=await t.json();if(s.success===!1)throw new Error(s.error||"API request failed");return e?s[e]:s}async function Je(n,e,t){const s=await fetch(`${xi}${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await s.json().catch(()=>null);if(!s.ok||(i==null?void 0:i.success)===!1)throw new Error((i==null?void 0:i.error)||`API error: ${s.status}`);return t?i[t]:i}function qj(n){return n>=90?"A":n>=80?"B":n>=70?"C":n>=60?"D":"F"}function xo(n){var j,S,k,C,D,E,I,U,F;const e="projectPath"in n||"scannedAt"in n||"summary"in n;let t;if(e)t=n;else if(n.raw_data)try{t=typeof n.raw_data=="string"?JSON.parse(n.raw_data):n.raw_data}catch{}const s=(t==null?void 0:t.summary)||{},i=(t==null?void 0:t.healthScore)||{},o=(t==null?void 0:t.security)||{},c=(t==null?void 0:t.outdated)||{},d=(((j=o.critical)==null?void 0:j.length)||0)+(((S=o.high)==null?void 0:S.length)||0)+(((k=o.medium)==null?void 0:k.length)||0)+(((C=o.low)==null?void 0:C.length)||0),u=(n.security_critical||0)+(n.security_high||0)+(n.security_medium||0)+(n.security_low||0),m=d||u,g=(Array.isArray(c)?c.length:c.totalOutdated||(((D=c.major)==null?void 0:D.length)||0)+(((E=c.minor)==null?void 0:E.length)||0)+(((I=c.patch)==null?void 0:I.length)||0))||n.outdated_count||0,y=((F=(U=t==null?void 0:t.emissions)==null?void 0:U.current)==null?void 0:F.monthlyCO2Kg)||n.co2_monthly||0,w=i.score||n.score||n.health_score||0,v=i.grade||n.grade||qj(w);return{id:n.id,projectPath:n.projectPath||n.project_path,timestamp:n.scannedAt||n.scanned_at||n.created_at,score:w,grade:v,metrics:{waste:s.wastePercent||n.waste_percent||0,security:m,outdated:g,emissions:y},raw:t}}function Kj(n){var t,s,i,o,c,d,u,m;const e=n.components||{};return{waste:{score:((t=e.waste)==null?void 0:t.score)||0,max:((s=e.waste)==null?void 0:s.maxScore)||30},security:{score:((i=e.security)==null?void 0:i.score)||0,max:((o=e.security)==null?void 0:o.maxScore)||40},dependencies:{score:((c=e.outdated)==null?void 0:c.score)||0,max:((d=e.outdated)==null?void 0:d.maxScore)||20},emissions:{score:((u=e.emissions)==null?void 0:u.score)||0,max:((m=e.emissions)==null?void 0:m.maxScore)||10}}}function Gj(n){const e=n.scans||[];return{dates:e.map(t=>{const s=new Date(t.created_at);return`${s.getDate()} ${s.toLocaleString("en",{month:"short"})}`}).reverse(),scores:e.map(t=>t.score||0).reverse(),waste:e.map(t=>t.waste_percent||0).reverse()}}const we={getProjects:async()=>(await Be("/api/projects")).projects||[],getLatestScan:async n=>{const e=await Be(`/api/scans/latest/${encodeURIComponent(n)}?includeRaw=1`);return e.scan?xo(e.scan):null},getScans:async(n,e=30)=>((await Be(`/api/scans?project=${encodeURIComponent(n)}&limit=${e}`)).scans||[]).map(xo),getScan:async n=>{const e=await Be(`/api/scans/${n}?includeRaw=1`);return e.scan?xo(e.scan):null},getStats:async(n,e=30)=>{const t=await Be(`/api/scans?project=${encodeURIComponent(n)}&limit=${e}`);return Gj(t)},runScan:async n=>{const e=await Je("/api/scan",{projectPath:n});return xo(e.scan)},getScoreBreakdown:async n=>{const e=await Be(`/api/drill/score/${n}`);return Kj(e)},getUnusedDeps:async n=>(await Be(`/api/drill/unused-deps/${n}`)).dependencies||[],getDeadCode:async n=>Be(`/api/drill/dead-code/${n}`),getSecurity:async n=>Be(`/api/drill/security/${n}`),getOutdated:async n=>Be(`/api/drill/outdated/${n}`),getEmissions:async n=>Be(`/api/drill/costs/${n}`),recalculateEmissions:async(n,e)=>Je("/api/drill/emissions/recalculate",{scanId:n,monthlyVisitors:e}),getFixStatus:async n=>(await Be(`/api/fix/status/${encodeURIComponent(n)}`)).status||{modules:[]},previewFix:async(n,e)=>Be(`/api/fix/preview/${n}/${encodeURIComponent(e)}`),applyFix:async(n,e)=>Je("/api/fix/apply",{moduleId:n,projectPath:e}),getQuarantine:async n=>Be(`/api/quarantine/${encodeURIComponent(n)}`),restoreQuarantine:async(n,e)=>Je("/api/quarantine/restore",{projectPath:n,sessionId:e}),purgeQuarantine:async(n,e)=>Je("/api/quarantine/purge",{projectPath:n,sessionId:e}),quarantineDeadCode:async(n,e)=>Je("/api/quarantine/dead-code",{projectPath:n,scanId:e}),quarantineUnusedAssets:async(n,e)=>Je("/api/quarantine/unused-assets",{projectPath:n,scanId:e}),getBundles:async n=>Be(`/api/drill/bundles/${n}`),getCssAnalysis:async n=>Be(`/api/drill/css/${n}`),getDuplicates:async n=>Be(`/api/drill/duplicates/${n}`),getLicenses:async n=>Be(`/api/drill/licenses/${n}`),getHeavyDeps:async n=>Be(`/api/drill/heavy-deps/${n}`),getAssets:async n=>Be(`/api/drill/assets/${n}`),optimiseImage:async(n,e,t="webp",s=80)=>Je("/api/fix/optimise-image",{projectPath:n,filePath:e,format:t,quality:s}),getBuildLogs:async n=>Be(`/api/drill/logs/${n}`),getDecayAnalysis:async n=>Be(`/api/drill/decay/${n}`),getSystemInfo:async()=>Be("/api/system-info"),getSettings:async()=>Be("/api/settings"),saveSettings:async n=>Je("/api/settings",{settings:n}),getConfig:async n=>Be(`/api/config/${encodeURIComponent(n)}`),saveConfig:async(n,e)=>Je(`/api/config/${encodeURIComponent(n)}`,e),getLicenseStatus:async()=>Be("/api/license/status"),activateLicense:async(n,e)=>Je("/api/license/activate",{licenseKey:n,email:e}),getRegisteredProjects:async()=>Be("/api/projects/registered"),getSlotInfo:async()=>Be("/api/projects/slots"),registerProject:async(n,e)=>Je("/api/projects/register",{projectPath:n,projectName:e}),removeProject:async n=>{const e=await fetch(`${xi}/api/projects/registered/${n}`,{method:"DELETE"});if(!e.ok)throw new Error(`API error: ${e.status}`);return e.json()},checkProjectRegistered:async n=>Be(`/api/projects/check/${encodeURIComponent(n)}`),getProjectFiles:async(n,e=2)=>Be(`/api/projects/files/${encodeURIComponent(n)}?depth=${e}`),getActionList:async(n,e="json")=>e==="json"?Be(`/api/report/action-list/${n}?format=json`):(await fetch(`${xi}/api/report/action-list/${n}?format=${e}`)).text(),getProgressReport:async(n,e,t="json")=>{const s=e||"previous";return t==="json"?Be(`/api/report/progress?to=${n}&from=${s}&format=json`):(await fetch(`${xi}/api/report/progress?to=${n}&from=${s}&format=${t}`)).text()},getScansForDiff:async n=>Be(`/api/report/scans/${encodeURIComponent(n)}`),getVersion:async()=>Be("/api/version"),checkForUpdate:async()=>Be("/api/update/check"),installUpdate:async()=>Je("/api/update/install",{}),getESGPresets:async()=>Be("/api/report/esg/presets"),downloadESGReport:async n=>{var s;const e=new URLSearchParams;e.set("format",n.format),n.period&&e.set("period",n.period),n.after&&e.set("after",n.after),n.before&&e.set("before",n.before),(s=n.projects)!=null&&s.length&&e.set("projects",n.projects.join(","));const t=await fetch(`${xi}/api/report/esg?${e}`);if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to generate ESG report")}return t.blob()},getESGReportJSON:async n=>{var t;const e=new URLSearchParams;return e.set("format","json"),n.period&&e.set("period",n.period),n.after&&e.set("after",n.after),n.before&&e.set("before",n.before),(t=n.projects)!=null&&t.length&&e.set("projects",n.projects.join(",")),Be(`/api/report/esg?${e}`)},previewDeadCodeFix:async(n,e)=>Je("/api/fix/dead-code/preview",{projectPath:n,minConfidence:e}),applyDeadCodeFix:async(n,e)=>Je("/api/fix/dead-code/apply",{projectPath:n,...e}),listFixSnapshots:async n=>Be(`/api/fix/snapshots/${encodeURIComponent(n)}`),rollbackFix:async(n,e)=>Je("/api/fix/rollback",{projectPath:n,snapshotId:e}),previewCleanup:async(n,e)=>Je("/api/fix/cleanup/preview",{projectPath:n,...e}),applyCleanup:async(n,e)=>Je("/api/fix/cleanup/apply",{projectPath:n,...e}),rollbackCleanup:async(n,e)=>Je("/api/fix/cleanup/rollback",{projectPath:n,snapshotId:e}),readFile:async(n,e)=>Je("/api/file/read",{projectPath:n,file:e}),saveFile:async(n,e,t)=>Je("/api/file/save",{projectPath:n,file:e,content:t}),saveResolutions:async(n,e,t)=>Je("/api/resolutions",{projectPath:n,scanId:e,resolutions:t}),getResolutions:async n=>Be(`/api/resolutions/${n}`),uninstallDep:async(n,e)=>Je("/api/fix/uninstall-dep",{projectPath:n,packageName:e}),updateDep:async(n,e,t)=>Je("/api/fix/update-dep",{projectPath:n,packageName:e,version:t}),openFile:async(n,e,t)=>Je("/api/open",{projectPath:n,file:e,line:t}),openFolder:async(n,e)=>Je("/api/open-folder",{projectPath:n,file:e})},Qj="https://swynx.io";async function lt(n,e={}){const t=localStorage.getItem("admin_token"),s={"Content-Type":"application/json",...e.headers||{}};t&&(s.Authorization=`Bearer ${t}`);const i=await fetch(`${Qj}${n}`,{...e,headers:s});if(i.status===401)throw localStorage.removeItem("admin_token"),new Error("Session expired");if(!i.ok){const o=await i.json().catch(()=>({error:`HTTP ${i.status}`}));throw new Error(o.error||"Request failed")}return i.json()}const As={login:async n=>{const e=await lt("/admin/login",{method:"POST",body:JSON.stringify({password:n})});return e.token&&localStorage.setItem("admin_token",e.token),e},logout:async()=>{try{await lt("/admin/logout",{method:"POST"})}finally{localStorage.removeItem("admin_token")}},isLoggedIn:()=>!!localStorage.getItem("admin_token"),getCustomers:async n=>{const e=n?`?search=${encodeURIComponent(n)}`:"";return lt(`/admin/customers${e}`)},getCustomer:async n=>lt(`/admin/customers/${n}`),createCustomer:async n=>lt("/admin/customers",{method:"POST",body:JSON.stringify(n)}),updateCustomer:async(n,e)=>lt(`/admin/customers/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteCustomer:async n=>lt(`/admin/customers/${n}`,{method:"DELETE"}),addLicenseToCustomer:async(n,e)=>lt(`/admin/customers/${n}/licenses`,{method:"POST",body:JSON.stringify(e)}),removeLicenseFromCustomer:async(n,e)=>lt(`/admin/customers/${n}/licenses/${e}`,{method:"DELETE"}),getLicenses:async n=>{const e=new URLSearchParams;n!=null&&n.search&&e.set("search",n.search),n!=null&&n.tier&&e.set("tier",n.tier),n!=null&&n.status&&e.set("status",n.status);const t=e.toString();return lt(`/admin/licenses${t?`?${t}`:""}`)},getLicense:async n=>lt(`/admin/licenses/${n}`),createLicense:async n=>lt("/admin/licenses",{method:"POST",body:JSON.stringify(n)}),revokeLicense:async n=>lt(`/admin/licenses/${n}/revoke`,{method:"POST"}),toggleCICD:async(n,e)=>lt(`/admin/licenses/${n}/cicd`,{method:"POST",body:JSON.stringify({enabled:e})}),getTiers:async()=>lt("/admin/tiers"),getStats:async()=>lt("/admin/stats"),getEmailStatus:async()=>lt("/admin/emails/status"),getEmailTemplates:async()=>lt("/admin/emails/templates"),previewEmail:async(n,e)=>{const t=e?`?license=${e}`:"";return lt(`/admin/emails/preview/${n}${t}`)},sendEmail:async(n,e,t)=>lt("/admin/emails/send",{method:"POST",body:JSON.stringify({template:n,licenseKey:e,force:t})}),getEmailHistory:async n=>lt(`/admin/emails/history/${n}`),broadcastEmail:async n=>lt("/admin/emails/broadcast",{method:"POST",body:JSON.stringify(n)}),checkScheduledEmails:async n=>lt("/admin/emails/check-scheduled",{method:"POST",body:JSON.stringify({dryRun:n})})},ry=M.createContext(null);function Yj({children:n}){const[e,t]=M.useState("loading"),[s,i]=M.useState(null),[o,c]=M.useState(null),[d,u]=M.useState([]),[m,p]=M.useState(null),[g,y]=M.useState(null),[w,v]=M.useState({}),j=M.useCallback(async()=>{var F;try{t("loading"),y(null);const _=await we.getLicenseStatus(),R=await we.getRegisteredProjects();try{const G=await we.getSettings(),Q=((F=G==null?void 0:G.settings)==null?void 0:F.features)||{};v(Q)}catch{}i({active:_.active,orderId:_.orderId,email:_.email,tier:_.tier,tierName:_.tierName,expires:_.expires,daysRemaining:_.daysRemaining,expired:_.expired}),c({hasLicense:R.hasLicense,tier:R.tier,tierName:R.tierName,slotsUsed:R.slotsUsed,slotsTotal:R.slotsTotal,slotsRemaining:R.slotsRemaining,expires:R.expires,daysRemaining:R.daysRemaining}),u(R.projects||[]),_.active?!R.projects||R.projects.length===0?t("project-selection"):(t("dashboard"),!m&&R.projects.length>0&&p(R.projects[0].id)):t("activation")}catch(_){console.error("Failed to load app state:",_),t("activation"),y(_ instanceof Error?_.message:"Failed to connect to dashboard server")}},[m]);M.useEffect(()=>{j()},[j]);const U={state:e,license:s,slots:o,registeredProjects:d,selectedProjectId:m,error:g,features:w,setSelectedProjectId:p,activateLicense:async(F,_)=>{try{y(null);const R=await we.activateLicense(F,_);return R.success?(await j(),!0):(y(R.error||"Activation failed"),!1)}catch(R){return y(R instanceof Error?R.message:"Activation failed"),!1}},registerProject:async(F,_)=>{try{y(null);const R=await we.registerProject(F,_);return R.success?(R.project&&!R.alreadyRegistered&&(u(G=>[...G,R.project]),c(G=>G?{...G,slotsUsed:R.slotsUsed??G.slotsUsed,slotsRemaining:(R.slotsTotal??G.slotsTotal)-(R.slotsUsed??G.slotsUsed)}:null)),p(R.project.id),t("dashboard"),{success:!0}):{success:!1,error:R.error}}catch(R){const G=R instanceof Error?R.message:"Failed to register project";return y(G),{success:!1,error:G}}},removeProject:async F=>{try{y(null);const _=await we.removeProject(F);if(_.success){if(u(R=>R.filter(G=>G.id!==F)),c(R=>R?{...R,slotsUsed:_.slotsUsed??R.slotsUsed,slotsRemaining:(_.slotsTotal??R.slotsTotal)-(_.slotsUsed??R.slotsUsed)}:null),m===F){const R=d.filter(G=>G.id!==F);R.length>0?p(R[0].id):(p(null),t("project-selection"))}return!0}return!1}catch(_){return y(_ instanceof Error?_.message:"Failed to remove project"),!1}},refresh:j,refreshFeatures:async()=>{var F;try{const _=await we.getSettings(),R=((F=_==null?void 0:_.settings)==null?void 0:F.features)||{};v(R)}catch{}},goToProjectSelection:()=>{t("project-selection")},goToDashboard:()=>{d.length>0&&t("dashboard")}};return r.jsx(ry.Provider,{value:U,children:n})}function _r(){const n=M.useContext(ry);if(!n)throw new Error("useAppState must be used within AppStateProvider");return n}const iy=M.createContext(null);function Xj({children:n}){const e=_r(),t=(e==null?void 0:e.registeredProjects)||[],s=e==null?void 0:e.selectedProjectId,i=t.find(V=>V.id===s),o=(i==null?void 0:i.path)||null,[c,d]=M.useState([]),[u,m]=M.useState(null),[p,g]=M.useState(null),[y,w]=M.useState(!0),[v,j]=M.useState(!1),[S,k]=M.useState(null),[C,D]=M.useState(null),[E,I]=M.useState(null);M.useEffect(()=>{o&&o!==u&&m(o)},[o,u]);const U=V=>{m(V);const q=t.find(de=>de.path===V);q&&(e!=null&&e.setSelectedProjectId)&&e.setSelectedProjectId(q.id)},F=async()=>{try{const V=await we.getProjects();d(V)}catch(V){D(V instanceof Error?V.message:"Failed to load projects")}},_=async()=>{if(u){w(!0);try{const V=await we.getLatestScan(u);g(V),D(null)}catch(V){D(V instanceof Error?V.message:"Failed to load scan")}finally{w(!1)}}},R=async()=>{if(!(!u||v)){j(!0);try{const V=await we.runScan(u);g(V),D(null)}catch(V){D(V instanceof Error?V.message:"Scan failed")}finally{j(!1)}}},G=M.useCallback(()=>{const V=o||u;if(!V)return;E&&(E.close(),I(null)),j(!0),k({phase:"Initializing",percent:0,detail:"Starting scan...",current:0,total:0,fileLines:[],stats:{filesAnalyzed:0,functionsFound:0,issuesFound:0}}),D(null);const q=setTimeout(()=>{console.warn("[Scan] Safety timeout reached, resetting state"),j(!1),k(null),D("Scan timed out. Please try again.")},18e4),Y=`/api/scan-stream/${encodeURIComponent(V)}`,X=new EventSource(Y);I(X),X.onmessage=ie=>{var T,W,ce,ue,ke,Ne,Re,Pe,Fe,De,pt,Ye,Lt,Jt,hs,us,Le,pe,nt,P,ae,Ae;try{const Se=JSON.parse(ie.data);if(console.log("[SSE]",Se.type,Se.phase,(T=Se.detail)==null?void 0:T.slice(-30),Se.current,"/",Se.total),Se.type==="progress")k({phase:Se.phase||"Processing",percent:Se.percent||0,detail:Se.detail||"",current:Se.current||0,total:Se.total||0,fileLines:Se.fileLines||[],stats:Se.stats||{filesAnalyzed:0,functionsFound:0,issuesFound:0}});else if(Se.type==="complete"){clearTimeout(q);const Te=Se.scan,at={id:Te.id,projectPath:Te.projectPath,timestamp:Te.scannedAt,score:((W=Te.healthScore)==null?void 0:W.score)||0,grade:((ce=Te.healthScore)==null?void 0:ce.grade)||"F",metrics:{waste:((ue=Te.summary)==null?void 0:ue.wastePercent)||0,security:(((Ne=(ke=Te.security)==null?void 0:ke.critical)==null?void 0:Ne.length)||0)+(((Pe=(Re=Te.security)==null?void 0:Re.high)==null?void 0:Pe.length)||0)+(((De=(Fe=Te.security)==null?void 0:Fe.medium)==null?void 0:De.length)||0)+(((Ye=(pt=Te.security)==null?void 0:pt.low)==null?void 0:Ye.length)||0),outdated:((Lt=Te.outdated)==null?void 0:Lt.totalOutdated)||0,emissions:((hs=(Jt=Te.emissions)==null?void 0:Jt.current)==null?void 0:hs.monthlyCO2Kg)||0},raw:Te};g(at),X.close(),I(null),k({phase:"Complete",percent:100,detail:`Scan complete  ${((Le=(us=Te.deadCode)==null?void 0:us.summary)==null?void 0:Le.count)||0} dead files found`,current:((pe=Te.summary)==null?void 0:pe.totalFiles)||0,total:((nt=Te.summary)==null?void 0:nt.totalFiles)||0,fileLines:[],stats:{filesAnalyzed:((P=Te.summary)==null?void 0:P.totalFiles)||0,functionsFound:0,issuesFound:((Ae=(ae=Te.deadCode)==null?void 0:ae.summary)==null?void 0:Ae.count)||0}}),setTimeout(()=>{j(!1),k(null)},1500)}else Se.type==="error"&&(clearTimeout(q),D(Se.error||"Scan failed"),j(!1),k(null),X.close(),I(null))}catch(Se){clearTimeout(q),console.error("Failed to parse SSE data:",Se),j(!1),k(null),D("Failed to process scan result"),X.close(),I(null)}},X.onerror=()=>{clearTimeout(q),D("Connection lost during scan"),j(!1),k(null),X.close(),I(null)}},[u,o,v]),Q=M.useCallback(()=>{E&&(E.close(),I(null)),j(!1),k(null)},[E]);M.useEffect(()=>{F()},[]);const[ne,ee]=M.useState(new Set);M.useEffect(()=>{if(!u)return;let V=!1;return g(null),w(!0),D(null),we.getLatestScan(u).then(q=>{V||(g(q),w(!1),!q&&!v&&!ne.has(u)&&(ee(de=>new Set(de).add(u)),G()))}).catch(q=>{V||(D(q instanceof Error?q.message:"Failed to load scan"),w(!1))}),()=>{V=!0}},[u]);const H=()=>{F(),u&&_()};return M.useEffect(()=>()=>{E&&E.close()},[E]),r.jsx(iy.Provider,{value:{projects:c,selectedProject:u,setSelectedProject:U,currentScan:p,loading:y,error:C,refetch:H,runScan:R,runStreamingScan:G,scanning:v,scanProgress:S,cancelScan:Q},children:n})}function St(){const n=M.useContext(iy);if(!n)throw new Error("useProject must be used within ProjectProvider");return n}const ly=M.createContext(null);function Zl(){const n=M.useContext(ly);if(!n)throw new Error("useToast must be used within ToastProvider");return n}function Jj({children:n}){const[e,t]=M.useState([]),s=(o,c="success")=>{const d=Date.now().toString();t(u=>[...u,{id:d,message:o,type:c}]),setTimeout(()=>{t(u=>u.filter(m=>m.id!==d))},3e3)},i=o=>{t(c=>c.filter(d=>d.id!==o))};return r.jsxs(ly.Provider,{value:{showToast:s},children:[n,r.jsx("div",{className:"fixed bottom-6 right-6 z-50 space-y-2",children:e.map(o=>r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm border animate-slide-up ${o.type==="success"?"bg-emerald-500/20 border-emerald-500/30 text-emerald-400":o.type==="error"?"bg-red-500/20 border-red-500/30 text-red-400":"bg-primary/20 border-primary/30 text-primary"}`,children:[r.jsx(as,{className:"w-4 h-4 shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:o.message}),r.jsx("button",{onClick:()=>i(o.id),className:"ml-2 p-1 hover:bg-white/10 rounded transition-colors",children:r.jsx(Fr,{className:"w-3 h-3"})})]},o.id))})]})}function Zj({scanId:n,hasPreviousScan:e}){const[t,s]=M.useState(!1),[i,o]=M.useState(null),c=(u,m,p)=>{const g=new Blob([u],{type:p}),y=URL.createObjectURL(g),w=document.createElement("a");w.href=y,w.download=m,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(y)},d=async(u,m)=>{o(`${u}-${m}`);try{if(u==="action-list"){const p=await we.getActionList(n,m),g=m==="md"?"md":m==="llm"?"txt":m,y=m==="json"?"application/json":m==="csv"?"text/csv":m==="llm"?"text/plain":"text/markdown",w=m==="json"?JSON.stringify(p,null,2):p,v=m==="llm"?`llm-prompt-${n}.txt`:`action-list-${n}.${g}`;c(w,v,y)}else if(u==="progress"){const p=await we.getProgressReport(n,"previous",m),g=m==="md"?"md":m,y=m==="json"?"application/json":m==="csv"?"text/csv":"text/markdown",w=m==="json"?JSON.stringify(p,null,2):p;c(w,`progress-report-${n}.${g}`,y)}}catch(p){console.error("Export failed:",p)}finally{o(null),s(!1)}};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors text-sm",children:[r.jsx(Ac,{className:"w-4 h-4"}),"Export",r.jsx(xf,{className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`})]}),t&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 z-50 bg-[#1a1a1a] border border-white/10 rounded-xl shadow-xl py-2 min-w-[220px]",children:[r.jsx("div",{className:"px-3 py-1.5 text-xs text-white/40 uppercase tracking-wider",children:"Action List"}),r.jsxs("button",{onClick:()=>d("action-list","md"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-md"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(Rr,{className:"w-4 h-4 text-blue-400"}),"Markdown (.md)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"GitHub, Notion"})]}),r.jsxs("button",{onClick:()=>d("action-list","csv"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-csv"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(bu,{className:"w-4 h-4 text-green-400"}),"CSV (.csv)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"Jira, Linear"})]}),r.jsxs("button",{onClick:()=>d("action-list","json"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-json"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(yu,{className:"w-4 h-4 text-yellow-400"}),"JSON (.json)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"API"})]}),r.jsxs("button",{onClick:()=>d("action-list","llm"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-llm"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(H0,{className:"w-4 h-4 text-purple-400"}),"LLM Prompt (.txt)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"Claude, GPT"})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"my-2 border-t border-white/10"}),r.jsxs("div",{className:"px-3 py-1.5 text-xs text-white/40 uppercase tracking-wider flex items-center gap-1",children:[r.jsx(Cj,{className:"w-3 h-3"}),"Progress Report"]}),r.jsxs("button",{onClick:()=>d("progress","md"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-md"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(Rr,{className:"w-4 h-4 text-blue-400"}),"Progress (Markdown)"]}),r.jsxs("button",{onClick:()=>d("progress","csv"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-csv"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(bu,{className:"w-4 h-4 text-green-400"}),"Progress (CSV)"]}),r.jsxs("button",{onClick:()=>d("progress","json"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-json"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(yu,{className:"w-4 h-4 text-yellow-400"}),"Progress (JSON)"]})]})]})]})]})}function e2(){var X,ie,T,W,ce,ue,ke,Ne,Re,Pe,Fe,De,pt,Ye,Lt,Jt,hs,us;const{selectedProject:n,currentScan:e,loading:t,scanning:s,runStreamingScan:i}=St(),{showToast:o}=Zl(),[c,d]=M.useState(null),[u,m]=M.useState(!1);if(M.useEffect(()=>{e!=null&&e.id&&we.getScoreBreakdown(e.id).then(d).catch(console.error)},[e==null?void 0:e.id]),M.useEffect(()=>{n&&we.getScansForDiff(n).then(Le=>m(Le.scans&&Le.scans.length>1)).catch(()=>m(!1))},[n]),t)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});if(!e)return r.jsx("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"No scan data yet"}),r.jsx("p",{className:"text-white/60 mb-4",children:"Run a scan to see your codebase analysis"}),r.jsx("button",{onClick:()=>i(),disabled:s||!n,className:"px-6 py-3 bg-primary hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-semibold flex items-center gap-2 mx-auto",children:s?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zo,{className:"w-5 h-5"}),"Start Scan"]})})]})});const p=e.raw,g=[],y=e.metrics.security,w=((ie=(X=p==null?void 0:p.security)==null?void 0:X.critical)==null?void 0:ie.length)||0,v=((W=(T=p==null?void 0:p.security)==null?void 0:T.high)==null?void 0:W.length)||0;w>0?g.push({id:"sec-critical",severity:"critical",title:`${w} critical vulnerabilit${w===1?"y":"ies"}`,detail:"Critical security vulnerabilities need immediate attention. These can be exploited remotely.",metric:`${w} critical`,link:"/security",linkLabel:"View vulnerabilities"}):v>0?g.push({id:"sec-high",severity:"warning",title:`${v} high-severity vulnerabilit${v===1?"y":"ies"}`,detail:"High-severity security issues found. Plan to fix these soon.",metric:`${v} high`,link:"/security",linkLabel:"View vulnerabilities"}):y>0&&g.push({id:"sec-low",severity:"info",title:`${y} security finding${y===1?"":"s"}`,detail:"Low/medium severity issues found. Review when convenient.",metric:String(y),link:"/security",linkLabel:"View findings"});const j=e.metrics.waste,S=((ce=p==null?void 0:p.summary)==null?void 0:ce.deadCodeFiles)||((Ne=(ke=(ue=p==null?void 0:p.details)==null?void 0:ue.deadCode)==null?void 0:ke.fullyDeadFiles)==null?void 0:Ne.length)||0,k=((Re=p==null?void 0:p.summary)==null?void 0:Re.deadCodeExports)||((De=(Fe=(Pe=p==null?void 0:p.details)==null?void 0:Pe.deadCode)==null?void 0:Fe.summary)==null?void 0:De.totalDeadExports)||0;j>=15?g.push({id:"dead-critical",severity:"critical",title:`${j.toFixed(1)}% of your codebase is dead`,detail:`${S} dead file${S!==1?"s":""} and ${k} unused export${k!==1?"s":""} are costing your team time every day.`,metric:`${j.toFixed(1)}%`,link:"/waste",linkLabel:"View dead code"}):j>=5?g.push({id:"dead-warning",severity:"warning",title:`${j.toFixed(1)}% dead code detected`,detail:`Found ${S} dead file${S!==1?"s":""} and ${k} unused export${k!==1?"s":""}. Worth cleaning up.`,metric:`${j.toFixed(1)}%`,link:"/waste",linkLabel:"View dead code"}):j>=1&&g.push({id:"dead-info",severity:"info",title:`${j.toFixed(1)}% dead code`,detail:`Minor dead code detected  ${S} file${S!==1?"s":""}, ${k} export${k!==1?"s":""}.`,metric:`${j.toFixed(1)}%`,link:"/waste",linkLabel:"View details"});const C=((pt=p==null?void 0:p.summary)==null?void 0:pt.unusedDependencyCount)||((Lt=(Ye=p==null?void 0:p.details)==null?void 0:Ye.unusedDeps)==null?void 0:Lt.length)||0;C>=10?g.push({id:"deps-warning",severity:"warning",title:`${C} unused dependenc${C===1?"y":"ies"}`,detail:"Unused packages increase install times, attack surface, and bundle size.",metric:String(C),link:"/deps",linkLabel:"View dependencies"}):C>0&&g.push({id:"deps-info",severity:"info",title:`${C} unused dependenc${C===1?"y":"ies"}`,detail:"Some installed packages are never imported.",metric:String(C),link:"/deps",linkLabel:"View dependencies"});const D=e.metrics.outdated;D>=20?g.push({id:"outdated-warning",severity:"warning",title:`${D} outdated package${D===1?"":"s"}`,detail:"Outdated packages can miss security patches and new features.",metric:String(D),link:"/deps",linkLabel:"View outdated"}):D>0&&g.push({id:"outdated-info",severity:"info",title:`${D} outdated package${D===1?"":"s"}`,detail:"Some packages have newer versions available.",metric:String(D),link:"/deps",linkLabel:"View outdated"});const E=p==null?void 0:p.costs,I=((Jt=E==null?void 0:E.annualCost)==null?void 0:Jt.total)||0,U=((hs=E==null?void 0:E.cleanup)==null?void 0:hs.hours)||0,F=(us=E==null?void 0:E.roi)==null?void 0:us.months,_=(E==null?void 0:E.currencySymbol)||"",R={critical:0,warning:1,info:2,ok:3};g.sort((Le,pe)=>R[Le.severity]-R[pe.severity]);const G=g.filter(Le=>Le.severity==="critical").length,Q=g.filter(Le=>Le.severity==="warning").length,ne=g.filter(Le=>Le.severity==="info").length,ee=G>0?"critical":Q>0?"warning":ne>0?"info":"ok",V={critical:{bg:"bg-red-500/10",border:"border-red-500/30",icon:gf,iconColor:"text-red-400",headline:"Action Required",subtitle:`${G} critical issue${G!==1?"s":""} found in your codebase`,glow:"shadow-red-500/10"},warning:{bg:"bg-orange-500/10",border:"border-orange-500/30",icon:Oj,iconColor:"text-orange-400",headline:"Needs Attention",subtitle:`${Q} warning${Q!==1?"s":""} found  review when you can`,glow:"shadow-orange-500/10"},info:{bg:"bg-blue-500/10",border:"border-blue-500/30",icon:Or,iconColor:"text-blue-400",headline:"Looking Good",subtitle:`${ne} minor finding${ne!==1?"s":""}  nothing urgent`,glow:"shadow-blue-500/10"},ok:{bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:ey,iconColor:"text-emerald-400",headline:"All Clear",subtitle:"No issues detected. Your codebase is clean.",glow:"shadow-emerald-500/10"}}[ee],q=V.icon,de={critical:{bg:"bg-red-500/5",border:"border-red-500/20",icon:Wj,iconColor:"text-red-400",badge:"bg-red-500/20 text-red-400"},warning:{bg:"bg-orange-500/5",border:"border-orange-500/20",icon:yt,iconColor:"text-orange-400",badge:"bg-orange-500/20 text-orange-400"},info:{bg:"bg-blue-500/5",border:"border-blue-500/20",icon:Or,iconColor:"text-blue-400",badge:"bg-blue-500/20 text-blue-400"},ok:{bg:"bg-emerald-500/5",border:"border-emerald-500/20",icon:Pn,iconColor:"text-emerald-400",badge:"bg-emerald-500/20 text-emerald-400"}},Y=Le=>Le<100?`${_}${Le.toFixed(0)}`:Le<1e4?`${_}${Le.toLocaleString("en",{maximumFractionDigits:0})}`:`${_}${(Le/1e3).toFixed(1)}k`;return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Kx,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Overview"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-sm text-white/40",children:n}),(e==null?void 0:e.id)&&r.jsx(Zj,{scanId:e.id,projectPath:n||"",hasPreviousScan:u})]})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:`${V.bg} ${V.border} border rounded-2xl p-8 shadow-lg ${V.glow}`,children:[r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx("div",{className:`w-16 h-16 rounded-2xl ${V.bg} flex items-center justify-center`,children:r.jsx(q,{className:`w-9 h-9 ${V.iconColor}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold mb-1",children:V.headline}),r.jsx("p",{className:"text-white/60",children:V.subtitle})]}),r.jsxs("div",{className:"text-right hidden sm:block",children:[r.jsx("div",{className:"text-4xl font-bold",children:e.score}),r.jsx("div",{className:"text-sm text-white/40",children:"Health Score"})]})]}),g.length>0&&r.jsxs("div",{className:"flex gap-3 mt-5 pt-5 border-t border-white/10",children:[G>0&&r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-red-500/20 text-red-400",children:[G," Critical"]}),Q>0&&r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-orange-500/20 text-orange-400",children:[Q," Warning",Q!==1?"s":""]}),ne>0&&r.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400",children:[ne," Info"]})]})]}),g.length>0&&r.jsx("div",{className:"space-y-3",children:g.map(Le=>{const pe=de[Le.severity],nt=pe.icon;return r.jsxs("div",{className:`${pe.bg} ${pe.border} border rounded-xl p-5 flex items-center gap-4 group`,children:[r.jsx("div",{className:`w-10 h-10 rounded-lg ${pe.bg} flex items-center justify-center flex-shrink-0`,children:r.jsx(nt,{className:`w-5 h-5 ${pe.iconColor}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[r.jsx("h3",{className:"font-bold text-sm",children:Le.title}),r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-medium uppercase ${pe.badge}`,children:Le.severity})]}),r.jsx("p",{className:"text-xs text-white/50",children:Le.detail})]}),Le.link&&r.jsxs(Mc,{href:Le.link,className:"flex items-center gap-1 text-xs text-white/40 hover:text-white/70 flex-shrink-0 transition-colors",children:[r.jsx("span",{children:Le.linkLabel}),r.jsx(Xl,{className:"w-4 h-4"})]})]},Le.id)})}),g.length===0&&r.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/20 rounded-xl p-8 text-center",children:[r.jsx(Pn,{className:"w-12 h-12 text-emerald-400 mx-auto mb-3"}),r.jsx("p",{className:"text-lg font-bold mb-1",children:"Your codebase looks clean"}),r.jsx("p",{className:"text-sm text-white/50",children:"No dead code, no security issues, no unused dependencies."})]}),(I>0||U>0)&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(yf,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-xs text-white/50",children:"Annual Cost of Dead Code"})]}),r.jsxs("p",{className:"text-2xl font-bold",children:[Y(I),r.jsx("span",{className:"text-sm text-white/40 font-normal",children:"/yr"})]}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Developer time wasted on dead code"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(U0,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"text-xs text-white/50",children:"Cleanup Effort"})]}),r.jsx("p",{className:"text-2xl font-bold",children:U<1?`${Math.round(U*60)}m`:`${U.toFixed(1)}h`}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Estimated time to remove all dead code"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(gn,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"text-xs text-white/50",children:"ROI"})]}),r.jsx("p",{className:"text-2xl font-bold",children:F!=null?F<1?"Instant":`${F.toFixed(1)} mo`:"N/A"}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Time until cleanup pays for itself"})]})]}),c&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsx("h3",{className:"text-xs font-bold text-white/50 uppercase tracking-wide mb-4",children:"Score Breakdown"}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Dead Code",score:c.waste.score,max:c.waste.max,icon:vj},{label:"Security",score:c.security.score,max:c.security.max,icon:Kx},{label:"Dependencies",score:c.dependencies.score,max:c.dependencies.max,icon:$t},{label:"Emissions",score:c.emissions.score,max:c.emissions.max,icon:Fj}].map(Le=>{const pe=Le.max>0?Le.score/Le.max*100:0,nt=pe>=80?"bg-emerald-500":pe>=50?"bg-primary":"bg-red-500",P=pe>=80?"text-emerald-400":pe>=50?"text-primary":"text-red-400";return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Le.icon,{className:"w-3.5 h-3.5 text-white/40"}),r.jsx("span",{className:"text-xs text-white/60",children:Le.label})]}),r.jsxs("span",{className:`text-xs font-bold ${P}`,children:[Le.score,"/",Le.max]})]}),r.jsx("div",{className:"h-1.5 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full ${nt}`,style:{width:`${pe}%`}})})]},Le.label)})})]})]})]})}const Yx={critical:"text-red-500 bg-red-500/10 border-red-500/20",high:"text-orange-500 bg-orange-500/10 border-orange-500/20",medium:"text-yellow-500 bg-yellow-500/10 border-yellow-500/20",low:"text-blue-400 bg-blue-500/10 border-blue-500/20"},Xx={critical:yt,high:yt,medium:Dl,low:Dl},t2={security:wn,"unused-dependency":$t,"dead-code":gn,duplicate:_t,outdated:$t,"license-risk":Qs};function Jx(n){return n.title.startsWith("Outdated: ")?n.title.slice(10).split(" ")[0]||null:n.title.startsWith("Unused dependency: ")?n.title.slice(19).trim():null}function s2(){const{currentScan:n,selectedProject:e}=St(),[t,s]=M.useState(null),[i,o]=M.useState(!0),[c,d]=M.useState({critical:!0,high:!0,medium:!1,low:!1}),[u,m]=M.useState(new Set),[p,g]=M.useState(null),[y,w]=M.useState(new Set),[v,j]=M.useState({});M.useEffect(()=>{n!=null&&n.id&&(o(!0),we.getActionList(n.id,"json").then(R=>{s(R),o(!1)}).catch(R=>{console.error("Failed to load action list:",R),o(!1)}))},[n==null?void 0:n.id]);const S=R=>{d(G=>({...G,[R]:!G[R]}))},k=R=>{m(G=>{const Q=new Set(G);return Q.has(R)?Q.delete(R):Q.add(R),Q})},C=R=>{navigator.clipboard.writeText(R)},D=async R=>{var G;if(!(!e||p)){g(R.id),j(Q=>{const ne={...Q};return delete ne[R.id],ne});try{if(((G=R.fix)==null?void 0:G.type)==="dependency-update"&&R.latest){const Q=Jx(R);if(!Q)throw new Error("Could not extract package name");await we.updateDep(e,Q,R.latest)}else if(R.category==="unused-dependency"){const Q=Jx(R);if(!Q)throw new Error("Could not extract package name");await we.uninstallDep(e,Q)}else throw new Error("No automatic fix available");w(Q=>new Set(Q).add(R.id)),m(Q=>new Set(Q).add(R.id))}catch(Q){j(ne=>({...ne,[R.id]:Q.message||"Fix failed"}))}finally{g(null)}}},E=R=>{var G;return!!(((G=R.fix)==null?void 0:G.type)==="dependency-update"&&R.latest||R.category==="unused-dependency")},I=async()=>{if(!(n!=null&&n.id))return;const R=await we.getActionList(n.id,"md"),G=new Blob([R],{type:"text/markdown"}),Q=URL.createObjectURL(G),ne=document.createElement("a");ne.href=Q,ne.download=`action-list-${n.id}.md`,ne.click(),URL.revokeObjectURL(Q)};if(i)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-white/40"})});if(!t)return r.jsx("div",{className:"p-6 text-center text-white/40",children:"No scan data available. Run a scan first."});const U={critical:t.issues.filter(R=>R.severity==="critical"),high:t.issues.filter(R=>R.severity==="high"),medium:t.issues.filter(R=>R.severity==="medium"),low:t.issues.filter(R=>R.severity==="low")},F=u.size,_=t.summary.total>0?Math.round(F/t.summary.total*100):0;return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rr,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Action List"}),r.jsxs("span",{className:"text-sm text-white/40",children:[t.summary.total," issues to fix"]}),y.size>0&&r.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[y.size," fixed"]})]}),r.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors text-sm",children:[r.jsx(Ac,{className:"w-4 h-4"}),"Export Markdown"]})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-white/60",children:"Progress"}),r.jsxs("span",{className:"text-sm font-medium",children:[F," / ",t.summary.total," completed"]})]}),r.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${_}%`}})})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:["critical","high","medium","low"].map(R=>{const G=t.summary[R],Q=Xx[R];return r.jsxs("button",{onClick:()=>S(R),className:`p-4 rounded-xl border ${Yx[R]} text-left transition-all hover:scale-[1.02]`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Q,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs uppercase tracking-wider opacity-70",children:R})]}),r.jsx("p",{className:"text-2xl font-bold",children:G})]},R)})}),t.quickWins&&t.quickWins.length>0&&r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(tc,{className:"w-5 h-5 text-green-400"}),r.jsx("h2",{className:"font-bold text-green-400",children:"Quick Wins"}),r.jsx("span",{className:"text-sm text-green-400/60",children:"Fix these first for maximum impact"})]}),r.jsx("div",{className:"space-y-2",children:t.quickWins.slice(0,5).map(R=>{var ee;const G=y.has(R.id),Q=p===R.id,ne=u.has(R.id);return r.jsxs("div",{className:`flex items-center gap-3 p-2 bg-black/20 rounded-lg ${G?"opacity-60":""}`,children:[r.jsx("button",{onClick:()=>k(R.id),className:"flex-shrink-0",children:ne?r.jsx(Pn,{className:"w-5 h-5 text-green-400"}):r.jsx(Dl,{className:"w-5 h-5 text-white/30"})}),r.jsx("span",{className:`flex-1 text-sm ${ne?"line-through text-white/30":""}`,children:R.title}),E(R)&&!G&&r.jsxs("button",{onClick:H=>{H.stopPropagation(),D(R)},disabled:!!p,className:"flex items-center gap-1 px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded text-xs font-medium hover:bg-emerald-500/30 disabled:opacity-50 transition-colors",children:[Q?r.jsx(je,{className:"w-3 h-3 animate-spin"}):r.jsx(Zo,{className:"w-3 h-3"}),"Run"]}),G&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:"Done"}),!E(R)&&((ee=R.fix)==null?void 0:ee.command)&&r.jsxs("button",{onClick:()=>C(R.fix.command),className:"px-2 py-1 bg-white/5 rounded text-xs font-mono hover:bg-white/10",title:"Copy command",children:[R.fix.command.slice(0,30),R.fix.command.length>30?"...":""]})]},R.id)})})]}),["critical","high","medium","low"].map(R=>{const G=U[R];if(G.length===0)return null;const Q=c[R],ne=Xx[R];return r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:[r.jsxs("button",{onClick:()=>S(R),className:`w-full flex items-center justify-between p-4 ${Yx[R]} border-b`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ne,{className:"w-5 h-5"}),r.jsx("span",{className:"font-bold capitalize",children:R}),r.jsxs("span",{className:"text-sm opacity-60",children:["(",G.length," issues)"]})]}),Q?r.jsx(xf,{className:"w-5 h-5"}):r.jsx(Xl,{className:"w-5 h-5"})]}),Q&&r.jsx("div",{className:"divide-y divide-white/5",children:G.map(ee=>{var X,ie,T,W;const H=t2[ee.category]||Dl,V=u.has(ee.id),q=y.has(ee.id),de=p===ee.id,Y=v[ee.id];return r.jsx("div",{className:`p-4 ${q?"bg-emerald-500/5":""} ${V&&!q?"opacity-50":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("button",{onClick:()=>k(ee.id),className:"flex-shrink-0 mt-0.5",children:V?r.jsx(Pn,{className:"w-5 h-5 text-green-400"}):r.jsx(Dl,{className:"w-5 h-5 text-white/30 hover:text-white/50"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(H,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:ee.category.replace("-"," ")}),q&&r.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400 font-medium",children:"Fixed"})]}),r.jsx("h3",{className:`font-medium ${V?"line-through":""}`,children:ee.title}),ee.description&&r.jsx("p",{className:"text-sm text-white/50 mt-1",children:ee.description}),ee.file&&ee.file!=="package.json"&&r.jsx("p",{className:"text-xs text-white/30 font-mono mt-1",children:ee.file}),((X=ee.fix)==null?void 0:X.command)&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-black/30 rounded text-xs font-mono text-white/70 truncate",children:ee.fix.command}),E(ee)&&!q?r.jsxs("button",{onClick:()=>D(ee),disabled:!!p,className:"flex items-center gap-1.5 px-3 py-2 bg-emerald-500/20 text-emerald-400 rounded hover:bg-emerald-500/30 text-xs font-medium disabled:opacity-50 transition-colors whitespace-nowrap",children:[de?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(Zo,{className:"w-3.5 h-3.5"}),de?"Running...":"Run"]}):r.jsx("button",{onClick:()=>C(ee.fix.command),className:"px-3 py-2 bg-white/5 rounded hover:bg-white/10 text-xs whitespace-nowrap",children:"Copy"})]}),Y&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-red-400",children:[r.jsx(gf,{className:"w-3.5 h-3.5 flex-shrink-0"}),r.jsx("span",{children:Y})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/40",children:[((ie=ee.fix)==null?void 0:ie.effort)&&r.jsxs("span",{children:["Effort: ",ee.fix.effort]}),((T=ee.impact)==null?void 0:T.cost)&&r.jsxs("span",{children:["Saves: ",ee.impact.cost.toFixed(0),"/year"]}),((W=ee.impact)==null?void 0:W.bytes)&&r.jsxs("span",{children:["Size: ",n2(ee.impact.bytes)]})]})]})]})},ee.id)})})]},R)})]})]})}function n2(n){if(!n)return"0 B";const e=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,s)).toFixed(1))+" "+t[s]}function Rs({cells:n,expandedContent:e,rowClassName:t=""}){const[s,i]=M.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 cursor-pointer ${t} ${s?"bg-white/5":""}`,onClick:()=>i(!s),children:[r.jsx("td",{className:"px-4 py-4 w-10",children:s?r.jsx(xf,{className:"w-4 h-4 text-primary"}):r.jsx(Xl,{className:"w-4 h-4 text-white/40"})}),n.map((o,c)=>r.jsx("td",{className:"px-6 py-4 text-sm",children:o},c))]}),s&&r.jsx("tr",{className:"bg-[#0a0a0a] border-b-2 border-primary/30",children:r.jsx("td",{colSpan:n.length+1,className:"p-0",children:r.jsx("div",{className:"p-6 animate-in slide-in-from-top-2 duration-200",children:e})})})]})}const r2="modulepreload",i2=function(n){return"/"+n},Zx={},Vs=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(t.map(m=>{if(m=i2(m),m in Zx)return;Zx[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":r2,p||(y.as="script"),y.crossOrigin="",y.href=m,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((w,v)=>{y.addEventListener("load",w),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};let vu=[],ay=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?ay:vu).push(t=t+n[e])})();function l2(n){if(n<768)return!1;for(let e=0,t=vu.length;;){let s=e+t>>1;if(n<vu[s])t=s;else if(n>=ay[s])e=s+1;else return!0;if(e==t)return!1}}function eg(n){return n>=127462&&n<=127487}const tg=8205;function a2(n,e,t=!0,s=!0){return(t?oy:o2)(n,e,s)}function oy(n,e,t){if(e==n.length)return e;e&&cy(n.charCodeAt(e))&&dy(n.charCodeAt(e-1))&&e--;let s=zh(n,e);for(e+=sg(s);e<n.length;){let i=zh(n,e);if(s==tg||i==tg||t&&l2(i))e+=sg(i),s=i;else if(eg(i)){let o=0,c=e-2;for(;c>=0&&eg(zh(n,c));)o++,c-=2;if(o%2==0)break;e+=2}else break}return e}function o2(n,e,t){for(;e>0;){let s=oy(n,e-2,t);if(s<e)return s;e--}return 0}function zh(n,e){let t=n.charCodeAt(e);if(!dy(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return cy(s)?(t-55296<<10)+(s-56320)+65536:t}function cy(n){return n>=56320&&n<57344}function dy(n){return n>=55296&&n<56320}function sg(n){return n<65536?1:2}class Ue{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=Mi(this,e,t);let i=[];return this.decompose(0,e,i,2),s.length&&s.decompose(0,s.length,i,3),this.decompose(t,this.length,i,1),hn.from(i,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Mi(this,e,t);let s=[];return this.decompose(e,t,s,0),hn.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),i=new Ol(this),o=new Ol(e);for(let c=t,d=t;;){if(i.next(c),o.next(c),c=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(d+=i.value.length,i.done||d>=s)return!0}}iter(e=1){return new Ol(this,e)}iterRange(e,t=this.length){return new hy(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;s=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new uy(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ue.empty:e.length<=32?new ut(e):hn.from(ut.split(e,[]))}}class ut extends Ue{constructor(e,t=c2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,i){for(let o=0;;o++){let c=this.text[o],d=i+c.length;if((t?s:d)>=e)return new d2(i,d,s,c);i=d+1,s++}}decompose(e,t,s,i){let o=e<=0&&t>=this.length?this:new ut(ng(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let c=s.pop(),d=_o(o.text,c.text.slice(),0,o.length);if(d.length<=32)s.push(new ut(d,c.length+o.length));else{let u=d.length>>1;s.push(new ut(d.slice(0,u)),new ut(d.slice(u)))}}else s.push(o)}replace(e,t,s){if(!(s instanceof ut))return super.replace(e,t,s);[e,t]=Mi(this,e,t);let i=_o(this.text,_o(s.text,ng(this.text,0,e)),t),o=this.length+s.length-(t-e);return i.length<=32?new ut(i,o):hn.from(ut.split(i,[]),o)}sliceString(e,t=this.length,s=`
`){[e,t]=Mi(this,e,t);let i="";for(let o=0,c=0;o<=t&&c<this.text.length;c++){let d=this.text[c],u=o+d.length;o>e&&c&&(i+=s),e<u&&t>o&&(i+=d.slice(Math.max(0,e-o),t-o)),o=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],i=-1;for(let o of e)s.push(o),i+=o.length+1,s.length==32&&(t.push(new ut(s,i)),s=[],i=-1);return i>-1&&t.push(new ut(s,i)),t}}class hn extends Ue{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,i){for(let o=0;;o++){let c=this.children[o],d=i+c.length,u=s+c.lines-1;if((t?u:d)>=e)return c.lineInner(e,t,s,i);i=d+1,s=u+1}}decompose(e,t,s,i){for(let o=0,c=0;c<=t&&o<this.children.length;o++){let d=this.children[o],u=c+d.length;if(e<=u&&t>=c){let m=i&((c<=e?1:0)|(u>=t?2:0));c>=e&&u<=t&&!m?s.push(d):d.decompose(e-c,t-c,s,m)}c=u+1}}replace(e,t,s){if([e,t]=Mi(this,e,t),s.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let c=this.children[i],d=o+c.length;if(e>=o&&t<=d){let u=c.replace(e-o,t-o,s),m=this.lines-c.lines+u.lines;if(u.lines<m>>4&&u.lines>m>>6){let p=this.children.slice();return p[i]=u,new hn(p,this.length-(t-e)+s.length)}return super.replace(o,d,u)}o=d+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=Mi(this,e,t);let i="";for(let o=0,c=0;o<this.children.length&&c<=t;o++){let d=this.children[o],u=c+d.length;c>e&&o&&(i+=s),e<u&&t>c&&(i+=d.sliceString(e-c,t-c,s)),c=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof hn))return 0;let s=0,[i,o,c,d]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==c||o==d)return s;let u=this.children[i],m=e.children[o];if(u!=m)return s+u.scanIdentical(m,t);s+=u.length+1}}static from(e,t=e.reduce((s,i)=>s+i.length+1,-1)){let s=0;for(let w of e)s+=w.lines;if(s<32){let w=[];for(let v of e)v.flatten(w);return new ut(w,t)}let i=Math.max(32,s>>5),o=i<<1,c=i>>1,d=[],u=0,m=-1,p=[];function g(w){let v;if(w.lines>o&&w instanceof hn)for(let j of w.children)g(j);else w.lines>c&&(u>c||!u)?(y(),d.push(w)):w instanceof ut&&u&&(v=p[p.length-1])instanceof ut&&w.lines+v.lines<=32?(u+=w.lines,m+=w.length+1,p[p.length-1]=new ut(v.text.concat(w.text),v.length+1+w.length)):(u+w.lines>i&&y(),u+=w.lines,m+=w.length+1,p.push(w))}function y(){u!=0&&(d.push(p.length==1?p[0]:hn.from(p,m)),m=-1,u=p.length=0)}for(let w of e)g(w);return y(),d.length==1?d[0]:new hn(d,t)}}Ue.empty=new ut([""],0);function c2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function _o(n,e,t=0,s=1e9){for(let i=0,o=0,c=!0;o<n.length&&i<=s;o++){let d=n[o],u=i+d.length;u>=t&&(u>s&&(d=d.slice(0,s-i)),i<t&&(d=d.slice(t-i)),c?(e[e.length-1]+=d,c=!1):e.push(d)),i=u+1}return e}function ng(n,e,t){return _o(n,[""],e,t)}class Ol{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ut?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,i=this.nodes[s],o=this.offsets[s],c=o>>1,d=i instanceof ut?i.text.length:i.children.length;if(c==(t>0?d:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ut){let u=i.text[c+(t<0?-1:0)];if(this.offsets[s]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[c+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof ut?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class hy{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new Ol(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=s?i:t<0?i.slice(i.length-s):i.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class uy{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ue.prototype[Symbol.iterator]=function(){return this.iter()},Ol.prototype[Symbol.iterator]=hy.prototype[Symbol.iterator]=uy.prototype[Symbol.iterator]=function(){return this});class d2{constructor(e,t,s,i){this.from=e,this.to=t,this.number=s,this.text=i}get length(){return this.to-this.from}}function Mi(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Nt(n,e,t=!0,s=!0){return a2(n,e,t,s)}function h2(n){return n>=56320&&n<57344}function u2(n){return n>=55296&&n<56320}function fy(n,e){let t=n.charCodeAt(e);if(!u2(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return h2(s)?(t-55296<<10)+(s-56320)+65536:t}function f2(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function my(n){return n<65536?1:2}const ju=/\r\n?|\n/;var ws=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(ws||(ws={}));class yn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,i=0;t<this.sections.length;){let o=this.sections[t++],c=this.sections[t++];c<0?(e(s,i,o),i+=o):i+=c,s+=o}}iterChangedRanges(e,t=!1){Nu(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];i<0?e.push(s,i):e.push(i,s)}return new yn(e)}composeDesc(e){return this.empty?e:e.empty?this:py(this,e)}mapDesc(e,t=!1){return e.empty?this:ku(this,e,t)}mapPos(e,t=-1,s=ws.Simple){let i=0,o=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],u=this.sections[c++],m=i+d;if(u<0){if(m>e)return o+(e-i);o+=d}else{if(s!=ws.Simple&&m>=e&&(s==ws.TrackDel&&i<e&&m>e||s==ws.TrackBefore&&i<e||s==ws.TrackAfter&&m>e))return null;if(m>e||m==e&&t<0&&!d)return e==i||t<0?o:o+u;o+=u}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let s=0,i=0;s<this.sections.length&&i<=t;){let o=this.sections[s++],c=this.sections[s++],d=i+o;if(c>=0&&i<=t&&d>=e)return i<e&&d>t?"cover":!0;i=d}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+s+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yn(e)}static create(e){return new yn(e)}}class jt extends yn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Nu(this,(t,s,i,o,c)=>e=e.replace(i,i+(s-t),c),!1),e}mapDesc(e,t=!1){return ku(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let i=0,o=0;i<t.length;i+=2){let c=t[i],d=t[i+1];if(d>=0){t[i]=d,t[i+1]=c;let u=i>>1;for(;s.length<u;)s.push(Ue.empty);s.push(c?e.slice(o,o+c):Ue.empty)}o+=c}return new jt(t,s)}compose(e){return this.empty?e:e.empty?this:py(this,e,!0)}map(e,t=!1){return e.empty?this:ku(this,e,t,!0)}iterChanges(e,t=!1){Nu(this,e,t)}get desc(){return yn.create(this.sections)}filter(e){let t=[],s=[],i=[],o=new Wl(this);e:for(let c=0,d=0;;){let u=c==e.length?1e9:e[c++];for(;d<u||d==u&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,u-d);zt(i,p,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;zt(t,p,g),g>0&&ir(s,t,o.text),o.forward(p),d+=p}let m=e[c++];for(;d<m;){if(o.done)break e;let p=Math.min(o.len,m-d);zt(t,p,-1),zt(i,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),d+=p}}return{changes:new jt(t,s),filtered:yn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],i=this.sections[t+1];i<0?e.push(s):i==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let i=[],o=[],c=0,d=null;function u(p=!1){if(!p&&!i.length)return;c<t&&zt(i,t-c,-1);let g=new jt(i,o);d=d?d.compose(g.map(d)):g,i=[],o=[],c=0}function m(p){if(Array.isArray(p))for(let g of p)m(g);else if(p instanceof jt){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);u(),d=d?d.compose(p.map(d)):p}else{let{from:g,to:y=g,insert:w}=p;if(g>y||g<0||y>t)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${t})`);let v=w?typeof w=="string"?Ue.of(w.split(s||ju)):w:Ue.empty,j=v.length;if(g==y&&j==0)return;g<c&&u(),g>c&&zt(i,g-c,-1),zt(i,y-g,j),ir(o,i,v),c=y}}return m(e),u(!d),d}static empty(e){return new jt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;s.length<i;)s.push(Ue.empty);s[i]=Ue.of(o.slice(1)),t.push(o[0],s[i].length)}}}return new jt(t,s)}static createSet(e,t){return new jt(e,t)}}function zt(n,e,t,s=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:s?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function ir(n,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<s;)n.push(Ue.empty);n.push(t)}}function Nu(n,e,t){let s=n.inserted;for(let i=0,o=0,c=0;c<n.sections.length;){let d=n.sections[c++],u=n.sections[c++];if(u<0)i+=d,o+=d;else{let m=i,p=o,g=Ue.empty;for(;m+=d,p+=u,u&&s&&(g=g.append(s[c-2>>1])),!(t||c==n.sections.length||n.sections[c+1]<0);)d=n.sections[c++],u=n.sections[c++];e(i,m,o,p,g),i=m,o=p}}}function ku(n,e,t,s=!1){let i=[],o=s?[]:null,c=new Wl(n),d=new Wl(e);for(let u=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let m=Math.min(c.len,d.len);zt(i,m,-1),c.forward(m),d.forward(m)}else if(d.ins>=0&&(c.ins<0||u==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!t))){let m=d.len;for(zt(i,d.ins,-1);m;){let p=Math.min(c.len,m);c.ins>=0&&u<c.i&&c.len<=p&&(zt(i,0,c.ins),o&&ir(o,i,c.text),u=c.i),c.forward(p),m-=p}d.next()}else if(c.ins>=0){let m=0,p=c.len;for(;p;)if(d.ins==-1){let g=Math.min(p,d.len);m+=g,p-=g,d.forward(g)}else if(d.ins==0&&d.len<p)p-=d.len,d.next();else break;zt(i,m,u<c.i?c.ins:0),o&&u<c.i&&ir(o,i,c.text),u=c.i,c.forward(c.len-p)}else{if(c.done&&d.done)return o?jt.createSet(i,o):yn.create(i);throw new Error("Mismatched change set lengths")}}}function py(n,e,t=!1){let s=[],i=t?[]:null,o=new Wl(n),c=new Wl(e);for(let d=!1;;){if(o.done&&c.done)return i?jt.createSet(s,i):yn.create(s);if(o.ins==0)zt(s,o.len,0,d),o.next();else if(c.len==0&&!c.done)zt(s,0,c.ins,d),i&&ir(i,s,c.text),c.next();else{if(o.done||c.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,c.len),m=s.length;if(o.ins==-1){let p=c.ins==-1?-1:c.off?0:c.ins;zt(s,u,p,d),i&&p&&ir(i,s,c.text)}else c.ins==-1?(zt(s,o.off?0:o.len,u,d),i&&ir(i,s,o.textBit(u))):(zt(s,o.off?0:o.len,c.off?0:c.ins,d),i&&!c.off&&ir(i,s,c.text));d=(o.ins>u||c.ins>=0&&c.len>u)&&(d||s.length>m),o.forward2(u),c.forward(u)}}}}class Wl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ue.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?Ue.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Tr{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,i;return this.empty?s=i=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),s==this.from&&i==this.to?this:new Tr(s,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return te.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return te.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return te.range(e.anchor,e.head)}static create(e,t,s){return new Tr(e,t,s)}}class te{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:te.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new te([this.main],0)}addRange(e,t=!0){return te.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,te.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new te(e.ranges.map(t=>Tr.fromJSON(t)),e.main)}static single(e,t=e){return new te([te.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=s:o.from<s)return te.normalized(e.slice(),t);s=o.to}return new te(e,t)}static cursor(e,t=0,s,i){return Tr.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(i??16777215)<<6)}static range(e,t,s,i){let o=(s??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Tr.create(t,e,48|o):Tr.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let s=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(s);for(let i=1;i<e.length;i++){let o=e[i],c=e[i-1];if(o.empty?o.from<=c.to:o.from<c.to){let d=c.from,u=Math.max(o.to,c.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?te.range(u,d):te.range(d,u))}}return new te(e,t)}}function xy(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let bf=0;class ye{constructor(e,t,s,i,o){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=i,this.id=bf++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ye(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:wf),!!e.static,e.enables)}of(e){return new Wo([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wo(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wo(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function wf(n,e){return n==e||n.length==e.length&&n.every((t,s)=>t===e[s])}class Wo{constructor(e,t,s,i){this.dependencies=e,this.facet=t,this.type=s,this.value=i,this.id=bf++}dynamicSlot(e){var t;let s=this.value,i=this.facet.compareInput,o=this.id,c=e[o]>>1,d=this.type==2,u=!1,m=!1,p=[];for(let g of this.dependencies)g=="doc"?u=!0:g=="selection"?m=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[c]=s(g),1},update(g,y){if(u&&y.docChanged||m&&(y.docChanged||y.selection)||Su(g,p)){let w=s(g);if(d?!rg(w,g.values[c],i):!i(w,g.values[c]))return g.values[c]=w,1}return 0},reconfigure:(g,y)=>{let w,v=y.config.address[o];if(v!=null){let j=nc(y,v);if(this.dependencies.every(S=>S instanceof ye?y.facet(S)===g.facet(S):S instanceof Xs?y.field(S,!1)==g.field(S,!1):!0)||(d?rg(w=s(g),j,i):i(w=s(g),j)))return g.values[c]=j,0}else w=s(g);return g.values[c]=w,1}}}}function rg(n,e,t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!t(n[s],e[s]))return!1;return!0}function Su(n,e){let t=!1;for(let s of e)Fl(n,s)&1&&(t=!0);return t}function m2(n,e,t){let s=t.map(u=>n[u.id]),i=t.map(u=>u.type),o=s.filter(u=>!(u&1)),c=n[e.id]>>1;function d(u){let m=[];for(let p=0;p<s.length;p++){let g=nc(u,s[p]);if(i[p]==2)for(let y of g)m.push(y);else m.push(g)}return e.combine(m)}return{create(u){for(let m of s)Fl(u,m);return u.values[c]=d(u),1},update(u,m){if(!Su(u,o))return 0;let p=d(u);return e.compare(p,u.values[c])?0:(u.values[c]=p,1)},reconfigure(u,m){let p=Su(u,s),g=m.config.facets[e.id],y=m.facet(e);if(g&&!p&&wf(t,g))return u.values[c]=y,0;let w=d(u);return e.compare(w,y)?(u.values[c]=y,0):(u.values[c]=w,1)}}}const go=ye.define({static:!0});class Xs{constructor(e,t,s,i,o){this.id=e,this.createF=t,this.updateF=s,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Xs(bf++,e.create,e.update,e.compare||((s,i)=>s===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(go).find(s=>s.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,i)=>{let o=s.values[t],c=this.updateF(o,i);return this.compareF(o,c)?0:(s.values[t]=c,1)},reconfigure:(s,i)=>{let o=s.facet(go),c=i.facet(go),d;return(d=o.find(u=>u.field==this))&&d!=c.find(u=>u.field==this)?(s.values[t]=d.create(s),1):i.config.address[this.id]!=null?(s.values[t]=i.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,go.of({field:this,create:e})]}get extension(){return this}}const Pr={lowest:4,low:3,default:2,high:1,highest:0};function kl(n){return e=>new gy(e,n)}const Ec={highest:kl(Pr.highest),high:kl(Pr.high),default:kl(Pr.default),low:kl(Pr.low),lowest:kl(Pr.lowest)};class gy{constructor(e,t){this.inner=e,this.prec=t}}class Lc{of(e){return new Cu(this,e)}reconfigure(e){return Lc.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Cu{constructor(e,t){this.compartment=e,this.inner=t}}class sc{constructor(e,t,s,i,o,c){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=i,this.staticValues=o,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let i=[],o=Object.create(null),c=new Map;for(let y of p2(e,t,c))y instanceof Xs?i.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let d=Object.create(null),u=[],m=[];for(let y of i)d[y.id]=m.length<<1,m.push(w=>y.slot(w));let p=s==null?void 0:s.config.facets;for(let y in o){let w=o[y],v=w[0].facet,j=p&&p[y]||[];if(w.every(S=>S.type==0))if(d[v.id]=u.length<<1|1,wf(j,w))u.push(s.facet(v));else{let S=v.combine(w.map(k=>k.value));u.push(s&&v.compare(S,s.facet(v))?s.facet(v):S)}else{for(let S of w)S.type==0?(d[S.id]=u.length<<1|1,u.push(S.value)):(d[S.id]=m.length<<1,m.push(k=>S.dynamicSlot(k)));d[v.id]=m.length<<1,m.push(S=>m2(S,v,w))}}let g=m.map(y=>y(d));return new sc(e,c,g,d,u,o)}}function p2(n,e,t){let s=[[],[],[],[],[]],i=new Map;function o(c,d){let u=i.get(c);if(u!=null){if(u<=d)return;let m=s[u].indexOf(c);m>-1&&s[u].splice(m,1),c instanceof Cu&&t.delete(c.compartment)}if(i.set(c,d),Array.isArray(c))for(let m of c)o(m,d);else if(c instanceof Cu){if(t.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(c.compartment)||c.inner;t.set(c.compartment,m),o(m,d)}else if(c instanceof gy)o(c.inner,c.prec);else if(c instanceof Xs)s[d].push(c),c.provides&&o(c.provides,d);else if(c instanceof Wo)s[d].push(c),c.facet.extensions&&o(c.facet.extensions,Pr.default);else{let m=c.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(m,d)}}return o(n,Pr.default),s.reduce((c,d)=>c.concat(d))}function Fl(n,e){if(e&1)return 2;let t=e>>1,s=n.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function nc(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const yy=ye.define(),Mu=ye.define({combine:n=>n.some(e=>e),static:!0}),by=ye.define({combine:n=>n.length?n[0]:void 0,static:!0}),wy=ye.define(),vy=ye.define(),jy=ye.define(),Ny=ye.define({combine:n=>n.length?n[0]:!1});class fr{constructor(e,t){this.type=e,this.value=t}static define(){return new x2}}class x2{of(e){return new fr(this,e)}}class g2{constructor(e){this.map=e}of(e){return new Qe(this,e)}}class Qe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Qe(this.type,t)}is(e){return this.type==e}static define(e={}){return new g2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let i of e){let o=i.map(t);o&&s.push(o)}return s}}Qe.reconfigure=Qe.define();Qe.appendConfig=Qe.define();class kt{constructor(e,t,s,i,o,c){this.startState=e,this.changes=t,this.selection=s,this.effects=i,this.annotations=o,this.scrollIntoView=c,this._doc=null,this._state=null,s&&xy(s,t.newLength),o.some(d=>d.type==kt.time)||(this.annotations=o.concat(kt.time.of(Date.now())))}static create(e,t,s,i,o,c){return new kt(e,t,s,i,o,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(kt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}kt.time=fr.define();kt.userEvent=fr.define();kt.addToHistory=fr.define();kt.remote=fr.define();function y2(n,e){let t=[];for(let s=0,i=0;;){let o,c;if(s<n.length&&(i==e.length||e[i]>=n[s]))o=n[s++],c=n[s++];else if(i<e.length)o=e[i++],c=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,c):t[t.length-1]<c&&(t[t.length-1]=c)}}function ky(n,e,t){var s;let i,o,c;return t?(i=e.changes,o=jt.empty(e.changes.length),c=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),c=n.changes.compose(i)),{changes:c,selection:e.selection?e.selection.map(o):(s=n.selection)===null||s===void 0?void 0:s.map(i),effects:Qe.mapEffects(n.effects,i).concat(Qe.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Au(n,e,t){let s=e.selection,i=vi(e.annotations);return e.userEvent&&(i=i.concat(kt.userEvent.of(e.userEvent))),{changes:e.changes instanceof jt?e.changes:jt.of(e.changes||[],t,n.facet(by)),selection:s&&(s instanceof te?s:te.single(s.anchor,s.head)),effects:vi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Sy(n,e,t){let s=Au(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let c=!!e[o].sequential;s=ky(s,Au(n,e[o],c?s.changes.newLength:n.doc.length),c)}let i=kt.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return w2(t?b2(i):i)}function b2(n){let e=n.startState,t=!0;for(let i of e.facet(wy)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:y2(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=jt.empty(e.doc.length);else{let c=n.changes.filter(t);i=c.changes,o=c.filtered.mapDesc(c.changes).invertedDesc}n=kt.create(e,i,n.selection&&n.selection.map(o),Qe.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let s=e.facet(vy);for(let i=s.length-1;i>=0;i--){let o=s[i](n);o instanceof kt?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof kt?n=o[0]:n=Sy(e,vi(o),!1)}return n}function w2(n){let e=n.startState,t=e.facet(jy),s=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(s=ky(s,Au(e,o,n.changes.newLength),!0))}return s==n?n:kt.create(e,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const v2=[];function vi(n){return n==null?v2:Array.isArray(n)?n:[n]}var ft=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ft||(ft={}));const j2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Eu;try{Eu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function N2(n){if(Eu)return Eu.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||j2.test(t)))return!0}return!1}function k2(n){return e=>{if(!/\S/.test(e))return ft.Space;if(N2(e))return ft.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ft.Word;return ft.Other}}class Ve{constructor(e,t,s,i,o,c){this.config=e,this.doc=t,this.selection=s,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,c&&(c._state=this);for(let d=0;d<this.config.dynamicSlots.length;d++)Fl(this,d<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return Fl(this,s),nc(this,s)}update(...e){return Sy(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:i}=t;for(let d of e.effects)d.is(Lc.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,m)=>i.set(m,u)),t=null),i.set(d.value.compartment,d.value.extension)):d.is(Qe.reconfigure)?(t=null,s=d.value):d.is(Qe.appendConfig)&&(t=null,s=vi(s).concat(d.value));let o;t?o=e.startState.values.slice():(t=sc.resolve(s,i,this),o=new Ve(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,m)=>m.reconfigure(u,this),null).values);let c=e.startState.facet(Mu)?e.newSelection:e.newSelection.asSingle();new Ve(t,e.newDoc,c,o,(d,u)=>u.update(d,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:te.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),i=this.changes(s.changes),o=[s.range],c=vi(s.effects);for(let d=1;d<t.ranges.length;d++){let u=e(t.ranges[d]),m=this.changes(u.changes),p=m.map(i);for(let y=0;y<d;y++)o[y]=o[y].map(p);let g=i.mapDesc(m,!0);o.push(u.range.map(g)),i=i.compose(p),c=Qe.mapEffects(c,p).concat(Qe.mapEffects(vi(u.effects),g))}return{changes:i,selection:te.create(o,t.mainIndex),effects:c}}changes(e=[]){return e instanceof jt?e:jt.of(e,this.doc.length,this.facet(Ve.lineSeparator))}toText(e){return Ue.of(e.split(this.facet(Ve.lineSeparator)||ju))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Fl(this,t),nc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let i=e[s];i instanceof Xs&&this.config.address[i.id]!=null&&(t[s]=i.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(s){for(let o in s)if(Object.prototype.hasOwnProperty.call(e,o)){let c=s[o],d=e[o];i.push(c.init(u=>c.spec.fromJSON(d,u)))}}return Ve.create({doc:e.doc,selection:te.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=sc.resolve(e.extensions||[],new Map),s=e.doc instanceof Ue?e.doc:Ue.of((e.doc||"").split(t.staticFacet(Ve.lineSeparator)||ju)),i=e.selection?e.selection instanceof te?e.selection:te.single(e.selection.anchor,e.selection.head):te.single(0);return xy(i,s.length),t.staticFacet(Mu)||(i=i.asSingle()),new Ve(t,s,i,t.dynamicSlots.map(()=>null),(o,c)=>c.create(o),null)}get tabSize(){return this.facet(Ve.tabSize)}get lineBreak(){return this.facet(Ve.lineSeparator)||`
`}get readOnly(){return this.facet(Ny)}phrase(e,...t){for(let s of this.facet(Ve.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?s:t[o-1]})),e}languageDataAt(e,t,s=-1){let i=[];for(let o of this.facet(yy))for(let c of o(this,t,s))Object.prototype.hasOwnProperty.call(c,e)&&i.push(c[e]);return i}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return k2(t.length?t[0]:"")}wordAt(e){let{text:t,from:s,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),c=e-s,d=e-s;for(;c>0;){let u=Nt(t,c,!1);if(o(t.slice(u,c))!=ft.Word)break;c=u}for(;d<i;){let u=Nt(t,d);if(o(t.slice(d,u))!=ft.Word)break;d=u}return c==d?null:te.range(c+s,d+s)}}Ve.allowMultipleSelections=Mu;Ve.tabSize=ye.define({combine:n=>n.length?n[0]:4});Ve.lineSeparator=by;Ve.readOnly=Ny;Ve.phrases=ye.define({compare(n,e){let t=Object.keys(n),s=Object.keys(e);return t.length==s.length&&t.every(i=>n[i]==e[i])}});Ve.languageData=yy;Ve.changeFilter=wy;Ve.transactionFilter=vy;Ve.transactionExtender=jy;Lc.reconfigure=Qe.define();function ea(n,e,t={}){let s={};for(let i of n)for(let o of Object.keys(i)){let c=i[o],d=s[o];if(d===void 0)s[o]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(t,o))s[o]=t[o](d,c);else throw new Error("Config merge conflict for field "+o)}for(let i in e)s[i]===void 0&&(s[i]=e[i]);return s}class Br{eq(e){return this==e}range(e,t=e){return Lu.create(e,t,this)}}Br.prototype.startSide=Br.prototype.endSide=0;Br.prototype.point=!1;Br.prototype.mapMode=ws.TrackDel;function vf(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let Lu=class Cy{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new Cy(e,t,s)}};function Pu(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class jf{constructor(e,t,s,i){this.from=e,this.to=t,this.value=s,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,i=0){let o=s?this.to:this.from;for(let c=i,d=o.length;;){if(c==d)return c;let u=c+d>>1,m=o[u]-e||(s?this.value[u].endSide:this.value[u].startSide)-t;if(u==c)return m>=0?c:d;m>=0?d=u:c=u+1}}between(e,t,s,i){for(let o=this.findIndex(t,-1e9,!0),c=this.findIndex(s,1e9,!1,o);o<c;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let s=[],i=[],o=[],c=-1,d=-1;for(let u=0;u<this.value.length;u++){let m=this.value[u],p=this.from[u]+e,g=this.to[u]+e,y,w;if(p==g){let v=t.mapPos(p,m.startSide,m.mapMode);if(v==null||(y=w=v,m.startSide!=m.endSide&&(w=t.mapPos(p,m.endSide),w<y)))continue}else if(y=t.mapPos(p,m.startSide),w=t.mapPos(g,m.endSide),y>w||y==w&&m.startSide>0&&m.endSide<=0)continue;(w-y||m.endSide-m.startSide)<0||(c<0&&(c=y),m.point&&(d=Math.max(d,w-y)),s.push(m),i.push(y-c),o.push(w-c))}return{mapped:s.length?new jf(i,o,s,d):null,pos:c}}}class $e{constructor(e,t,s,i){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=i}static create(e,t,s,i){return new $e(e,t,s,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:i=0,filterTo:o=this.length}=e,c=e.filter;if(t.length==0&&!c)return this;if(s&&(t=t.slice().sort(Pu)),this.isEmpty)return t.length?$e.of(t):this;let d=new My(this,null,-1).goto(0),u=0,m=[],p=new Ai;for(;d.value||u<t.length;)if(u<t.length&&(d.from-t[u].from||d.startSide-t[u].value.startSide)>=0){let g=t[u++];p.addInner(g.from,g.to,g.value)||m.push(g)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(d.chunkIndex)<t[u].from)&&(!c||i>this.chunkEnd(d.chunkIndex)||o<this.chunkPos[d.chunkIndex])&&p.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||i>d.to||o<d.from||c(d.from,d.to,d.value))&&(p.addInner(d.from,d.to,d.value)||m.push(Lu.create(d.from,d.to,d.value))),d.next());return p.finishInner(this.nextLayer.isEmpty&&!m.length?$e.empty:this.nextLayer.update({add:m,filter:c,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],i=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],u=this.chunk[c],m=e.touchesRange(d,d+u.length);if(m===!1)i=Math.max(i,u.maxPoint),t.push(u),s.push(e.mapPos(d));else if(m===!0){let{mapped:p,pos:g}=u.map(d,e);p&&(i=Math.max(i,p.maxPoint),t.push(p),s.push(g))}}let o=this.nextLayer.map(e);return t.length==0?o:new $e(s,t,o||$e.empty,i)}between(e,t,s){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],c=this.chunk[i];if(t>=o&&e<=o+c.length&&c.between(o,e-o,t-o,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return Hl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Hl.from(e).goto(t)}static compare(e,t,s,i,o=-1){let c=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),d=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),u=ig(c,d,s),m=new Sl(c,u,o),p=new Sl(d,u,o);s.iterGaps((g,y,w)=>lg(m,g,p,y,w,i)),s.empty&&s.length==0&&lg(m,0,p,0,0,i)}static eq(e,t,s=0,i){i==null&&(i=999999999);let o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),c=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=c.length)return!1;if(!o.length)return!0;let d=ig(o,c),u=new Sl(o,d,0).goto(s),m=new Sl(c,d,0).goto(s);for(;;){if(u.to!=m.to||!Tu(u.active,m.active)||u.point&&(!m.point||!vf(u.point,m.point)))return!1;if(u.to>i)return!0;u.next(),m.next()}}static spans(e,t,s,i,o=-1){let c=new Sl(e,null,o).goto(t),d=t,u=c.openStart;for(;;){let m=Math.min(c.to,s);if(c.point){let p=c.activeForPoint(c.to),g=c.pointFrom<t?p.length+1:c.point.startSide<0?p.length:Math.min(p.length,u);i.point(d,m,c.point,p,g,c.pointRank),u=Math.min(c.openEnd(m),p.length)}else m>d&&(i.span(d,m,c.active,u),u=c.openEnd(m));if(c.to>s)return u+(c.point&&c.to>s?1:0);d=c.to,c.next()}}static of(e,t=!1){let s=new Ai;for(let i of e instanceof Lu?[e]:t?S2(e):e)s.add(i.from,i.to,i.value);return s.finish()}static join(e){if(!e.length)return $e.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let i=e[s];i!=$e.empty;i=i.nextLayer)t=new $e(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}$e.empty=new $e([],[],null,-1);function S2(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let s=n[t];if(Pu(e,s)>0)return n.slice().sort(Pu);e=s}return n}$e.empty.nextLayer=$e.empty;class Ai{finishChunk(e){this.chunks.push(new jf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new Ai)).add(e,t,s)}addInner(e,t,s){let i=e-this.lastTo||s.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner($e.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=$e.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ig(n,e,t){let s=new Map;for(let o of n)for(let c=0;c<o.chunk.length;c++)o.chunk[c].maxPoint<=0&&s.set(o.chunk[c],o.chunkPos[c]);let i=new Set;for(let o of e)for(let c=0;c<o.chunk.length;c++){let d=s.get(o.chunk[c]);d!=null&&(t?t.mapPos(d):d)==o.chunkPos[c]&&!(t!=null&&t.touchesRange(d,d+o.chunk[c].length))&&i.add(o.chunk[c])}return i}class My{constructor(e,t,s,i=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Hl{constructor(e){this.heap=e}static from(e,t=null,s=-1){let i=[];for(let o=0;o<e.length;o++)for(let c=e[o];!c.isEmpty;c=c.nextLayer)c.maxPoint>=s&&i.push(new My(c,t,s,o));return i.length==1?i[0]:new Hl(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)$h(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)$h(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$h(this.heap,0)}}}function $h(n,e){for(let t=n[e];;){let s=(e<<1)+1;if(s>=n.length)break;let i=n[s];if(s+1<n.length&&i.compare(n[s+1])>=0&&(i=n[s+1],s++),t.compare(i)<0)break;n[s]=t,n[e]=i,e=s}}class Sl{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hl.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){yo(this.active,e),yo(this.activeTo,e),yo(this.activeRank,e),this.minActive=ag(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||i-this.activeTo[t])>0;)t++;bo(this.active,t,s),bo(this.activeTo,t,i),bo(this.activeRank,t,o),e&&bo(e,t,this.cursor.from),this.minActive=ag(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),s&&yo(s,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let i=s.length-1;i>=0&&s[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function lg(n,e,t,s,i,o){n.goto(e),t.goto(s);let c=s+i,d=s,u=s-e,m=!!o.boundChange;for(let p=!1;;){let g=n.to+u-t.to,y=g||n.endSide-t.endSide,w=y<0?n.to+u:t.to,v=Math.min(w,c);if(n.point||t.point?(n.point&&t.point&&vf(n.point,t.point)&&Tu(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(d,v,n.point,t.point),p=!1):(p&&o.boundChange(d),v>d&&!Tu(n.active,t.active)&&o.compareRange(d,v,n.active,t.active),m&&v<c&&(g||n.openEnd(w)!=t.openEnd(w))&&(p=!0)),w>c)break;d=w,y<=0&&n.next(),y>=0&&t.next()}}function Tu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!vf(n[t],e[t]))return!1;return!0}function yo(n,e){for(let t=e,s=n.length-1;t<s;t++)n[t]=n[t+1];n.pop()}function bo(n,e,t){for(let s=n.length-1;s>=e;s--)n[s+1]=n[s];n[e]=t}function ag(n,e){let t=-1,s=1e9;for(let i=0;i<e.length;i++)(e[i]-s||n[i].endSide-n[t].endSide)<0&&(t=i,s=e[i]);return t}function Pc(n,e,t=n.length){let s=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(s+=e-s%e,i++):(s++,i=Nt(n,i));return s}function C2(n,e,t,s){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=Nt(n,i)}return n.length}const Du="",og=typeof Symbol>"u"?"__"+Du:Symbol.for(Du),Ru=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class cr{constructor(e,t){this.rules=[];let{finish:s}=t||{};function i(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function o(c,d,u,m){let p=[],g=/^@(\w+)\b/.exec(c[0]),y=g&&g[1]=="keyframes";if(g&&d==null)return u.push(c[0]+";");for(let w in d){let v=d[w];if(/&/.test(w))o(w.split(/,\s*/).map(j=>c.map(S=>j.replace(/&/,S))).reduce((j,S)=>j.concat(S)),v,u);else if(v&&typeof v=="object"){if(!g)throw new RangeError("The value of a property ("+w+") should be a primitive value.");o(i(w),v,p,y)}else v!=null&&p.push(w.replace(/_.*/,"").replace(/[A-Z]/g,j=>"-"+j.toLowerCase())+": "+v+";")}(p.length||y)&&u.push((s&&!g&&!m?c.map(s):c).join(", ")+" {"+p.join(" ")+"}")}for(let c in e)o(i(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cg[og]||1;return cg[og]=e+1,Du+e.toString(36)}static mount(e,t,s){let i=e[Ru],o=s&&s.nonce;i?o&&i.setNonce(o):i=new M2(e,o),i.mount(Array.isArray(t)?t:[t],e)}}let dg=new Map;class M2{constructor(e,t){let s=e.ownerDocument||e,i=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=dg.get(s);if(o)return e[Ru]=o;this.sheet=new i.CSSStyleSheet,dg.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ru]=this}mount(e,t){let s=this.sheet,i=0,o=0;for(let c=0;c<e.length;c++){let d=e[c],u=this.modules.indexOf(d);if(u<o&&u>-1&&(this.modules.splice(u,1),o--,u=-1),u==-1){if(this.modules.splice(o++,0,d),s)for(let m=0;m<d.rules.length;m++)s.insertRule(d.rules[m],i++)}else{for(;o<u;)i+=this.modules[o++].rules.length;i+=d.rules.length,o++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c;let d=t.head||t;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var dr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},A2=typeof navigator<"u"&&/Mac/.test(navigator.platform),E2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Rt=0;Rt<10;Rt++)dr[48+Rt]=dr[96+Rt]=String(Rt);for(var Rt=1;Rt<=24;Rt++)dr[Rt+111]="F"+Rt;for(var Rt=65;Rt<=90;Rt++)dr[Rt]=String.fromCharCode(Rt+32),Vl[Rt]=String.fromCharCode(Rt);for(var _h in dr)Vl.hasOwnProperty(_h)||(Vl[_h]=dr[_h]);function L2(n){var e=A2&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||E2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Vl:dr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Et(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=t[s];typeof i=="string"?n.setAttribute(s,i):i!=null&&(n[s]=i)}e++}for(;e<arguments.length;e++)Ay(n,arguments[e]);return n}function Ay(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Ay(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Yt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ou=typeof document<"u"?document:{documentElement:{style:{}}};const Fu=/Edge\/(\d+)/.exec(Yt.userAgent),Ey=/MSIE \d/.test(Yt.userAgent),Bu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yt.userAgent),Tc=!!(Ey||Bu||Fu),hg=!Tc&&/gecko\/(\d+)/i.test(Yt.userAgent),Wh=!Tc&&/Chrome\/(\d+)/.exec(Yt.userAgent),P2="webkitFontSmoothing"in Ou.documentElement.style,Iu=!Tc&&/Apple Computer/.test(Yt.vendor),ug=Iu&&(/Mobile\/\w+/.test(Yt.userAgent)||Yt.maxTouchPoints>2);var me={mac:ug||/Mac/.test(Yt.platform),windows:/Win/.test(Yt.platform),linux:/Linux|X11/.test(Yt.platform),ie:Tc,ie_version:Ey?Ou.documentMode||6:Bu?+Bu[1]:Fu?+Fu[1]:0,gecko:hg,gecko_version:hg?+(/Firefox\/(\d+)/.exec(Yt.userAgent)||[0,0])[1]:0,chrome:!!Wh,chrome_version:Wh?+Wh[1]:0,ios:ug,android:/Android\b/.test(Yt.userAgent),webkit_version:P2?+(/\bAppleWebKit\/(\d+)/.exec(Yt.userAgent)||[0,0])[1]:0,safari:Iu,safari_version:Iu?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Yt.userAgent)||[0,0])[1]:0,tabSize:Ou.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Nf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const rc=Object.create(null);function kf(n,e,t){if(n==e)return!0;n||(n=rc),e||(e=rc);let s=Object.keys(n),i=Object.keys(e);if(s.length-0!=i.length-0)return!1;for(let o of s)if(o!=t&&(i.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function T2(n,e){for(let t=n.attributes.length-1;t>=0;t--){let s=n.attributes[t].name;e[s]==null&&n.removeAttribute(s)}for(let t in e){let s=e[t];t=="style"?n.style.cssText=s:n.getAttribute(t)!=s&&n.setAttribute(t,s)}}function fg(n,e,t){let s=!1;if(e)for(let i in e)t&&i in t||(s=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(s=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return s}function D2(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let s=n.attributes[t];e[s.name]=s.value}return e}class Dc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var cs=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(cs||(cs={}));class Oe extends Br{constructor(e,t,s,i){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ta(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ir(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,i;if(e.isBlockGap)s=-5e8,i=4e8;else{let{start:o,end:c}=Ly(e,t);s=(o?t?-3e8:-1:5e8)-1,i=(c?t?2e8:1:-6e8)+1}return new Ir(e,s,i,t,e.widget||null,!0)}static line(e){return new sa(e)}static set(e,t=!1){return $e.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Oe.none=$e.empty;class ta extends Oe{constructor(e){let{start:t,end:s}=Ly(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Nf(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||rc}eq(e){return this==e||e instanceof ta&&this.tagName==e.tagName&&kf(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ta.prototype.point=!1;class sa extends Oe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof sa&&this.spec.class==e.spec.class&&kf(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}sa.prototype.mapMode=ws.TrackBefore;sa.prototype.point=!0;class Ir extends Oe{constructor(e,t,s,i,o,c){super(t,s,o,e),this.block=i,this.isReplace=c,this.mapMode=i?t<=0?ws.TrackBefore:ws.TrackAfter:ws.TrackDel}get type(){return this.startSide!=this.endSide?cs.WidgetRange:this.startSide<=0?cs.WidgetBefore:cs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Ir&&R2(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ir.prototype.point=!0;function Ly(n,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=n;return t==null&&(t=n.inclusive),s==null&&(s=n.inclusive),{start:t??e,end:s??e}}function R2(n,e){return n==e||!!(n&&e&&n.compare(e))}function ji(n,e,t,s=0){let i=t.length-1;i>=0&&t[i]+s>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ul extends Br{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Ul&&this.tagName==e.tagName&&kf(this.attributes,e.attributes)}static create(e){return new Ul(e.tagName,e.attributes||rc)}static set(e,t=!1){return $e.of(e,t)}}Ul.prototype.startSide=Ul.prototype.endSide=-1;function Ei(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function zu(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Bl(n,e){if(!e.anchorNode)return!1;try{return zu(n,e.anchorNode)}catch{return!1}}function Ho(n){return n.nodeType==3?ql(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Il(n,e,t,s){return t?mg(n,e,t,s,-1)||mg(n,e,t,s,1):!1}function hr(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function ic(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function mg(n,e,t,s,i){for(;;){if(n==t&&e==s)return!0;if(e==(i<0?0:Rn(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=hr(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Rn(n):0}else return!1}}function Rn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function lc(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function O2(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Py(n,e){let t=e.width/n.offsetWidth,s=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-n.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function F2(n,e,t,s,i,o,c,d){let u=n.ownerDocument,m=u.defaultView||window;for(let p=n,g=!1;p&&!g;)if(p.nodeType==1){let y,w=p==u.body,v=1,j=1;if(w)y=O2(m);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let C=p.getBoundingClientRect();({scaleX:v,scaleY:j}=Py(p,C)),y={left:C.left,right:C.left+p.clientWidth*v,top:C.top,bottom:C.top+p.clientHeight*j}}let S=0,k=0;if(i=="nearest")e.top<y.top?(k=e.top-(y.top+c),t>0&&e.bottom>y.bottom+k&&(k=e.bottom-y.bottom+c)):e.bottom>y.bottom&&(k=e.bottom-y.bottom+c,t<0&&e.top-k<y.top&&(k=e.top-(y.top+c)));else{let C=e.bottom-e.top,D=y.bottom-y.top;k=(i=="center"&&C<=D?e.top+C/2-D/2:i=="start"||i=="center"&&t<0?e.top-c:e.bottom-D+c)-y.top}if(s=="nearest"?e.left<y.left?(S=e.left-(y.left+o),t>0&&e.right>y.right+S&&(S=e.right-y.right+o)):e.right>y.right&&(S=e.right-y.right+o,t<0&&e.left<y.left+S&&(S=e.left-(y.left+o))):S=(s=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:s=="start"==d?e.left-o:e.right-(y.right-y.left)+o)-y.left,S||k)if(w)m.scrollBy(S,k);else{let C=0,D=0;if(k){let E=p.scrollTop;p.scrollTop+=k/j,D=(p.scrollTop-E)*j}if(S){let E=p.scrollLeft;p.scrollLeft+=S/v,C=(p.scrollLeft-E)*v}e={left:e.left-C,top:e.top-D,right:e.right-C,bottom:e.bottom-D},C&&Math.abs(C-S)<1&&(s="nearest"),D&&Math.abs(D-k)<1&&(i="nearest")}if(w)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function B2(n){let e=n.ownerDocument,t,s;for(let i=n.parentNode;i&&!(i==e.body||t&&s);)if(i.nodeType==1)!s&&i.scrollHeight>i.clientHeight&&(s=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:s}}class I2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?Rn(t):0),s,Math.min(e.focusOffset,s?Rn(s):0))}set(e,t,s,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=i}}let Lr=null;me.safari&&me.safari_version>=26&&(Lr=!1);function Ty(n){if(n.setActive)return n.setActive();if(Lr)return n.focus(Lr);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Lr==null?{get preventScroll(){return Lr={preventScroll:!0},!0}}:void 0),!Lr){Lr=!1;for(let t=0;t<e.length;){let s=e[t++],i=e[t++],o=e[t++];s.scrollTop!=i&&(s.scrollTop=i),s.scrollLeft!=o&&(s.scrollLeft=o)}}}let pg;function ql(n,e,t=e){let s=pg||(pg=document.createRange());return s.setEnd(n,t),s.setStart(n,e),s}function Ni(n,e,t,s){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=s);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,n.dispatchEvent(o);let c=new KeyboardEvent("keyup",i);return c.synthetic=!0,n.dispatchEvent(c),o.defaultPrevented||c.defaultPrevented}function z2(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function $2(n,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,Rn(t));;)if(s){if(t.nodeType!=1)return!1;let i=t.childNodes[s-1];i.contentEditable=="false"?s--:(t=i,s=Rn(t))}else{if(t==n)return!0;s=hr(t),t=t.parentNode}}function Dy(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Ry(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=Rn(t)}else if(t.parentNode&&!ic(t))s=hr(t),t=t.parentNode;else return null}}function Oy(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!ic(t))s=hr(t)+1,t=t.parentNode;else return null}}class Ks{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new Ks(e.parentNode,hr(e),t)}static after(e,t){return new Ks(e.parentNode,hr(e)+1,t)}}var mt=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(mt||(mt={}));const zr=mt.LTR,Sf=mt.RTL;function Fy(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const _2=Fy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),W2=Fy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$u=Object.create(null),an=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);$u[e]=t,$u[t]=-e}function By(n){return n<=247?_2[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?W2[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const H2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Tn{get dir(){return this.level%2?Sf:zr}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,i){let o=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=t&&d.to>=t){if(d.level==s)return c;(o<0||(i!=0?i<0?d.from<t:d.to>t:e[o].level>d.level))&&(o=c)}}if(o<0)throw new RangeError("Index out of range");return o}}function Iy(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let s=n[t],i=e[t];if(s.from!=i.from||s.to!=i.to||s.direction!=i.direction||!Iy(s.inner,i.inner))return!1}return!0}const Ke=[];function V2(n,e,t,s,i){for(let o=0;o<=s.length;o++){let c=o?s[o-1].to:e,d=o<s.length?s[o].from:t,u=o?256:i;for(let m=c,p=u,g=u;m<d;m++){let y=By(n.charCodeAt(m));y==512?y=p:y==8&&g==4&&(y=16),Ke[m]=y==4?2:y,y&7&&(g=y),p=y}for(let m=c,p=u,g=u;m<d;m++){let y=Ke[m];if(y==128)m<d-1&&p==Ke[m+1]&&p&24?y=Ke[m]=p:Ke[m]=256;else if(y==64){let w=m+1;for(;w<d&&Ke[w]==64;)w++;let v=m&&p==8||w<t&&Ke[w]==8?g==1?1:8:256;for(let j=m;j<w;j++)Ke[j]=v;m=w-1}else y==8&&g==1&&(Ke[m]=1);p=y,y&7&&(g=y)}}}function U2(n,e,t,s,i){let o=i==1?2:1;for(let c=0,d=0,u=0;c<=s.length;c++){let m=c?s[c-1].to:e,p=c<s.length?s[c].from:t;for(let g=m,y,w,v;g<p;g++)if(w=$u[y=n.charCodeAt(g)])if(w<0){for(let j=d-3;j>=0;j-=3)if(an[j+1]==-w){let S=an[j+2],k=S&2?i:S&4?S&1?o:i:0;k&&(Ke[g]=Ke[an[j]]=k),d=j;break}}else{if(an.length==189)break;an[d++]=g,an[d++]=y,an[d++]=u}else if((v=Ke[g])==2||v==1){let j=v==i;u=j?0:1;for(let S=d-3;S>=0;S-=3){let k=an[S+2];if(k&2)break;if(j)an[S+2]|=2;else{if(k&4)break;an[S+2]|=4}}}}}function q2(n,e,t,s){for(let i=0,o=s;i<=t.length;i++){let c=i?t[i-1].to:n,d=i<t.length?t[i].from:e;for(let u=c;u<d;){let m=Ke[u];if(m==256){let p=u+1;for(;;)if(p==d){if(i==t.length)break;p=t[i++].to,d=i<t.length?t[i].from:e}else if(Ke[p]==256)p++;else break;let g=o==1,y=(p<e?Ke[p]:s)==1,w=g==y?g?1:2:s;for(let v=p,j=i,S=j?t[j-1].to:n;v>u;)v==S&&(v=t[--j].from,S=j?t[j-1].to:n),Ke[--v]=w;u=p}else o=m,u++}}}function _u(n,e,t,s,i,o,c){let d=s%2?2:1;if(s%2==i%2)for(let u=e,m=0;u<t;){let p=!0,g=!1;if(m==o.length||u<o[m].from){let j=Ke[u];j!=d&&(p=!1,g=j==16)}let y=!p&&d==1?[]:null,w=p?s:s+1,v=u;e:for(;;)if(m<o.length&&v==o[m].from){if(g)break e;let j=o[m];if(!p)for(let S=j.to,k=m+1;;){if(S==t)break e;if(k<o.length&&o[k].from==S)S=o[k++].to;else{if(Ke[S]==d)break e;break}}if(m++,y)y.push(j);else{j.from>u&&c.push(new Tn(u,j.from,w));let S=j.direction==zr!=!(w%2);Wu(n,S?s+1:s,i,j.inner,j.from,j.to,c),u=j.to}v=j.to}else{if(v==t||(p?Ke[v]!=d:Ke[v]==d))break;v++}y?_u(n,u,v,s+1,i,y,c):u<v&&c.push(new Tn(u,v,w)),u=v}else for(let u=t,m=o.length;u>e;){let p=!0,g=!1;if(!m||u>o[m-1].to){let j=Ke[u-1];j!=d&&(p=!1,g=j==16)}let y=!p&&d==1?[]:null,w=p?s:s+1,v=u;e:for(;;)if(m&&v==o[m-1].to){if(g)break e;let j=o[--m];if(!p)for(let S=j.from,k=m;;){if(S==e)break e;if(k&&o[k-1].to==S)S=o[--k].from;else{if(Ke[S-1]==d)break e;break}}if(y)y.push(j);else{j.to<u&&c.push(new Tn(j.to,u,w));let S=j.direction==zr!=!(w%2);Wu(n,S?s+1:s,i,j.inner,j.from,j.to,c),u=j.from}v=j.from}else{if(v==e||(p?Ke[v-1]!=d:Ke[v-1]==d))break;v--}y?_u(n,v,u,s+1,i,y,c):v<u&&c.push(new Tn(v,u,w)),u=v}}function Wu(n,e,t,s,i,o,c){let d=e%2?2:1;V2(n,i,o,s,d),U2(n,i,o,s,d),q2(i,o,s,d),_u(n,i,o,e,t,s,c)}function K2(n,e,t){if(!n)return[new Tn(0,0,e==Sf?1:0)];if(e==zr&&!t.length&&!H2.test(n))return zy(n.length);if(t.length)for(;n.length>Ke.length;)Ke[Ke.length]=256;let s=[],i=e==zr?0:1;return Wu(n,i,i,t,0,n.length,s),s}function zy(n){return[new Tn(0,n,0)]}let $y="";function G2(n,e,t,s,i){var o;let c=s.head-n.from,d=Tn.find(e,c,(o=s.bidiLevel)!==null&&o!==void 0?o:-1,s.assoc),u=e[d],m=u.side(i,t);if(c==m){let y=d+=i?1:-1;if(y<0||y>=e.length)return null;u=e[d=y],c=u.side(!i,t),m=u.side(i,t)}let p=Nt(n.text,c,u.forward(i,t));(p<u.from||p>u.to)&&(p=m),$y=n.text.slice(Math.min(c,p),Math.max(c,p));let g=d==(i?e.length-1:0)?null:e[d+(i?1:-1)];return g&&p==m&&g.level+(i?0:1)<u.level?te.cursor(g.side(!i,t)+n.from,g.forward(i,t)?1:-1,g.level):te.cursor(p+n.from,u.forward(i,t)?-1:1,u.level)}function Q2(n,e,t){for(let s=e;s<t;s++){let i=By(n.charCodeAt(s));if(i==1)return zr;if(i==2||i==4)return Sf}return zr}const _y=ye.define(),Wy=ye.define(),Hy=ye.define(),Vy=ye.define(),Hu=ye.define(),Uy=ye.define(),qy=ye.define(),Cf=ye.define(),Mf=ye.define(),Ky=ye.define({combine:n=>n.some(e=>e)}),Y2=ye.define({combine:n=>n.some(e=>e)}),Gy=ye.define();class ki{constructor(e,t="nearest",s="nearest",i=5,o=5,c=!1){this.range=e,this.y=t,this.x=s,this.yMargin=i,this.xMargin=o,this.isSnapshot=c}map(e){return e.empty?this:new ki(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ki(te.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const wo=Qe.define({map:(n,e)=>n.map(e)}),Qy=Qe.define();function fn(n,e,t){let s=n.facet(Vy);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Ln=ye.define({combine:n=>n.length?n[0]:!0});let X2=0;const gi=ye.define({combine(n){return n.filter((e,t)=>{for(let s=0;s<t;s++)if(n[s].plugin==e.plugin)return!1;return!0})}});class vs{constructor(e,t,s,i,o){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(gi.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(gi.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:i,provide:o,decorations:c}=t||{};return new vs(X2++,e,s,i,d=>{let u=[];return c&&u.push(Rc.of(m=>{let p=m.plugin(d);return p?c(p):Oe.none})),o&&u.push(o(d)),u})}static fromClass(e,t){return vs.define((s,i)=>new e(s,i),t)}}class Hh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(fn(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){fn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){fn(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Yy=ye.define(),Af=ye.define(),Rc=ye.define(),Xy=ye.define(),Ef=ye.define(),na=ye.define(),Jy=ye.define();function xg(n,e){let t=n.state.facet(Jy);if(!t.length)return t;let s=t.map(o=>o instanceof Function?o(n):o),i=[];return $e.spans(s,e.from,e.to,{point(){},span(o,c,d,u){let m=o-e.from,p=c-e.from,g=i;for(let y=d.length-1;y>=0;y--,u--){let w=d[y].spec.bidiIsolate,v;if(w==null&&(w=Q2(e.text,m,p)),u>0&&g.length&&(v=g[g.length-1]).to==m&&v.direction==w)v.to=p,g=v.inner;else{let j={from:m,to:p,direction:w,inner:[]};g.push(j),g=j.inner}}}}),i}const Zy=ye.define();function e1(n){let e=0,t=0,s=0,i=0;for(let o of n.state.facet(Zy)){let c=o(n);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(t=Math.max(t,c.right)),c.top!=null&&(s=Math.max(s,c.top)),c.bottom!=null&&(i=Math.max(i,c.bottom)))}return{left:e,right:t,top:s,bottom:i}}const El=ye.define();class Ps{constructor(e,t,s,i){this.fromA=e,this.toA=t,this.fromB=s,this.toB=i}join(e){return new Ps(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>s.toA)){if(i.toA<s.fromA)break;s=s.join(i),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let i=0,o=0,c=0;;){let d=i<e.length?e[i].fromB:1e9,u=o<t.length?t[o]:1e9,m=Math.min(d,u);if(m==1e9)break;let p=m+c,g=m,y=p;for(;;)if(o<t.length&&t[o]<=g){let w=t[o+1];o+=2,g=Math.max(g,w);for(let v=i;v<e.length&&e[v].fromB<=g;v++)c=e[v].toA-e[v].toB;y=Math.max(y,w+c)}else if(i<e.length&&e[i].fromB<=g){let w=e[i++];g=Math.max(g,w.toB),y=Math.max(y,w.toA),c=w.toA-w.toB}else break;s.push(new Ps(p,y,m,g))}return s}}class ac{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=jt.empty(this.startState.doc.length);for(let o of s)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,c,d,u)=>i.push(new Ps(o,c,d,u))),this.changedRanges=i}static create(e,t,s){return new ac(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const J2=[];class bt{constructor(e,t,s=0){this.dom=e,this.length=t,this.flags=s,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return J2}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&T2(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let s=t;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let s=hr(this.dom),i=this.length?e>0:t>0;return new Ks(this.parent.dom,s+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Fc)return e;return null}static get(e){return e.cmTile}}class Oc extends bt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,s=null,i,o=(e==null?void 0:e.node)==t?e:null,c=0;for(let d of this.children){if(d.sync(e),c+=d.length+d.breakAfter,i=s?s.nextSibling:t.firstChild,o&&i!=d.dom&&(o.written=!0),d.dom.parentNode==t)for(;i&&i!=d.dom;)i=gg(i);else t.insertBefore(d.dom,i);s=d.dom}for(i=s?s.nextSibling:t.firstChild,o&&i&&(o.written=!0);i;)i=gg(i);this.length=c}}function gg(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Fc extends Oc{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=bt.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],s=this,i=0,o=0;;)if(i==s.children.length){if(!t.length)return;s=s.parent,s.breakAfter&&o++,i=t.pop()}else{let c=s.children[i++];if(c instanceof lr)t.push(i),s=c,i=0;else{let d=o+c.length,u=e(c,o);if(u!==void 0)return u;o=d+c.breakAfter}}}resolveBlock(e,t){let s,i=-1,o,c=-1;if(this.blockTiles((d,u)=>{let m=u+d.length;if(e>=u&&e<=m){if(d.isWidget()&&t>=-1&&t<=1){if(d.flags&32)return!0;d.flags&16&&(s=void 0)}(u<e||e==m&&(t<-1?d.length:d.covers(1)))&&(!s||!d.isWidget()&&s.isWidget())&&(s=d,i=e-u),(m>e||e==u&&(t>1?d.length:d.covers(-1)))&&(!o||!d.isWidget()&&o.isWidget())&&(o=d,c=e-u)}}),!s&&!o)throw new Error("No tile at position "+e);return s&&t<0||!o?{tile:s,offset:i}:{tile:o,offset:c}}}class lr extends Oc{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let s=new lr(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class Li extends Oc{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,s){let i=new Li(t||document.createElement("div"),e);return(!t||!s)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,t,s){let i=null,o=-1,c=null,d=-1;function u(p,g){for(let y=0,w=0;y<p.children.length&&w<=g;y++){let v=p.children[y],j=w+v.length;j>=g&&(v.isComposite()?u(v,g-w):(!c||c.isHidden&&(t>0||s&&eN(c,v)))&&(j>g||v.flags&32)?(c=v,d=g-w):(w<g||v.flags&16&&!v.isHidden)&&(i=v,o=g-w)),w=j}}u(this,e);let m=(t<0?i:c)||i||c;return m?{tile:m,offset:m==i?o:d}:null}coordsIn(e,t){let s=this.resolveInline(e,t,!0);return s?s.tile.coordsIn(Math.max(0,s.offset),t):Z2(this)}domIn(e,t){let s=this.resolveInline(e,t);if(s){let{tile:i,offset:o}=s;if(this.dom.contains(i.dom))return i.isText()?new Ks(i.dom,Math.min(i.dom.nodeValue.length,o)):i.domPosFor(o,i.flags&16?1:i.flags&32?-1:t);let c=s.tile.parent,d=!1;for(let u of c.children){if(d)return new Ks(u.dom,0);u==s.tile&&(d=!0)}}return new Ks(this.dom,0)}}function Z2(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Ho(e);return t[t.length-1]||null}function eN(n,e){let t=n.coordsIn(0,1),s=e.coordsIn(0,1);return t&&s&&s.top<t.bottom}class ls extends Oc{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let s=new ls(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class Dr extends bt{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let s=this.dom.nodeValue.length;e>s&&(e=s);let i=e,o=e,c=0;e==0&&t<0||e==s&&t>=0?me.chrome||me.gecko||(e?(i--,c=1):o<s&&(o++,c=-1)):t<0?i--:o<s&&o++;let d=ql(this.dom,i,o).getClientRects();if(!d.length)return null;let u=d[(c?c<0:t>=0)?0:d.length-1];return me.safari&&!c&&u.width==0&&(u=Array.prototype.find.call(d,m=>m.width)||u),c?lc(u,c<0):u||null}static of(e,t){let s=new Dr(t||document.createTextNode(e),e);return t||(s.flags|=2),s}}class $r extends bt{constructor(e,t,s,i){super(e,t,i),this.widget=s}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,s){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;if(s)return lc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),c=null;if(!o.length)return null;let d=this.flags&16?!0:this.flags&32?!1:e>0;for(let u=d?o.length-1:0;c=o[u],!(e>0?u==0:u==o.length-1||c.top<c.bottom);u+=d?-1:1);return lc(c,!d)}}get overrideDOMText(){if(!this.length)return Ue.empty;let{root:e}=this;if(!e)return Ue.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,s,i,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new $r(o,s,e,i)}}class oc extends bt{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Ue.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class tN{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,s){let{tile:i,index:o,beforeBreak:c,parents:d}=this;for(;e||t>0;)if(i.isComposite())if(c){if(!e)break;s&&s.break(),e--,c=!1}else if(o==i.children.length){if(!e&&!d.length)break;s&&s.leave(i),c=!!i.breakAfter,{tile:i,index:o}=d.pop(),o++}else{let u=i.children[o],m=u.breakAfter;(t>0?u.length<=e:u.length<e)&&(!s||s.skip(u,0,u.length)!==!1||!u.isComposite)?(c=!!m,o++,e-=u.length):(d.push({tile:i,index:o}),i=u,o=0,s&&u.isComposite()&&s.enter(u))}else if(o==i.length)c=!!i.breakAfter,{tile:i,index:o}=d.pop(),o++;else if(e){let u=Math.min(e,i.length-o);s&&s.skip(i,o,o+u),e-=u,o+=u}else break;return this.tile=i,this.index=o,this.beforeBreak=c,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class sN{constructor(e,t,s,i){this.from=e,this.to=t,this.wrapper=s,this.rank=i}}class nN{constructor(e,t,s){this.cache=e,this.root=t,this.blockWrappers=s,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,s,i){var o;this.flushBuffer();let c=this.ensureMarks(t,s),d=c.lastChild;if(d&&d.isText()&&!(d.flags&8)&&d.length+e.length<512){this.cache.reused.set(d,2);let u=c.children[c.children.length-1]=new Dr(d.dom,d.text+e);u.parent=c}else c.append(i||Dr.of(e,(o=this.cache.find(Dr))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let s=this.curLine;s.dom!=t.line.dom&&(s.setDOM(this.cache.reused.has(t.line)?Vh(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let i=s;for(let d=t.marks.length-1;d>=0;d--){let u=t.marks[d],m=i.lastChild;if(m instanceof ls&&m.mark.eq(u.mark))m.dom!=u.dom&&m.setDOM(Vh(u.dom)),i=m;else{if(this.cache.reused.get(u)){let g=bt.get(u.dom);g&&g.setDOM(Vh(u.dom))}let p=ls.of(u.mark,u.dom);i.append(p),i=p}this.cache.reused.set(u,2)}let o=bt.get(e.text);o&&this.cache.reused.set(o,2);let c=new Dr(e.text,e.text.nodeValue);c.flags|=8,i.append(c)}addInlineWidget(e,t,s){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let o=this.ensureMarks(t,s);!i&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,s){this.flushBuffer(),this.ensureMarks(t,s).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var s;e||(e=t1);let i=Li.start(e,t||((s=this.cache.find(Li))===null||s===void 0?void 0:s.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var s;let i=this.curLine;for(let o=e.length-1;o>=0;o--){let c=e[o],d;if(t>0&&(d=i.lastChild)&&d instanceof ls&&d.mark.eq(c))i=d,t--;else{let u=ls.of(c,(s=this.cache.find(ls,m=>m.mark.eq(c)))===null||s===void 0?void 0:s.dom);i.append(u),i=u,t=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!yg(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(me.ios&&yg(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Uh,0,32)||new $r(Uh.toDOM(),0,Uh,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new sN(e.from,e.to,e.value,e.rank),s=this.wrappers.length;for(;s>0&&(this.wrappers[s-1].rank-t.rank||this.wrappers[s-1].to-t.to)<0;)s--;this.wrappers.splice(s,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let s of this.wrappers){let i=t.lastChild;if(s.from<this.pos&&i instanceof lr&&i.wrapper.eq(s.wrapper))t=i;else{let o=lr.of(s.wrapper,(e=this.cache.find(lr,c=>c.wrapper.eq(s.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),s=this.cache.find(oc,void 0,1);return s&&(s.flags=t),s||new oc(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class rN{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:c}=this.cursor.next(this.skipCount);if(this.skipCount=0,c)throw new Error("Ran out of text content when drawing inline views");this.text=i;let d=this.textOff=Math.min(e,i.length);return o?null:i.slice(0,d)}let t=Math.min(this.text.length,this.textOff+e),s=this.text.slice(this.textOff,t);return this.textOff=t,s}}const cc=[$r,Li,Dr,ls,oc,lr,Fc];for(let n=0;n<cc.length;n++)cc[n].bucket=n;class iN{constructor(e){this.view=e,this.buckets=cc.map(()=>[]),this.index=cc.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,s=this.buckets[t];s.length<6?s.push(e):s[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,s=2){let i=e.bucket,o=this.buckets[i],c=this.index[i];for(let d=o.length-1;d>=0;d--){let u=(d+c)%o.length,m=o[u];if((!t||t(m))&&!this.reused.has(m))return o.splice(u,1),u<c&&this.index[i]--,this.reused.set(m,s),m}return null}findWidget(e,t,s){let i=this.buckets[0];if(i.length)for(let o=0,c=0;;o++){if(o==i.length){if(c)return null;c=1,o=0}let d=i[o];if(!this.reused.has(d)&&(c==0?d.widget.compare(e):d.widget.constructor==e.constructor&&e.updateDOM(d.dom,this.view)))return i.splice(o,1),o<this.index[0]&&this.index[0]--,d.widget==e&&d.length==t&&(d.flags&497)==s?(this.reused.set(d,1),d):(this.reused.set(d,2),new $r(d.dom,t,e,d.flags&-498|s))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class lN{constructor(e,t,s,i,o){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new iN(e),this.text=new rN(e.state.doc),this.builder=new nN(this.cache,new Fc(e,e.contentDOM),$e.iter(s)),this.cache.reused.set(t,2),this.old=new tN(t),this.reuseWalker={skip:(c,d,u)=>{if(this.cache.add(c),c.isComposite())return!1},enter:c=>this.cache.add(c),leave:()=>{},break:()=>{}}}run(e,t){let s=t&&this.getCompositionContext(t.text);for(let i=0,o=0,c=0;;){let d=c<e.length?e[c++]:null,u=d?d.fromA:this.old.root.length;if(u>i){let m=u-i;this.preserve(m,!c,!d),i=u,o+=m}if(!d)break;t&&d.fromA<=t.range.fromA&&d.toA>=t.range.toA?(this.forward(d.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(o,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,s),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,d.toA),this.emit(t.range.toB,d.toB)):(this.forward(d.fromA,d.toA),this.emit(o,d.toB)),o=d.toB,i=d.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,s){let i=cN(this.old),o=this.openMarks;this.old.advance(e,s?1:-1,{skip:(c,d,u)=>{if(c.isWidget())if(this.openWidget)this.builder.continueWidget(u-d);else{let m=u>0||d<c.length?$r.of(c.widget,this.view,u-d,c.flags&496,this.cache.maybeReuse(c)):this.cache.reuse(c);m.flags&256?(m.flags&=-2,this.builder.addBlockWidget(m)):(this.builder.ensureLine(null),this.builder.addInlineWidget(m,i,o),o=i.length)}else if(c.isText())this.builder.ensureLine(null),!d&&u==c.length?this.builder.addText(c.text,i,o,this.cache.reuse(c)):(this.cache.add(c),this.builder.addText(c.text.slice(d,u),i,o)),o=i.length;else if(c.isLine())c.flags&=-2,this.cache.reused.set(c,1),this.builder.addLine(c);else if(c instanceof oc)this.cache.add(c);else if(c instanceof ls)this.builder.ensureLine(null),this.builder.addMark(c,i,o),this.cache.reused.set(c,1),o=i.length;else return!1;this.openWidget=!1},enter:c=>{c.isLine()?this.builder.addLineStart(c.attrs,this.cache.maybeReuse(c)):(this.cache.add(c),c instanceof ls&&i.unshift(c.mark)),this.openWidget=!1},leave:c=>{c.isLine()?i.length&&(i.length=o=0):c instanceof ls&&(i.shift(),o=Math.min(o,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let s=null,i=this.builder,o=0,c=$e.spans(this.decorations,e,t,{point:(d,u,m,p,g,y)=>{if(m instanceof Ir){if(this.disallowBlockEffectsFor[y]){if(m.block)throw new RangeError("Block decorations may not be specified via plugins");if(u>this.view.state.doc.lineAt(d).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,g>p.length)i.continueWidget(u-d);else{let w=m.widget||(m.block?Pi.block:Pi.inline),v=aN(m),j=this.cache.findWidget(w,u-d,v)||$r.of(w,this.view,u-d,v);m.block?(m.startSide>0&&i.addLineStartIfNotCovered(s),i.addBlockWidget(j)):(i.ensureLine(s),i.addInlineWidget(j,p,g))}s=null}else s=oN(s,m);u>d&&this.text.skip(u-d)},span:(d,u,m,p)=>{for(let g=d;g<u;){let y=this.text.next(Math.min(512,u-g));y==null?(i.addLineStartIfNotCovered(s),i.addBreak(),g++):(i.ensureLine(s),i.addText(y,m,g==d?p:m.length),g+=y.length),s=null}}});i.addLineStartIfNotCovered(s),this.openWidget=c>o,this.openMarks=c}forward(e,t,s=1){t-e<=10?this.old.advance(t-e,s,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,s,this.reuseWalker))}getCompositionContext(e){let t=[],s=null;for(let i=e.parentNode;;i=i.parentNode){let o=bt.get(i);if(i==this.view.contentDOM)break;o instanceof ls?t.push(o):o!=null&&o.isLine()?s=o:i.nodeName=="DIV"&&!s&&i!=this.view.contentDOM?s=new Li(i,t1):t.push(ls.of(new ta({tagName:i.nodeName.toLowerCase(),attributes:D2(i)}),i))}return{line:s,marks:t}}}function yg(n,e){let t=s=>{for(let i of s.children)if((e?i.isText():i.length)||t(i))return!0;return!1};return t(n)}function aN(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const t1={class:"cm-line"};function oN(n,e){let t=e.spec.attributes,s=e.spec.class;return!t&&!s||(n||(n={class:"cm-line"}),t&&Nf(t,n),s&&(n.class+=" "+s)),n}function cN(n){let e=[];for(let t=n.parents.length;t>1;t--){let s=t==n.parents.length?n.tile:n.parents[t].tile;s instanceof ls&&e.push(s.mark)}return e}function Vh(n){let e=bt.get(n);return e&&e.setDOM(n.cloneNode()),n}class Pi extends Dc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Pi.inline=new Pi("span");Pi.block=new Pi("div");const Uh=new class extends Dc{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class bg{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Oe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Fc(e,e.contentDOM),this.updateInner([new Ps(0,0,0,e.state.doc.length)],null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!yN(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?hN(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;s=new Ps(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(s.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(me.ie||me.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.blockWrappers;this.updateDeco();let u=mN(c,this.decorations,e.changes);u.length&&(s=Ps.extendWithRanges(s,u));let m=xN(d,this.blockWrappers,e.changes);return m.length&&(s=Ps.extendWithRanges(s,m)),o&&!s.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(s=o.range.addToSet(s.slice())),this.tile.flags&2&&s.length==0?!1:(this.updateInner(s,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:s}=this.view;s.ignore(()=>{if(t||e.length){let c=this.tile,d=new lN(this.view,c,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=d.run(e,t),Vu(c,d.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=me.chrome||me.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||s.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof qh&&i.push(o.dom);s.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(Qy)&&(this.editContextFormatting=s.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:s}=this.tile,i=this.view.root.activeElement,o=i==s,c=!o&&!(this.view.state.facet(Ln)||s.tabIndex>-1)&&Bl(s,this.view.observer.selectionRange)&&!(i&&s.contains(i));if(!(o||t||c))return;let d=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,m,p;if(u.empty?p=m=this.inlineDOMNearPos(u.anchor,u.assoc||1):(p=this.inlineDOMNearPos(u.head,u.head==u.from?1:-1),m=this.inlineDOMNearPos(u.anchor,u.anchor==u.from?1:-1)),me.gecko&&u.empty&&!this.hasComposition&&dN(m)){let y=document.createTextNode("");this.view.observer.ignore(()=>m.node.insertBefore(y,m.node.childNodes[m.offset]||null)),m=p=new Ks(y,0),d=!0}let g=this.view.observer.selectionRange;(d||!g.focusNode||(!Il(m.node,m.offset,g.anchorNode,g.anchorOffset)||!Il(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,u))&&(this.view.observer.ignore(()=>{me.android&&me.chrome&&s.contains(g.focusNode)&&gN(g.focusNode,s)&&(s.blur(),s.focus({preventScroll:!0}));let y=Ei(this.view.root);if(y)if(u.empty){if(me.gecko){let w=uN(m.node,m.offset);if(w&&w!=3){let v=(w==1?Ry:Oy)(m.node,m.offset);v&&(m=new Ks(v.node,v.offset))}}y.collapse(m.node,m.offset),u.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=u.bidiLevel)}else if(y.extend){y.collapse(m.node,m.offset);try{y.extend(p.node,p.offset)}catch{}}else{let w=document.createRange();u.anchor>u.head&&([m,p]=[p,m]),w.setEnd(p.node,p.offset),w.setStart(m.node,m.offset),y.removeAllRanges(),y.addRange(w)}c&&this.view.root.activeElement==s&&(s.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(m,p)),this.impreciseAnchor=m.precise?null:new Ks(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new Ks(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Il(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=Ei(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let c=this.lineAt(t.head,t.assoc);if(!c)return;let d=c.posAtStart;if(t.head==d||t.head==d+c.length)return;let u=this.coordsAt(t.head,-1),m=this.coordsAt(t.head,1);if(!u||!m||u.bottom>m.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);s.collapse(p.node,p.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&s.collapse(i,o)}posFromDOM(e,t){let s=this.tile.nearest(e);if(!s)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=s.posAtStart;if(s.isComposite()){let o;if(e==s.dom)o=s.dom.childNodes[t];else{let c=Rn(e)==0?0:t==0?-1:1;for(;;){let d=e.parentNode;if(d==s.dom)break;c==0&&d.firstChild!=d.lastChild&&(e==d.firstChild?c=-1:c=1),e=d}c<0?o=e:o=e.nextSibling}if(o==s.dom.firstChild)return i;for(;o&&!bt.get(o);)o=o.nextSibling;if(!o)return i+s.length;for(let c=0,d=i;;c++){let u=s.children[c];if(u.dom==o)return d;d+=u.length+u.breakAfter}}else return s.isText()?e==s.dom?i+t:i+(t?s.length:0):i}domAtPos(e,t){let{tile:s,offset:i}=this.tile.resolveBlock(e,t);return s.isWidget()?s.domPosFor(e,t):s.domIn(i,t)}inlineDOMNearPos(e,t){let s,i=-1,o=!1,c,d=-1,u=!1;return this.tile.blockTiles((m,p)=>{if(m.isWidget()){if(m.flags&32&&p>=e)return!0;m.flags&16&&(o=!0)}else{let g=p+m.length;if(p<=e&&(s=m,i=e-p,o=g<e),g>=e&&!c&&(c=m,d=e-p,u=p>e),p>e&&c)return!0}}),!s&&!c?this.domAtPos(e,t):(o&&c?s=null:u&&s&&(c=null),s&&t<0||!c?s.domIn(i,t):c.domIn(d,t))}coordsAt(e,t){let{tile:s,offset:i}=this.tile.resolveBlock(e,t);return s.isWidget()?s.widget instanceof qh?null:s.coordsInWidget(i,t,!0):s.coordsIn(i,t)}lineAt(e,t){let{tile:s}=this.tile.resolveBlock(e,t);return s.isLine()?s:null}coordsForChar(e){let{tile:t,offset:s}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function i(o,c){if(o.isComposite())for(let d of o.children){if(d.length>=c){let u=i(d,c);if(u)return u}if(c-=d.length,c<0)break}else if(o.isText()&&c<o.length){let d=Nt(o.text,c);if(d==c)return null;let u=ql(o.dom,c,d).getClientRects();for(let m=0;m<u.length;m++){let p=u[m];if(m==u.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return i(t,s)}measureVisibleLineHeights(e){let t=[],{from:s,to:i}=e,o=this.view.contentDOM.clientWidth,c=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,u=this.view.textDirection==mt.LTR,m=0,p=(g,y,w)=>{for(let v=0;v<g.children.length&&!(y>i);v++){let j=g.children[v],S=y+j.length,k=j.dom.getBoundingClientRect(),{height:C}=k;if(w&&!v&&(m+=k.top-w.top),j instanceof lr)S>s&&p(j,y,k);else if(y>=s&&(m>0&&t.push(-m),t.push(C+m),m=0,c)){let D=j.dom.lastChild,E=D?Ho(D):[];if(E.length){let I=E[E.length-1],U=u?I.right-k.left:k.right-I.left;U>d&&(d=U,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=S)}}w&&v==g.children.length-1&&(m+=w.bottom-k.bottom),y=S+j.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?mt.RTL:mt.LTR}measureTextSize(){let e=this.tile.blockTiles(c=>{if(c.isLine()&&c.children.length&&c.length<=20){let d=0,u;for(let m of c.children){if(!m.isText()||/[^ -~]/.test(m.text))return;let p=Ho(m.dom);if(p.length!=1)return;d+=p[0].width,u=p[0].height}if(d)return{lineHeight:c.dom.getBoundingClientRect().height,charWidth:d/c.length,textHeight:u}}});if(e)return e;let t=document.createElement("div"),s,i,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let c=Ho(t.firstChild)[0];s=t.getBoundingClientRect().height,i=c&&c.width?c.width/27:7,o=c&&c.height?c.height:s,t.remove()}),{lineHeight:s,charWidth:i,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],c=o?o.from-1:this.view.state.doc.length;if(c>s){let d=(t.lineBlockAt(c).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(Oe.replace({widget:new qh(d),block:!0,inclusive:!0,isBlockGap:!0}).range(s,c))}if(!o)break;s=o.to+1}return Oe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Rc).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),s=!1,i=this.view.state.facet(Ef).map((o,c)=>{let d=typeof o=="function";return d&&(s=!0),d?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=s,t.push($e.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(Xy).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let m=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=m.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let m of this.view.state.facet(Gy))try{if(m(this.view,e.range,e))return!0}catch(p){fn(this.view.state,p,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!s)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,i.left),top:Math.min(s.top,i.top),right:Math.max(s.right,i.right),bottom:Math.max(s.bottom,i.bottom)});let o=e1(this.view),c={left:s.left-o.left,top:s.top-o.top,right:s.right+o.right,bottom:s.bottom+o.bottom},{offsetWidth:d,offsetHeight:u}=this.view.scrollDOM;F2(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==mt.LTR)}lineHasWidget(e){let t=s=>s.isWidget()||s.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){Vu(this.tile)}}function Vu(n,e){let t=e==null?void 0:e.get(n);if(t!=1){t==null&&n.destroy();for(let s of n.children)Vu(s,e)}}function dN(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function s1(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let s=Ry(t.focusNode,t.focusOffset),i=Oy(t.focusNode,t.focusOffset),o=s||i;if(i&&s&&i.node!=s.node){let d=bt.get(i.node);if(!d||d.isText()&&d.text!=i.node.nodeValue)o=i;else if(n.docView.lastCompositionAfterCursor){let u=bt.get(s.node);!u||u.isText()&&u.text!=s.node.nodeValue||(o=i)}}if(n.docView.lastCompositionAfterCursor=o!=s,!o)return null;let c=e-o.offset;return{from:c,to:c+o.node.nodeValue.length,node:o.node}}function hN(n,e,t){let s=s1(n,t);if(!s)return null;let{node:i,from:o,to:c}=s,d=i.nodeValue;if(/[\n\r]/.test(d)||n.state.doc.sliceString(s.from,s.to)!=d)return null;let u=e.invertedDesc;return{range:new Ps(u.mapPos(o),u.mapPos(c),o,c),text:i}}function uN(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let fN=class{constructor(){this.changes=[]}compareRange(e,t){ji(e,t,this.changes)}comparePoint(e,t){ji(e,t,this.changes)}boundChange(e){ji(e,e,this.changes)}};function mN(n,e,t){let s=new fN;return $e.compare(n,e,t,s),s.changes}class pN{constructor(){this.changes=[]}compareRange(e,t){ji(e,t,this.changes)}comparePoint(){}boundChange(e){ji(e,e,this.changes)}}function xN(n,e,t){let s=new pN;return $e.compare(n,e,t,s),s.changes}function gN(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function yN(n,e){let t=!1;return e&&n.iterChangedRanges((s,i)=>{s<e.to&&i>e.from&&(t=!0)}),t}class qh extends Dc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function bN(n,e,t=1){let s=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return te.cursor(e);o==0?t=1:o==i.length&&(t=-1);let c=o,d=o;t<0?c=Nt(i.text,o,!1):d=Nt(i.text,o);let u=s(i.text.slice(c,d));for(;c>0;){let m=Nt(i.text,c,!1);if(s(i.text.slice(m,c))!=u)break;c=m}for(;d<i.length;){let m=Nt(i.text,d);if(s(i.text.slice(d,m))!=u)break;d=m}return te.range(c+i.from,d+i.from)}function wN(n,e,t,s,i){let o=Math.round((s-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let d=n.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(n.defaultLineHeight-d)*.5)/d);o+=u*n.viewState.heightOracle.lineLength}let c=n.state.sliceDoc(t.from,t.to);return t.from+C2(c,o,n.state.tabSize)}function vN(n,e,t){let s=n.lineBlockAt(e);if(Array.isArray(s.type)){let i;for(let o of s.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==cs.Text&&(i.type!=o.type||(t<0?o.from<e:o.to>e)))&&(i=o)}}return i||s}return s}function jN(n,e,t,s){let i=vN(n,e.head,e.assoc||-1),o=!s||i.type!=cs.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let c=n.dom.getBoundingClientRect(),d=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(d==mt.LTR)?c.right-1:c.left+1,y:(o.top+o.bottom)/2});if(u!=null)return te.cursor(u,t?-1:1)}return te.cursor(t?i.to:i.from,t?-1:1)}function wg(n,e,t,s){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),c=n.textDirectionAt(i.from);for(let d=e,u=null;;){let m=G2(i,o,c,d,t),p=$y;if(!m){if(i.number==(t?n.state.doc.lines:1))return d;p=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),m=n.visualLineSide(i,!t)}if(u){if(!u(p))return d}else{if(!s)return m;u=s(p)}d=m}}function NN(n,e,t){let s=n.state.charCategorizer(e),i=s(t);return o=>{let c=s(o);return i==ft.Space&&(i=c),i==c}}function kN(n,e,t,s){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return te.cursor(i,e.assoc);let c=e.goalColumn,d,u=n.contentDOM.getBoundingClientRect(),m=n.coordsAtPos(i,e.assoc||-1),p=n.documentTop;if(m)c==null&&(c=m.left-u.left),d=o<0?m.top:m.bottom;else{let v=n.viewState.lineBlockAt(i);c==null&&(c=Math.min(u.right-u.left,n.defaultCharacterWidth*(i-v.from))),d=(o<0?v.top:v.bottom)+p}let g=u.left+c,y=s??n.viewState.heightOracle.textHeight>>1,w=Uu(n,{x:g,y:d+y*o},!1,o);return te.cursor(w.pos,w.assoc,void 0,c)}function zl(n,e,t){for(;;){let s=0;for(let i of n)i.between(e-1,e+1,(o,c,d)=>{if(e>o&&e<c){let u=s||t||(e-o<c-e?-1:1);e=u<0?o:c,s=u}});if(!s)return e}}function n1(n,e){let t=null;for(let s=0;s<e.ranges.length;s++){let i=e.ranges[s],o=null;if(i.empty){let c=zl(n,i.from,0);c!=i.from&&(o=te.cursor(c,-1))}else{let c=zl(n,i.from,-1),d=zl(n,i.to,1);(c!=i.from||d!=i.to)&&(o=te.range(i.from==i.anchor?c:d,i.from==i.head?c:d))}o&&(t||(t=e.ranges.slice()),t[s]=o)}return t?te.create(t,e.mainIndex):e}function Kh(n,e,t){let s=zl(n.state.facet(na).map(i=>i(n)),t.from,e.head>t.from?-1:1);return s==t.from?t:te.cursor(s,s<t.from?1:-1)}class un{constructor(e,t){this.pos=e,this.assoc=t}}function Uu(n,e,t,s){let i=n.contentDOM.getBoundingClientRect(),o=i.top+n.viewState.paddingTop,{x:c,y:d}=e,u=d-o,m;for(;;){if(u<0)return new un(0,1);if(u>n.viewState.docHeight)return new un(n.state.doc.length,-1);if(m=n.elementAtHeight(u),s==null)break;if(m.type==cs.Text){if(s<0?m.to<n.viewport.from:m.from>n.viewport.to)break;let y=n.docView.coordsAt(s<0?m.from:m.to,s);if(y&&(s<0?y.top<=u+o:y.bottom>=u+o))break}let g=n.viewState.heightOracle.textHeight/2;u=s>0?m.bottom+g:m.top-g}if(n.viewport.from>=m.to||n.viewport.to<=m.from){if(t)return null;if(m.type==cs.Text){let g=wN(n,i,m,c,d);return new un(g,g==m.from?1:-1)}}if(m.type!=cs.Text)return u<(m.top+m.bottom)/2?new un(m.from,1):new un(m.to,-1);let p=n.docView.lineAt(m.from,2);return(!p||p.length!=m.length)&&(p=n.docView.lineAt(m.from,-2)),r1(n,p,m.from,c,d)}function r1(n,e,t,s,i){let o=-1,c=null,d=1e9,u=1e9,m=i,p=i,g=(y,w)=>{for(let v=0;v<y.length;v++){let j=y[v];if(j.top==j.bottom)continue;let S=j.left>s?j.left-s:j.right<s?s-j.right:0,k=j.top>i?j.top-i:j.bottom<i?i-j.bottom:0;j.top<=p&&j.bottom>=m&&(m=Math.min(j.top,m),p=Math.max(j.bottom,p),k=0),(o<0||(k-u||S-d)<0)&&(o>=0&&u&&d<S&&c.top<=p-2&&c.bottom>=m+2?u=0:(o=w,d=S,u=k,c=j))}};if(e.isText()){for(let w=0;w<e.length;){let v=Nt(e.text,w);if(g(ql(e.dom,w,v).getClientRects(),w),!d&&!u)break;w=v}return s>(c.left+c.right)/2==(vg(n,o+t)==mt.LTR)?new un(t+Nt(e.text,o),-1):new un(t+o,1)}else{if(!e.length)return new un(t,1);for(let j=0;j<e.children.length;j++){let S=e.children[j];if(S.flags&48)continue;let k=(S.dom.nodeType==1?S.dom:ql(S.dom,0,S.length)).getClientRects();if(g(k,j),!d&&!u)break}let y=e.children[o],w=e.posBefore(y,t);return y.isComposite()||y.isText()?r1(n,y,w,Math.max(c.left,Math.min(c.right,s)),i):s>(c.left+c.right)/2==(vg(n,o+t)==mt.LTR)?new un(w+y.length,-1):new un(w,1)}}function vg(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[Tn.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const Ll="";class SN{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(Ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ll}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let i=e;;){this.findPointBefore(s,i);let o=this.text.length;this.readNode(i);let c=bt.get(i),d=i.nextSibling;if(d==t){c!=null&&c.breakAfter&&!d&&s!=this.view.contentDOM&&this.lineBreak();break}let u=bt.get(d);(c&&u?c.breakAfter:(c?c.breakAfter:ic(i))||ic(d)&&(i.nodeName!="BR"||c!=null&&c.isWidget())&&this.text.length>o)&&!MN(d,t)&&this.lineBreak(),i=d}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,c=1,d;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,s),c=this.lineSeparator.length):(d=i.exec(t))&&(o=d.index,c=d[0].length),this.append(t.slice(s,o<0?t.length:o)),o<0)break;if(this.lineBreak(),c>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=c-1);s=o+c}}readNode(e){let t=bt.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let i=s.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(CN(e,s.node,s.offset)?t:0))}}function CN(n,e,t){for(;;){if(!e||t<Rn(e))return!1;if(e==n)return!0;t=hr(e)+1,e=e.parentNode}}function MN(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let s=bt.get(n);if(!(s!=null&&s.isWidget()))return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let i=s.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class jg{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class AN{constructor(e,t,s,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=i1(e.docView.tile,t,s,0))){let d=o||c?[]:LN(e),u=new SN(d,e);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=PN(d,this.bounds.from)}else{let d=e.observer.selectionRange,u=o&&o.node==d.focusNode&&o.offset==d.focusOffset||!zu(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),m=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!zu(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),p=e.viewport;if((me.ios||me.chrome)&&e.state.selection.main.empty&&u!=m&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(u,m),y=Math.max(u,m),w=p.from-g,v=p.to-y;(w==0||w==1||g==0)&&(v==0||v==-1||y==e.state.doc.length)&&(u=0,m=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(te.range(m,u)):this.newSel=te.single(m,u)}}}function i1(n,e,t,s){if(n.isComposite()){let i=-1,o=-1,c=-1,d=-1;for(let u=0,m=s,p=s;u<n.children.length;u++){let g=n.children[u],y=m+g.length;if(m<e&&y>t)return i1(g,e,t,m);if(y>=e&&i==-1&&(i=u,o=m),m>t&&g.dom.parentNode==n.dom){c=u,d=p;break}p=y,m=y+g.breakAfter}return{from:o,to:d<0?s+n.length:d,startDOM:(i?n.children[i-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:c<n.children.length&&c>=0?n.children[c].dom:null}}else return n.isText()?{from:s,to:s+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function l1(n,e){let t,{newSel:s}=e,i=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,u=i.from,m=null;(o===8||me.android&&e.text.length<d-c)&&(u=i.to,m="end");let p=a1(n.state.doc.sliceString(c,d,Ll),e.text,u-c,m);p&&(me.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Ll+Ll&&p.toB--,t={from:c+p.from,to:c+p.toA,insert:Ue.of(e.text.slice(p.from,p.toB).split(Ll))})}else s&&(!n.hasFocus&&n.state.facet(Ln)||dc(s,i))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!i.empty&&s&&s.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(me.mac||me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=te.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:Ue.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:n.state.doc.lineAt(i.from).to<i.to&&n.docView.lineHasWidget(i.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:i.from,to:i.to,insert:n.state.toText(n.inputState.insertingText)}:me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=te.single(s.main.anchor-1,s.main.head-1)),t={from:i.from,to:i.to,insert:Ue.of([" "])}),t)return Lf(n,t,s,o);if(s&&!dc(s,i)){let c=!1,d="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(c=!0),d=n.inputState.lastSelectionOrigin,d=="select.pointer"&&(s=n1(n.state.facet(na).map(u=>u(n)),s))),n.dispatch({selection:s,scrollIntoView:c,userEvent:d}),!0}else return!1}function Lf(n,e,t,s=-1){if(me.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(me.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ni(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&Ni(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&Ni(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let c,d=()=>c||(c=EN(n,e,t));return n.state.facet(Uy).some(u=>u(n,e.from,e.to,o,d))||n.dispatch(d()),!0}function EN(n,e,t){let s,i=n.state,o=i.selection.main,c=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let u=e.from<o.from?-1:1,m=u<0?o.from:o.to,p=zl(i.facet(na).map(g=>g(n)),m,u);e.from==p&&(c=p)}if(c>-1)s={changes:e,selection:te.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let u=o.from<e.from?i.sliceDoc(o.from,e.from):"",m=o.to>e.to?i.sliceDoc(e.to,o.to):"";s=i.replaceSelection(n.state.toText(u+e.insert.sliceString(0,void 0,n.state.lineBreak)+m))}else{let u=i.changes(e),m=t&&t.main.to<=u.newLength?t.main:void 0;if(i.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=n.state.sliceDoc(e.from,e.to),g,y=t&&s1(n,t.main.head);if(y){let v=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-v}}else g=n.state.doc.lineAt(o.head);let w=o.to-e.to;s=i.changeByRange(v=>{if(v.from==o.from&&v.to==o.to)return{changes:u,range:m||v.map(u)};let j=v.to-w,S=j-p.length;if(n.state.sliceDoc(S,j)!=p||j>=g.from&&S<=g.to)return{range:v};let k=i.changes({from:S,to:j,insert:e.insert}),C=v.to-o.to;return{changes:k,range:m?te.range(Math.max(0,m.anchor+C),Math.max(0,m.head+C)):v.map(k)}})}else s={changes:u,selection:m&&i.selection.replaceRange(m)}}let d="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,d+=".compose",n.inputState.compositionFirstChange&&(d+=".start",n.inputState.compositionFirstChange=!1)),i.update(s,{userEvent:d,scrollIntoView:!0})}function a1(n,e,t,s){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let c=n.length,d=e.length;for(;c>0&&d>0&&n.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(s=="end"){let u=Math.max(0,o-Math.min(c,d));t-=c+u-o}if(c<o&&n.length<e.length){let u=t<=o&&t>=c?o-t:0;o-=u,d=o+(d-c),c=o}else if(d<o){let u=t<=o&&t>=d?o-t:0;o-=u,c=o+(c-d),d=o}return{from:o,toA:c,toB:d}}function LN(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new jg(t,s)),(i!=t||o!=s)&&e.push(new jg(i,o))),e}function PN(n,e){if(n.length==0)return null;let t=n[0].pos,s=n.length==2?n[1].pos:t;return t>-1&&s>-1?te.single(t+e,s+e):null}function dc(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class TN{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,me.safari&&e.contentDOM.addEventListener("input",()=>null),me.gecko&&KN(e.contentDOM.ownerDocument)}handleEvent(e){!$N(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let i of s.observers)i(this.view,t);for(let i of s.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=DN(e),s=this.handlers,i=this.view.contentDOM;for(let o in t)if(o!="scroll"){let c=!t[o].handlers.length,d=s[o];d&&c!=!d.handlers.length&&(i.removeEventListener(o,this.handleEvent),d=null),d||i.addEventListener(o,this.handleEvent,{passive:c})}for(let o in s)o!="scroll"&&!t[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&c1.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),me.android&&me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=o1.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||RN.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ni(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:me.safari&&!me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ng(n,e){return(t,s)=>{try{return e.call(n,s,t)}catch(i){fn(t.state,i)}}}function DN(n){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of n){let i=s.spec,o=i&&i.plugin.domEventHandlers,c=i&&i.plugin.domEventObservers;if(o)for(let d in o){let u=o[d];u&&t(d).handlers.push(Ng(s.value,u))}if(c)for(let d in c){let u=c[d];u&&t(d).observers.push(Ng(s.value,u))}}for(let s in Ys)t(s).handlers.push(Ys[s]);for(let s in Os)t(s).observers.push(Os[s]);return e}const o1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],RN="dthko",c1=[16,17,18,20,91,92,224,225],vo=6;function jo(n){return Math.max(0,n)*.7+8}function ON(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class FN{constructor(e,t,s,i){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=B2(e.contentDOM),this.atoms=e.state.facet(na).map(c=>c(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ve.allowMultipleSelections)&&BN(e,t),this.dragging=zN(e,t)&&u1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&ON(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,i=0,o=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:d}=this.scrollParents.y.getBoundingClientRect());let u=e1(this.view);e.clientX-u.left<=i+vo?t=-jo(i-e.clientX):e.clientX+u.right>=c-vo&&(t=jo(e.clientX-c)),e.clientY-u.top<=o+vo?s=-jo(o-e.clientY):e.clientY+u.bottom>=d-vo&&(s=jo(e.clientY-d)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=n1(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function BN(n,e){let t=n.state.facet(_y);return t.length?t[0](e):me.mac?e.metaKey:e.ctrlKey}function IN(n,e){let t=n.state.facet(Wy);return t.length?t[0](e):me.mac?!e.altKey:!e.ctrlKey}function zN(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let s=Ei(n.root);if(!s||s.rangeCount==0)return!0;let i=s.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let c=i[o];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function $N(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=bt.get(t))&&s.isWidget()&&!s.isHidden&&s.widget.ignoreEvent(e))return!1;return!0}const Ys=Object.create(null),Os=Object.create(null),d1=me.ie&&me.ie_version<15||me.ios&&me.webkit_version<604;function _N(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),h1(n,t.value)},50)}function Bc(n,e,t){for(let s of n.facet(e))t=s(t,n);return t}function h1(n,e){e=Bc(n.state,Cf,e);let{state:t}=n,s,i=1,o=t.toText(e),c=o.lines==t.selection.ranges.length;if(qu!=null&&t.selection.ranges.every(u=>u.empty)&&qu==o.toString()){let u=-1;s=t.changeByRange(m=>{let p=t.doc.lineAt(m.from);if(p.from==u)return{range:m};u=p.from;let g=t.toText((c?o.line(i++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:te.cursor(m.from+g.length)}})}else c?s=t.changeByRange(u=>{let m=o.line(i++);return{changes:{from:u.from,to:u.to,insert:m.text},range:te.cursor(u.from+m.length)}}):s=t.replaceSelection(o);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}Os.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ys.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Os.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Os.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ys.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of n.state.facet(Hy))if(t=s(n,e),t)break;if(!t&&e.button==0&&(t=HN(n,e)),t){let s=!n.hasFocus;n.inputState.startMouseSelection(new FN(n,e,t,s)),s&&n.observer.ignore(()=>{Ty(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function kg(n,e,t,s){if(s==1)return te.cursor(e,t);if(s==2)return bN(n.state,e,t);{let i=n.docView.lineAt(e,t),o=n.state.doc.lineAt(i?i.posAtEnd:e),c=i?i.posAtStart:o.from,d=i?i.posAtEnd:o.to;return d<n.state.doc.length&&d==o.to&&d++,te.range(c,d)}}const WN=me.ie&&me.ie_version<=11;let Sg=null,Cg=0,Mg=0;function u1(n){if(!WN)return n.detail;let e=Sg,t=Mg;return Sg=n,Mg=Date.now(),Cg=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Cg+1)%3:1}function HN(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),s=u1(e),i=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,c,d){let u=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),m,p=kg(n,u.pos,u.assoc,s);if(t.pos!=u.pos&&!c){let g=kg(n,t.pos,t.assoc,s),y=Math.min(g.from,p.from),w=Math.max(g.to,p.to);p=y<p.from?te.range(y,w):te.range(w,y)}return c?i.replaceRange(i.main.extend(p.from,p.to)):d&&s==1&&i.ranges.length>1&&(m=VN(i,u.pos))?m:d?i.addRange(p):te.create([p])}}}function VN(n,e){for(let t=0;t<n.ranges.length;t++){let{from:s,to:i}=n.ranges[t];if(s<=e&&i>=e)return te.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ys.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.tile.nearest(e.target);if(i&&i.isWidget()){let o=i.posAtStart,c=o+i.length;(o>=t.to||c<=t.from)&&(t=te.range(o,c))}}let{inputState:s}=n;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Bc(n.state,Mf,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ys.dragend=n=>(n.inputState.draggedContent=null,!1);function Ag(n,e,t,s){if(t=Bc(n.state,Cf,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,c=s&&o&&IN(n,e)?{from:o.from,to:o.to}:null,d={from:i,insert:t},u=n.state.changes(c?[c,d]:d);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:c?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ys.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),i=0,o=()=>{++i==t.length&&Ag(n,e,s.filter(c=>c!=null).join(n.state.lineBreak),!1)};for(let c=0;c<t.length;c++){let d=new FileReader;d.onerror=o,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(s[c]=d.result),o()},d.readAsText(t[c])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return Ag(n,e,s,!0),!0}return!1};Ys.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=d1?null:e.clipboardData;return t?(h1(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(_N(n),!1)};function UN(n,e){let t=n.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function qN(n){let e=[],t=[],s=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let c=n.doc.lineAt(o);c.number>i&&(e.push(c.text),t.push({from:c.from,to:Math.min(n.doc.length,c.to+1)})),i=c.number}s=!0}return{text:Bc(n,Mf,e.join(n.lineBreak)),ranges:t,linewise:s}}let qu=null;Ys.copy=Ys.cut=(n,e)=>{let t=Ei(n.root);if(t&&!Bl(n.contentDOM,t))return!1;let{text:s,ranges:i,linewise:o}=qN(n.state);if(!s&&!o)return!1;qu=o?s:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let c=d1?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",s),!0):(UN(n,s),!1)};const f1=fr.define();function m1(n,e){let t=[];for(let s of n.facet(qy)){let i=s(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:f1.of(!0)}):null}function p1(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=m1(n.state,e);t?n.dispatch(t):n.update([])}},10)}Os.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),p1(n)};Os.blur=n=>{n.observer.clearSelectionRange(),p1(n)};Os.compositionstart=Os.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Os.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,me.chrome&&me.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Os.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ys.beforeinput=(n,e)=>{var t,s;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),c=e.getTargetRanges();if(o&&c.length){let d=c[0],u=n.posAtDOM(d.startContainer,d.startOffset),m=n.posAtDOM(d.endContainer,d.endOffset);return Lf(n,{from:u,to:m,insert:n.state.toText(o)},null),!0}}let i;if(me.chrome&&me.android&&(i=o1.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return me.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),me.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Os.compositionend(n,e),20),!1};const Eg=new Set;function KN(n){Eg.has(n)||(Eg.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Lg=["pre-wrap","normal","pre-line","break-spaces"];let Ti=!1;function Pg(){Ti=!1}class GN{constructor(e){this.lineWrapping=e,this.doc=Ue.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Lg.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let i=e[s];i<0?s++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,s,i,o,c){let d=Lg.indexOf(e)>-1,u=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=d||Math.abs(s-this.charWidth)>.1;if(this.lineWrapping=d,this.lineHeight=t,this.charWidth=s,this.textHeight=i,this.lineLength=o,u){this.heightSamples={};for(let m=0;m<c.length;m++){let p=c[m];p<0?m++:this.heightSamples[Math.floor(p*10)]=!0}}return u}}class QN{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qs{constructor(e,t,s,i,o){this.from=e,this.length=t,this.top=s,this.height=i,this._content=o}get type(){return typeof this._content=="number"?cs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Ir?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qs(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ze=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Ze||(Ze={}));const Vo=.001;class Xt{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Vo&&(Ti=!0),this.height=e)}replace(e,t,s){return Xt.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,i){let o=this,c=s.doc;for(let d=i.length-1;d>=0;d--){let{fromA:u,toA:m,fromB:p,toB:g}=i[d],y=o.lineAt(u,Ze.ByPosNoHeight,s.setDoc(t),0,0),w=y.to>=m?y:o.lineAt(m,Ze.ByPosNoHeight,s,0,0);for(g+=w.to-m,m=w.to;d>0&&y.from<=i[d-1].toA;)u=i[d-1].fromA,p=i[d-1].fromB,d--,u<y.from&&(y=o.lineAt(u,Ze.ByPosNoHeight,s,0,0));p+=y.from-u,u=y.from;let v=Pf.build(s.setDoc(c),e,p,g);o=hc(o,o.replace(u,m,v))}return o.updateHeight(s,0)}static empty(){return new bs(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,i=0,o=0;for(;;)if(t==s)if(i>o*2){let d=e[t-1];d.break?e.splice(--t,1,d.left,null,d.right):e.splice(--t,1,d.left,d.right),s+=1+d.break,i-=d.size}else if(o>i*2){let d=e[s];d.break?e.splice(s,1,d.left,null,d.right):e.splice(s,1,d.left,d.right),s+=2+d.break,o-=d.size}else break;else if(i<o){let d=e[t++];d&&(i+=d.size)}else{let d=e[--s];d&&(o+=d.size)}let c=0;return e[t-1]==null?(c=1,t--):e[t]==null&&(c=1,s++),new XN(Xt.of(e.slice(0,t)),c,Xt.of(e.slice(s)))}}function hc(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ti=!0),e)}Xt.prototype.size=1;const YN=Oe.replace({});class x1 extends Xt{constructor(e,t,s){super(e,t),this.deco=s,this.spaceAbove=0}mainBlock(e,t){return new qs(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,s,i){return this.spaceAbove&&e<s+this.spaceAbove?new qs(i,0,s,this.spaceAbove,YN):this.mainBlock(s,i)}lineAt(e,t,s,i,o){let c=this.mainBlock(i,o);return this.spaceAbove?this.blockAt(0,s,i,o).join(c):c}forEachLine(e,t,s,i,o,c){e<=o+this.length&&t>=o&&c(this.lineAt(0,Ze.ByPos,s,i,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class bs extends x1{constructor(e,t,s){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=s}mainBlock(e,t){return new qs(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,s){let i=s[0];return s.length==1&&(i instanceof bs||i instanceof Dt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Dt?i=new bs(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):Xt.of(s)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more?this.setMeasuredHeight(i):(s||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Dt extends Xt{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-s+1,c,d=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*o);c=u/o,this.length>o+1&&(d=(this.height-u)/(this.length-o-1))}else c=this.height/o;return{firstLine:s,lastLine:i,perLine:c,perChar:d}}blockAt(e,t,s,i){let{firstLine:o,lastLine:c,perLine:d,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let m=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),p=t.doc.lineAt(m),g=d+p.length*u,y=Math.max(s,e-g/2);return new qs(p.from,p.length,y,g,0)}else{let m=Math.max(0,Math.min(c-o,Math.floor((e-s)/d))),{from:p,length:g}=t.doc.line(o+m);return new qs(p,g,s+d*m,d,0)}}lineAt(e,t,s,i,o){if(t==Ze.ByHeight)return this.blockAt(e,s,i,o);if(t==Ze.ByPosNoHeight){let{from:w,to:v}=s.doc.lineAt(e);return new qs(w,v-w,0,0,0)}let{firstLine:c,perLine:d,perChar:u}=this.heightMetrics(s,o),m=s.doc.lineAt(e),p=d+m.length*u,g=m.number-c,y=i+d*g+u*(m.from-o-g);return new qs(m.from,m.length,Math.max(i,Math.min(y,i+this.height-p)),p,0)}forEachLine(e,t,s,i,o,c){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:d,perLine:u,perChar:m}=this.heightMetrics(s,o);for(let p=e,g=i;p<=t;){let y=s.doc.lineAt(p);if(p==e){let v=y.number-d;g+=u*v+m*(e-o-v)}let w=u+m*y.length;c(new qs(y.from,y.length,g,w,0)),g+=w,p=y.to+1}}replace(e,t,s){let i=this.length-t;if(i>0){let o=s[s.length-1];o instanceof Dt?s[s.length-1]=new Dt(o.length+i):s.push(null,new Dt(i-1))}if(e>0){let o=s[0];o instanceof Dt?s[0]=new Dt(e+o.length):s.unshift(new Dt(e-1),null)}return Xt.of(s)}decomposeLeft(e,t){t.push(new Dt(e-1),null)}decomposeRight(e,t){t.push(null,new Dt(this.length-e-1))}updateHeight(e,t=0,s=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let c=[],d=Math.max(t,i.from),u=-1;for(i.from>t&&c.push(new Dt(i.from-t-1).updateHeight(e,t));d<=o&&i.more;){let p=e.doc.lineAt(d).length;c.length&&c.push(null);let g=i.heights[i.index++],y=0;g<0&&(y=-g,g=i.heights[i.index++]),u==-1?u=g:Math.abs(g-u)>=Vo&&(u=-2);let w=new bs(p,g,y);w.outdated=!1,c.push(w),d+=p+1}d<=o&&c.push(null,new Dt(o-d).updateHeight(e,d));let m=Xt.of(c);return(u<0||Math.abs(m.height-this.height)>=Vo||Math.abs(u-this.heightMetrics(e,t).perLine)>=Vo)&&(Ti=!0),hc(this,m)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class XN extends Xt{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,i){let o=s+this.left.height;return e<o?this.left.blockAt(e,t,s,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,s,i,o){let c=i+this.left.height,d=o+this.left.length+this.break,u=t==Ze.ByHeight?e<c:e<d,m=u?this.left.lineAt(e,t,s,i,o):this.right.lineAt(e,t,s,c,d);if(this.break||(u?m.to<d:m.from>d))return m;let p=t==Ze.ByPosNoHeight?Ze.ByPosNoHeight:Ze.ByPos;return u?m.join(this.right.lineAt(d,p,s,c,d)):this.left.lineAt(d,p,s,i,o).join(m)}forEachLine(e,t,s,i,o,c){let d=i+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,s,i,o,c),t>=u&&this.right.forEachLine(e,t,s,d,u,c);else{let m=this.lineAt(u,Ze.ByPos,s,i,o);e<m.from&&this.left.forEachLine(e,m.from-1,s,i,o,c),m.to>=e&&m.from<=t&&c(m),t>m.to&&this.right.forEachLine(m.to+1,t,s,d,u,c)}}replace(e,t,s){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,s));let o=[];e>0&&this.decomposeLeft(e,o);let c=o.length;for(let d of s)o.push(d);if(e>0&&Tg(o,c-1),t<this.length){let d=o.length;this.decomposeRight(t,o),Tg(o,d)}return Xt.of(o)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,i=s+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Xt.of(this.break?[e,null,t]:[e,t]):(this.left=hc(this.left,e),this.right=hc(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,i){let{left:o,right:c}=this,d=t+o.length+this.break,u=null;return i&&i.from<=t+o.length&&i.more?u=o=o.updateHeight(e,t,s,i):o.updateHeight(e,t,s),i&&i.from<=d+c.length&&i.more?u=c=c.updateHeight(e,d,s,i):c.updateHeight(e,d,s),u?this.balanced(o,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Tg(n,e){let t,s;n[e]==null&&(t=n[e-1])instanceof Dt&&(s=n[e+1])instanceof Dt&&n.splice(e-1,3,new Dt(t.length+1+s.length))}const JN=5;class Pf{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof bs?i.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new bs(s-this.pos,-1,0)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let i=s.widget?s.widget.estimatedHeight:0,o=s.widget?s.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let c=t-e;s.block?this.addBlock(new x1(c,i,s)):(c||o||i>=JN)&&this.addLineDeco(i,o,c)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new bs(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let s=new Dt(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof bs)return e;let t=new bs(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let i=this.ensureLine();i.length+=s,i.collapsed+=s,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof bs)&&!this.isCovered?this.nodes.push(new bs(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let i of this.nodes)i instanceof bs&&i.updateHeight(this.oracle,s),s+=i?i.length:1;return this.nodes}static build(e,t,s,i){let o=new Pf(s,e);return $e.spans(t,s,i,o,0),o.finish(s)}}function ZN(n,e,t){let s=new ek;return $e.compare(n,e,t,s,0),s.changes}class ek{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,i){(e<t||s&&s.heightRelevant||i&&i.heightRelevant)&&ji(e,t,this.changes,5)}}function tk(n,e){let t=n.getBoundingClientRect(),s=n.ownerDocument,i=s.defaultView||window,o=Math.max(0,t.left),c=Math.min(i.innerWidth,t.right),d=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let m=n.parentNode;m&&m!=s.body;)if(m.nodeType==1){let p=m,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),c=Math.min(c,y.right),d=Math.max(d,y.top),u=Math.min(m==n.parentNode?i.innerHeight:u,y.bottom)}m=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(m.nodeType==11)m=m.host;else break;return{left:o-t.left,right:Math.max(o,c)-t.left,top:d-(t.top+e),bottom:Math.max(d,u)-(t.top+e)}}function sk(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function nk(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Gh{constructor(e,t,s,i){this.from=e,this.to=t,this.size=s,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let i=e[s],o=t[s];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,t){return Oe.replace({widget:new rk(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class rk extends Dc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Dg{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rg,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=mt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Af).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new GN(t),this.stateDeco=Og(e),this.heightMap=Xt.empty().applyChanges(this.stateDeco,Ue.empty,this.heightOracle.setDoc(e.doc),[new Ps(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Oe.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let i=s?t.head:t.anchor;if(!e.some(({from:o,to:c})=>i>=o&&i<=c)){let{from:o,to:c}=this.lineBlockAt(i);e.push(new No(o,c))}}return this.viewports=e.sort((s,i)=>s.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Rg:new Tf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Pl(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=Og(this.state);let i=e.changedRanges,o=Ps.extendWithRanges(i,ZN(s,this.stateDeco,e?e.changes:jt.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Pg(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=c||Ti)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=c);let u=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let m=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(m||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Y2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),i=this.heightOracle,o=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?mt.RTL:mt.LTR;let c=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,d=t.getBoundingClientRect(),u=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let m=0,p=0;if(d.width&&d.height){let{scaleX:E,scaleY:I}=Py(t,d);(E>.005&&Math.abs(this.scaleX-E)>.005||I>.005&&Math.abs(this.scaleY-I)>.005)&&(this.scaleX=E,this.scaleY=I,m|=16,c=u=!0)}let g=(parseInt(s.paddingTop)||0)*this.scaleY,y=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,m|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=16);let w=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=Dy(e.scrollDOM);let v=(this.printing?nk:tk)(t,this.paddingTop),j=v.top-this.pixelViewport.top,S=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(u=!0)),!this.inView&&!this.scrollTarget&&!sk(e.dom))return 0;let C=d.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,m|=16),u){let E=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(E)&&(c=!0),c||i.lineWrapping&&Math.abs(C-this.contentDOMWidth)>i.charWidth){let{lineHeight:I,charWidth:U,textHeight:F}=e.docView.measureTextSize();c=I>0&&i.refresh(o,I,U,F,Math.max(5,C/U),E),c&&(e.docView.minWidth=0,m|=16)}j>0&&S>0?p=Math.max(j,S):j<0&&S<0&&(p=Math.min(j,S)),Pg();for(let I of this.viewports){let U=I.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(I);this.heightMap=(c?Xt.empty().applyChanges(this.stateDeco,Ue.empty,this.heightOracle,[new Ps(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,c,new QN(I.from,U))}Ti&&(m|=2)}let D=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return D&&(m&2&&(m|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),m|=this.updateForViewport()),(m&2||D)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,u=new No(i.lineAt(c-s*1e3,Ze.ByHeight,o,0,0).from,i.lineAt(d+(1-s)*1e3,Ze.ByHeight,o,0,0).to);if(t){let{head:m}=t.range;if(m<u.from||m>u.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=i.lineAt(m,Ze.ByPos,o,0,0),y;t.y=="center"?y=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&m<u.from?y=g.top:y=g.bottom-p,u=new No(i.lineAt(y-1e3/2,Ze.ByHeight,o,0,0).from,i.lineAt(y+p+1e3/2,Ze.ByHeight,o,0,0).to)}}return u}mapViewport(e,t){let s=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new No(this.heightMap.lineAt(s,Ze.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ze.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ze.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Ze.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||i<=c-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||o>=d+Math.max(10,Math.min(s,250)))&&i>c-2*1e3&&o<d+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let i of e)t.touchesRange(i.from,i.to)||s.push(new Gh(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,i=s?1e4:2e3,o=i>>1,c=i<<1;if(this.defaultTextDirection!=mt.LTR&&!s)return[];let d=[],u=(p,g,y,w)=>{if(g-p<o)return;let v=this.state.selection.main,j=[v.from];v.empty||j.push(v.to);for(let k of j)if(k>p&&k<g){u(p,k-10,y,w),u(k+10,g,y,w);return}let S=lk(e,k=>k.from>=y.from&&k.to<=y.to&&Math.abs(k.from-p)<o&&Math.abs(k.to-g)<o&&!j.some(C=>k.from<C&&k.to>C));if(!S){if(g<y.to&&t&&s&&t.visibleRanges.some(D=>D.from<=g&&D.to>=g)){let D=t.moveToLineBoundary(te.cursor(g),!1,!0).head;D>p&&(g=D)}let k=this.gapSize(y,p,g,w),C=s||k<2e6?k:2e6;S=new Gh(p,g,k,C)}d.push(S)},m=p=>{if(p.length<c||p.type!=cs.Text)return;let g=ik(p.from,p.to,this.stateDeco);if(g.total<c)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,w,v;if(s){let j=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,k;if(y!=null){let C=So(g,y),D=((this.visibleBottom-this.visibleTop)/2+j)/p.height;S=C-D,k=C+D}else S=(this.visibleTop-p.top-j)/p.height,k=(this.visibleBottom-p.top+j)/p.height;w=ko(g,S),v=ko(g,k)}else{let j=g.total*this.heightOracle.charWidth,S=i*this.heightOracle.charWidth,k=0;if(j>2e6)for(let U of e)U.from>=p.from&&U.from<p.to&&U.size!=U.displaySize&&U.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=U.size-U.displaySize);let C=this.pixelViewport.left+k,D=this.pixelViewport.right+k,E,I;if(y!=null){let U=So(g,y),F=((D-C)/2+S)/j;E=U-F,I=U+F}else E=(C-S)/j,I=(D+S)/j;w=ko(g,E),v=ko(g,I)}w>p.from&&u(p.from,w,p,g),v<p.to&&u(v,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(m):m(p);return d}gapSize(e,t,s,i){let o=So(i,s)-So(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){Gh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Oe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];$e.spans(t,this.viewport.from,this.viewport.to,{span(o,c){s.push({from:o,to:c})},point(){}},20);let i=0;if(s.length!=this.visibleRanges.length)i=12;else for(let o=0;o<s.length&&!(i&8);o++){let c=this.visibleRanges[o],d=s[o];(c.from!=d.from||c.to!=d.to)&&(i|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(i|=8))}return this.visibleRanges=s,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Pl(this.heightMap.lineAt(e,Ze.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Pl(this.heightMap.lineAt(this.scaler.fromDOM(e),Ze.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Pl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class No{constructor(e,t){this.from=e,this.to=t}}function ik(n,e,t){let s=[],i=n,o=0;return $e.spans(t,n,e,{span(){},point(c,d){c>i&&(s.push({from:i,to:c}),o+=c-i),i=d}},20),i<e&&(s.push({from:i,to:e}),o+=e-i),{total:o,ranges:s}}function ko({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:c}=e[i],d=c-o;if(s<=d)return o+s;s-=d}}function So(n,e){let t=0;for(let{from:s,to:i}of n.ranges){if(e<=i){t+=e-s;break}t+=i-s}return t/n.total}function lk(n,e){for(let t of n)if(e(t))return t}const Rg={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function Og(n){let e=n.facet(Rc).filter(s=>typeof s!="function"),t=n.facet(Ef).filter(s=>typeof s!="function");return t.length&&e.push($e.join(t)),e}class Tf{constructor(e,t,s){let i=0,o=0,c=0;this.viewports=s.map(({from:d,to:u})=>{let m=t.lineAt(d,Ze.ByPos,e,0,0).top,p=t.lineAt(u,Ze.ByPos,e,0,0).bottom;return i+=p-m,{from:d,to:u,top:m,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let d of this.viewports)d.domTop=c+(d.top-o)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),o=d.bottom}toDOM(e){for(let t=0,s=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-s)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);s=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,s=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return s+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);s=o.bottom,i=o.domBottom}}eq(e){return e instanceof Tf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function Pl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),s=e.toDOM(n.bottom);return new qs(n.from,n.length,t,s-t,Array.isArray(n._content)?n._content.map(i=>Pl(i,e)):n._content)}const Co=ye.define({combine:n=>n.join(" ")}),Ku=ye.define({combine:n=>n.indexOf(!0)>-1}),Gu=cr.newName(),g1=cr.newName(),y1=cr.newName(),b1={"&light":"."+g1,"&dark":"."+y1};function Qu(n,e,t){return new cr(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+s}})}const ak=Qu("."+Gu,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},b1),ok={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Qh=me.ie&&me.ie_version<=11;class ck{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new I2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(me.ie&&me.ie_version<=11||me.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&me.android&&e.constructor.EDIT_CONTEXT!==!1&&!(me.chrome&&me.chrome_version<126)&&(this.editContext=new hk(e),e.state.facet(Ln)&&(e.contentDOM.editContext=this.editContext.editContext)),Qh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,i=this.selectionRange;if(s.state.facet(Ln)?s.root.activeElement!=this.dom:!Bl(this.dom,i))return;let o=i.anchorNode&&s.docView.tile.nearest(i.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(me.ie&&me.ie_version<=11||me.android&&me.chrome)&&!s.state.selection.main.empty&&i.focusNode&&Il(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ei(e.root);if(!t)return!1;let s=me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&dk(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let i=Bl(this.dom,s);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&$2(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ok),Qh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Qh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Ni(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,i=!1;for(let o of e){let c=this.readMutation(o);c&&(c.typeOver&&(i=!0),t==-1?{from:t,to:s}=c:(t=Math.min(c.from,t),s=Math.max(c.to,s)))}return{from:t,to:s,typeOver:i}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),i=this.selectionChanged&&Bl(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new AN(this.view,e,t,s);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,i=l1(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!dc(this.view.state.selection,t.newSel.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let s=Fg(t,e.previousSibling||e.target.previousSibling,-1),i=Fg(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ln)!=e.state.facet(Ln)&&(e.view.contentDOM.editContext=e.state.facet(Ln)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Fg(n,e,t){for(;e;){let s=bt.get(e);if(s&&s.parent==n)return s;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function Bg(n,e){let t=e.startContainer,s=e.startOffset,i=e.endContainer,o=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor,1);return Il(c.node,c.offset,i,o)&&([t,s,i,o]=[i,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:o}}function dk(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Bg(n,i)}let t=null;function s(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",s,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",s,!0),t?Bg(n,t):null}class hk{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let i=e.state.selection.main,{anchor:o,head:c}=i,d=this.toEditorPos(s.updateRangeStart),u=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:d,drifted:!1});let m=u-d>s.text.length;d==this.from&&o<this.from?d=o:u==this.to&&o>this.to&&(u=o);let p=a1(e.state.sliceDoc(d,u),s.text,(m?i.from:i.to)-d,m?"end":null);if(!p){let y=te.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));dc(y,i)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:p.from+d,to:p.toA+d,insert:Ue.of(s.text.slice(p.from,p.toB).split(`
`))};if((me.mac||me.android)&&g.from==c-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:d,to:u,insert:Ue.of([s.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);Lf(e,g,te.single(this.toEditorPos(s.selectionStart,y),this.toEditorPos(s.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let i=[],o=null;for(let c=this.toEditorPos(s.rangeStart),d=this.toEditorPos(s.rangeEnd);c<d;c++){let u=e.coordsForChar(c);o=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||o||new DOMRect,i.push(o)}t.updateCharacterBounds(s.rangeStart,i)},this.handlers.textformatupdate=s=>{let i=[];for(let o of s.getTextFormats()){let c=o.underlineStyle,d=o.underlineThickness;if(!/none/i.test(c)&&!/none/i.test(d)){let u=this.toEditorPos(o.rangeStart),m=this.toEditorPos(o.rangeEnd);if(u<m){let p=`text-decoration: underline ${/^[a-z]/.test(c)?c+" ":c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${/thin/i.test(d)?1:2}px`;i.push(Oe.mark({attributes:{style:p}}).range(u,m))}}}e.dispatch({effects:Qy.of(Oe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let i=Ei(s.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,c,d,u,m)=>{if(s)return;let p=m.length-(c-o);if(i&&c>=i.to)if(i.from==o&&i.to==c&&i.insert.eq(m)){i=this.pendingContextChange=null,t+=p,this.to+=p;return}else i=null,this.revertPending(e.state);if(o+=t,c+=t,c<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||c>this.to||this.to-this.from+m.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(c),m.toString()),this.to+=p}t+=p}),i&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(s,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class ve{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(i=>i.forEach(o=>s(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||z2(e.parent)||document,this.viewState=new Dg(e.state||Ve.create(e)),e.scrollTo&&e.scrollTo.is(wo)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(gi).map(i=>new Hh(i));for(let i of this.plugins)i.update(this);this.observer=new ck(this),this.inputState=new TN(this),this.inputState.ensureHandlers(this.plugins),this.docView=new bg(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof kt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,i,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let c=this.hasFocus,d=0,u=null;e.some(y=>y.annotation(f1))?(this.inputState.notifiedFocused=c,d=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,u=m1(o,c),u||(d=1));let m=this.observer.delayedAndroidKey,p=null;if(m?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(Ve.phrases)!=this.state.facet(Ve.phrases))return this.setState(o);i=ac.create(this,o,e),i.flags|=d;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:w}=y.state.selection;g=new ki(w.empty?w:te.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of y.effects)w.is(wo)&&(g=w.value.clip(this.state))}this.viewState.update(i,g),this.bidiCache=uc.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(El)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Co)!=i.state.facet(Co)&&(this.viewState.mustMeasureContent=!0),(t||s||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let y of this.state.facet(Hu))try{y(i)}catch(w){fn(this.state,w,"update listener")}(u||p)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),p&&!l1(this,p)&&m.force&&Ni(this.contentDOM,m.key,m.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new Dg(e),this.plugins=e.facet(gi).map(s=>new Hh(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new bg(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(gi),s=e.state.facet(gi);if(t!=s){let i=[];for(let o of s){let c=t.indexOf(o);if(c<0)i.push(new Hh(o));else{let d=this.plugins[c];d.mustUpdate=e,i.push(d)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){fn(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,i=s.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:c}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let d=0;;d++){if(c<0)if(Dy(s))o=-1,c=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(i);o=w.from,c=w.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(d>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];u&4||([this.measureRequests,m]=[m,this.measureRequests]);let p=m.map(w=>{try{return w.read(this)}catch(v){return fn(this.state,v),Ig}}),g=ac.create(this,this.state,[]),y=!1;g.flags|=u,t?t.flags|=u:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let w=0;w<m.length;w++)if(p[w]!=Ig)try{let v=m[w];v.write&&v.write(p[w],this)}catch(v){fn(this.state,v)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let v=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-c;if(v>1||v<-1){i=i+v,s.scrollTop=i/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let d of this.state.facet(Hu))d(t)}get themeClasses(){return Gu+" "+(this.state.facet(Ku)?y1:g1)+" "+this.state.facet(Co)}updateAttrs(){let e=zg(this,Yy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Ln)?"true":"false",class:"cm-content",style:`${me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),zg(this,Af,t);let s=this.observer.ignore(()=>{let i=fg(this.contentDOM,this.contentAttrs,t),o=fg(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let i of s.effects)if(i.is(ve.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(El);let e=this.state.facet(ve.cspNonce);cr.mount(this.root,this.styleModules.concat(ak).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return Kh(this,e,wg(this,e,t,s))}moveByGroup(e,t){return Kh(this,e,wg(this,e,t,s=>NN(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=s[t?s.length-1:0];return te.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,s=!0){return jN(this,e,t,s)}moveVertically(e,t,s){return Kh(this,e,kN(this,e,t,s))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let s=Uu(this,e,t);return s&&s.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),Uu(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),c=o[Tn.find(o,e-i.from,-1,t)];return lc(s,c.dir==mt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ky)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>uk)return zy(e.length);let t=this.textDirectionAt(e.from),s;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Iy(o.isolates,s=xg(this,e))))return o.order;s||(s=xg(this,e));let i=K2(e.text,t,s);return this.bidiCache.push(new uc(e.from,e.to,t,s,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ty(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return wo.of(new ki(typeof e=="number"?te.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return wo.of(new ki(te.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return vs.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return vs.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=cr.newName(),i=[Co.of(s),El.of(Qu(`.${s}`,e))];return t&&t.dark&&i.push(Ku.of(!0)),i}static baseTheme(e){return Ec.lowest(El.of(Qu("."+Gu,e,b1)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),i=s&&bt.get(s)||bt.get(e);return((t=i==null?void 0:i.root)===null||t===void 0?void 0:t.view)||null}}ve.styleModule=El;ve.inputHandler=Uy;ve.clipboardInputFilter=Cf;ve.clipboardOutputFilter=Mf;ve.scrollHandler=Gy;ve.focusChangeEffect=qy;ve.perLineTextDirection=Ky;ve.exceptionSink=Vy;ve.updateListener=Hu;ve.editable=Ln;ve.mouseSelectionStyle=Hy;ve.dragMovesSelection=Wy;ve.clickAddsSelectionRange=_y;ve.decorations=Rc;ve.blockWrappers=Xy;ve.outerDecorations=Ef;ve.atomicRanges=na;ve.bidiIsolatedRanges=Jy;ve.scrollMargins=Zy;ve.darkTheme=Ku;ve.cspNonce=ye.define({combine:n=>n.length?n[0]:""});ve.contentAttributes=Af;ve.editorAttributes=Yy;ve.lineWrapping=ve.contentAttributes.of({class:"cm-lineWrapping"});ve.announce=Qe.define();const uk=4096,Ig={};class uc{constructor(e,t,s,i,o,c){this.from=e,this.to=t,this.dir=s,this.isolates=i,this.fresh=o,this.order=c}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let s=[],i=e.length?e[e.length-1].dir:mt.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let c=e[o];c.dir==i&&!t.touchesRange(c.from,c.to)&&s.push(new uc(t.mapPos(c.from,1),t.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return s}}function zg(n,e,t){for(let s=n.state.facet(e),i=s.length-1;i>=0;i--){let o=s[i],c=typeof o=="function"?o(n):o;c&&Nf(c,t)}return t}const fk=me.mac?"mac":me.windows?"win":me.linux?"linux":"key";function mk(n,e){const t=n.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let i,o,c,d;for(let u=0;u<t.length-1;++u){const m=t[u];if(/^(cmd|meta|m)$/i.test(m))d=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))c=!0;else if(/^mod$/i.test(m))e=="mac"?d=!0:o=!0;else throw new Error("Unrecognized modifier name: "+m)}return i&&(s="Alt-"+s),o&&(s="Ctrl-"+s),d&&(s="Meta-"+s),c&&(s="Shift-"+s),s}function Mo(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const pk=Ec.default(ve.domEventHandlers({keydown(n,e){return j1(v1(e.state),n,e,"editor")}})),w1=ye.define({enables:pk}),$g=new WeakMap;function v1(n){let e=n.facet(w1),t=$g.get(e);return t||$g.set(e,t=yk(e.reduce((s,i)=>s.concat(i),[]))),t}function xk(n,e,t){return j1(v1(n.state),e,n,t)}let rr=null;const gk=4e3;function yk(n,e=fk){let t=Object.create(null),s=Object.create(null),i=(c,d)=>{let u=s[c];if(u==null)s[c]=d;else if(u!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},o=(c,d,u,m,p)=>{var g,y;let w=t[c]||(t[c]=Object.create(null)),v=d.split(/ (?!$)/).map(k=>mk(k,e));for(let k=1;k<v.length;k++){let C=v.slice(0,k).join(" ");i(C,!0),w[C]||(w[C]={preventDefault:!0,stopPropagation:!1,run:[D=>{let E=rr={view:D,prefix:C,scope:c};return setTimeout(()=>{rr==E&&(rr=null)},gk),!0}]})}let j=v.join(" ");i(j,!1);let S=w[j]||(w[j]={preventDefault:!1,stopPropagation:!1,run:((y=(g=w._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});u&&S.run.push(u),m&&(S.preventDefault=!0),p&&(S.stopPropagation=!0)};for(let c of n){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let m of d){let p=t[m]||(t[m]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=c;for(let y in p)p[y].run.push(w=>g(w,Yu))}let u=c[e]||c.key;if(u)for(let m of d)o(m,u,c.run,c.preventDefault,c.stopPropagation),c.shift&&o(m,"Shift-"+u,c.shift,c.preventDefault,c.stopPropagation)}return t}let Yu=null;function j1(n,e,t,s){Yu=e;let i=L2(e),o=fy(i,0),c=my(o)==i.length&&i!=" ",d="",u=!1,m=!1,p=!1;rr&&rr.view==t&&rr.scope==s&&(d=rr.prefix+" ",c1.indexOf(e.keyCode)<0&&(m=!0,rr=null));let g=new Set,y=S=>{if(S){for(let k of S.run)if(!g.has(k)&&(g.add(k),k(t)))return S.stopPropagation&&(p=!0),!0;S.preventDefault&&(S.stopPropagation&&(p=!0),m=!0)}return!1},w=n[s],v,j;return w&&(y(w[d+Mo(i,e,!c)])?u=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(me.windows&&e.ctrlKey&&e.altKey)&&!(me.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=dr[e.keyCode])&&v!=i?(y(w[d+Mo(v,e,!0)])||e.shiftKey&&(j=Vl[e.keyCode])!=i&&j!=v&&y(w[d+Mo(j,e,!1)]))&&(u=!0):c&&e.shiftKey&&y(w[d+Mo(i,e,!0)])&&(u=!0),!u&&y(w._any)&&(u=!0)),m&&(u=!0),u&&p&&e.stopPropagation(),Yu=null,u}function bk(){return vk}const wk=Oe.line({class:"cm-activeLine"}),vk=vs.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let s of n.state.selection.ranges){let i=n.lineBlockAt(s.head);i.from>e&&(t.push(wk.range(i.from)),e=i.from)}return Oe.set(t)}},{decorations:n=>n.decorations}),_g=ye.define({combine(n){let e,t;for(let s of n)e=e||s.topContainer,t=t||s.bottomContainer;return{topContainer:e,bottomContainer:t}}});function N1(n,e){let t=n.plugin(k1),s=t?t.specs.indexOf(e):-1;return s>-1?t.panels[s]:null}const k1=vs.fromClass(class{constructor(n){this.input=n.state.facet(fc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(_g);this.top=new Ao(n,!0,e.topContainer),this.bottom=new Ao(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(_g);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ao(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ao(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(fc);if(t!=this.input){let s=t.filter(u=>u),i=[],o=[],c=[],d=[];for(let u of s){let m=this.specs.indexOf(u),p;m<0?(p=u(n.view),d.push(p)):(p=this.panels[m],p.update&&p.update(n)),i.push(p),(p.top?o:c).push(p)}this.specs=s,this.panels=i,this.top.sync(o),this.bottom.sync(c);for(let u of d)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let s of this.panels)s.update&&s.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ao{constructor(e,t,s){this.view=e,this.top=t,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Wg(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Wg(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Wg(n){let e=n.nextSibling;return n.remove(),e}const fc=ye.define({enables:k1});function jk(n,e){let t,s=new Promise(c=>t=c),i=c=>Nk(c,e,t);n.state.field(Yh,!1)?n.dispatch({effects:S1.of(i)}):n.dispatch({effects:Qe.appendConfig.of(Yh.init(()=>[i]))});let o=C1.of(i);return{close:o,result:s.then(c=>((n.win.queueMicrotask||(u=>n.win.setTimeout(u,10)))(()=>{n.state.field(Yh).indexOf(i)>-1&&n.dispatch({effects:o})}),c))}}const Yh=Xs.define({create(){return[]},update(n,e){for(let t of e.effects)t.is(S1)?n=[t.value].concat(n):t.is(C1)&&(n=n.filter(s=>s!=t.value));return n},provide:n=>fc.computeN([n],e=>e.field(n))}),S1=Qe.define(),C1=Qe.define();function Nk(n,e,t){let s=e.content?e.content(n,()=>c(null)):null;if(!s){if(s=Et("form"),e.input){let d=Et("input",e.input);/^(text|password|number|email|tel|url)$/.test(d.type)&&d.classList.add("cm-textfield"),d.name||(d.name="input"),s.appendChild(Et("label",(e.label||"")+": ",d))}else s.appendChild(document.createTextNode(e.label||""));s.appendChild(document.createTextNode(" ")),s.appendChild(Et("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=s.nodeName=="FORM"?[s]:s.querySelectorAll("form");for(let d=0;d<i.length;d++){let u=i[d];u.addEventListener("keydown",m=>{m.keyCode==27?(m.preventDefault(),c(null)):m.keyCode==13&&(m.preventDefault(),c(u))}),u.addEventListener("submit",m=>{m.preventDefault(),c(u)})}let o=Et("div",s,Et("button",{onclick:()=>c(null),"aria-label":n.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(o.className=e.class),o.classList.add("cm-dialog");function c(d){o.contains(o.ownerDocument.activeElement)&&n.focus(),t(d)}return{dom:o,top:e.top,mount:()=>{if(e.focus){let d;typeof e.focus=="string"?d=s.querySelector(e.focus):d=s.querySelector("input")||s.querySelector("button"),d&&"select"in d?d.select():d&&"focus"in d&&d.focus()}}}}class On extends Br{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}On.prototype.elementClass="";On.prototype.toDOM=void 0;On.prototype.mapMode=ws.TrackBefore;On.prototype.startSide=On.prototype.endSide=-1;On.prototype.point=!0;const Uo=ye.define(),kk=ye.define(),Sk={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>$e.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},$l=ye.define();function Ck(n){return[M1(),$l.of({...Sk,...n})]}const Hg=ye.define({combine:n=>n.some(e=>e)});function M1(n){return[Mk]}const Mk=vs.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet($l).map(e=>new Ug(n,e)),this.fixed=!n.state.facet(Hg);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Hg)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=$e.iter(this.view.state.facet(Uo),this.view.viewport.from),s=[],i=this.gutters.map(o=>new Ak(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(o.type)){let c=!0;for(let d of o.type)if(d.type==cs.Text&&c){Xu(t,s,d.from);for(let u of i)u.line(this.view,d,s);c=!1}else if(d.widget)for(let u of i)u.widget(this.view,d)}else if(o.type==cs.Text){Xu(t,s,o.from);for(let c of i)c.line(this.view,o,s)}else if(o.widget)for(let c of i)c.widget(this.view,o);for(let o of i)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet($l),t=n.state.facet($l),s=n.docChanged||n.heightChanged||n.viewportChanged||!$e.eq(n.startState.facet(Uo),n.state.facet(Uo),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(s=!0);else{s=!0;let i=[];for(let o of t){let c=e.indexOf(o);c<0?i.push(new Ug(this.view,o)):(this.gutters[c].update(n),i.push(this.gutters[c]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return s}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==mt.LTR?{left:s,right:i}:{right:s,left:i}})});function Vg(n){return Array.isArray(n)?n:[n]}function Xu(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class Ak{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=$e.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:i}=this,o=(t.top-this.height)/e.scaleY,c=t.height/e.scaleY;if(this.i==i.elements.length){let d=new A1(e,c,o,s);i.elements.push(d),i.dom.appendChild(d.dom)}else i.elements[this.i].update(e,c,o,s);this.height=t.bottom,this.i++}line(e,t,s){let i=[];Xu(this.cursor,i,t.from),s.length&&(i=i.concat(s));let o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let c=this.gutter;i.length==0&&!c.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),i=s?[s]:null;for(let o of e.state.facet(kk)){let c=o(e,t.widget,t);c&&(i||(i=[])).push(c)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Ug{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,i=>{let o=i.target,c;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let u=o.getBoundingClientRect();c=(u.top+u.bottom)/2}else c=i.clientY;let d=e.lineBlockAtHeight(c-e.documentTop);t.domEventHandlers[s](e,d,i)&&i.preventDefault()});this.markers=Vg(t.markers(e)),t.initialSpacer&&(this.spacer=new A1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Vg(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let s=e.view.viewport;return!$e.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class A1{constructor(e,t,s,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,i)}update(e,t,s,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),Ek(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let s="cm-gutterElement",i=this.dom.firstChild;for(let o=0,c=0;;){let d=c,u=o<t.length?t[o++]:null,m=!1;if(u){let p=u.elementClass;p&&(s+=" "+p);for(let g=c;g<this.markers.length;g++)if(this.markers[g].compare(u)){d=g,m=!0;break}}else d=this.markers.length;for(;c<d;){let p=this.markers[c++];if(p.toDOM){p.destroy(i);let g=i.nextSibling;i.remove(),i=g}}if(!u)break;u.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),m&&c++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ek(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Lk=ye.define(),Pk=ye.define(),yi=ye.define({combine(n){return ea(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let i in t){let o=s[i],c=t[i];s[i]=o?(d,u,m)=>o(d,u,m)||c(d,u,m):c}return s}})}});class Xh extends On{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Jh(n,e){return n.state.facet(yi).formatNumber(e,n.state)}const Tk=$l.compute([yi],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Lk)},lineMarker(e,t,s){return s.some(i=>i.toDOM)?null:new Xh(Jh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let i of e.state.facet(Pk)){let o=i(e,t,s);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(yi)!=e.state.facet(yi),initialSpacer(e){return new Xh(Jh(e,qg(e.state.doc.lines)))},updateSpacer(e,t){let s=Jh(t.view,qg(t.view.state.doc.lines));return s==e.number?e:new Xh(s)},domEventHandlers:n.facet(yi).domEventHandlers,side:"before"}));function Dk(n={}){return[yi.of(n),M1(),Tk]}function qg(n){let e=9;for(;e<n;)e=e*10+9;return e}const Rk=new class extends On{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ok=Uo.compute(["selection"],n=>{let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.head).from;i>t&&(t=i,e.push(Rk.range(i)))}return $e.of(e)});function Fk(){return Ok}const Bk=1024;let Ik=0;class Ts{constructor(e,t){this.from=e,this.to=t}}class ze{constructor(e={}){this.id=Ik++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ds.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}ze.closedBy=new ze({deserialize:n=>n.split(" ")});ze.openedBy=new ze({deserialize:n=>n.split(" ")});ze.group=new ze({deserialize:n=>n.split(" ")});ze.isolate=new ze({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});ze.contextHash=new ze({perNode:!0});ze.lookAhead=new ze({perNode:!0});ze.mounted=new ze({perNode:!0});class Si{constructor(e,t,s,i=!1){this.tree=e,this.overlay=t,this.parser=s,this.bracketed=i}static get(e){return e&&e.props&&e.props[ze.mounted.id]}}const zk=Object.create(null);class ds{constructor(e,t,s,i=0){this.name=e,this.props=t,this.id=s,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):zk,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new ds(e.name||"",t,e.id,s);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ze.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let i of s.split(" "))t[i]=e[s];return s=>{for(let i=s.prop(ze.group),o=-1;o<(i?i.length:0);o++){let c=t[o<0?s.name:i[o]];if(c)return c}}}}ds.none=new ds("",Object.create(null),0,8);class E1{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let i=null;for(let o of e){let c=o(s);if(c){i||(i=Object.assign({},s.props));let d=c[1],u=c[0];u.combine&&u.id in i&&(d=u.combine(i[u.id],d)),i[u.id]=d}}t.push(i?new ds(s.name,i,s.id,s.flags):s)}return new E1(t)}}const Eo=new WeakMap,Kg=new WeakMap;var Ge;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(Ge||(Ge={}));class gt{constructor(e,t,s,i,o){if(this.type=e,this.children=t,this.positions=s,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[c,d]of o)this.props[typeof c=="number"?c:c.id]=d}}toString(){let e=Si.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let i=s.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new mc(this.topNode,e)}cursorAt(e,t=0,s=0){let i=Eo.get(this)||this.topNode,o=new mc(i);return o.moveTo(e,t),Eo.set(this,o._tree),o}get topNode(){return new Wt(this,0,0,null)}resolve(e,t=0){let s=Kl(Eo.get(this)||this.topNode,e,t,!1);return Eo.set(this,s),s}resolveInner(e,t=0){let s=Kl(Kg.get(this)||this.topNode,e,t,!0);return Kg.set(this,s),s}resolveStack(e,t=0){return Wk(this,e,t)}iterate(e){let{enter:t,leave:s,from:i=0,to:o=this.length}=e,c=e.mode||0,d=(c&Ge.IncludeAnonymous)>0;for(let u=this.cursor(c|Ge.IncludeAnonymous);;){let m=!1;if(u.from<=o&&u.to>=i&&(!d&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;m=!0}for(;m&&s&&(d||!u.type.isAnonymous)&&s(u),!u.nextSibling();){if(!u.parent())return;m=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Of(ds.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,i)=>new gt(this.type,t,s,i,this.propValues),e.makeTree||((t,s,i)=>new gt(ds.none,t,s,i)))}static build(e){return Hk(e)}}gt.empty=new gt(ds.none,[],[],0);class Df{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Df(this.buffer,this.index)}}class ur{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return ds.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,s==e)return o;let c=[];for(;e<s;)c.push(this.childString(e)),e=this.buffer[e+3];return o+"("+c.join(",")+")"}findChild(e,t,s,i,o){let{buffer:c}=this,d=-1;for(let u=e;u!=t&&!(L1(o,i,c[u+1],c[u+2])&&(d=u,s>0));u=c[u+3]);return d}slice(e,t,s){let i=this.buffer,o=new Uint16Array(t-e),c=0;for(let d=e,u=0;d<t;){o[u++]=i[d++],o[u++]=i[d++]-s;let m=o[u++]=i[d++]-s;o[u++]=i[d++]-e,c=Math.max(c,m)}return new ur(o,c,this.set)}}function L1(n,e,t,s){switch(n){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function Kl(n,e,t,s){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let c=!s&&n instanceof Wt&&n.index<0?null:n.parent;if(!c)return n;n=c}let o=s?0:Ge.IgnoreOverlays;if(s)for(let c=n,d=c.parent;d;c=d,d=c.parent)c instanceof Wt&&c.index<0&&((i=d.enter(e,t,o))===null||i===void 0?void 0:i.from)!=c.from&&(n=d);for(;;){let c=n.enter(e,t,o);if(!c)return n;n=c}}class P1{cursor(e=0){return new mc(this,e)}getChild(e,t=null,s=null){let i=Gg(this,e,t,s);return i.length?i[0]:null}getChildren(e,t=null,s=null){return Gg(this,e,t,s)}resolve(e,t=0){return Kl(this,e,t,!1)}resolveInner(e,t=0){return Kl(this,e,t,!0)}matchContext(e){return Ju(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(s=t,t=i.prevSibling):t=i}return s}get node(){return this}get next(){return this.parent}}class Wt extends P1{constructor(e,t,s,i){super(),this._tree=e,this.from=t,this.index=s,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,i,o=0){for(let c=this;;){for(let{children:d,positions:u}=c._tree,m=t>0?d.length:-1;e!=m;e+=t){let p=d[e],g=u[e]+c.from,y;if(!(!(o&Ge.EnterBracketed&&p instanceof gt&&(y=Si.get(p))&&!y.overlay&&y.bracketed&&s>=g&&s<=g+p.length)&&!L1(i,s,g,g+p.length))){if(p instanceof ur){if(o&Ge.ExcludeBuffers)continue;let w=p.findChild(0,p.buffer.length,t,s-g,i);if(w>-1)return new mn(new $k(c,p,e,g),null,w)}else if(o&Ge.IncludeAnonymous||!p.type.isAnonymous||Rf(p)){let w;if(!(o&Ge.IgnoreMounts)&&(w=Si.get(p))&&!w.overlay)return new Wt(w.tree,g,e,c);let v=new Wt(p,g,e,c);return o&Ge.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?p.children.length-1:0,t,s,i,o)}}}if(o&Ge.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+t:e=t<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,s=0){let i;if(!(s&Ge.IgnoreOverlays)&&(i=Si.get(this._tree))&&i.overlay){let o=e-this.from,c=s&Ge.EnterBracketed&&i.bracketed;for(let{from:d,to:u}of i.overlay)if((t>0||c?d<=o:d<o)&&(t<0||c?u>=o:u>o))return new Wt(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Gg(n,e,t,s){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let c=!1;!c;)if(c=i.type.is(t),!i.nextSibling())return o}for(;;){if(s!=null&&i.type.is(s))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return s==null?o:[]}}function Ju(n,e,t=e.length-1){for(let s=n;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class $k{constructor(e,t,s,i){this.parent=e,this.buffer=t,this.index=s,this.start=i}}class mn extends P1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,s);return o<0?null:new mn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,s=0){if(s&Ge.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new mn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new mn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,i=this.index+4,o=s.buffer[this.index+3];if(o>i){let c=s.buffer[this.index+1];e.push(s.slice(i,o,c)),t.push(0)}return new gt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function T1(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let c=n[o];(c.from>t.from||c.to<t.to)&&(t=c,e=o)}let s=t instanceof Wt&&t.index<0?null:t.parent,i=n.slice();return s?i[e]=s:i.splice(e,1),new _k(i,t)}class _k{constructor(e,t){this.heads=e,this.node=t}get next(){return T1(this.heads)}}function Wk(n,e,t){let s=n.resolveInner(e,t),i=null;for(let o=s instanceof Wt?s:s.context.parent;o;o=o.parent)if(o.index<0){let c=o.parent;(i||(i=[s])).push(c.resolve(e,t)),o=c}else{let c=Si.get(o.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new Wt(c.tree,c.overlay[0].from+o.from,-1,o);(i||(i=[s])).push(Kl(d,e,t,!1))}}return i?T1(i):s}class mc{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~Ge.EnterBracketed,e instanceof Wt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=s+i.buffer[e+1],this.to=s+i.buffer[e+2],!0}yield(e){return e?e instanceof Wt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,s);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&Ge.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ge.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ge.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let i=s<0?0:this.stack[s]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(i)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:s}=i)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let o=t+e,c=e<0?-1:s._tree.children.length;o!=c;o+=e){let d=s._tree.children[o];if(this.mode&Ge.IncludeAnonymous||d instanceof ur||!d.type.isAnonymous||Rf(d))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let c=e;c;c=c._parent)if(c.index==i){if(i==this.index)return c;t=c,s=o+1;break e}i=this.stack[--o]}for(let i=s;i<this.stack.length;i++)t=new mn(this.buffer,t,this.stack[i]);return this.bufferNode=new mn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,i=!0}}}matchContext(e){if(!this.buffer)return Ju(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Ju(this._tree,e,i);let c=s[t.buffer[this.stack[o]]];if(!c.isAnonymous){if(e[i]&&e[i]!=c.name)return!1;i--}}return!0}}function Rf(n){return n.children.some(e=>e instanceof ur||!e.type.isAnonymous||Rf(e))}function Hk(n){var e;let{buffer:t,nodeSet:s,maxBufferLength:i=Bk,reused:o=[],minRepeatType:c=s.types.length}=n,d=Array.isArray(t)?new Df(t,t.length):t,u=s.types,m=0,p=0;function g(I,U,F,_,R,G){let{id:Q,start:ne,end:ee,size:H}=d,V=p,q=m;if(H<0)if(d.next(),H==-1){let T=o[Q];F.push(T),_.push(ne-I);return}else if(H==-3){m=Q;return}else if(H==-4){p=Q;return}else throw new RangeError(`Unrecognized record size: ${H}`);let de=u[Q],Y,X,ie=ne-I;if(ee-ne<=i&&(X=S(d.pos-U,R))){let T=new Uint16Array(X.size-X.skip),W=d.pos-X.size,ce=T.length;for(;d.pos>W;)ce=k(X.start,T,ce);Y=new ur(T,ee-X.start,s),ie=X.start-I}else{let T=d.pos-H;d.next();let W=[],ce=[],ue=Q>=c?Q:-1,ke=0,Ne=ee;for(;d.pos>T;)ue>=0&&d.id==ue&&d.size>=0?(d.end<=Ne-i&&(v(W,ce,ne,ke,d.end,Ne,ue,V,q),ke=W.length,Ne=d.end),d.next()):G>2500?y(ne,T,W,ce):g(ne,T,W,ce,ue,G+1);if(ue>=0&&ke>0&&ke<W.length&&v(W,ce,ne,ke,ne,Ne,ue,V,q),W.reverse(),ce.reverse(),ue>-1&&ke>0){let Re=w(de,q);Y=Of(de,W,ce,0,W.length,0,ee-ne,Re,Re)}else Y=j(de,W,ce,ee-ne,V-ee,q)}F.push(Y),_.push(ie)}function y(I,U,F,_){let R=[],G=0,Q=-1;for(;d.pos>U;){let{id:ne,start:ee,end:H,size:V}=d;if(V>4)d.next();else{if(Q>-1&&ee<Q)break;Q<0&&(Q=H-i),R.push(ne,ee,H),G++,d.next()}}if(G){let ne=new Uint16Array(G*4),ee=R[R.length-2];for(let H=R.length-3,V=0;H>=0;H-=3)ne[V++]=R[H],ne[V++]=R[H+1]-ee,ne[V++]=R[H+2]-ee,ne[V++]=V;F.push(new ur(ne,R[2]-ee,s)),_.push(ee-I)}}function w(I,U){return(F,_,R)=>{let G=0,Q=F.length-1,ne,ee;if(Q>=0&&(ne=F[Q])instanceof gt){if(!Q&&ne.type==I&&ne.length==R)return ne;(ee=ne.prop(ze.lookAhead))&&(G=_[Q]+ne.length+ee)}return j(I,F,_,R,G,U)}}function v(I,U,F,_,R,G,Q,ne,ee){let H=[],V=[];for(;I.length>_;)H.push(I.pop()),V.push(U.pop()+F-R);I.push(j(s.types[Q],H,V,G-R,ne-G,ee)),U.push(R-F)}function j(I,U,F,_,R,G,Q){if(G){let ne=[ze.contextHash,G];Q=Q?[ne].concat(Q):[ne]}if(R>25){let ne=[ze.lookAhead,R];Q=Q?[ne].concat(Q):[ne]}return new gt(I,U,F,_,Q)}function S(I,U){let F=d.fork(),_=0,R=0,G=0,Q=F.end-i,ne={size:0,start:0,skip:0};e:for(let ee=F.pos-I;F.pos>ee;){let H=F.size;if(F.id==U&&H>=0){ne.size=_,ne.start=R,ne.skip=G,G+=4,_+=4,F.next();continue}let V=F.pos-H;if(H<0||V<ee||F.start<Q)break;let q=F.id>=c?4:0,de=F.start;for(F.next();F.pos>V;){if(F.size<0)if(F.size==-3||F.size==-4)q+=4;else break e;else F.id>=c&&(q+=4);F.next()}R=de,_+=H,G+=q}return(U<0||_==I)&&(ne.size=_,ne.start=R,ne.skip=G),ne.size>4?ne:void 0}function k(I,U,F){let{id:_,start:R,end:G,size:Q}=d;if(d.next(),Q>=0&&_<c){let ne=F;if(Q>4){let ee=d.pos-(Q-4);for(;d.pos>ee;)F=k(I,U,F)}U[--F]=ne,U[--F]=G-I,U[--F]=R-I,U[--F]=_}else Q==-3?m=_:Q==-4&&(p=_);return F}let C=[],D=[];for(;d.pos>0;)g(n.start||0,n.bufferStart||0,C,D,-1,0);let E=(e=n.length)!==null&&e!==void 0?e:C.length?D[0]+C[0].length:0;return new gt(u[n.topID],C.reverse(),D.reverse(),E)}const Qg=new WeakMap;function qo(n,e){if(!n.isAnonymous||e instanceof ur||e.type!=n)return 1;let t=Qg.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=n||!(s instanceof gt)){t=1;break}t+=qo(n,s)}Qg.set(e,t)}return t}function Of(n,e,t,s,i,o,c,d,u){let m=0;for(let v=s;v<i;v++)m+=qo(n,e[v]);let p=Math.ceil(m*1.5/8),g=[],y=[];function w(v,j,S,k,C){for(let D=S;D<k;){let E=D,I=j[D],U=qo(n,v[D]);for(D++;D<k;D++){let F=qo(n,v[D]);if(U+F>=p)break;U+=F}if(D==E+1){if(U>p){let F=v[E];w(F.children,F.positions,0,F.children.length,j[E]+C);continue}g.push(v[E])}else{let F=j[D-1]+v[D-1].length-I;g.push(Of(n,v,j,E,D,I,F,null,u))}y.push(I+C-o)}}return w(e,t,s,i,0),(d||u)(g,y,c)}class F5{constructor(){this.map=new WeakMap}setBuffer(e,t,s){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,s)}getBuffer(e,t){let s=this.map.get(e);return s&&s.get(t)}set(e,t){e instanceof mn?this.setBuffer(e.context.buffer,e.index,t):e instanceof Wt&&this.map.set(e.tree,t)}get(e){return e instanceof mn?this.getBuffer(e.context.buffer,e.index):e instanceof Wt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Dn{constructor(e,t,s,i,o=!1,c=!1){this.from=e,this.to=t,this.tree=s,this.offset=i,this.open=(o?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let i=[new Dn(0,e.length,e,0,!1,s)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,s=128){if(!t.length)return e;let i=[],o=1,c=e.length?e[0]:null;for(let d=0,u=0,m=0;;d++){let p=d<t.length?t[d]:null,g=p?p.fromA:1e9;if(g-u>=s)for(;c&&c.from<g;){let y=c;if(u>=y.from||g<=y.to||m){let w=Math.max(y.from,u)-m,v=Math.min(y.to,g)-m;y=w>=v?null:new Dn(w,v,y.tree,y.offset+m,d>0,!!p)}if(y&&i.push(y),c.to>g)break;c=o<e.length?e[o++]:null}if(!p)break;u=p.toA,m=p.toA-p.toB}return i}}class Vk{startParse(e,t,s){return typeof e=="string"&&(e=new Uk(e)),s=s?s.length?s.map(i=>new Ts(i.from,i.to)):[new Ts(0,0)]:[new Ts(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let i=this.startParse(e,t,s);for(;;){let o=i.advance();if(o)return o}}}class Uk{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function B5(n){return(e,t,s,i)=>new Kk(e,n,t,s,i)}class Yg{constructor(e,t,s,i,o,c){this.parser=e,this.parse=t,this.overlay=s,this.bracketed=i,this.target=o,this.from=c}}function Xg(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class qk{constructor(e,t,s,i,o,c,d,u){this.parser=e,this.predicate=t,this.mounts=s,this.index=i,this.start=o,this.bracketed=c,this.target=d,this.prev=u,this.depth=0,this.ranges=[]}}const Zu=new ze({perNode:!0});class Kk{constructor(e,t,s,i,o){this.nest=t,this.input=s,this.fragments=i,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let s=this.baseParse.advance();if(!s)return null;if(this.baseParse=null,this.baseTree=s,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let s=this.baseTree;return this.stoppedAt!=null&&(s=new gt(s.type,s.children,s.positions,s.length,s.propValues.concat([[Zu,this.stoppedAt]]))),s}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let s=Object.assign(Object.create(null),e.target.props);s[ze.mounted.id]=new Si(t,e.overlay,e.parser,e.bracketed),e.target.props=s}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Yk(this.fragments),t=null,s=null,i=new mc(new Wt(this.baseTree,this.ranges[0].from,0,null),Ge.IncludeAnonymous|Ge.IgnoreMounts);e:for(let o,c;;){let d=!0,u;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)d=!1;else if(e.hasNode(i)){if(t){let m=t.mounts.find(p=>p.frag.from<=i.from&&p.frag.to>=i.to&&p.mount.overlay);if(m)for(let p of m.mount.overlay){let g=p.from+m.pos,y=p.to+m.pos;g>=i.from&&y<=i.to&&!t.ranges.some(w=>w.from<y&&w.to>g)&&t.ranges.push({from:g,to:y})}}d=!1}else if(s&&(c=Gk(s.ranges,i.from,i.to)))d=c!=2;else if(!i.type.isAnonymous&&(o=this.nest(i,this.input))&&(i.from<i.to||!o.overlay)){i.tree||(Qk(i),t&&t.depth++,s&&s.depth++);let m=e.findMounts(i.from,o.parser);if(typeof o.overlay=="function")t=new qk(o.parser,o.overlay,m,this.inner.length,i.from,!!o.bracketed,i.tree,t);else{let p=e0(this.ranges,o.overlay||(i.from<i.to?[new Ts(i.from,i.to)]:[]));p.length&&Xg(p),(p.length||!o.overlay)&&this.inner.push(new Yg(o.parser,p.length?o.parser.startParse(this.input,t0(m,p),p):o.parser.startParse(""),o.overlay?o.overlay.map(g=>new Ts(g.from-i.from,g.to-i.from)):null,!!o.bracketed,i.tree,p.length?p[0].from:i.from)),o.overlay?p.length&&(s={ranges:p,depth:0,prev:s}):d=!1}}else if(t&&(u=t.predicate(i))&&(u===!0&&(u=new Ts(i.from,i.to)),u.from<u.to)){let m=t.ranges.length-1;m>=0&&t.ranges[m].to==u.from?t.ranges[m]={from:t.ranges[m].from,to:u.to}:t.ranges.push(u)}if(d&&i.firstChild())t&&t.depth++,s&&s.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let m=e0(this.ranges,t.ranges);m.length&&(Xg(m),this.inner.splice(t.index,0,new Yg(t.parser,t.parser.startParse(this.input,t0(t.mounts,m),m),t.ranges.map(p=>new Ts(p.from-t.start,p.to-t.start)),t.bracketed,t.target,m[0].from))),t=t.prev}s&&!--s.depth&&(s=s.prev)}}}}function Gk(n,e,t){for(let s of n){if(s.from>=t)break;if(s.to>e)return s.from<=e&&s.to>=t?2:1}return 0}function Jg(n,e,t,s,i,o){if(e<t){let c=n.buffer[e+1];s.push(n.slice(e,t,c)),i.push(c-o)}}function Qk(n){let{node:e}=n,t=[],s=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,o=i.children.indexOf(s),c=i.children[o],d=c.buffer,u=[o];function m(p,g,y,w,v,j){let S=t[j],k=[],C=[];Jg(c,p,S,k,C,w);let D=d[S+1],E=d[S+2];u.push(k.length);let I=j?m(S+4,d[S+3],c.set.types[d[S]],D,E-D,j-1):e.toTree();return k.push(I),C.push(D-w),Jg(c,d[S+3],g,k,C,w),new gt(y,k,C,v)}i.children[o]=m(0,d.length,ds.none,0,c.length,t.length-1);for(let p of u){let g=n.tree.children[p],y=n.tree.positions[p];n.yield(new Wt(g,y+n.from,p,n._tree))}}class Zg{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Ge.IncludeAnonymous|Ge.IgnoreMounts)}moveTo(e){let{cursor:t}=this,s=e-this.offset;for(;!this.done&&t.from<s;)t.to>=e&&t.enter(s,1,Ge.IgnoreOverlays|Ge.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof gt)t=t.children[0];else break}return!1}}class Yk{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let s=this.curFrag=e[0];this.curTo=(t=s.tree.prop(Zu))!==null&&t!==void 0?t:s.to,this.inner=new Zg(s.tree,-s.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Zu))!==null&&e!==void 0?e:t.to,this.inner=new Zg(t.tree,-t.offset)}}findMounts(e,t){var s;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let c=(s=o.tree)===null||s===void 0?void 0:s.prop(ze.mounted);if(c&&c.parser==t)for(let d=this.fragI;d<this.fragments.length;d++){let u=this.fragments[d];if(u.from>=o.to)break;u.tree==this.curFrag.tree&&i.push({frag:u,pos:o.from-u.offset,mount:c})}}}return i}}function e0(n,e){let t=null,s=e;for(let i=1,o=0;i<n.length;i++){let c=n[i-1].to,d=n[i].from;for(;o<s.length;o++){let u=s[o];if(u.from>=d)break;u.to<=c||(t||(s=t=e.slice()),u.from<c?(t[o]=new Ts(u.from,c),u.to>d&&t.splice(o+1,0,new Ts(d,u.to))):u.to>d?t[o--]=new Ts(d,u.to):t.splice(o--,1))}}return s}function Xk(n,e,t,s){let i=0,o=0,c=!1,d=!1,u=-1e9,m=[];for(;;){let p=i==n.length?1e9:c?n[i].to:n[i].from,g=o==e.length?1e9:d?e[o].to:e[o].from;if(c!=d){let y=Math.max(u,t),w=Math.min(p,g,s);y<w&&m.push(new Ts(y,w))}if(u=Math.min(p,g),u==1e9)break;p==u&&(c?(c=!1,i++):c=!0),g==u&&(d?(d=!1,o++):d=!0)}return m}function t0(n,e){let t=[];for(let{pos:s,mount:i,frag:o}of n){let c=s+(i.overlay?i.overlay[0].from:0),d=c+i.tree.length,u=Math.max(o.from,c),m=Math.min(o.to,d);if(i.overlay){let p=i.overlay.map(y=>new Ts(y.from+s,y.to+s)),g=Xk(e,p,u,m);for(let y=0,w=u;;y++){let v=y==g.length,j=v?m:g[y].from;if(j>w&&t.push(new Dn(w,j,i.tree,-c,o.from>=w||o.openStart,o.to<=j||o.openEnd)),v)break;w=g[y].to}}else t.push(new Dn(u,m,i.tree,-c,o.from>=c||o.openStart,o.to<=d||o.openEnd))}return t}let Jk=0;class Es{constructor(e,t,s,i){this.name=e,this.set=t,this.base=s,this.modified=i,this.id=Jk++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof Es&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Es(s,[],null,[]);if(i.set.push(i),t)for(let o of t.set)i.set.push(o);return i}static defineModifier(e){let t=new pc(e);return s=>s.modified.indexOf(t)>-1?s:pc.get(s.base||s,s.modified.concat(t).sort((i,o)=>i.id-o.id))}}let Zk=0;class pc{constructor(e){this.name=e,this.instances=[],this.id=Zk++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(d=>d.base==e&&e4(t,d.modified));if(s)return s;let i=[],o=new Es(e.name,i,e,t);for(let d of t)d.instances.push(o);let c=t4(t);for(let d of e.set)if(!d.modified.length)for(let u of c)i.push(pc.get(d,u));return o}}function e4(n,e){return n.length==e.length&&n.every((t,s)=>t==e[s])}function t4(n){let e=[[]];for(let t=0;t<n.length;t++)for(let s=0,i=e.length;s<i;s++)e.push(e[s].concat(n[t]));return e.sort((t,s)=>s.length-t.length)}function s4(n){let e=Object.create(null);for(let t in n){let s=n[t];Array.isArray(s)||(s=[s]);for(let i of t.split(" "))if(i){let o=[],c=2,d=i;for(let g=0;;){if(d=="..."&&g>0&&g+3==i.length){c=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!y)throw new RangeError("Invalid path: "+i);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==i.length)break;let w=i[g++];if(g==i.length&&w=="!"){c=0;break}if(w!="/")throw new RangeError("Invalid path: "+i);d=i.slice(g)}let u=o.length-1,m=o[u];if(!m)throw new RangeError("Invalid path: "+i);let p=new Gl(s,c,u>0?o.slice(0,u):null);e[m]=p.sort(e[m])}}return D1.add(e)}const D1=new ze({combine(n,e){let t,s,i;for(;n||e;){if(!n||e&&n.depth>=e.depth?(i=e,e=e.next):(i=n,n=n.next),t&&t.mode==i.mode&&!i.context&&!t.context)continue;let o=new Gl(i.tags,i.mode,i.context);t?t.next=o:s=o,t=o}return s}});class Gl{constructor(e,t,s,i){this.tags=e,this.mode=t,this.context=s,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gl.empty=new Gl([],2,null);function R1(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let c of o.tag)t[c.id]=o.class;let{scope:s,all:i=null}=e||{};return{style:o=>{let c=i;for(let d of o)for(let u of d.set){let m=t[u.id];if(m){c=c?c+" "+m:m;break}}return c},scope:s}}function n4(n,e){let t=null;for(let s of n){let i=s.style(e);i&&(t=t?t+" "+i:i)}return t}function r4(n,e,t,s=0,i=n.length){let o=new i4(s,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),s,i,"",o.highlighters),o.flush(i)}class i4{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,i,o){let{type:c,from:d,to:u}=e;if(d>=s||u<=t)return;c.isTop&&(o=this.highlighters.filter(w=>!w.scope||w.scope(c)));let m=i,p=l4(e)||Gl.empty,g=n4(o,p.tags);if(g&&(m&&(m+=" "),m+=g,p.mode==1&&(i+=(i?" ":"")+g)),this.startSpan(Math.max(t,d),m),p.opaque)return;let y=e.tree&&e.tree.prop(ze.mounted);if(y&&y.overlay){let w=e.node.enter(y.overlay[0].from+d,1),v=this.highlighters.filter(S=>!S.scope||S.scope(y.tree.type)),j=e.firstChild();for(let S=0,k=d;;S++){let C=S<y.overlay.length?y.overlay[S]:null,D=C?C.from+d:u,E=Math.max(t,k),I=Math.min(s,D);if(E<I&&j)for(;e.from<I&&(this.highlightRange(e,E,I,i,o),this.startSpan(Math.min(I,e.to),m),!(e.to>=D||!e.nextSibling())););if(!C||D>s)break;k=C.to+d,k>t&&(this.highlightRange(w.cursor(),Math.max(t,C.from+d),Math.min(s,k),"",v),this.startSpan(Math.min(s,k),m))}j&&e.parent()}else if(e.firstChild()){y&&(i="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,i,o),this.startSpan(Math.min(s,e.to),m)}while(e.nextSibling());e.parent()}}}function l4(n){let e=n.type.prop(D1);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const oe=Es.define,Lo=oe(),sr=oe(),s0=oe(sr),n0=oe(sr),nr=oe(),Po=oe(nr),Zh=oe(nr),dn=oe(),Er=oe(dn),on=oe(),cn=oe(),ef=oe(),Cl=oe(ef),To=oe(),K={comment:Lo,lineComment:oe(Lo),blockComment:oe(Lo),docComment:oe(Lo),name:sr,variableName:oe(sr),typeName:s0,tagName:oe(s0),propertyName:n0,attributeName:oe(n0),className:oe(sr),labelName:oe(sr),namespace:oe(sr),macroName:oe(sr),literal:nr,string:Po,docString:oe(Po),character:oe(Po),attributeValue:oe(Po),number:Zh,integer:oe(Zh),float:oe(Zh),bool:oe(nr),regexp:oe(nr),escape:oe(nr),color:oe(nr),url:oe(nr),keyword:on,self:oe(on),null:oe(on),atom:oe(on),unit:oe(on),modifier:oe(on),operatorKeyword:oe(on),controlKeyword:oe(on),definitionKeyword:oe(on),moduleKeyword:oe(on),operator:cn,derefOperator:oe(cn),arithmeticOperator:oe(cn),logicOperator:oe(cn),bitwiseOperator:oe(cn),compareOperator:oe(cn),updateOperator:oe(cn),definitionOperator:oe(cn),typeOperator:oe(cn),controlOperator:oe(cn),punctuation:ef,separator:oe(ef),bracket:Cl,angleBracket:oe(Cl),squareBracket:oe(Cl),paren:oe(Cl),brace:oe(Cl),content:dn,heading:Er,heading1:oe(Er),heading2:oe(Er),heading3:oe(Er),heading4:oe(Er),heading5:oe(Er),heading6:oe(Er),contentSeparator:oe(dn),list:oe(dn),quote:oe(dn),emphasis:oe(dn),strong:oe(dn),link:oe(dn),monospace:oe(dn),strikethrough:oe(dn),inserted:oe(),deleted:oe(),changed:oe(),invalid:oe(),meta:To,documentMeta:oe(To),annotation:oe(To),processingInstruction:oe(To),definition:Es.defineModifier("definition"),constant:Es.defineModifier("constant"),function:Es.defineModifier("function"),standard:Es.defineModifier("standard"),local:Es.defineModifier("local"),special:Es.defineModifier("special")};for(let n in K){let e=K[n];e instanceof Es&&(e.name=n)}R1([{tag:K.link,class:"tok-link"},{tag:K.heading,class:"tok-heading"},{tag:K.emphasis,class:"tok-emphasis"},{tag:K.strong,class:"tok-strong"},{tag:K.keyword,class:"tok-keyword"},{tag:K.atom,class:"tok-atom"},{tag:K.bool,class:"tok-bool"},{tag:K.url,class:"tok-url"},{tag:K.labelName,class:"tok-labelName"},{tag:K.inserted,class:"tok-inserted"},{tag:K.deleted,class:"tok-deleted"},{tag:K.literal,class:"tok-literal"},{tag:K.string,class:"tok-string"},{tag:K.number,class:"tok-number"},{tag:[K.regexp,K.escape,K.special(K.string)],class:"tok-string2"},{tag:K.variableName,class:"tok-variableName"},{tag:K.local(K.variableName),class:"tok-variableName tok-local"},{tag:K.definition(K.variableName),class:"tok-variableName tok-definition"},{tag:K.special(K.variableName),class:"tok-variableName2"},{tag:K.definition(K.propertyName),class:"tok-propertyName tok-definition"},{tag:K.typeName,class:"tok-typeName"},{tag:K.namespace,class:"tok-namespace"},{tag:K.className,class:"tok-className"},{tag:K.macroName,class:"tok-macroName"},{tag:K.propertyName,class:"tok-propertyName"},{tag:K.operator,class:"tok-operator"},{tag:K.comment,class:"tok-comment"},{tag:K.meta,class:"tok-meta"},{tag:K.invalid,class:"tok-invalid"},{tag:K.punctuation,class:"tok-punctuation"}]);var eu;const bi=new ze;function a4(n){return ye.define({combine:n?e=>e.concat(n):void 0})}const o4=new ze;class Gs{constructor(e,t,s=[],i=""){this.data=e,this.name=i,Ve.prototype.hasOwnProperty("tree")||Object.defineProperty(Ve.prototype,"tree",{get(){return vn(this)}}),this.parser=t,this.extension=[Ri.of(this),Ve.languageData.of((o,c,d)=>{let u=r0(o,c,d),m=u.type.prop(bi);if(!m)return[];let p=o.facet(m),g=u.type.prop(o4);if(g){let y=u.resolve(c-u.from,d);for(let w of g)if(w.test(y,o)){let v=o.facet(w.facet);return w.type=="replace"?v:v.concat(p)}}return p})].concat(s)}isActiveAt(e,t,s=-1){return r0(e,t,s).type.prop(bi)==this.data}findRegions(e){let t=e.facet(Ri);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],i=(o,c)=>{if(o.prop(bi)==this.data){s.push({from:c,to:c+o.length});return}let d=o.prop(ze.mounted);if(d){if(d.tree.prop(bi)==this.data){if(d.overlay)for(let u of d.overlay)s.push({from:u.from+c,to:u.to+c});else s.push({from:c,to:c+o.length});return}else if(d.overlay){let u=s.length;if(i(d.tree,d.overlay[0].from+c),s.length>u)return}}for(let u=0;u<o.children.length;u++){let m=o.children[u];m instanceof gt&&i(m,o.positions[u]+c)}};return i(vn(e),0),s}get allowsNesting(){return!0}}Gs.setState=Qe.define();function r0(n,e,t){let s=n.facet(Ri),i=vn(n).topNode;if(!s||s.allowsNesting)for(let o=i;o;o=o.enter(e,t,Ge.ExcludeBuffers|Ge.EnterBracketed))o.type.isTop&&(i=o);return i}class tf extends Gs{constructor(e,t,s){super(e,t,[],s),this.parser=t}static define(e){let t=a4(e.languageData);return new tf(t,e.parser.configure({props:[bi.add(s=>s.isTop?t:void 0)]}),e.name)}configure(e,t){return new tf(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function vn(n){let e=n.field(Gs.state,!1);return e?e.tree:gt.empty}class c4{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let Ml=null;class xc{constructor(e,t,s=[],i,o,c,d,u){this.parser=e,this.state=t,this.fragments=s,this.tree=i,this.treeLen=o,this.viewport=c,this.skipped=d,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new xc(e,t,[],gt.empty,0,s,[],null)}startParse(){return this.parser.startParse(new c4(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=gt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Dn.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Dn.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Ml;Ml=this;try{return e()}finally{Ml=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=i0(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:i,treeLen:o,viewport:c,skipped:d}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((m,p,g,y)=>u.push({fromA:m,toA:p,fromB:g,toB:y})),s=Dn.applyChanges(s,u),i=gt.empty,o=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){d=[];for(let m of this.skipped){let p=e.mapPos(m.from,1),g=e.mapPos(m.to,-1);p<g&&d.push({from:p,to:g})}}}return new xc(this.parser,t,s,i,o,c,d,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:i,to:o}=this.skipped[s];i<e.to&&o>e.from&&(this.fragments=i0(this.fragments,i,o),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Vk{createParse(t,s,i){let o=i[0].from,c=i[i.length-1].to;return{parsedPos:o,advance(){let u=Ml;if(u){for(let m of i)u.tempSkipped.push(m);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=c,new gt(ds.none,[],[],c-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Ml}}function i0(n,e,t){return Dn.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Di{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new Di(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=xc.create(e.facet(Ri).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new Di(s)}}Gs.state=Xs.define({create:Di.init,update(n,e){for(let t of e.effects)if(t.is(Gs.setState))return t.value;return e.startState.facet(Ri)!=e.state.facet(Ri)?Di.init(e.state):n.apply(e)}});let O1=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(O1=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const tu=typeof navigator<"u"&&(!((eu=navigator.scheduling)===null||eu===void 0)&&eu.isInputPending)?()=>navigator.scheduling.isInputPending():null,d4=vs.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Gs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Gs.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=O1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:i}}=this.view,o=s.field(Gs.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!tu?Math.max(25,e.timeRemaining()-5):1e9),d=o.context.treeLen<i&&s.doc.length>i+1e3,u=o.context.work(()=>tu&&tu()||Date.now()>c,i+(d?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Gs.setState.of(new Di(o.context))})),this.chunkBudget>0&&!(u&&!d)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>fn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ri=ye.define({combine(n){return n.length?n[0]:null},enables:n=>[Gs.state,d4,ve.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class z5{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class F1{constructor(e,t,s,i,o,c=void 0){this.name=e,this.alias=t,this.extensions=s,this.filename=i,this.loadFunc=o,this.support=c,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:s}=e;if(!t){if(!s)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(s)}return new F1(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,s)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let s=/\.([^.]+)$/.exec(t);if(s){for(let i of e)if(i.extensions.indexOf(s[1])>-1)return i}return null}static matchLanguageName(e,t,s=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(o=>o==t))return i;if(s)for(let i of e)for(let o of i.alias){let c=t.indexOf(o);if(c>-1&&(o.length>2||!/\w/.test(t[c-1])&&!/\w/.test(t[c+o.length])))return i}return null}}const h4=ye.define(),Ff=ye.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function gc(n){let e=n.facet(Ff);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function yc(n,e){let t="",s=n.tabSize,i=n.facet(Ff)[0];if(i=="	"){for(;e>=s;)t+="	",e-=s;i=" "}for(let o=0;o<e;o++)t+=i;return t}function B1(n,e){n instanceof Ve&&(n=new Ic(n));for(let s of n.state.facet(h4)){let i=s(n,e);if(i!==void 0)return i}let t=vn(n.state);return t.length>=e?f4(n,t,e):null}class Ic{constructor(e,t={}){this.state=e,this.options=t,this.unit=gc(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=s.from&&i<=s.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:s.text.slice(i-s.from),from:i}:{text:s.text.slice(0,i-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:i}=this.lineAt(e,t);return s.slice(e-i,Math.min(s.length,e+100-i))}column(e,t=1){let{text:s,from:i}=this.lineAt(e,t),o=this.countColumn(s,e-i),c=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return c>-1&&(o+=c-this.countColumn(s,s.search(/\S|$/))),o}countColumn(e,t=e.length){return Pc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let c=o(i);if(c>-1)return c}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const u4=new ze;function f4(n,e,t){let s=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=s.node){let o=[];for(let c=i;c&&!(c.from<s.node.from||c.to>s.node.to||c.from==s.node.from&&c.type==s.node.type);c=c.parent)o.push(c);for(let c=o.length-1;c>=0;c--)s={node:o[c],next:s}}return I1(s,n,t)}function I1(n,e,t){for(let s=n;s;s=s.next){let i=p4(s.node);if(i)return i(Bf.create(e,t,s))}return 0}function m4(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function p4(n){let e=n.type.prop(u4);if(e)return e;let t=n.firstChild,s;if(t&&(s=t.type.prop(ze.closedBy))){let i=n.lastChild,o=i&&s.indexOf(i.name)>-1;return c=>z1(c,!0,1,void 0,o&&!m4(c)?i.from:void 0)}return n.parent==null?x4:null}function x4(){return 0}class Bf extends Ic{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new Bf(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(g4(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return I1(this.context.next,this.base,this.pos)}}function g4(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function y4(n){let e=n.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),c=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let d=t.to;;){let u=e.childAfter(d);if(!u||u==s)return null;if(!u.type.isSkipped){if(u.from>=c)return null;let m=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+m}}d=u.to}}function $5({closing:n,align:e=!0,units:t=1}){return s=>z1(s,e,t,n)}function z1(n,e,t,s,i){let o=n.textAfter,c=o.match(/^\s*/)[0].length,d=s&&o.slice(c,c+s.length)==s||i==n.pos+c,u=e?y4(n):null;return u?d?n.column(u.from):n.column(u.to):n.baseIndent+(d?0:n.unit*t)}const _5=n=>n.baseIndent;function W5({except:n,units:e=1}={}){return t=>{let s=n&&n.test(t.textAfter);return t.baseIndent+(s?0:e*t.unit)}}const H5=ye.define(),V5=new ze;function U5(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class ra{constructor(e,t){this.specs=e;let s;function i(d){let u=cr.newName();return(s||(s=Object.create(null)))["."+u]=d,u}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,c=t.scope;this.scope=c instanceof Gs?d=>d.prop(bi)==c.data:c?d=>d==c:void 0,this.style=R1(e.map(d=>({tag:d.tag,class:d.class||i(Object.assign({},d,{tag:null}))})),{all:o}).style,this.module=s?new cr(s):null,this.themeType=t.themeType}static define(e,t){return new ra(e,t||{})}}const sf=ye.define(),$1=ye.define({combine(n){return n.length?[n[0]]:null}});function su(n){let e=n.facet(sf);return e.length?e:n.facet($1)}function _1(n,e){let t=[w4],s;return n instanceof ra&&(n.module&&t.push(ve.styleModule.of(n.module)),s=n.themeType),e!=null&&e.fallback?t.push($1.of(n)):s?t.push(sf.computeN([ve.darkTheme],i=>i.facet(ve.darkTheme)==(s=="dark")?[n]:[])):t.push(sf.of(n)),t}class b4{constructor(e){this.markCache=Object.create(null),this.tree=vn(e.state),this.decorations=this.buildDeco(e,su(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=vn(e.state),s=su(e.state),i=s!=su(e.startState),{viewport:o}=e.view,c=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!i&&t.type==this.tree.type&&c>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Oe.none;let s=new Ai;for(let{from:i,to:o}of e.visibleRanges)r4(this.tree,t,(c,d,u)=>{s.add(c,d,this.markCache[u]||(this.markCache[u]=Oe.mark({class:u})))},i,o);return s.finish()}}const w4=Ec.high(vs.fromClass(b4,{decorations:n=>n.decorations})),v4=ra.define([{tag:K.meta,color:"#404740"},{tag:K.link,textDecoration:"underline"},{tag:K.heading,textDecoration:"underline",fontWeight:"bold"},{tag:K.emphasis,fontStyle:"italic"},{tag:K.strong,fontWeight:"bold"},{tag:K.strikethrough,textDecoration:"line-through"},{tag:K.keyword,color:"#708"},{tag:[K.atom,K.bool,K.url,K.contentSeparator,K.labelName],color:"#219"},{tag:[K.literal,K.inserted],color:"#164"},{tag:[K.string,K.deleted],color:"#a11"},{tag:[K.regexp,K.escape,K.special(K.string)],color:"#e40"},{tag:K.definition(K.variableName),color:"#00f"},{tag:K.local(K.variableName),color:"#30a"},{tag:[K.typeName,K.namespace],color:"#085"},{tag:K.className,color:"#167"},{tag:[K.special(K.variableName),K.macroName],color:"#256"},{tag:K.definition(K.propertyName),color:"#00c"},{tag:K.comment,color:"#940"},{tag:K.invalid,color:"#f00"}]),j4=ve.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),W1=1e4,H1="()[]{}",V1=ye.define({combine(n){return ea(n,{afterCursor:!0,brackets:H1,maxScanDistance:W1,renderMatch:S4})}}),N4=Oe.mark({class:"cm-matchingBracket"}),k4=Oe.mark({class:"cm-nonmatchingBracket"});function S4(n){let e=[],t=n.matched?N4:k4;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const C4=Xs.define({create(){return Oe.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],s=e.state.facet(V1);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=pn(e.state,i.head,-1,s)||i.head>0&&pn(e.state,i.head-1,1,s)||s.afterCursor&&(pn(e.state,i.head,1,s)||i.head<e.state.doc.length&&pn(e.state,i.head+1,-1,s));o&&(t=t.concat(s.renderMatch(o,e.state)))}return Oe.set(t,!0)},provide:n=>ve.decorations.from(n)}),M4=[C4,j4];function A4(n={}){return[V1.of(n),M4]}const E4=new ze;function nf(n,e,t){let s=n.prop(e<0?ze.openedBy:ze.closedBy);if(s)return s;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function rf(n){let e=n.type.prop(E4);return e?e(n.node):n}function pn(n,e,t,s={}){let i=s.maxScanDistance||W1,o=s.brackets||H1,c=vn(n),d=c.resolveInner(e,t);for(let u=d;u;u=u.parent){let m=nf(u.type,t,o);if(m&&u.from<u.to){let p=rf(u);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return L4(n,e,t,u,p,m,o)}}return P4(n,e,t,c,d.type,i,o)}function L4(n,e,t,s,i,o,c){let d=s.parent,u={from:i.from,to:i.to},m=0,p=d==null?void 0:d.cursor();if(p&&(t<0?p.childBefore(s.from):p.childAfter(s.to)))do if(t<0?p.to<=s.from:p.from>=s.to){if(m==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let g=rf(p);return{start:u,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(nf(p.type,t,c))m++;else if(nf(p.type,-t,c)){if(m==0){let g=rf(p);return{start:u,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}m--}}while(t<0?p.prevSibling():p.nextSibling());return{start:u,matched:!1}}function P4(n,e,t,s,i,o,c){let d=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=c.indexOf(d);if(u<0||u%2==0!=t>0)return null;let m={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),g=0;for(let y=0;!p.next().done&&y<=o;){let w=p.value;t<0&&(y+=w.length);let v=e+y*t;for(let j=t>0?0:w.length-1,S=t>0?w.length:-1;j!=S;j+=t){let k=c.indexOf(w[j]);if(!(k<0||s.resolveInner(v+j,1).type!=i))if(k%2==0==t>0)g++;else{if(g==1)return{start:m,end:{from:v+j,to:v+j+1},matched:k>>1==u>>1};g--}}t>0&&(y+=w.length)}return p.done?{start:m,matched:!1}:null}const T4=Object.create(null),l0=[ds.none],a0=[],o0=Object.create(null),D4=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])D4[n]=R4(T4,e);function nu(n,e){a0.indexOf(n)>-1||(a0.push(n),console.warn(e))}function R4(n,e){let t=[];for(let d of e.split(" ")){let u=[];for(let m of d.split(".")){let p=n[m]||K[m];p?typeof p=="function"?u.length?u=u.map(p):nu(m,`Modifier ${m} used at start of tag`):u.length?nu(m,`Tag ${m} used as modifier`):u=Array.isArray(p)?p:[p]:nu(m,`Unknown highlighting tag ${m}`)}for(let m of u)t.push(m)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),i=s+" "+t.map(d=>d.id),o=o0[i];if(o)return o.id;let c=o0[i]=ds.define({id:l0.length,name:s,props:[s4({[s]:t})]});return l0.push(c),c.id}mt.RTL,mt.LTR;const O4=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),s=zf(n.state,t.from);return s.line?F4(n):s.block?I4(n):!1};function If(n,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(s(t.update(i)),!0):!1}}const F4=If(_4,0),B4=If(U1,0),I4=If((n,e)=>U1(n,e,$4(e)),0);function zf(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Al=50;function z4(n,{open:e,close:t},s,i){let o=n.sliceDoc(s-Al,s),c=n.sliceDoc(i,i+Al),d=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(c)[0].length,m=o.length-d;if(o.slice(m-e.length,m)==e&&c.slice(u,u+t.length)==t)return{open:{pos:s-d,margin:d&&1},close:{pos:i+u,margin:u&&1}};let p,g;i-s<=2*Al?p=g=n.sliceDoc(s,i):(p=n.sliceDoc(s,s+Al),g=n.sliceDoc(i-Al,i));let y=/^\s*/.exec(p)[0].length,w=/\s*$/.exec(g)[0].length,v=g.length-w-t.length;return p.slice(y,y+e.length)==e&&g.slice(v,v+t.length)==t?{open:{pos:s+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:i-w-t.length,margin:/\s/.test(g.charAt(v-1))?1:0}}:null}function $4(n){let e=[];for(let t of n.selection.ranges){let s=n.doc.lineAt(t.from),i=t.to<=s.to?s:n.doc.lineAt(t.to);i.from>s.from&&i.from==t.to&&(i=t.to==s.to+1?s:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>s.from?e[o].to=i.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:i.to})}return e}function U1(n,e,t=e.selection.ranges){let s=t.map(o=>zf(e,o.from).block);if(!s.every(o=>o))return null;let i=t.map((o,c)=>z4(e,s[c],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,c)=>i[c]?[]:[{from:o.from,insert:s[c].open+" "},{from:o.to,insert:" "+s[c].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let c=0,d;c<i.length;c++)if(d=i[c]){let u=s[c],{open:m,close:p}=d;o.push({from:m.pos-u.open.length,to:m.pos+m.margin},{from:p.pos-p.margin,to:p.pos+u.close.length})}return{changes:o}}return null}function _4(n,e,t=e.selection.ranges){let s=[],i=-1;e:for(let{from:o,to:c}of t){let d=s.length,u=1e9,m;for(let p=o;p<=c;){let g=e.doc.lineAt(p);if(m==null&&(m=zf(e,g.from).line,!m))continue e;if(g.from>i&&(o==c||c>g.from)){i=g.from;let y=/^\s*/.exec(g.text)[0].length,w=y==g.length,v=g.text.slice(y,y+m.length)==m?y:-1;y<g.text.length&&y<u&&(u=y),s.push({line:g,comment:v,token:m,indent:y,empty:w,single:!1})}p=g.to+1}if(u<1e9)for(let p=d;p<s.length;p++)s[p].indent<s[p].line.text.length&&(s[p].indent=u);s.length==d+1&&(s[d].single=!0)}if(n!=2&&s.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:d,token:u,indent:m,empty:p,single:g}of s)(g||!p)&&o.push({from:d.from+m,insert:u+" "});let c=e.changes(o);return{changes:c,selection:e.selection.map(c,1)}}else if(n!=1&&s.some(o=>o.comment>=0)){let o=[];for(let{line:c,comment:d,token:u}of s)if(d>=0){let m=c.from+d,p=m+u.length;c.text[p-c.from]==" "&&p++,o.push({from:m,to:p})}return{changes:o}}return null}const lf=fr.define(),W4=fr.define(),H4=ye.define(),q1=ye.define({combine(n){return ea(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(s,i)=>e(s,i)||t(s,i)})}}),K1=Xs.define({create(){return xn.empty},update(n,e){let t=e.state.facet(q1),s=e.annotation(lf);if(s){let u=os.fromTransaction(e,s.selection),m=s.side,p=m==0?n.undone:n.done;return u?p=bc(p,p.length,t.minDepth,u):p=Y1(p,e.startState.selection),new xn(m==0?s.rest:p,m==0?p:s.rest)}let i=e.annotation(W4);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(kt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=os.fromTransaction(e),c=e.annotation(kt.time),d=e.annotation(kt.userEvent);return o?n=n.addChanges(o,c,d,t,e):e.selection&&(n=n.addSelection(e.startState.selection,c,d,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new xn(n.done.map(os.fromJSON),n.undone.map(os.fromJSON))}});function V4(n={}){return[K1,q1.of(n),ve.domEventHandlers({beforeinput(e,t){let s=e.inputType=="historyUndo"?G1:e.inputType=="historyRedo"?af:null;return s?(e.preventDefault(),s(t)):!1}})]}function zc(n,e){return function({state:t,dispatch:s}){if(!e&&t.readOnly)return!1;let i=t.field(K1,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(s(o),!0):!1}}const G1=zc(0,!1),af=zc(1,!1),U4=zc(0,!0),q4=zc(1,!0);class os{constructor(e,t,s,i,o){this.changes=e,this.effects=t,this.mapped=s,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new os(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new os(e.changes&&jt.fromJSON(e.changes),[],e.mapped&&yn.fromJSON(e.mapped),e.startSelection&&te.fromJSON(e.startSelection),e.selectionsAfter.map(te.fromJSON))}static fromTransaction(e,t){let s=Ds;for(let i of e.startState.facet(H4)){let o=i(e);o.length&&(s=s.concat(o))}return!s.length&&e.changes.empty?null:new os(e.changes.invert(e.startState.doc),s,void 0,t||e.startState.selection,Ds)}static selection(e){return new os(void 0,Ds,void 0,void 0,e)}}function bc(n,e,t,s){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(s),o}function K4(n,e){let t=[],s=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,c,d)=>{for(let u=0;u<t.length;){let m=t[u++],p=t[u++];d>=m&&c<=p&&(s=!0)}}),s}function G4(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,s)=>t.empty!=e.ranges[s].empty).length===0}function Q1(n,e){return n.length?e.length?n.concat(e):n:e}const Ds=[],Q4=200;function Y1(n,e){if(n.length){let t=n[n.length-1],s=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Q4));return s.length&&s[s.length-1].eq(e)?n:(s.push(e),bc(n,n.length-1,1e9,t.setSelAfter(s)))}else return[os.selection([e])]}function Y4(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ru(n,e){if(!n.length)return n;let t=n.length,s=Ds;for(;t;){let i=X4(n[t-1],e,s);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,s=i.selectionsAfter}return s.length?[os.selection(s)]:Ds}function X4(n,e,t){let s=Q1(n.selectionsAfter.length?n.selectionsAfter.map(d=>d.map(e)):Ds,t);if(!n.changes)return os.selection(s);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),c=n.mapped?n.mapped.composeDesc(o):o;return new os(i,Qe.mapEffects(n.effects,e),c,n.startSelection.map(o),s)}const J4=/^(input\.type|delete)($|\.)/;class xn{constructor(e,t,s=0,i=void 0){this.done=e,this.undone=t,this.prevTime=s,this.prevUserEvent=i}isolate(){return this.prevTime?new xn(this.done,this.undone):this}addChanges(e,t,s,i,o){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!s||J4.test(s))&&(!d.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,K4(d.changes,e.changes))||s=="input.type.compose")?c=bc(c,c.length-1,i.minDepth,new os(e.changes.compose(d.changes),Q1(Qe.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,Ds)):c=bc(c,c.length,i.minDepth,e),new xn(c,Ds,t,s)}addSelection(e,t,s,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Ds;return o.length>0&&t-this.prevTime<i&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&G4(o[o.length-1],e)?this:new xn(Y1(this.done,e),this.undone,t,s)}addMapping(e){return new xn(ru(this.done,e),ru(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,s){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],c=o.selectionsAfter[0]||(o.startSelection?o.startSelection.map(o.changes.invertedDesc,1):t.selection);if(s&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:lf.of({side:e,rest:Y4(i),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let d=i.length==1?Ds:i.slice(0,i.length-1);return o.mapped&&(d=ru(d,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:lf.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xn.empty=new xn(Ds,Ds);const Z4=[{key:"Mod-z",run:G1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:af,preventDefault:!0},{linux:"Ctrl-Shift-z",run:af,preventDefault:!0},{key:"Mod-u",run:U4,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:q4,preventDefault:!0}];function Bi(n,e){return te.create(n.ranges.map(e),n.mainIndex)}function Js(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Zs({state:n,dispatch:e},t){let s=Bi(n.selection,t);return s.eq(n.selection,!0)?!1:(e(Js(n,s)),!0)}function $c(n,e){return te.cursor(e?n.to:n.from)}function X1(n,e){return Zs(n,t=>t.empty?n.moveByChar(t,e):$c(t,e))}function Ht(n){return n.textDirectionAt(n.state.selection.main.head)==mt.LTR}const J1=n=>X1(n,!Ht(n)),Z1=n=>X1(n,Ht(n));function eb(n,e){return Zs(n,t=>t.empty?n.moveByGroup(t,e):$c(t,e))}const eS=n=>eb(n,!Ht(n)),tS=n=>eb(n,Ht(n));function sS(n,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function _c(n,e,t){let s=vn(n).resolveInner(e.head),i=t?ze.closedBy:ze.openedBy;for(let u=e.head;;){let m=t?s.childAfter(u):s.childBefore(u);if(!m)break;sS(n,m,i)?s=m:u=t?m.to:m.from}let o=s.type.prop(i),c,d;return o&&(c=t?pn(n,s.from,1):pn(n,s.to,-1))&&c.matched?d=t?c.end.to:c.end.from:d=t?s.to:s.from,te.cursor(d,t?-1:1)}const nS=n=>Zs(n,e=>_c(n.state,e,!Ht(n))),rS=n=>Zs(n,e=>_c(n.state,e,Ht(n)));function tb(n,e){return Zs(n,t=>{if(!t.empty)return $c(t,e);let s=n.moveVertically(t,e);return s.head!=t.head?s:n.moveToLineBoundary(t,e)})}const sb=n=>tb(n,!1),nb=n=>tb(n,!0);function rb(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,s=0,i;if(e){for(let o of n.state.facet(ve.scrollMargins)){let c=o(n);c!=null&&c.top&&(t=Math.max(c==null?void 0:c.top,t)),c!=null&&c.bottom&&(s=Math.max(c==null?void 0:c.bottom,s))}i=n.scrollDOM.clientHeight-t-s}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function ib(n,e){let t=rb(n),{state:s}=n,i=Bi(s.selection,c=>c.empty?n.moveVertically(c,e,t.height):$c(c,e));if(i.eq(s.selection))return!1;let o;if(t.selfScroll){let c=n.coordsAtPos(s.selection.main.head),d=n.scrollDOM.getBoundingClientRect(),u=d.top+t.marginTop,m=d.bottom-t.marginBottom;c&&c.top>u&&c.bottom<m&&(o=ve.scrollIntoView(i.main.head,{y:"start",yMargin:c.top-u}))}return n.dispatch(Js(s,i),{effects:o}),!0}const c0=n=>ib(n,!1),of=n=>ib(n,!0);function mr(n,e,t){let s=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?s.to:s.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==s.from&&s.length){let o=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;o&&e.head!=s.from+o&&(i=te.cursor(s.from+o))}return i}const iS=n=>Zs(n,e=>mr(n,e,!0)),lS=n=>Zs(n,e=>mr(n,e,!1)),aS=n=>Zs(n,e=>mr(n,e,!Ht(n))),oS=n=>Zs(n,e=>mr(n,e,Ht(n))),cS=n=>Zs(n,e=>te.cursor(n.lineBlockAt(e.head).from,1)),dS=n=>Zs(n,e=>te.cursor(n.lineBlockAt(e.head).to,-1));function hS(n,e,t){let s=!1,i=Bi(n.selection,o=>{let c=pn(n,o.head,-1)||pn(n,o.head,1)||o.head>0&&pn(n,o.head-1,1)||o.head<n.doc.length&&pn(n,o.head+1,-1);if(!c||!c.end)return o;s=!0;let d=c.start.from==o.head?c.end.to:c.end.from;return te.cursor(d)});return s?(e(Js(n,i)),!0):!1}const uS=({state:n,dispatch:e})=>hS(n,e);function Fs(n,e){let t=Bi(n.state.selection,s=>{let i=e(s);return te.range(s.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Js(n.state,t)),!0)}function lb(n,e){return Fs(n,t=>n.moveByChar(t,e))}const ab=n=>lb(n,!Ht(n)),ob=n=>lb(n,Ht(n));function cb(n,e){return Fs(n,t=>n.moveByGroup(t,e))}const fS=n=>cb(n,!Ht(n)),mS=n=>cb(n,Ht(n)),pS=n=>Fs(n,e=>_c(n.state,e,!Ht(n))),xS=n=>Fs(n,e=>_c(n.state,e,Ht(n)));function db(n,e){return Fs(n,t=>n.moveVertically(t,e))}const hb=n=>db(n,!1),ub=n=>db(n,!0);function fb(n,e){return Fs(n,t=>n.moveVertically(t,e,rb(n).height))}const d0=n=>fb(n,!1),h0=n=>fb(n,!0),gS=n=>Fs(n,e=>mr(n,e,!0)),yS=n=>Fs(n,e=>mr(n,e,!1)),bS=n=>Fs(n,e=>mr(n,e,!Ht(n))),wS=n=>Fs(n,e=>mr(n,e,Ht(n))),vS=n=>Fs(n,e=>te.cursor(n.lineBlockAt(e.head).from)),jS=n=>Fs(n,e=>te.cursor(n.lineBlockAt(e.head).to)),u0=({state:n,dispatch:e})=>(e(Js(n,{anchor:0})),!0),f0=({state:n,dispatch:e})=>(e(Js(n,{anchor:n.doc.length})),!0),m0=({state:n,dispatch:e})=>(e(Js(n,{anchor:n.selection.main.anchor,head:0})),!0),p0=({state:n,dispatch:e})=>(e(Js(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),NS=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),kS=({state:n,dispatch:e})=>{let t=Wc(n).map(({from:s,to:i})=>te.range(s,Math.min(i+1,n.doc.length)));return e(n.update({selection:te.create(t),userEvent:"select"})),!0},SS=({state:n,dispatch:e})=>{let t=Bi(n.selection,s=>{let i=vn(n),o=i.resolveStack(s.from,1);if(s.empty){let c=i.resolveStack(s.from,-1);c.node.from>=o.node.from&&c.node.to<=o.node.to&&(o=c)}for(let c=o;c;c=c.next){let{node:d}=c;if((d.from<s.from&&d.to>=s.to||d.to>s.to&&d.from<=s.from)&&c.next)return te.range(d.to,d.from)}return s});return t.eq(n.selection)?!1:(e(Js(n,t)),!0)};function mb(n,e){let{state:t}=n,s=t.selection,i=t.selection.ranges.slice();for(let o of t.selection.ranges){let c=t.doc.lineAt(o.head);if(e?c.to<n.state.doc.length:c.from>0)for(let d=o;;){let u=n.moveVertically(d,e);if(u.head<c.from||u.head>c.to){i.some(m=>m.head==u.head)||i.push(u);break}else{if(u.head==d.head)break;d=u}}}return i.length==s.ranges.length?!1:(n.dispatch(Js(t,te.create(i,i.length-1))),!0)}const CS=n=>mb(n,!1),MS=n=>mb(n,!0),AS=({state:n,dispatch:e})=>{let t=n.selection,s=null;return t.ranges.length>1?s=te.create([t.main]):t.main.empty||(s=te.create([te.cursor(t.main.head)])),s?(e(Js(n,s)),!0):!1};function ia(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:s}=n,i=s.changeByRange(o=>{let{from:c,to:d}=o;if(c==d){let u=e(o);u<c?(t="delete.backward",u=Do(n,u,!1)):u>c&&(t="delete.forward",u=Do(n,u,!0)),c=Math.min(c,u),d=Math.max(d,u)}else c=Do(n,c,!1),d=Do(n,d,!0);return c==d?{range:o}:{changes:{from:c,to:d},range:te.cursor(c,c<o.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(s.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ve.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function Do(n,e,t){if(n instanceof ve)for(let s of n.state.facet(ve.atomicRanges).map(i=>i(n)))s.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const pb=(n,e,t)=>ia(n,s=>{let i=s.from,{state:o}=n,c=o.doc.lineAt(i),d,u;if(t&&!e&&i>c.from&&i<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,i-c.from))){if(d[d.length-1]=="	")return i-1;let m=Pc(d,o.tabSize),p=m%gc(o)||gc(o);for(let g=0;g<p&&d[d.length-1-g]==" ";g++)i--;u=i}else u=Nt(c.text,i-c.from,e,e)+c.from,u==i&&c.number!=(e?o.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(u-c.from,i-c.from))&&(u=Nt(c.text,u-c.from,!1,!1)+c.from);return u}),cf=n=>pb(n,!1,!0),xb=n=>pb(n,!0,!1),gb=(n,e)=>ia(n,t=>{let s=t.head,{state:i}=n,o=i.doc.lineAt(s),c=i.charCategorizer(s);for(let d=null;;){if(s==(e?o.to:o.from)){s==t.head&&o.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);break}let u=Nt(o.text,s-o.from,e)+o.from,m=o.text.slice(Math.min(s,u)-o.from,Math.max(s,u)-o.from),p=c(m);if(d!=null&&p!=d)break;(m!=" "||s!=t.head)&&(d=p),s=u}return s}),yb=n=>gb(n,!1),ES=n=>gb(n,!0),LS=n=>ia(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),PS=n=>ia(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),TS=n=>ia(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),DS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Ue.of(["",""])},range:te.cursor(s.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},RS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let i=s.from,o=n.doc.lineAt(i),c=i==o.from?i-1:Nt(o.text,i-o.from,!1)+o.from,d=i==o.to?i+1:Nt(o.text,i-o.from,!0)+o.from;return{changes:{from:c,to:d,insert:n.doc.slice(i,d).append(n.doc.slice(c,i))},range:te.cursor(d)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Wc(n){let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.from),o=n.doc.lineAt(s.to);if(!s.empty&&s.to==o.from&&(o=n.doc.lineAt(s.to-1)),t>=i.number){let c=e[e.length-1];c.to=o.to,c.ranges.push(s)}else e.push({from:i.from,to:o.to,ranges:[s]});t=o.number+1}return e}function bb(n,e,t){if(n.readOnly)return!1;let s=[],i=[];for(let o of Wc(n)){if(t?o.to==n.doc.length:o.from==0)continue;let c=n.doc.lineAt(t?o.to+1:o.from-1),d=c.length+1;if(t){s.push({from:o.to,to:c.to},{from:o.from,insert:c.text+n.lineBreak});for(let u of o.ranges)i.push(te.range(Math.min(n.doc.length,u.anchor+d),Math.min(n.doc.length,u.head+d)))}else{s.push({from:c.from,to:o.from},{from:o.to,insert:n.lineBreak+c.text});for(let u of o.ranges)i.push(te.range(u.anchor-d,u.head-d))}}return s.length?(e(n.update({changes:s,scrollIntoView:!0,selection:te.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const OS=({state:n,dispatch:e})=>bb(n,e,!1),FS=({state:n,dispatch:e})=>bb(n,e,!0);function wb(n,e,t){if(n.readOnly)return!1;let s=[];for(let o of Wc(n))t?s.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):s.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});let i=n.changes(s);return e(n.update({changes:i,selection:n.selection.map(i,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const BS=({state:n,dispatch:e})=>wb(n,e,!1),IS=({state:n,dispatch:e})=>wb(n,e,!0),zS=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Wc(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),s=Bi(e.selection,i=>{let o;if(n.lineWrapping){let c=n.lineBlockAt(i.head),d=n.coordsAtPos(i.head,i.assoc||1);d&&(o=c.bottom+n.documentTop-d.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,o)}).map(t);return n.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $S(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=vn(n).resolveInner(e),s=t.childBefore(e),i=t.childAfter(e),o;return s&&i&&s.to<=e&&i.from>=e&&(o=s.type.prop(ze.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(s.to,i.from))?{from:s.to,to:i.from}:null}const x0=vb(!1),_S=vb(!0);function vb(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(i=>{let{from:o,to:c}=i,d=e.doc.lineAt(o),u=!n&&o==c&&$S(e,o);n&&(o=c=(c<=d.to?d:e.doc.lineAt(c)).to);let m=new Ic(e,{simulateBreak:o,simulateDoubleBreak:!!u}),p=B1(m,o);for(p==null&&(p=Pc(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;u?{from:o,to:c}=u:o>d.from&&o<d.from+100&&!/\S/.test(d.text.slice(0,o))&&(o=d.from);let g=["",yc(e,p)];return u&&g.push(yc(e,m.lineIndent(d.from,-1))),{changes:{from:o,to:c,insert:Ue.of(g)},range:te.cursor(o+1+g[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function $f(n,e){let t=-1;return n.changeByRange(s=>{let i=[];for(let c=s.from;c<=s.to;){let d=n.doc.lineAt(c);d.number>t&&(s.empty||s.to>d.from)&&(e(d,i,s),t=d.number),c=d.to+1}let o=n.changes(i);return{changes:i,range:te.range(o.mapPos(s.anchor,1),o.mapPos(s.head,1))}})}const WS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),s=new Ic(n,{overrideIndentation:o=>{let c=t[o];return c??-1}}),i=$f(n,(o,c,d)=>{let u=B1(s,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let m=/^\s*/.exec(o.text)[0],p=yc(n,u);(m!=p||d.from<o.from+m.length)&&(t[o.from]=u,c.push({from:o.from,to:o.from+m.length,insert:p}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},HS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($f(n,(t,s)=>{s.push({from:t.from,insert:n.facet(Ff)})}),{userEvent:"input.indent"})),!0),VS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($f(n,(t,s)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=Pc(i,n.tabSize),c=0,d=yc(n,Math.max(0,o-gc(n)));for(;c<i.length&&c<d.length&&i.charCodeAt(c)==d.charCodeAt(c);)c++;s.push({from:t.from+c,to:t.from+i.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),US=n=>(n.setTabFocusMode(),!0),qS=[{key:"Ctrl-b",run:J1,shift:ab,preventDefault:!0},{key:"Ctrl-f",run:Z1,shift:ob},{key:"Ctrl-p",run:sb,shift:hb},{key:"Ctrl-n",run:nb,shift:ub},{key:"Ctrl-a",run:cS,shift:vS},{key:"Ctrl-e",run:dS,shift:jS},{key:"Ctrl-d",run:xb},{key:"Ctrl-h",run:cf},{key:"Ctrl-k",run:LS},{key:"Ctrl-Alt-h",run:yb},{key:"Ctrl-o",run:DS},{key:"Ctrl-t",run:RS},{key:"Ctrl-v",run:of}],KS=[{key:"ArrowLeft",run:J1,shift:ab,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:eS,shift:fS,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:aS,shift:bS,preventDefault:!0},{key:"ArrowRight",run:Z1,shift:ob,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:tS,shift:mS,preventDefault:!0},{mac:"Cmd-ArrowRight",run:oS,shift:wS,preventDefault:!0},{key:"ArrowUp",run:sb,shift:hb,preventDefault:!0},{mac:"Cmd-ArrowUp",run:u0,shift:m0},{mac:"Ctrl-ArrowUp",run:c0,shift:d0},{key:"ArrowDown",run:nb,shift:ub,preventDefault:!0},{mac:"Cmd-ArrowDown",run:f0,shift:p0},{mac:"Ctrl-ArrowDown",run:of,shift:h0},{key:"PageUp",run:c0,shift:d0},{key:"PageDown",run:of,shift:h0},{key:"Home",run:lS,shift:yS,preventDefault:!0},{key:"Mod-Home",run:u0,shift:m0},{key:"End",run:iS,shift:gS,preventDefault:!0},{key:"Mod-End",run:f0,shift:p0},{key:"Enter",run:x0,shift:x0},{key:"Mod-a",run:NS},{key:"Backspace",run:cf,shift:cf,preventDefault:!0},{key:"Delete",run:xb,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:yb,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:ES,preventDefault:!0},{mac:"Mod-Backspace",run:PS,preventDefault:!0},{mac:"Mod-Delete",run:TS,preventDefault:!0}].concat(qS.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),GS=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:nS,shift:pS},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rS,shift:xS},{key:"Alt-ArrowUp",run:OS},{key:"Shift-Alt-ArrowUp",run:BS},{key:"Alt-ArrowDown",run:FS},{key:"Shift-Alt-ArrowDown",run:IS},{key:"Mod-Alt-ArrowUp",run:CS},{key:"Mod-Alt-ArrowDown",run:MS},{key:"Escape",run:AS},{key:"Mod-Enter",run:_S},{key:"Alt-l",mac:"Ctrl-l",run:kS},{key:"Mod-i",run:SS,preventDefault:!0},{key:"Mod-[",run:VS},{key:"Mod-]",run:HS},{key:"Mod-Alt-\\",run:WS},{key:"Shift-Mod-k",run:zS},{key:"Shift-Mod-\\",run:uS},{key:"Mod-/",run:O4},{key:"Alt-A",run:B4},{key:"Ctrl-m",mac:"Shift-Alt-m",run:US}].concat(KS),g0=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Oi{constructor(e,t,s=0,i=e.length,o,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,i),this.bufferStart=s,this.normalize=o?d=>o(g0(d)):g0,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return fy(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=f2(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=my(e);let i=this.normalize(t);if(i.length)for(let o=0,c=s;;o++){let d=i.charCodeAt(o),u=this.match(d,c,this.bufferPos+this.bufferStart);if(o==i.length-1){if(u)return this.value=u,this;break}c==s&&o<t.length&&t.charCodeAt(o)==d&&c++}}}match(e,t,s){let i=null;for(let o=0;o<this.matches.length;o+=2){let c=this.matches[o],d=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?i={from:this.matches[o+1],to:s}:(this.matches[o]++,d=!0)),d||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:s}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Oi.prototype[Symbol.iterator]=function(){return this});const jb={from:-1,to:-1,match:/.*/.exec("")},_f="gm"+(/x/.unicode==null?"":"u");class Nb{constructor(e,t,s,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=jb,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new kb(e,t,s,i,o);this.re=new RegExp(t,_f+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=e.iter();let c=e.lineAt(i);this.curLineStart=c.from,this.matchPos=wc(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let s=this.curLineStart+t.index,i=s+t[0].length;if(this.matchPos=wc(this.text,i+(s==i?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<i||s>this.value.to)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const iu=new WeakMap;class Ci{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,s){let i=iu.get(e);if(!i||i.from>=s||i.to<=t){let d=new Ci(t,e.sliceString(t,s));return iu.set(e,d),d}if(i.from==t&&i.to==s)return i;let{text:o,from:c}=i;return c>t&&(o=e.sliceString(t,c)+o,c=t),i.to<s&&(o+=e.sliceString(i.to,s)),iu.set(e,new Ci(c,o)),new Ci(t,o.slice(t-c,s-c))}}class kb{constructor(e,t,s,i,o){this.text=e,this.to=o,this.done=!1,this.value=jb,this.matchPos=wc(e,i),this.re=new RegExp(t,_f+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=Ci.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let s=this.flat.from+t.index,i=s+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this.matchPos=wc(this.text,i+(s==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ci.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Nb.prototype[Symbol.iterator]=kb.prototype[Symbol.iterator]=function(){return this});function QS(n){try{return new RegExp(n,_f),!0}catch{return!1}}function wc(n,e){if(e>=n.length)return e;let t=n.lineAt(e),s;for(;e<t.to&&(s=t.text.charCodeAt(e-t.from))>=56320&&s<57344;)e++;return e}const YS=n=>{let{state:e}=n,t=String(e.doc.lineAt(n.state.selection.main.head).number),{close:s,result:i}=jk(n,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:t},focus:!0,submitLabel:e.phrase("go")});return i.then(o=>{let c=o&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.elements.line.value);if(!c){n.dispatch({effects:s});return}let d=e.doc.lineAt(e.selection.main.head),[,u,m,p,g]=c,y=p?+p.slice(1):0,w=m?+m:d.number;if(m&&g){let S=w/100;u&&(S=S*(u=="-"?-1:1)+d.number/e.doc.lines),w=Math.round(e.doc.lines*S)}else m&&u&&(w=w*(u=="-"?-1:1)+d.number);let v=e.doc.line(Math.max(1,Math.min(e.doc.lines,w))),j=te.cursor(v.from+Math.max(0,Math.min(y,v.length)));n.dispatch({effects:[s,ve.scrollIntoView(j.from,{y:"center"})],selection:j})}),!0},XS={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},JS=ye.define({combine(n){return ea(n,XS,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function ZS(n){return[rC,nC]}const eC=Oe.mark({class:"cm-selectionMatch"}),tC=Oe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function y0(n,e,t,s){return(t==0||n(e.sliceDoc(t-1,t))!=ft.Word)&&(s==e.doc.length||n(e.sliceDoc(s,s+1))!=ft.Word)}function sC(n,e,t,s){return n(e.sliceDoc(t,t+1))==ft.Word&&n(e.sliceDoc(s-1,s))==ft.Word}const nC=vs.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(JS),{state:t}=n,s=t.selection;if(s.ranges.length>1)return Oe.none;let i=s.main,o,c=null;if(i.empty){if(!e.highlightWordAroundCursor)return Oe.none;let u=t.wordAt(i.head);if(!u)return Oe.none;c=t.charCategorizer(i.head),o=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return Oe.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),c=t.charCategorizer(i.head),!(y0(c,t,i.from,i.to)&&sC(c,t,i.from,i.to)))return Oe.none}else if(o=t.sliceDoc(i.from,i.to),!o)return Oe.none}let d=[];for(let u of n.visibleRanges){let m=new Oi(t.doc,o,u.from,u.to);for(;!m.next().done;){let{from:p,to:g}=m.value;if((!c||y0(c,t,p,g))&&(i.empty&&p<=i.from&&g>=i.to?d.push(tC.range(p,g)):(p>=i.to||g<=i.from)&&d.push(eC.range(p,g)),d.length>e.maxMatches))return Oe.none}}return Oe.set(d)}},{decorations:n=>n.decorations}),rC=ve.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),iC=({state:n,dispatch:e})=>{let{selection:t}=n,s=te.create(t.ranges.map(i=>n.wordAt(i.head)||te.cursor(i.head)),t.mainIndex);return s.eq(t)?!1:(e(n.update({selection:s})),!0)};function lC(n,e){let{main:t,ranges:s}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let c=!1,d=new Oi(n.doc,e,s[s.length-1].to);;)if(d.next(),d.done){if(c)return null;d=new Oi(n.doc,e,0,Math.max(0,s[s.length-1].from-1)),c=!0}else{if(c&&s.some(u=>u.from==d.value.from))continue;if(o){let u=n.wordAt(d.value.from);if(!u||u.from!=d.value.from||u.to!=d.value.to)continue}return d.value}}const aC=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return iC({state:n,dispatch:e});let s=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=s))return!1;let i=lC(n,s);return i?(e(n.update({selection:n.selection.addRange(te.range(i.from,i.to),!1),effects:ve.scrollIntoView(i.to)})),!0):!1},Ii=ye.define({combine(n){return ea(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new vC(e),scrollToMatch:e=>ve.scrollIntoView(e)})}});class Sb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||QS(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new fC(this):new dC(this)}getCursor(e,t=0,s){let i=e.doc?e:Ve.create({doc:e});return s==null&&(s=i.doc.length),this.regexp?pi(this,i,t,s):mi(this,i,t,s)}}class Cb{constructor(e){this.spec=e}}function oC(n,e,t){return(s,i,o,c)=>{if(t&&!t(s,i,o,c))return!1;let d=s>=c&&i<=c+o.length?o.slice(s-c,i-c):e.doc.sliceString(s,i);return n(d,e,s,i)}}function mi(n,e,t,s){let i;return n.wholeWord&&(i=cC(e.doc,e.charCategorizer(e.selection.main.head))),n.test&&(i=oC(n.test,e,i)),new Oi(e.doc,n.unquoted,t,s,n.caseSensitive?void 0:o=>o.toLowerCase(),i)}function cC(n,e){return(t,s,i,o)=>((o>t||o+i.length<s)&&(o=Math.max(0,t-2),i=n.sliceString(o,Math.min(n.length,s+2))),(e(vc(i,t-o))!=ft.Word||e(jc(i,t-o))!=ft.Word)&&(e(jc(i,s-o))!=ft.Word||e(vc(i,s-o))!=ft.Word))}class dC extends Cb{constructor(e){super(e)}nextMatch(e,t,s){let i=mi(this.spec,e,s,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);i=mi(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==s?null:i.value}prevMatchInRange(e,t,s){for(let i=s;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),c=mi(this.spec,e,o,i),d=null;for(;!c.nextOverlapping().done;)d=c.value;if(d)return d;if(o==t)return null;i-=1e4}}prevMatch(e,t,s){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=s)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let s=mi(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let o=mi(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function hC(n,e,t){return(s,i,o)=>(!t||t(s,i,o))&&n(o[0],e,s,i)}function pi(n,e,t,s){let i;return n.wholeWord&&(i=uC(e.charCategorizer(e.selection.main.head))),n.test&&(i=hC(n.test,e,i)),new Nb(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:i},t,s)}function vc(n,e){return n.slice(Nt(n,e,!1),e)}function jc(n,e){return n.slice(e,Nt(n,e))}function uC(n){return(e,t,s)=>!s[0].length||(n(vc(s.input,s.index))!=ft.Word||n(jc(s.input,s.index))!=ft.Word)&&(n(jc(s.input,s.index+s[0].length))!=ft.Word||n(vc(s.input,s.index+s[0].length))!=ft.Word)}class fC extends Cb{nextMatch(e,t,s){let i=pi(this.spec,e,s,e.doc.length).next();return i.done&&(i=pi(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,s){for(let i=1;;i++){let o=Math.max(t,s-i*1e4),c=pi(this.spec,e,o,s),d=null;for(;!c.next().done;)d=c.value;if(d&&(o==t||d.from>o+10))return d;if(o==t)return null}}prevMatch(e,t,s){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let i=s.length;i>0;i--){let o=+s.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+s.slice(i)}return t})}matchAll(e,t){let s=pi(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let o=pi(this.spec,e,Math.max(0,t-250),Math.min(s+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const Ql=Qe.define(),Wf=Qe.define(),ar=Xs.define({create(n){return new lu(df(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Ql)?n=new lu(t.value.create(),n.panel):t.is(Wf)&&(n=new lu(n.query,t.value?Hf:null));return n},provide:n=>fc.from(n,e=>e.panel)});class lu{constructor(e,t){this.query=e,this.panel=t}}const mC=Oe.mark({class:"cm-searchMatch"}),pC=Oe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),xC=vs.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ar))}update(n){let e=n.state.field(ar);(e!=n.startState.field(ar)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Oe.none;let{view:t}=this,s=new Ai;for(let i=0,o=t.visibleRanges,c=o.length;i<c;i++){let{from:d,to:u}=o[i];for(;i<c-1&&u>o[i+1].from-500;)u=o[++i].to;n.highlight(t.state,d,u,(m,p)=>{let g=t.state.selection.ranges.some(y=>y.from==m&&y.to==p);s.add(m,p,g?pC:mC)})}return s.finish()}},{decorations:n=>n.decorations});function la(n){return e=>{let t=e.state.field(ar,!1);return t&&t.query.spec.valid?n(e,t):Eb(e)}}const Nc=la((n,{query:e})=>{let{to:t}=n.state.selection.main,s=e.nextMatch(n.state,t,t);if(!s)return!1;let i=te.single(s.from,s.to),o=n.state.facet(Ii);return n.dispatch({selection:i,effects:[Vf(n,s),o.scrollToMatch(i.main,n)],userEvent:"select.search"}),Ab(n),!0}),kc=la((n,{query:e})=>{let{state:t}=n,{from:s}=t.selection.main,i=e.prevMatch(t,s,s);if(!i)return!1;let o=te.single(i.from,i.to),c=n.state.facet(Ii);return n.dispatch({selection:o,effects:[Vf(n,i),c.scrollToMatch(o.main,n)],userEvent:"select.search"}),Ab(n),!0}),gC=la((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:te.create(t.map(s=>te.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),yC=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:s,to:i}=t.main,o=[],c=0;for(let d=new Oi(n.doc,n.sliceDoc(s,i));!d.next().done;){if(o.length>1e3)return!1;d.value.from==s&&(c=o.length),o.push(te.range(d.value.from,d.value.to))}return e(n.update({selection:te.create(o,c),userEvent:"select.search.matches"})),!0},b0=la((n,{query:e})=>{let{state:t}=n,{from:s,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,s,s);if(!o)return!1;let c=o,d=[],u,m,p=[];c.from==s&&c.to==i&&(m=t.toText(e.getReplacement(c)),d.push({from:c.from,to:c.to,insert:m}),c=e.nextMatch(t,c.from,c.to),p.push(ve.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(s).number)+".")));let g=n.state.changes(d);return c&&(u=te.single(c.from,c.to).map(g),p.push(Vf(n,c)),p.push(t.facet(Ii).scrollToMatch(u.main,n))),n.dispatch({changes:g,selection:u,effects:p,userEvent:"input.replace"}),!0}),bC=la((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:o,to:c}=i;return{from:o,to:c,insert:e.getReplacement(i)}});if(!t.length)return!1;let s=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:ve.announce.of(s),userEvent:"input.replace.all"}),!0});function Hf(n){return n.state.facet(Ii).createPanel(n)}function df(n,e){var t,s,i,o,c;let d=n.selection.main,u=d.empty||d.to>d.from+100?"":n.sliceDoc(d.from,d.to);if(e&&!u)return e;let m=n.facet(Ii);return new Sb({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:m.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(s=e==null?void 0:e.caseSensitive)!==null&&s!==void 0?s:m.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:m.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:m.regexp,wholeWord:(c=e==null?void 0:e.wholeWord)!==null&&c!==void 0?c:m.wholeWord})}function Mb(n){let e=N1(n,Hf);return e&&e.dom.querySelector("[main-field]")}function Ab(n){let e=Mb(n);e&&e==n.root.activeElement&&e.select()}const Eb=n=>{let e=n.state.field(ar,!1);if(e&&e.panel){let t=Mb(n);if(t&&t!=n.root.activeElement){let s=df(n.state,e.query.spec);s.valid&&n.dispatch({effects:Ql.of(s)}),t.focus(),t.select()}}else n.dispatch({effects:[Wf.of(!0),e?Ql.of(df(n.state,e.query.spec)):Qe.appendConfig.of(NC)]});return!0},Lb=n=>{let e=n.state.field(ar,!1);if(!e||!e.panel)return!1;let t=N1(n,Hf);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Wf.of(!1)}),!0},wC=[{key:"Mod-f",run:Eb,scope:"editor search-panel"},{key:"F3",run:Nc,shift:kc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Nc,shift:kc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Lb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:yC},{key:"Mod-Alt-g",run:YS},{key:"Mod-d",run:aC,preventDefault:!0}];class vC{constructor(e){this.view=e;let t=this.query=e.state.field(ar).query.spec;this.commit=this.commit.bind(this),this.searchField=Et("input",{value:t.search,placeholder:ys(e,"Find"),"aria-label":ys(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Et("input",{value:t.replace,placeholder:ys(e,"Replace"),"aria-label":ys(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Et("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Et("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Et("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function s(i,o,c){return Et("button",{class:"cm-button",name:i,onclick:o,type:"button"},c)}this.dom=Et("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,s("next",()=>Nc(e),[ys(e,"next")]),s("prev",()=>kc(e),[ys(e,"previous")]),s("select",()=>gC(e),[ys(e,"all")]),Et("label",null,[this.caseField,ys(e,"match case")]),Et("label",null,[this.reField,ys(e,"regexp")]),Et("label",null,[this.wordField,ys(e,"by word")]),...e.state.readOnly?[]:[Et("br"),this.replaceField,s("replace",()=>b0(e),[ys(e,"replace")]),s("replaceAll",()=>bC(e),[ys(e,"replace all")])],Et("button",{name:"close",onclick:()=>Lb(e),"aria-label":ys(e,"close"),type:"button"},[""])])}commit(){let e=new Sb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Ql.of(e)}))}keydown(e){xk(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?kc:Nc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),b0(this.view))}update(e){for(let t of e.transactions)for(let s of t.effects)s.is(Ql)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ii).top}}function ys(n,e){return n.state.phrase(e)}const Ro=30,Oo=/[\s\.,:;?!]/;function Vf(n,{from:e,to:t}){let s=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(s.from,e-Ro),c=Math.min(i,t+Ro),d=n.state.sliceDoc(o,c);if(o!=s.from){for(let u=0;u<Ro;u++)if(!Oo.test(d[u+1])&&Oo.test(d[u])){d=d.slice(u);break}}if(c!=i){for(let u=d.length-1;u>d.length-Ro;u--)if(!Oo.test(d[u-1])&&Oo.test(d[u])){d=d.slice(0,u);break}}return ve.announce.of(`${n.state.phrase("current match")}. ${d} ${n.state.phrase("on line")} ${s.number}.`)}const jC=ve.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),NC=[ar,Ec.low(xC),jC],kC="#e5c07b",w0="#e06c75",SC="#56b6c2",CC="#ffffff",Ko="#abb2bf",hf="#7d8799",MC="#61afef",AC="#98c379",v0="#d19a66",EC="#c678dd",LC="#21252b",j0="#2c313a",N0="#282c34",au="#353a42",PC="#3E4451",k0="#528bff",TC=ve.theme({"&":{color:Ko,backgroundColor:N0},".cm-content":{caretColor:k0},".cm-cursor, .cm-dropCursor":{borderLeftColor:k0},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:PC},".cm-panels":{backgroundColor:LC,color:Ko},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:N0,color:hf,border:"none"},".cm-activeLineGutter":{backgroundColor:j0},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:au},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:au,borderBottomColor:au},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:j0,color:Ko}}},{dark:!0}),DC=ra.define([{tag:K.keyword,color:EC},{tag:[K.name,K.deleted,K.character,K.propertyName,K.macroName],color:w0},{tag:[K.function(K.variableName),K.labelName],color:MC},{tag:[K.color,K.constant(K.name),K.standard(K.name)],color:v0},{tag:[K.definition(K.name),K.separator],color:Ko},{tag:[K.typeName,K.className,K.number,K.changed,K.annotation,K.modifier,K.self,K.namespace],color:kC},{tag:[K.operator,K.operatorKeyword,K.url,K.escape,K.regexp,K.link,K.special(K.string)],color:SC},{tag:[K.meta,K.comment],color:hf},{tag:K.strong,fontWeight:"bold"},{tag:K.emphasis,fontStyle:"italic"},{tag:K.strikethrough,textDecoration:"line-through"},{tag:K.link,color:hf,textDecoration:"underline"},{tag:K.heading,fontWeight:"bold",color:w0},{tag:[K.atom,K.bool,K.special(K.variableName)],color:v0},{tag:[K.processingInstruction,K.string,K.inserted],color:AC},{tag:K.invalid,color:CC}]),RC=[TC,_1(DC)],is={};async function OC(n){if(is[n])return is[n];let e;switch(n){case"javascript":e=await Vs(()=>import("./index-E8u6rLWJ.js"),__vite__mapDeps([0,1,2])),is[n]=e.javascript({jsx:!0,typescript:!0});break;case"python":e=await Vs(()=>import("./index-BRzzSZf3.js"),__vite__mapDeps([3,1,2])),is[n]=e.python();break;case"go":e=await Vs(()=>import("./index-B9wZdvYE.js"),__vite__mapDeps([4,1,2])),is[n]=e.go();break;case"java":e=await Vs(()=>import("./index-B6wmcdnY.js"),__vite__mapDeps([5,1])),is[n]=e.java();break;case"rust":e=await Vs(()=>import("./index-KqCV0VQL.js"),__vite__mapDeps([6,1])),is[n]=e.rust();break;case"php":e=await Vs(()=>import("./index-CHSa0G3D.js"),__vite__mapDeps([7,1,8,9,0,2])),is[n]=e.php();break;case"cpp":e=await Vs(()=>import("./index-C51rIbWp.js"),__vite__mapDeps([10,1])),is[n]=e.cpp();break;case"css":e=await Vs(()=>import("./index-CuSFnDuX.js"),__vite__mapDeps([9,1])),is[n]=e.css();break;case"html":e=await Vs(()=>import("./index-CUeFNc6s.js"),__vite__mapDeps([8,1,9,0,2])),is[n]=e.html();break;case"json":e=await Vs(()=>import("./index-DxVSsxH2.js"),__vite__mapDeps([11,1])),is[n]=e.json();break;case"markdown":e=await Vs(()=>import("./index-Caqt-Nub.js"),__vite__mapDeps([12,2,8,1,9,0])),is[n]=e.markdown();break;default:return null}return is[n]}const FC=ve.theme({"&":{backgroundColor:"#0d0d0d",color:"#e4e4e7",fontSize:"13px",height:"100%"},".cm-content":{caretColor:"#fdcb0f",fontFamily:'"JetBrains Mono", "Fira Code", "Cascadia Code", monospace'},".cm-cursor":{borderLeftColor:"#fdcb0f"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:"rgba(253, 203, 15, 0.15) !important"},".cm-gutters":{backgroundColor:"#0a0a0a",color:"rgba(255,255,255,0.2)",borderRight:"1px solid rgba(255,255,255,0.06)"},".cm-activeLineGutter":{backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.5)"},".cm-activeLine":{backgroundColor:"rgba(255,255,255,0.03)"}}),BC=Oe.line({class:"cm-dead-line"}),IC=Oe.line({class:"cm-live-line"}),zC=Oe.line({class:"cm-target-line"});class $C extends On{toDOM(){const e=document.createElement("div");return e.className="cm-target-gutter",e.textContent="",e}}const _C=new $C;function WC(n,e){if(e<1||e>n.lines)return e;const t=n.line(e).text;if(!t.includes("{")&&!t.includes("("))return e;let s=0,i=!1;for(let o=e;o<=Math.min(e+500,n.lines);o++){const c=n.line(o).text;for(const d of c)if((d==="{"||d==="(")&&(s++,i=!0),(d==="}"||d===")")&&s--,i&&s<=0)return o}return e}function Go(n,e){return n.lineEnd&&n.lineEnd>(n.line||0)?n.lineEnd:n.line?WC(e,n.line):0}function S0(n,e,t){const s=[],i=n.state.doc;for(const o of e){if(!o.line)continue;const c=o.line,d=Go(o,i);for(let u=c;u<=d;u++){if(u<1||u>i.lines)continue;const m=i.line(u);if(t.has(u))s.push(zC.range(m.from));else{const p=o.status==="dead"?BC:o.status==="live"?IC:null;p&&s.push(p.range(m.from))}}}return s.sort((o,c)=>o.from-c.from),Oe.set(s)}function HC(n,e,t){const s=new Set;if(t){const i=n.find(o=>{if(!o.line)return!1;const c=Go(o,e);return t>=o.line&&t<=c});if(i&&i.line){const o=Go(i,e);for(let c=i.line;c<=o;c++)s.add(c)}else s.add(t)}else for(const i of n)if(i.status==="dead"&&i.line){const o=Go(i,e);for(let c=i.line;c<=o;c++)s.add(c)}return s}function VC(n,e,t){const s=n.split(`
`),i=[];for(const o of e){if(o.status!=="dead"||!o.sourceLine)continue;const c=o.sourceLine.trim();let d=!1;if(o.line&&o.line<=s.length&&s[o.line-1].trim()===c&&(d=!0),!d){for(const u of s)if(u.trim()===c){d=!0;break}}if(!d){const u=o.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");d=new RegExp(`export\\b.*\\b${u}\\b`).test(n)}d||i.push({file:t,exportName:o.name})}return i}function UC({projectPath:n,editorFile:e,onClose:t,scanId:s,onExportsResolved:i}){var G,Q,ne,ee;const o=M.useRef(null),c=M.useRef(null),{showToast:d}=Zl(),[u,m]=M.useState(!0),[p,g]=M.useState(!1),[y,w]=M.useState(null),[v,j]=M.useState(!1),[S,k]=M.useState(!1),[C,D]=M.useState(""),E=e.relativePath||e.file,I=((G=e.summary)==null?void 0:G.deadExports)??((Q=e.exports)==null?void 0:Q.filter(H=>H.status==="dead").length)??0,U=((ne=e.summary)==null?void 0:ne.liveExports)??((ee=e.exports)==null?void 0:ee.filter(H=>H.status==="live").length)??0,F=M.useCallback(async()=>{if(!c.current||p)return;const H=c.current.state.doc.toString();g(!0);try{await we.saveFile(n,E,H),D(H),j(!1);const V=e.exports||[],q=VC(H,V,E);q.length>0&&s?(we.saveResolutions(n,s,q).catch(()=>{}),i==null||i(q),d(`Saved  ${q.length} dead export${q.length!==1?"s":""} resolved`,"success")):d("File saved","success")}catch(V){d(V.message||"Failed to save","error")}finally{g(!1)}},[n,E,p,d,s,e.exports,i]),_=M.useCallback(()=>{v?k(!0):t()},[v,t]),R=M.useCallback(()=>{var V,q;const H=(q=(V=e.exports)==null?void 0:V.find(de=>de.status==="dead"))==null?void 0:q.line;we.openFile(n,E,H)},[n,E,e.exports]);return M.useEffect(()=>{let H=!1;async function V(){var q,de;m(!0),w(null),j(!1);try{const Y=await we.readFile(n,E);if(H)return;D(Y.content);const X=await OC(Y.language);if(H)return;const T=(e.exports||[]).map(De=>{var pt;return{...De,status:De.status||((pt=e.summary)!=null&&pt.canDeleteFile?"dead":De.status)}}),ce=Ve.create({doc:Y.content}).doc,ue=HC(T,ce,e.scrollToLine),ke=Ck({class:"cm-target-gutter-col",lineMarker:(De,pt)=>{const Ye=De.state.doc.lineAt(pt.from).number;return ue.has(Ye)?_C:null}}),Ne=[Dk(),ke,Fk(),bk(),V4(),A4(),ZS(),_1(v4,{fallback:!0}),RC,FC,w1.of([...GS,...Z4,...wC,{key:"Mod-s",run:()=>(F(),!0)}]),ve.updateListener.of(De=>{De.docChanged&&j(!0)}),vs.fromClass(class{constructor(De){Ax(this,"decorations");this.decorations=S0(De,T,ue)}update(De){De.docChanged&&(this.decorations=S0(De.view,T,ue))}},{decorations:De=>De.decorations})];X&&Ne.push(X),o.current&&(o.current.innerHTML=""),c.current&&c.current.destroy();const Re=Ve.create({doc:Y.content,extensions:Ne}),Pe=new ve({state:Re,parent:o.current});c.current=Pe;const Fe=e.scrollToLine||((de=(q=e.exports)==null?void 0:q.find(De=>De.status==="dead"))==null?void 0:de.line);if(Fe&&Fe<=Pe.state.doc.lines){const De=Pe.state.doc.line(Fe);requestAnimationFrame(()=>{Pe.dispatch({effects:ve.scrollIntoView(De.from,{y:"center"})})})}}catch(Y){H||w(Y.message||"Failed to load file")}finally{H||m(!1)}}return V(),()=>{H=!0,c.current&&(c.current.destroy(),c.current=null)}},[n,E]),M.useEffect(()=>{const H=V=>{V.key==="Escape"&&(V.preventDefault(),_())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[_]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:_}),r.jsxs("div",{className:"fixed right-0 top-0 bottom-0 z-50 w-[60%] min-w-[480px] max-w-[1200px] bg-[#0a0a0a] border-l border-white/10 flex flex-col editor-panel-enter shadow-2xl shadow-black/50",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10 bg-[#0d0d0d] shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx("button",{onClick:_,className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors shrink-0",title:"Close (Esc)",children:r.jsx(Fr,{className:"w-4 h-4 text-white/60"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h2",{className:"text-sm font-semibold text-white truncate",title:E,children:E}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[I>0&&r.jsxs("span",{className:"text-xs text-red-400",children:[I," dead"]}),U>0&&r.jsxs("span",{className:"text-xs text-emerald-400",children:[U," live"]}),v&&r.jsx("span",{className:"text-xs text-primary font-medium",children:"Modified"})]})]})]}),r.jsx("div",{className:"flex items-center gap-2 shrink-0",children:r.jsxs("button",{onClick:F,disabled:!v||p,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-primary/20 text-primary hover:bg-primary/30 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",title:"Save (Ctrl+S)",children:[p?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(J0,{className:"w-3.5 h-3.5"}),"Save"]})})]}),r.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[u&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d0d] z-10",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}),y&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d0d] z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx(yt,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-red-400",children:y})]})}),r.jsx("div",{ref:o,className:"h-full overflow-auto"})]}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-white/10 bg-[#0d0d0d] shrink-0",children:[r.jsx("span",{className:"text-xs text-white/30",children:"Ctrl+S to save"}),r.jsxs("button",{onClick:R,className:"flex items-center gap-1.5 text-xs text-white/40 hover:text-white/70 transition-colors",title:"Open in external editor",children:[r.jsx(Jl,{className:"w-3 h-3"}),"Open in Editor"]})]}),S&&r.jsx("div",{className:"absolute inset-0 z-20 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:r.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-6 max-w-sm mx-4 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(yt,{className:"w-5 h-5 text-primary shrink-0"}),r.jsx("h3",{className:"text-sm font-bold text-white",children:"Unsaved Changes"})]}),r.jsx("p",{className:"text-sm text-white/60 mb-4",children:"You have unsaved changes. Do you want to save before closing?"}),r.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{k(!1),t()},className:"px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:"Discard"}),r.jsx("button",{onClick:()=>k(!1),className:"px-3 py-1.5 text-xs font-medium text-white/60 hover:bg-white/10 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:async()=>{await F(),k(!1),t()},className:"px-3 py-1.5 text-xs font-medium bg-primary text-black hover:bg-primary/90 rounded-lg transition-colors",children:"Save & Close"})]})]})})]})]})}function _l({confidence:n,verdict:e,score:t}){if(e&&t!==void 0){const s=Math.round(t*100);if(e==="possibly-live")return r.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-amber-500/20 text-amber-400",children:["Review Required ",s,"%"]});if(e==="unreachable"&&t>=.85)return r.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:[s,"% Unreachable"]});if(e==="unreachable")return r.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-amber-500/20 text-amber-400",children:[s,"% Likely Unreachable"]});if(e==="partially-unreachable")return r.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-blue-500/20 text-blue-400",children:["Partial ",s,"%"]})}return r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Safe to Remove"})}function qC({evidence:n,verdict:e}){var t,s;return n?r.jsxs("div",{className:"bg-[#141414] border border-white/10 border-l-2 border-l-blue-500 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(wn,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"font-medium text-sm flex-1",children:"Evidence Trail"}),n.confidence&&r.jsx(_l,{confidence:n.confidence.label,verdict:e,score:n.confidence.score})]}),r.jsxs("div",{className:"p-4 space-y-3",children:[n.entryPoints&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-white/50",children:"Entry points searched: "}),r.jsx("span",{className:"text-white/80 font-medium",children:n.entryPoints.total})]}),n.reachability&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-white/50",children:"Analysis method: "}),r.jsx("span",{className:"text-white/80 font-mono text-xs bg-white/10 px-1.5 py-0.5 rounded",children:n.reachability.method}),r.jsx("span",{className:"text-white/50 ml-2",children:"Result: "}),r.jsx("span",{className:"text-white/80",children:n.reachability.result})]}),n.dynamicCheck&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-white/50",children:"Dynamic check: "}),n.dynamicCheck.matchedPattern?r.jsxs("span",{className:"text-amber-400",children:['Matched pattern "',n.dynamicCheck.matchedPattern,'"']}):r.jsx("span",{className:"text-emerald-400",children:"No dynamic loading pattern detected"})]}),((t=n.dynamicCheck)==null?void 0:t.frameworksDetected)&&n.dynamicCheck.frameworksDetected.length>0&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-white/50",children:"Frameworks detected: "}),r.jsx("span",{className:"flex flex-wrap gap-1 mt-1",children:n.dynamicCheck.frameworksDetected.map((i,o)=>r.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded",children:i},o))})]}),((s=n.confidence)==null?void 0:s.factors)&&n.confidence.factors.length>0&&r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-white/50 block mb-1",children:"Confidence factors:"}),r.jsx("ul",{className:"space-y-1",children:n.confidence.factors.map((i,o)=>r.jsx("li",{className:"text-xs flex items-center gap-1",children:i.startsWith("+")?r.jsx("span",{className:"text-emerald-400",children:i}):r.jsx("span",{className:"text-amber-400",children:i})},o))})]})]})]}):null}function ou({severity:n}){const e=(n==null?void 0:n.toLowerCase())||"low",t={critical:"bg-red-500/20 text-red-400",high:"bg-orange-500/20 text-orange-400",medium:"bg-primary/20 text-primary",low:"bg-white/10 text-white/60"};return r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${t[e]||t.low}`,children:e})}function Tl({status:n,variant:e="neutral"}){const t={success:"bg-emerald-500/20 text-emerald-400",warning:"bg-primary/20 text-primary",danger:"bg-red-500/20 text-red-400",neutral:"bg-white/10 text-white/60"};return r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${t[e]}`,children:n})}function uf({code:n,language:e,showLineNumbers:t=!1,highlightLines:s=[],maxHeight:i="300px"}){const[o,c]=M.useState(!1),d=(n==null?void 0:n.split(`
`))||[],u=()=>{navigator.clipboard.writeText(n),c(!0),setTimeout(()=>c(!1),2e3)};return r.jsxs("div",{className:"relative bg-[#0a0a0a] border border-white/10 rounded-lg overflow-hidden my-2",children:[e&&r.jsx("div",{className:"absolute top-2 right-2 text-xs text-white/40 bg-white/10 px-2 py-0.5 rounded",children:e}),r.jsx("button",{onClick:u,className:"absolute top-2 right-16 p-1 hover:bg-white/10 rounded",children:o?r.jsx(as,{className:"w-3 h-3 text-emerald-400"}):r.jsx(_t,{className:"w-3 h-3 text-white/40"})}),r.jsx("pre",{className:"p-4 overflow-auto text-sm font-mono",style:{maxHeight:i},children:t?d.map((m,p)=>{const g=p+1,y=s.includes(g);return r.jsxs("div",{className:`flex ${y?"bg-primary/20":""}`,children:[r.jsx("span",{className:"w-8 text-white/30 text-right pr-4 select-none flex-shrink-0",children:g}),r.jsx("span",{className:"text-white/80",children:m})]},p)}):r.jsx("code",{className:"text-white/80",children:n})})]})}function Ls({type:n="info",title:e,description:t,items:s=[],code:i,confidence:o}){const c={usage:r.jsx(Lj,{className:"w-4 h-4"}),file:r.jsx(Qt,{className:"w-4 h-4"}),import:r.jsx(Gx,{className:"w-4 h-4"}),export:r.jsx(Gx,{className:"w-4 h-4"}),warning:r.jsx(yt,{className:"w-4 h-4"}),info:r.jsx(Or,{className:"w-4 h-4"}),success:r.jsx(or,{className:"w-4 h-4"}),security:r.jsx(wn,{className:"w-4 h-4"}),code:r.jsx(pj,{className:"w-4 h-4"})},d={warning:"border-l-primary",success:"border-l-emerald-500",security:"border-l-red-500",info:"border-l-blue-500"};return r.jsxs("div",{className:`bg-[#141414] border border-white/10 ${d[n]||""} border-l-2 rounded-lg overflow-hidden my-3`,children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx("span",{className:"text-primary",children:c[n]||c.info}),r.jsx("span",{className:"font-medium text-sm flex-1",children:e}),o&&r.jsx(_l,{confidence:o})]}),r.jsxs("div",{className:"p-4",children:[t&&r.jsx("p",{className:"text-sm text-white/60 mb-3",children:t}),s.length>0&&r.jsx("ul",{className:"space-y-2",children:s.map((u,m)=>r.jsxs("li",{className:"text-sm text-white/70 flex items-start gap-2",children:[r.jsx("span",{className:"text-white/30 mt-1",children:"-"}),typeof u=="string"?u:u.file?r.jsxs("span",{children:[r.jsx("code",{className:"text-primary bg-primary/10 px-1.5 py-0.5 rounded text-xs",children:u.file}),u.line&&r.jsxs("span",{className:"text-white/40",children:[":",u.line]}),u.context&&r.jsxs("span",{className:"text-white/50 ml-2",children:["- ",u.context]})]}):u.text]},m))}),i&&r.jsx(uf,{code:i.content,language:i.language,showLineNumbers:i.showLineNumbers,highlightLines:i.highlightLines})]})]})}function KC({lastModified:n,author:e,commitMessage:t,daysSinceModified:s,addedBy:i,addedDate:o}){if(!n)return null;const c=d=>{try{return new Date(d).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return d}};return r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(Sj,{className:"w-4 h-4 text-orange-400"}),r.jsx("span",{className:"font-medium text-sm",children:"Git History"})]}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Last modified:"}),r.jsxs("span",{className:"text-white/80",children:[c(n),s!==void 0&&r.jsxs("span",{className:"text-white/40 ml-2",children:["(",s," days ago)"]})]})]}),e&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Author:"}),r.jsx("span",{className:"text-white/80",children:e})]}),t&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Commit:"}),r.jsx("span",{className:"text-white/60 font-mono text-xs",children:t})]}),i&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Added by:"}),r.jsxs("span",{className:"text-white/80",children:[i,o&&r.jsxs("span",{className:"text-white/40 ml-2",children:["on ",c(o)]})]})]})]})]})}function fi({formula:n,children:e}){const[t,s]=M.useState(!1);return n?r.jsxs("div",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[e,t&&r.jsxs("div",{className:"absolute z-50 bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 p-3 bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl",children:[r.jsx("p",{className:"text-xs font-mono text-primary mb-2 break-all",children:n.formula}),n.breakdown&&n.breakdown.length>0&&r.jsx("ul",{className:"space-y-1",children:n.breakdown.map((i,o)=>r.jsx("li",{className:"text-[10px] text-white/50",children:i},o))}),r.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full",children:r.jsx("div",{className:"border-8 border-transparent border-t-[#1a1a1a]"})})]})]}):r.jsx(r.Fragment,{children:e})}function Qo({monthlyCost:n,annualCost:e,potentialSavings:t,potentialSavingsAnnual:s,co2Monthly:i,bandwidth:o,description:c,currency:d,currencySymbol:u="$",formulas:m}){const p=y=>y===void 0?null:u?y<.01?`${u}0.00`:y<100?`${u}${y.toFixed(2)}`:`${u}${y.toFixed(0)}`:new Intl.NumberFormat("en-US",{style:"currency",currency:d||"USD"}).format(y),g=y=>{if(y===void 0)return null;if(y===0)return"0 B";const w=1024,v=["B","KB","MB","GB"],j=Math.floor(Math.log(y)/Math.log(w));return parseFloat((y/Math.pow(w,j)).toFixed(1))+" "+v[j]};return r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(yf,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"font-medium text-sm",children:"Cost Impact"}),m&&r.jsx("span",{className:"text-[10px] text-white/40 ml-auto",children:"Hover for formula"})]}),r.jsxs("div",{className:"p-4",children:[c&&r.jsx("p",{className:"text-sm text-white/60 mb-4",children:c}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n!==void 0&&r.jsx(fi,{formula:m==null?void 0:m.bandwidth,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:p(n)}),r.jsx("p",{className:"text-xs text-white/50",children:"Monthly cost"})]})}),e!==void 0&&r.jsx(fi,{formula:m!=null&&m.bandwidth?{...m.bandwidth,formula:m.bandwidth.formula+"  12"}:null,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:p(e)}),r.jsx("p",{className:"text-xs text-white/50",children:"Annual cost"})]})}),t!==void 0&&r.jsx(fi,{formula:(m==null?void 0:m.wasteBandwidth)||(m==null?void 0:m.wasteStorage),children:r.jsxs("div",{className:"text-center p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg cursor-help hover:bg-emerald-500/20 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["-",p(t)]}),r.jsx("p",{className:"text-xs text-white/50",children:"Monthly savings"})]})}),s!==void 0&&r.jsx(fi,{formula:m!=null&&m.wasteBandwidth?{...m.wasteBandwidth,formula:m.wasteBandwidth.formula+"  12"}:null,children:r.jsxs("div",{className:"text-center p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg cursor-help hover:bg-emerald-500/20 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["-",p(s)]}),r.jsx("p",{className:"text-xs text-white/50",children:"Annual savings"})]})}),i!==void 0&&r.jsx(fi,{formula:m==null?void 0:m.co2,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-white",children:[i.toFixed(3)," kg"]}),r.jsx("p",{className:"text-xs text-white/50",children:"CO2/month"})]})}),o!==void 0&&r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:g(o)}),r.jsx("p",{className:"text-xs text-white/50",children:"Bandwidth"})]})]}),(m==null?void 0:m.developerTime)&&m.developerTime.timeHours!==void 0&&m.developerTime.timeHours>0&&r.jsx(fi,{formula:m.developerTime,children:r.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg cursor-help hover:bg-blue-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-white/70",children:"Estimated cleanup time"}),r.jsx("p",{className:"text-xs text-white/40",children:"Developer cost to remove this waste"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-white",children:[m.developerTime.timeHours.toFixed(1)," hours"]}),r.jsx("p",{className:"text-sm text-blue-400",children:m.developerTime.resultFormatted})]})]})})})]})]})}function bn({title:n,description:e,priority:t,effort:s,commands:i=[],steps:o=[],alternatives:c=[],links:d=[]}){const[u,m]=M.useState(null),p=v=>{navigator.clipboard.writeText(v),m(v),setTimeout(()=>m(null),2e3)},g={high:"border-l-red-500",medium:"border-l-primary",low:"border-l-blue-500"},y={high:"bg-red-500/20 text-red-400",medium:"bg-primary/20 text-primary",low:"bg-blue-500/20 text-blue-400"},w={low:"Quick fix",medium:"Some effort",high:"Significant work"};return r.jsxs("div",{className:`bg-[#141414] border border-white/10 ${g[t||"medium"]||""} border-l-2 rounded-lg overflow-hidden my-3`,children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10 flex-wrap",children:[r.jsx(Ej,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"font-medium text-sm flex-1",children:n}),t&&r.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded uppercase ${y[t]||y.medium}`,children:t}),s&&r.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded",children:w[s]||s})]}),r.jsxs("div",{className:"p-4",children:[e&&r.jsx("p",{className:"text-sm text-white/60 mb-4",children:e}),o.length>0&&r.jsx("ol",{className:"list-decimal list-inside space-y-2 mb-4",children:o.map((v,j)=>r.jsx("li",{className:"text-sm text-white/70",children:v},j))}),i.length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:i.map((v,j)=>r.jsxs("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-white/10 rounded px-3 py-2",children:[r.jsx("code",{className:"text-sm text-primary flex-1 font-mono",children:v}),r.jsx("button",{onClick:()=>p(v),className:"p-1 hover:bg-white/10 rounded",children:u===v?r.jsx(as,{className:"w-4 h-4 text-emerald-400"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]},j))}),c.length>0&&r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-4",children:[r.jsx("span",{className:"text-xs text-white/50",children:"Alternatives:"}),c.map((v,j)=>r.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded",children:v},j))]}),d.length>0&&r.jsx("div",{className:"flex gap-4 flex-wrap",children:d.map((v,j)=>r.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[r.jsx(Jl,{className:"w-3 h-3"}),v.text||v.url]},j))})]})]})}function GC({fromVersion:n,toVersion:e,effort:t,steps:s=[],codeChanges:i=[],links:o=[]}){return!s.length&&!i.length?null:r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(fj,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"font-medium text-sm flex-1",children:["Migration Guide: ",n,"  ",e]}),t&&r.jsxs("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded",children:[t," effort"]})]}),r.jsxs("div",{className:"p-4",children:[s.length>0&&r.jsx("ol",{className:"list-decimal list-inside space-y-2 mb-4",children:s.map((c,d)=>r.jsx("li",{className:"text-sm text-white/70",children:c},d))}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-white/70",children:"Code changes required:"}),i.map((c,d)=>r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Before:"}),r.jsx("div",{className:"bg-[#0a0a0a] border-l-2 border-red-500/50 rounded",children:r.jsx(uf,{code:c.before})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"After:"}),r.jsx("div",{className:"bg-[#0a0a0a] border-l-2 border-emerald-500/50 rounded",children:r.jsx(uf,{code:c.after})})]})]},d))]}),o.length>0&&r.jsx("div",{className:"flex gap-4 flex-wrap mt-4",children:o.map((c,d)=>r.jsxs("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[r.jsx(Jl,{className:"w-3 h-3"}),c.text||"Documentation"]},d))})]})]})}function QC(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState([]),[o,c]=M.useState([]),[d,u]=M.useState([]),[m,p]=M.useState(null),[g,y]=M.useState(!1),[w,v]=M.useState(null),[j,S]=M.useState(null),[k,C]=M.useState(!1),[D,E]=M.useState([]),[I,U]=M.useState(null),[F,_]=M.useState(null),[R,G]=M.useState(new Set),[Q,ne]=M.useState(!1),[ee,H]=M.useState(null),[V,q]=M.useState(new Set),{showToast:de}=Zl(),[Y,X]=M.useState(!1),[ie,T]=M.useState(null),[W,ce]=M.useState(!1),ue=()=>{n&&we.getQuarantine(n).then(P=>{E(P.sessions||[])}).catch(()=>{})},ke=async()=>{if(!(!n||o.length===0)){y(!0),v(null),C(!1);try{const P=await we.quarantineDeadCode(n,e==null?void 0:e.id);S(P),e!=null&&e.id&&we.getDeadCode(e.id).then(ae=>c([...ae.fullyDeadFiles||[],...ae.partiallyDeadFiles||[]])).catch(console.error),ue()}catch(P){v(P.message||"Failed to quarantine files")}finally{y(!1)}}},Ne=async P=>{if(n){y(!0),v(null);try{await we.restoreQuarantine(n,P),S(null),e!=null&&e.id&&we.getDeadCode(e.id).then(ae=>c([...ae.fullyDeadFiles||[],...ae.partiallyDeadFiles||[]])).catch(console.error),ue()}catch(ae){v(ae.message||"Failed to restore files")}finally{y(!1)}}},Re=async P=>{if(n){y(!0),v(null),U(null);try{await we.purgeQuarantine(n,P),ue()}catch(ae){v(ae.message||"Failed to purge quarantine")}finally{y(!1)}}},Pe=async()=>{if(!(!n||d.length===0)){X(!0),v(null),ce(!1);try{const P=await we.quarantineUnusedAssets(n,e==null?void 0:e.id);T(P),u([]),ue()}catch(P){v(P.message||"Failed to quarantine assets")}finally{X(!1)}}},Fe=async P=>{if(!(!n||ee)){H(P.name);try{const ae=await we.uninstallDep(n,P.name);q(Ae=>new Set(Ae).add(P.name)),de(`Removed ${P.name} (${ae.packageManager})`,"success")}catch(ae){de(ae.message||`Failed to uninstall ${P.name}`,"error")}finally{H(null)}}},De=P=>{G(ae=>{const Ae=new Set(ae);return P.forEach(Se=>Ae.add(`${Se.file}::${Se.exportName}`)),Ae})};M.useEffect(()=>{var P,ae;if(e!=null&&e.id){we.getUnusedDeps(e.id).then(Se=>i(Se)).catch(console.error),we.getDeadCode(e.id).then(Se=>{const Te=[...Se.fullyDeadFiles||[],...Se.partiallyDeadFiles||[]];c(Te);const at=new Set;for(const Vt of Te)for(const Ut of Vt.exports||[])Ut.resolved&&at.add(`${Vt.relativePath||Vt.file}::${Ut.name}`);G(at)}).catch(console.error);const Ae=((ae=(P=e.raw)==null?void 0:P.details)==null?void 0:ae.unusedAssets)||[];u(Ae)}},[e==null?void 0:e.id]),M.useEffect(()=>{ue()},[n]);const pt=(P,ae)=>{ae==null||ae.stopPropagation(),navigator.clipboard.writeText(P),p(P),setTimeout(()=>p(null),2e3)},Ye=P=>{if(!P||P===0)return"0 B";const ae=1024,Ae=["B","KB","MB","GB"],Se=Math.floor(Math.log(P)/Math.log(ae));return parseFloat((P/Math.pow(ae,Se)).toFixed(1))+" "+Ae[Se]};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const Lt=e.metrics.waste,Jt=o.reduce((P,ae)=>P+(ae.sizeBytes||0),0),hs=P=>{var Se,Te,at,Vt,Ut,_e;const ae=[],Ae=[];return P.lastUsed&&Ae.push(`Last used: ${P.lastUsed}`),(Se=P.searchedPatterns)!=null&&Se.length&&Ae.push(`Searched for: ${P.searchedPatterns.join(", ")}`),(Te=P.potentialUsage)!=null&&Te.length?Ae.push(`Potential references found but not confirmed: ${P.potentialUsage.length}`):Ae.push("No imports or requires found in codebase"),ae.push(r.jsx(Ls,{type:"file",title:"Why We Think It's Unused",items:Ae,confidence:P.confidence},"evidence")),(at=P.git)!=null&&at.lastModified&&ae.push(r.jsx(KC,{...P.git},"git")),(P.costImpact||P.sizeBytes)&&ae.push(r.jsx(Qo,{bandwidth:P.sizeBytes,co2Monthly:(Vt=P.costImpact)==null?void 0:Vt.co2Monthly,potentialSavings:(Ut=P.costImpact)==null?void 0:Ut.monthlySavings,potentialSavingsAnnual:(_e=P.costImpact)==null?void 0:_e.annualSavings,description:`This unused dependency adds ${Ye(P.sizeBytes)} to your project.`},"cost")),ae.push(r.jsx(bn,{title:`Remove ${P.name}`,priority:"medium",effort:"low",commands:[P.command],description:"Remove this unused dependency to reduce bundle size and maintenance burden.",alternatives:P.alternatives},"recommendation")),r.jsx("div",{className:"space-y-4",children:ae})},us=P=>{var Vt,Ut;const ae=[],Ae=P.exports||[],Se=Ae.filter(_e=>_e.status==="dead"),Te=Ae.filter(_e=>_e.status==="live"),at=P.status==="fully-dead"||((Vt=P.summary)==null?void 0:Vt.canDeleteFile);return Ae.length>0&&(Ae.some(_e=>_e.sourceLine),ae.push(r.jsxs("div",{className:"bg-[#0d0d0d] rounded-lg border border-white/10 overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold text-white",children:at?`${Ae.length} Dead Export${Ae.length!==1?"s":""}`:`${Se.length} Unused Export${Se.length!==1?"s":""}`}),r.jsx(_l,{confidence:"safe-to-remove"})]}),!at&&r.jsxs("span",{className:"text-xs text-white/40",children:[Te.length," live  ",Se.length," dead of ",Ae.length," total"]})]}),r.jsx("div",{className:"divide-y divide-white/5",children:Ae.map((_e,en)=>{var zi;const fs=_e.status==="dead"||at,qt=R.has(`${P.relativePath||P.file}::${_e.name}`),Hc=()=>{if(!_e.sourceLine)return null;const pr=_e.sourceLine,$i=pr.indexOf(_e.name);return $i===-1?r.jsx("span",{className:qt?"text-white/30 line-through":"text-white/60",children:pr}):r.jsxs("span",{className:qt?"line-through":"",children:[r.jsx("span",{className:"text-white/40",children:pr.slice(0,$i)}),r.jsx("span",{className:qt?"text-emerald-400/60 bg-emerald-500/10 px-0.5 rounded":fs?"text-red-400 bg-red-500/20 px-0.5 rounded":"text-emerald-400 bg-emerald-500/15 px-0.5 rounded",children:_e.name}),r.jsx("span",{className:"text-white/40",children:pr.slice($i+_e.name.length)})]})};return r.jsxs("div",{className:`${qt?"bg-emerald-500/5":fs?"bg-red-500/5":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2",children:[r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded min-w-[42px] text-center ${qt?"bg-emerald-500/20 text-emerald-400":fs?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,children:qt?"FIXED":fs?"DEAD":"LIVE"}),r.jsx("code",{className:`text-sm font-semibold ${qt?"text-emerald-400/60 line-through":fs?"text-red-400":"text-emerald-400"}`,children:_e.name}),r.jsx("span",{className:"text-xs text-white/30",children:_e.type||""}),qt?r.jsx("span",{className:"text-xs text-emerald-400/50 ml-auto",children:"resolved"}):(zi=_e.importedBy)!=null&&zi.length?r.jsxs("span",{className:"text-xs text-white/30 ml-auto",children:["imported by ",_e.importedBy.slice(0,2).join(", "),_e.importedBy.length>2?` +${_e.importedBy.length-2}`:""]}):fs?r.jsx("span",{className:"text-xs text-red-400/50 ml-auto",children:"no importers found"}):null]}),_e.sourceLine&&r.jsx("div",{className:`mx-4 mb-2 rounded overflow-x-auto font-mono text-xs ${qt?"bg-emerald-950/20 border border-emerald-500/10":fs?"bg-red-950/30 border border-red-500/10":"bg-[#111] border border-white/5"}`,children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"select-none px-3 py-1.5 text-white/20 border-r border-white/5 min-w-[3.5rem] text-right hover:text-primary cursor-pointer",onClick:()=>_({file:P.file,relativePath:P.relativePath,exports:P.exports,scrollToLine:_e.line,summary:P.summary}),title:"Open at this line",children:_e.line}),r.jsx("pre",{className:"px-3 py-1.5 whitespace-pre overflow-x-auto",children:Hc()})]})})]},en)})})]},"exports-table"))),P.evidence&&ae.push(r.jsx(qC,{evidence:P.evidence,verdict:P.verdict},"evidence-trail")),at&&ae.push(r.jsx(Ls,{type:"warning",title:"Entire File Can Be Deleted",description:`All ${((Ut=P.summary)==null?void 0:Ut.totalExports)||Ae.length||0} export(s) are dead. ${P.lineCount?`File has ${P.lineCount} lines.`:""}`,confidence:"safe-to-remove"},"orphan")),P.costImpact&&ae.push(r.jsx(Qo,{bandwidth:P.costImpact.bundleContribution||P.sizeBytes,description:`This dead code adds ${P.sizeFormatted||Ye(P.sizeBytes)} to your codebase. Annual cost: ${P.costImpact.annualCostGBP||"0"}. Monthly CO2: ${P.costImpact.monthlyCO2Kg||"0"} kg.`},"cost")),P.recommendation&&ae.push(r.jsx(bn,{title:at?"Delete This File":"Remove Unused Exports",priority:"low",effort:"low",description:P.recommendation.reasoning||(at?"This file appears to be completely unused. Consider deleting it after verification.":"Remove the unused exports to reduce bundle size."),commands:P.recommendation.command?[P.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:ae})},Le=P=>{var Se;const ae=[],Ae=[];if(Ae.push(`Path: ${P.file}`),P.dimensions&&Ae.push(`Dimensions: ${P.dimensions.width}  ${P.dimensions.height} (${P.dimensions.aspectRatio||"N/A"})`),P.format&&Ae.push(`Format: ${P.format.toUpperCase()}`),Ae.push(`Size: ${P.sizeFormatted||Ye(P.sizeBytes||P.size||0)}`),ae.push(r.jsx(Ls,{type:"file",title:"File Details",items:Ae},"info")),P.evidence){const Te=[];Te.push(`Searched ${P.evidence.filesSearched||0} files (${P.evidence.jsFilesSearched||0} JS, ${P.evidence.cssFilesSearched||0} CSS)`),(Se=P.evidence.searchPatterns)!=null&&Se.length&&Te.push(`Checked: ${P.evidence.searchPatterns.join(", ")}`),Te.push(`References found: ${P.referenceCount||0}`),ae.push(r.jsx(Ls,{type:"warning",title:"No Usage Found",items:Te,confidence:"safe-to-remove"},"evidence"))}return P.costImpact&&ae.push(r.jsx(Qo,{bandwidth:P.sizeBytes||P.size,description:`Annual cost: ${P.costImpact.annualCostGBP||"0"}. Monthly CO2: ${P.costImpact.monthlyCO2Kg||"0"} kg. Monthly transfer: ${P.costImpact.monthlyTransferGB||"0"} GB.`},"cost")),P.recommendation&&ae.push(r.jsx(bn,{title:"Remove Unused Asset",priority:"medium",effort:"low",description:P.recommendation.reasoning||"This asset is not referenced anywhere in the codebase.",commands:P.recommendation.command?[P.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:ae})},pe=P=>new Date(P).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),nt=D.filter(P=>P.status==="active");return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gn,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Waste Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-orange-400 mb-2",children:"What is Digital Waste?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed mb-2",children:["Digital waste is code and assets that ship to production but serve no purpose. This includes",r.jsx("strong",{className:"text-white/80",children:" unused dependencies"})," (installed but never imported),",r.jsx("strong",{className:"text-white/80",children:" dead code"})," (functions/files never called), and",r.jsx("strong",{className:"text-white/80",children:" unused assets"})," (images/fonts not referenced). Removing waste reduces bundle size, speeds up builds, and lowers hosting costs."]}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every file is classified into one of three states:",r.jsx("span",{className:"inline-flex items-center mx-1 text-xs font-bold px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:"UNREACHABLE"}),"(no path from entry points, safe to remove),",r.jsx("span",{className:"inline-flex items-center mx-1 text-xs font-bold px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-400",children:"POSSIBLY LIVE"}),"(may be loaded dynamically, review required), or",r.jsx("span",{className:"inline-flex items-center mx-1 text-xs font-bold px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-400",children:"LIVE"}),"(reachable from entry points). Each verdict is backed by evidence."]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:`${Lt<2?"bg-emerald-500/10 border-emerald-500/30":"bg-orange-500/10 border-orange-500/30"} border rounded-xl p-6 text-center`,children:[r.jsxs("p",{className:`text-4xl font-bold ${Lt<2?"text-emerald-400":"text-orange-400"}`,children:[Lt.toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Waste"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:s.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused Deps"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:o.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Dead Code Files"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:d.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused Assets"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"Unused Dependencies"}),s.length>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:s.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Version"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Action"}),r.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),r.jsx("tbody",{children:s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No unused dependencies detected"})}):s.map((P,ae)=>{const Ae=V.has(P.name),Se=ee===P.name;return r.jsx(Rs,{cells:[r.jsxs("span",{className:Ae?"text-white/40 line-through":"text-primary",children:[Ae&&r.jsx(Pn,{className:"w-3.5 h-3.5 text-emerald-400 inline mr-1.5"}),P.name]}),r.jsx("span",{className:"text-white/70",children:P.version}),r.jsx("span",{className:"text-white/70",children:P.sizeFormatted||Ye(P.sizeBytes)}),Ae?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Removed"}):r.jsx(_l,{confidence:"safe-to-remove"}),r.jsxs("div",{className:"flex items-center gap-2",onClick:Te=>Te.stopPropagation(),children:[!Ae&&r.jsxs("button",{onClick:Te=>{Te.stopPropagation(),Fe(P)},disabled:!!ee,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[Se?r.jsx(je,{className:"w-3 h-3 animate-spin"}):r.jsx(gn,{className:"w-3 h-3"}),Se?"Removing...":"Run"]}),r.jsx("code",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded",children:P.command}),r.jsx("button",{onClick:Te=>pt(P.command,Te),className:"p-1 hover:bg-white/10 rounded",children:m===P.command?r.jsx(as,{className:"w-4 h-4 text-emerald-500"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]})],expandedContent:hs(P)},ae)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-bold",children:"Dead Code"}),o.length>0&&r.jsx("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full",children:o.length}),R.size>0&&r.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[R.size," resolved"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[R.size>0&&r.jsx("button",{onClick:()=>ne(!Q),className:"text-xs text-white/40 hover:text-white/70 transition-colors",children:Q?"Show resolved":"Hide resolved"}),j&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Pn,{className:"w-3.5 h-3.5 text-emerald-400"}),r.jsxs("span",{className:"text-emerald-400",children:[j.filesQuarantined," files quarantined"]}),r.jsxs("button",{onClick:()=>Ne(j.sessionId),disabled:g,className:"flex items-center gap-1 px-2 py-1 text-xs text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded transition-all",children:[r.jsx($o,{className:"w-3 h-3"}),r.jsx("span",{children:"Restore"})]})]}),o.length>0&&!j&&r.jsx("button",{onClick:()=>C(!0),disabled:g,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg transition-all disabled:opacity-70 shadow-lg shadow-orange-500/20",children:g?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Quarantining..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(ui,{className:"w-4 h-4"}),r.jsx("span",{children:"Quarantine Dead Code"})]})})]})]}),w&&r.jsx("div",{className:"px-6 py-2 bg-red-500/10 border-b border-red-500/20 text-xs text-red-400",children:w}),k&&r.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 border-b border-orange-500/20",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:r.jsx(ui,{className:"w-5 h-5 text-orange-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"Quarantine Dead Code"}),r.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Move ",o.length," file",o.length!==1?"s":""," (",Ye(Jt),") to quarantine? These files will be moved to ",r.jsx("code",{className:"text-orange-400 bg-orange-500/10 px-1 rounded",children:".swynx-quarantine/"})," and can be restored at any time."]}),o.length<=15&&r.jsx("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:o.map((P,ae)=>r.jsxs("div",{className:"text-orange-400",children:[P.relativePath||P.file,r.jsx("span",{className:"text-white/30 ml-2",children:P.sizeFormatted||Ye(P.sizeBytes)})]},ae))}),o.length>15&&r.jsxs("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:[o.slice(0,10).map((P,ae)=>r.jsxs("div",{className:"text-orange-400",children:[P.relativePath||P.file,r.jsx("span",{className:"text-white/30 ml-2",children:P.sizeFormatted||Ye(P.sizeBytes)})]},ae)),r.jsxs("div",{className:"text-white/40 mt-1",children:["... and ",o.length-10," more files"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:ke,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-all disabled:opacity-70",children:[g?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(ui,{className:"w-4 h-4"}),r.jsxs("span",{children:["Quarantine ",o.length," File",o.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-xs font-medium text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:"Cancel"})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Exports"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Verdict"}),r.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),r.jsx("tbody",{children:o.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No dead code detected"})}):o.map((P,ae)=>{var Vt,Ut,_e;const Ae=P.relativePath||P.file,Se=(P.exports||[]).filter(en=>en.status==="dead"),Te=Se.filter(en=>R.has(`${Ae}::${en.name}`)).length,at=Se.length>0&&Te===Se.length;return Q&&at?null:r.jsx(Rs,{cells:[r.jsxs("span",{className:"flex items-center gap-2",children:[at&&r.jsx(Pn,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}),r.jsx("span",{className:`hover:underline cursor-pointer ${at?"text-white/40 line-through":"text-primary"}`,onClick:en=>{en.stopPropagation(),_({file:P.file,relativePath:P.relativePath,exports:P.exports,summary:P.summary})},title:"Open in editor",children:Ae})]}),r.jsx("span",{className:"text-white/70",children:Te>0?r.jsxs("span",{children:[Te,r.jsxs("span",{className:"text-white/30",children:["/",Se.length]})]}):((Vt=P.summary)==null?void 0:Vt.deadExports)||Se.length||0}),r.jsx("span",{className:"text-white/70",children:P.sizeFormatted||Ye(P.sizeBytes)}),(Ut=P.evidence)!=null&&Ut.confidence?r.jsx(_l,{confidence:P.evidence.confidence.label,verdict:P.verdict,score:P.evidence.confidence.score}):P.verdict==="possibly-live"?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-amber-500/20 text-amber-400",children:"Review"}):r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Unreachable"}),at?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Fixed"}):(_e=P.summary)!=null&&_e.canDeleteFile||P.status==="fully-dead"?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-red-500/20 text-red-400",children:"Delete File"}):r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-amber-500/20 text-amber-400",children:"Remove Exports"})],expandedContent:us(P)},ae)})})]})})]}),nt.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ui,{className:"w-4 h-4 text-orange-400"}),r.jsx("span",{className:"text-sm font-bold",children:"Quarantined Files"})]}),r.jsxs("span",{className:"text-xs text-white/40",children:[nt.reduce((P,ae)=>P+ae.fileCount,0)," files in ",nt.length," session",nt.length!==1?"s":""]})]}),r.jsx("div",{className:"divide-y divide-white/5",children:nt.map(P=>r.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-white/80",children:pe(P.createdAt)}),r.jsxs("span",{className:"text-xs text-white/40",children:[P.fileCount," file",P.fileCount!==1?"s":""]}),r.jsxs("span",{className:"text-xs text-white/30",children:["(",Ye(P.totalSize),")"]})]}),P.reason&&P.reason!=="manual"&&r.jsx("p",{className:"text-xs text-white/30 mt-0.5",children:P.reason})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>Ne(P.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded-lg transition-all disabled:opacity-50",children:[r.jsx($o,{className:"w-3.5 h-3.5"}),"Restore"]}),I===P.sessionId?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("button",{onClick:()=>Re(P.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 rounded-lg transition-all disabled:opacity-50",children:[r.jsx(yt,{className:"w-3.5 h-3.5"}),"Confirm Delete"]}),r.jsx("button",{onClick:()=>U(null),className:"p-1.5 text-white/40 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:r.jsx(Fr,{className:"w-3.5 h-3.5"})})]}):r.jsxs("button",{onClick:()=>U(P.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-red-400/60 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all disabled:opacity-50",children:[r.jsx(gn,{className:"w-3.5 h-3.5"}),"Purge"]})]})]},P.sessionId))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Unused Assets"}),r.jsxs(Mc,{href:"/assets",className:"text-xs text-primary hover:underline flex items-center gap-1 ml-2",children:["Full Asset Analysis ",r.jsx(Yo,{className:"w-3 h-3"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[ie&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Pn,{className:"w-3.5 h-3.5 text-emerald-400"}),r.jsxs("span",{className:"text-emerald-400",children:[ie.filesQuarantined," assets quarantined"]}),r.jsxs("button",{onClick:()=>Ne(ie.sessionId),disabled:Y,className:"flex items-center gap-1 px-2 py-1 text-xs text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded transition-all",children:[r.jsx($o,{className:"w-3 h-3"}),r.jsx("span",{children:"Restore"})]})]}),d.length>0&&!ie&&r.jsx("button",{onClick:()=>ce(!0),disabled:Y,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg transition-all disabled:opacity-70 shadow-lg shadow-blue-500/20",children:Y?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Quarantining..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(ui,{className:"w-4 h-4"}),r.jsx("span",{children:"Quarantine Unused Assets"})]})}),d.length>0&&!ie&&!W&&r.jsx("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full",children:d.length})]})]}),W&&r.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border-b border-blue-500/20",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:r.jsx(Jo,{className:"w-5 h-5 text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"Quarantine Unused Assets"}),r.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Move ",d.length," unused asset",d.length!==1?"s":""," (",Ye(d.reduce((P,ae)=>P+(ae.sizeBytes||ae.size||0),0)),") to quarantine? These files are not referenced in any code or CSS. They will be moved to ",r.jsx("code",{className:"text-blue-400 bg-blue-500/10 px-1 rounded",children:".swynx-quarantine/"})," and can be restored at any time."]}),r.jsxs("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:[d.slice(0,15).map((P,ae)=>r.jsxs("div",{className:"text-blue-400",children:[P.file,r.jsx("span",{className:"text-white/30 ml-2",children:P.sizeFormatted||Ye(P.sizeBytes||P.size||0)})]},ae)),d.length>15&&r.jsxs("div",{className:"text-white/40 mt-1",children:["... and ",d.length-15," more assets"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:Pe,disabled:Y,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all disabled:opacity-70",children:[Y?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(ui,{className:"w-4 h-4"}),r.jsxs("span",{children:["Quarantine ",d.length," Asset",d.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 text-xs font-medium text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:"Cancel"})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Path"}),r.jsx("th",{className:"px-6 py-3",children:"Dimensions"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Annual Cost"})]})}),r.jsx("tbody",{children:d.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No unused assets detected"})}):d.map((P,ae)=>{var Ae;return r.jsx(Rs,{cells:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-white/40 bg-white/10 px-1.5 py-0.5 rounded uppercase",children:P.format||P.type||"?"}),r.jsx("span",{className:"text-primary",children:P.name||(P.file||"Unknown").split("/").pop()})]}),r.jsx("span",{className:"text-white/50 text-xs max-w-[200px] truncate block",title:P.file,children:P.file?P.file.split("/").slice(0,-1).join("/"):"-"}),r.jsx("span",{className:"text-white/70",children:P.dimensions?`${P.dimensions.width}${P.dimensions.height}`:"-"}),r.jsx("span",{className:"text-white/70",children:P.sizeFormatted||Ye(P.sizeBytes||P.size)}),r.jsxs("span",{className:"text-orange-400",children:["",((Ae=P.costImpact)==null?void 0:Ae.annualCostGBP)||"0"]})],expandedContent:Le(P)},ae)})})]})})]})]}),F&&n&&r.jsx(UC,{projectPath:n,editorFile:F,onClose:()=>_(null),scanId:e==null?void 0:e.id,onExportsResolved:De})]})}function YC(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState([]);if(M.useEffect(()=>{e!=null&&e.id&&we.getSecurity(e.id).then(g=>i(g.vulnerabilities||g.allVulnerabilities||[])).catch(console.error)},[e==null?void 0:e.id]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const o=s.filter(g=>g.severity==="critical").length,c=s.filter(g=>g.severity==="high").length,d=s.filter(g=>g.severity==="medium"||g.severity==="moderate").length,u=s.filter(g=>g.severity==="low"||g.severity==="info").length,m=[{count:o,label:"Critical",bg:"bg-red-500/20",border:"border-red-500/30",text:"text-red-400"},{count:c,label:"High",bg:"bg-orange-500/20",border:"border-orange-500/30",text:"text-orange-400"},{count:d,label:"Medium",bg:"bg-primary/20",border:"border-primary/30",text:"text-primary"},{count:u,label:"Low",bg:"bg-white/5",border:"border-white/10",text:"text-white/70"}],p=g=>{var k,C;const y=g.evidence||{},w=[];if(y.actualRisk||y.riskExplanation){const D=y.actualRisk==="none"||y.actualRisk==="low"||!y.packageImported;w.push(r.jsx(Ls,{type:D?"success":"security",title:"Actual Risk Assessment",description:y.riskExplanation||`Risk level: ${y.actualRisk||g.severity}`,confidence:(k=g.recommendation)==null?void 0:k.confidence},"risk"))}if(y.filesSearched){const D=[`Searched ${y.filesSearched} files`];y.searchPatterns&&y.searchPatterns.length>0&&D.push(`Patterns: ${y.searchPatterns.join(", ")}`),D.push(`Matches found: ${y.matchesFound||0}`),y.packageImported!==void 0&&D.push(`Package imported: ${y.packageImported?"Yes":"No"}`),y.vulnerableFunctionUsed!==void 0&&D.push(`Vulnerable function used: ${y.vulnerableFunctionUsed?"Yes":"No"}`),w.push(r.jsx(Ls,{type:"info",title:"Code Analysis",items:D},"search"))}if(y.locations&&y.locations.length>0&&w.push(r.jsx(Ls,{type:"usage",title:"Vulnerable Code Paths",items:y.locations.map(D=>({file:D.file,line:D.line,context:D.code}))},"usage")),y.importLocations&&y.importLocations.length>0&&w.push(r.jsx(Ls,{type:"usage",title:"Import Locations",items:y.importLocations.map(D=>({file:D.file,line:D.line}))},"imports")),g.id||g.cweId||g.severityScore){const D=[];g.id&&D.push(`ID: ${g.id}`),g.cweId&&D.push(`CWE: ${g.cweId}`),g.severityScore&&D.push(`CVSS Score: ${g.severityScore}`),g.installedVersion&&D.push(`Installed: ${g.installedVersion}`),w.push(r.jsx(Ls,{type:"info",title:"Vulnerability Details",items:D},"cve"))}const v=g.fix||{},j=g.recommendation||{},S={title:"Fix This Vulnerability",priority:j.priority||g.severity,effort:v.effort||"low",description:j.reasoning||(v.available?`A fix is available in version ${v.fixedIn||"latest"}. ${v.testingRequired||""}`:"No automatic fix available. Consider alternatives or manual patching."),commands:j.command?[j.command]:v.command?[v.command]:[],links:((C=g.references)==null?void 0:C.slice(0,2).map(D=>({url:D,text:"Reference"})))||[]};return r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Evidence"}),w.length>0?w:r.jsx("p",{className:"text-sm text-white/40",children:"No additional evidence available"})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Recommendation"}),r.jsx(bn,{...S})]})]})};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(wn,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Security Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-red-400 mb-2",children:"What are Security Vulnerabilities?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["These are known security issues in your dependencies reported by npm audit. Not all vulnerabilities are exploitable -",r.jsx("strong",{className:"text-white/80",children:" actual risk depends on how you use the package"}),". We analyse your code to determine if vulnerable code paths are actually reachable. Critical and High severity issues with confirmed exploitability should be addressed immediately."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(g=>r.jsxs("div",{className:`${g.bg} ${g.border} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${g.text}`,children:g.count}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:g.label})]},g.label))}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Vulnerabilities"})}),s.length===0?r.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center mb-4",children:r.jsx(or,{className:"w-6 h-6 text-emerald-500"})}),r.jsx("p",{className:"text-white/50",children:"No vulnerabilities detected"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Severity"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Title"}),r.jsx("th",{className:"px-6 py-3",children:"Actual Risk"}),r.jsx("th",{className:"px-6 py-3",children:"Fix"})]})}),r.jsx("tbody",{children:s.map((g,y)=>{var S;const w=g.evidence||{},v=w.actualRisk||g.severity;let j;return w.actualRisk==="none"||!w.packageImported&&w.packageImported!==void 0?j=r.jsx(Tl,{status:"Not Used",variant:"success"}):v&&v!==g.severity?j=r.jsx(ou,{severity:v}):w.actualRisk?j=r.jsx(ou,{severity:w.actualRisk}):j=r.jsx("span",{className:"text-white/30",children:"-"}),r.jsx(Rs,{cells:[r.jsx(ou,{severity:g.severity}),r.jsx("span",{className:"text-primary",children:g.package}),r.jsx("span",{className:"text-white/70 max-w-[200px] truncate block",title:g.title,children:g.title}),j,g.fixAvailable||(S=g.fix)!=null&&S.available?r.jsx("span",{className:"text-emerald-400",children:"Yes"}):r.jsx("span",{className:"text-white/40",children:"No"})],expandedContent:p(g)},y)})})]})})]})]})]})}function cu({text:n}){return r.jsxs("span",{className:"relative group inline-flex ml-1 cursor-help",children:[r.jsx(Or,{className:"w-3 h-3 text-white/30 hover:text-white/60 transition-colors"}),r.jsx("span",{className:"fixed hidden group-hover:block px-3 py-2 text-xs text-white bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl whitespace-normal w-52 text-center normal-case tracking-normal font-normal z-[9999] mt-6 -ml-24",children:n})]})}function XC(){var w,v,j,S;const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState([]);if(M.useEffect(()=>{e!=null&&e.id&&we.getOutdated(e.id).then(k=>{const D=(k.packages||[]).filter(E=>E&&typeof E.package=="string"&&E.package.length>0&&E.current&&E.latest);i(D)}).catch(()=>{var D,E,I;const k=((E=(D=e.raw)==null?void 0:D.outdated)==null?void 0:E.packages)||((I=e.raw)==null?void 0:I.outdated)||[],C=Array.isArray(k)?k.filter(U=>U&&typeof U.package=="string"&&U.package.length>0):[];i(C)})},[e==null?void 0:e.id]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const o=k=>{var C;return k.updateType||((C=k.effort)==null?void 0:C.updateType)||"patch"},c=s.filter(k=>o(k)==="major"),d=s.filter(k=>o(k)==="minor"),u=s.filter(k=>o(k)==="patch"),m=((v=(w=e.raw)==null?void 0:w.summary)==null?void 0:v.dependencyCount)||0,p=[{count:m,label:"Total Dependencies",bg:"bg-[#141414]",border:"border-white/10",text:"text-white"},{count:c.length,label:"Major Updates",bg:"bg-orange-500/20",border:"border-orange-500/30",text:"text-orange-400"},{count:d.length,label:"Minor Updates",bg:"bg-blue-500/20",border:"border-blue-500/30",text:"text-blue-400"},{count:u.length,label:"Patch Updates",bg:"bg-emerald-500/20",border:"border-emerald-500/30",text:"text-emerald-400"}],g=k=>{switch(k){case"major":return"bg-orange-500/20 text-orange-400";case"minor":return"bg-blue-500/20 text-blue-400";default:return"bg-emerald-500/20 text-emerald-400"}},y=k=>{var U,F,_,R,G,Q,ne,ee,H,V;const C=[],D=k.updateType||((U=k.effort)==null?void 0:U.updateType),E=((F=k.effort)==null?void 0:F.level)||(D==="major"?"high":"low");if(k.effort){const q=[];k.effort.estimatedTime&&q.push(`Estimated time: ${k.effort.estimatedTime}`),k.effort.testingRequired&&q.push(`Testing: ${k.effort.testingRequired}`),k.effort.breakingChanges!==void 0&&q.push(`Breaking changes: ${k.effort.breakingChanges?"Yes":"No"}`),k.effort.codeChangesRequired!==void 0&&q.push(`Code changes required: ${k.effort.codeChangesRequired?"Yes":"No"}`),k.effort.dependentsAffected!==void 0&&k.effort.dependentsAffected>0&&q.push(`Dependents affected: ${k.effort.dependentsAffected}`),q.length>0&&C.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Update Effort"}),r.jsx(Ls,{type:"info",title:`${E.charAt(0).toUpperCase()+E.slice(1)} Effort Update`,items:q,confidence:(_=k.recommendation)==null?void 0:_.confidence})]},"effort"))}if((R=k.changelog)!=null&&R.available&&((G=k.changelog.highlights)!=null&&G.length)){const q=k.changelog.highlights.map(de=>`${de.version}: ${de.summary}`);C.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"What's New"}),r.jsx(Ls,{type:"info",title:"Changelog Highlights",items:q})]},"changelog"))}else k.changelog&&!k.changelog.available&&C.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Changelog"}),r.jsx("p",{className:"text-sm text-white/40",children:k.changelog.reason||"No changelog available"})]},"changelog"));(Q=k.majorVersionAvailable)!=null&&Q.available&&((ne=k.recommendation)!=null&&ne.migrationGuide)&&C.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Migration"}),r.jsx(GC,{fromVersion:k.current,toVersion:k.majorVersionAvailable.version||k.latest,effort:E,links:[{url:k.recommendation.migrationGuide,text:"Migration Guide"}]})]},"migration"));const I={title:`Update ${k.package}`,priority:((ee=k.recommendation)==null?void 0:ee.priority)||(D==="major"?"low":D==="minor"?"medium":"low"),effort:E,description:((H=k.recommendation)==null?void 0:H.reasoning)||(D==="major"?"This is a major version update. Review breaking changes before updating.":"This update should be safe to apply."),commands:(V=k.recommendation)!=null&&V.command?[k.recommendation.command]:[`npm install ${k.package}@${k.latest}`]};return C.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Action"}),r.jsx(bn,{...I})]},"recommendation")),r.jsx("div",{className:"space-y-6",children:C})};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($t,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Dependencies"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What are Outdated Dependencies?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["These packages have newer versions available. ",r.jsx("strong",{className:"text-white/80",children:"Patch updates"})," are usually safe bug fixes.",r.jsx("strong",{className:"text-white/80",children:" Minor updates"})," add features but shouldn't break anything.",r.jsx("strong",{className:"text-white/80",children:" Major updates"})," may have breaking changes requiring code modifications. Staying current reduces security risk and ensures access to bug fixes and performance improvements."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:p.map(k=>r.jsxs("div",{className:`${k.bg} ${k.border} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${k.text}`,children:k.count}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.label})]},k.label))}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Outdated Dependencies"})}),s.length===0?r.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center mb-4",children:r.jsx(or,{className:"w-6 h-6 text-emerald-500"})}),r.jsx("p",{className:"text-white/50",children:"All dependencies are up to date"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Current"}),r.jsx("th",{className:"px-6 py-3",children:"Latest"}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Type",r.jsx(cu,{text:"Major = new version with breaking changes. Minor = new features, backwards compatible. Patch = bug fixes only."})]})}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Effort",r.jsx(cu,{text:"High = likely requires code changes and testing. Medium = some review needed. Low = safe to update with minimal risk."})]})}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Breaking",r.jsx(cu,{text:"Breaking changes may cause your code to fail after updating. Review the changelog and test thoroughly before updating."})]})})]})}),r.jsx("tbody",{children:s.map((k,C)=>{var F,_;const D=o(k),E=((F=k.effort)==null?void 0:F.level)||(D==="major"?"high":"low");let I;E==="high"?I=r.jsx(Tl,{status:"High Effort",variant:"danger"}):E==="medium"?I=r.jsx(Tl,{status:"Medium",variant:"warning"}):I=r.jsx(Tl,{status:"Low Effort",variant:"success"});const U=(_=k.effort)!=null&&_.breakingChanges?r.jsx("span",{className:"text-xs font-bold bg-red-500/20 text-red-400 px-2 py-1 rounded",children:"Breaking"}):r.jsx("span",{className:"text-white/30",children:"-"});return r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary",children:k.package}),r.jsx("span",{className:"text-white/70",children:k.current}),r.jsx("span",{className:"text-white/70",children:k.latest}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${g(D)}`,children:D}),I,U],expandedContent:y(k)},C)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"License Analysis"}),r.jsxs("span",{className:"text-xs text-white/40 bg-white/10 px-2 py-1 rounded",children:[m," packages"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"License"}),r.jsx("th",{className:"px-6 py-3",children:"Packages"}),r.jsx("th",{className:"px-6 py-3",children:"Risk"})]})}),r.jsx("tbody",{children:(S=(j=e.raw)==null?void 0:j.licenses)!=null&&S.byLicense?Object.entries(e.raw.licenses.byLicense).map(([k,C])=>{const D=k.toUpperCase(),E=["GPL","AGPL","LGPL","SSPL"].some(U=>D.includes(U)),I=["MPL","EPL","CDDL"].some(U=>D.includes(U));return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-white",children:k}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:C.length}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(Tl,{status:E?"HIGH":I?"MEDIUM":"LOW",variant:E?"danger":I?"warning":"success"})})]},k)}):r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No license data available"})})})]})})]})]})]})}function JC({isOpen:n,onClose:e}){const[t,s]=M.useState("pdf"),[i,o]=M.useState("preset"),[c,d]=M.useState("90d"),[u,m]=M.useState(""),[p,g]=M.useState(""),[y,w]=M.useState(!1),[v,j]=M.useState([]),[S,k]=M.useState(null);M.useEffect(()=>{n&&we.getESGPresets().then(D=>j(D.presets||[])).catch(()=>{j([{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"this-quarter",label:"This quarter"},{value:"last-quarter",label:"Last quarter"},{value:"this-year",label:"This year"},{value:"last-year",label:"Last year"}])})},[n]);const C=async()=>{w(!0),k(null);try{const D={format:t};if(i==="preset")D.period=c;else{if(!u||!p){k("Please select both start and end dates"),w(!1);return}D.after=u,D.before=p}const E=await we.downloadESGReport(D),I=URL.createObjectURL(E),U=document.createElement("a");U.href=I;const F=t==="pdf"?"pdf":t==="csv"?"csv":"json",_=new Date().toISOString().split("T")[0];U.download=`swynx-esg-report-${_}.${F}`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(I),e()}catch(D){k(D instanceof Error?D.message:"Failed to generate report")}finally{w(!1)}};return n?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),r.jsxs("div",{className:"relative bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:r.jsx(gu,{className:"w-5 h-5 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold",children:"ESG Compliance Report"}),r.jsx("p",{className:"text-xs text-white/40",children:"Export emissions data for sustainability reporting"})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(Fr,{className:"w-5 h-5 text-white/60"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-3",children:"Output Format"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>s("pdf"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="pdf"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(Rr,{className:`w-6 h-6 ${t==="pdf"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"PDF"}),r.jsx("span",{className:"text-xs text-white/40",children:"Report"})]}),r.jsxs("button",{onClick:()=>s("csv"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="csv"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(bu,{className:`w-6 h-6 ${t==="csv"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"CSV"}),r.jsx("span",{className:"text-xs text-white/40",children:"Spreadsheet"})]}),r.jsxs("button",{onClick:()=>s("json"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="json"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(yu,{className:`w-6 h-6 ${t==="json"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"JSON"}),r.jsx("span",{className:"text-xs text-white/40",children:"API"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-3",children:"Report Period"}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:()=>o("preset"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${i==="preset"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-white/60 border border-white/10 hover:bg-white/10"}`,children:[r.jsx(Nj,{className:"w-4 h-4"}),"Preset"]}),r.jsxs("button",{onClick:()=>o("custom"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${i==="custom"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-white/60 border border-white/10 hover:bg-white/10"}`,children:[r.jsx(hj,{className:"w-4 h-4"}),"Custom Range"]})]}),i==="preset"?r.jsx("select",{value:c,onChange:D=>d(D.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500/50",children:v.map(D=>r.jsx("option",{value:D.value,children:D.label},D.value))}):r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/40 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",value:u,onChange:D=>m(D.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-emerald-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/40 mb-1",children:"End Date"}),r.jsx("input",{type:"date",value:p,onChange:D=>g(D.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-emerald-500/50"})]})]})]}),r.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4",children:r.jsxs("p",{className:"text-sm text-white/70",children:[r.jsx("strong",{className:"text-emerald-400",children:"GHG Protocol Aligned"}),r.jsx("br",{}),"This report follows the PEER methodology, aligned with GHG Protocol Scope 3. Suitable for CDP, GRI, and internal sustainability disclosures."]})}),S&&r.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:r.jsx("p",{className:"text-sm text-red-400",children:S})})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white/60 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{onClick:C,disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-emerald-500 hover:bg-emerald-600 text-black font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ac,{className:"w-4 h-4"}),"Export Report"]})})]})]})]}):null}function ZC(){var G,Q,ne,ee,H,V,q,de,Y;const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!1),[d,u]=M.useState(1e4),[m,p]=M.useState(!1),[g,y]=M.useState(!1);M.useEffect(()=>{we.getSettings().then(X=>{var T,W;const ie=(W=(T=X.settings)==null?void 0:T.costAssumptions)==null?void 0:W.monthlyPageLoads;ie&&ie>0&&u(ie),p(!0)}).catch(()=>p(!0))},[]);const w=M.useRef();if(M.useEffect(()=>{var ie,T,W;if(!(e!=null&&e.id)||!m)return;const X=((W=(T=(ie=e.raw)==null?void 0:ie.emissions)==null?void 0:T.config)==null?void 0:W.monthlyVisitors)||1e4;if(d===X){we.getEmissions(e.id).then(i).catch(console.error);return}return clearTimeout(w.current),y(!0),w.current=setTimeout(async()=>{try{const ce=await we.recalculateEmissions(e.id,d);ce.success&&i({...ce,recalculated:!0,emissions:ce.emissions})}catch(ce){console.error("Failed to recalculate emissions:",ce)}finally{y(!1)}},400),()=>clearTimeout(w.current)},[e==null?void 0:e.id,d,m]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const v=s!=null&&s.recalculated?s.emissions:null,j=v||((G=e.raw)==null?void 0:G.emissions),S=v?v.current.monthlyCO2Kg:((Q=s==null?void 0:s.co2)==null?void 0:Q.monthlyKg)??((ne=j==null?void 0:j.current)==null?void 0:ne.monthlyCO2Kg)??e.metrics.emissions??0,k=v?v.current.annualCO2Kg:((ee=s==null?void 0:s.co2)==null?void 0:ee.annualKg)??((H=j==null?void 0:j.current)==null?void 0:H.annualCO2Kg)??S*12,C=v?v.waste.wastedCO2Kg:((V=j==null?void 0:j.waste)==null?void 0:V.wastedCO2Kg)??0,D=S-C,E=v?v.equivalents.treesNeeded:((q=j==null?void 0:j.equivalents)==null?void 0:q.treesNeeded)??(k/21).toFixed(1),I=[{label:"Bandwidth (Waste)",value:`${C.toFixed(3)} kg`,percentage:S>0?C/S*100:0},{label:"Compute",value:`${D.toFixed(2)} kg`,percentage:S>0?D/S*100:100}],U=v?v.optimised.potentialSavingsKg:((de=j==null?void 0:j.optimised)==null?void 0:de.potentialSavingsKg)??C,F=v?v.optimised.potentialSavingsPercent:((Y=j==null?void 0:j.optimised)==null?void 0:Y.potentialSavingsPercent)??(S>0?C/S*100:0),_=X=>{X>=0&&u(X)},R=X=>X>=1e6?`${(X/1e6).toFixed(1)}M`:X>=1e3?`${(X/1e3).toFixed(0)}k`:X.toString();return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(gu,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Environmental Impact"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-sm text-white/40",children:n}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-black text-sm font-medium rounded-lg transition-colors",children:[r.jsx(Ac,{className:"w-4 h-4"}),"Export Report"]})]})]}),r.jsx(JC,{isOpen:o,onClose:()=>c(!1)}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sy,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Monthly Visitors"}),r.jsx("p",{className:"text-xs text-white/40",children:"Adjust to match your actual traffic for accurate emissions"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[g&&r.jsx(je,{className:"w-4 h-4 animate-spin text-white/40"}),r.jsx("div",{className:"flex items-center bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[500,5e3,1e4,5e4,1e5].map(X=>r.jsx("button",{onClick:()=>_(X),className:`px-3 py-1.5 text-xs font-medium transition-colors ${d===X?"bg-emerald-500/20 text-emerald-400":"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:R(X)},X))}),r.jsx("input",{type:"number",value:d,onChange:X=>_(parseInt(X.target.value)||0),className:"w-28 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-sm text-right focus:outline-none focus:border-emerald-500/50",min:"0"})]})]})}),r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-emerald-400 mb-2",children:"What are Carbon Emissions?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every byte transferred uses energy - from data centres, networks, and end-user devices. We calculate your app's",r.jsx("strong",{className:"text-white/80",children:" carbon footprint"})," based on page weight, estimated traffic, and regional grid intensity. Reducing bundle size and removing waste directly lowers your environmental impact. The methodology follows the ",r.jsx("a",{href:"https://oynk.co.uk/methodology",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:underline",children:"EcoPigs Methodology v1.0"}),"."]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-8 flex flex-col items-center justify-center",children:[r.jsx(gu,{className:"w-12 h-12 text-emerald-400 mb-4"}),r.jsxs("p",{className:"text-4xl font-bold text-emerald-400",children:[S.toFixed(2)," kg"]}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Monthly CO2 Emissions"}),r.jsxs("p",{className:"text-xs text-white/40",children:[k.toFixed(2)," kg annually"]}),r.jsxs("p",{className:"text-xs text-white/30 mt-2",children:["Based on ",R(d)," monthly visitors"]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Breakdown"}),r.jsxs("div",{className:"space-y-4",children:[I.map(X=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-white/70",children:X.label}),r.jsx("span",{className:"text-white font-medium",children:X.value})]}),r.jsx("div",{className:"h-2.5 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all",style:{width:`${Math.min(X.percentage,100)}%`}})})]},X.label)),r.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-white/10",children:[r.jsx("span",{className:"text-white/70",children:"Equivalent Trees/year"}),r.jsx("span",{className:"text-white font-medium",children:E})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Waste Impact on Emissions"}),r.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Removing waste could reduce emissions by:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[U.toFixed(3)," kg"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"CO2 per month"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[(U*12).toFixed(3)," kg"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"CO2 per year"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[F.toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"Reduction"})]})]})]})]})]})}function e5(){const{selectedProject:n,loading:e}=St(),{showToast:t}=Zl(),[s,i]=M.useState([]),[o,c]=M.useState([]),[d,u]=M.useState(null);M.useEffect(()=>{n&&(we.getFixStatus(n).then(y=>i(y.modules||[])).catch(console.error),we.getQuarantine(n).then(y=>c(y.sessions||[])).catch(console.error))},[n]);const m=async(y,w)=>{try{await navigator.clipboard.writeText(y),u(w),t("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>u(null),2e3)}catch{const j=document.createElement("textarea");j.value=y,j.style.position="fixed",j.style.opacity="0",document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j),u(w),t("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>u(null),2e3)}},p=y=>{switch(y==null?void 0:y.toLowerCase()){case"high":return{bg:"bg-emerald-500/20",text:"text-emerald-400"};case"medium":return{bg:"bg-primary/20",text:"text-primary"};default:return{bg:"bg-white/10",text:"text-white/60"}}},g=y=>{var v,j;const w=y;switch(y.id){case"unused-deps":return`npm uninstall ${((v=w.packages)==null?void 0:v.join(" "))||"# no packages listed"}`;case"dead-code":return`# Review and remove dead code files:
${((j=w.files)==null?void 0:j.slice(0,5).map(S=>`rm "${S}"`).join(`
`))||"# no files listed"}`;default:return`swynx fix --module ${y.id} --project "${n}"`}};return e?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ny,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Fix Commands"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsx("h2",{className:"text-sm font-bold text-white mb-3",children:"What are Fix Commands?"}),r.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-4",children:"Ready-to-use commands for issues found in your codebase. Copy the command, paste it into your terminal, and run it yourself. We never execute commands on your system  you stay in full control."}),r.jsx("h3",{className:"text-xs font-bold text-white/80 mb-2",children:"Confidence Levels"}),r.jsxs("div",{className:"space-y-2 text-sm text-white/60 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-500/20 px-2 py-0.5 rounded",children:"HIGH"}),r.jsx("span",{children:"Safe to run, no side effects expected"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-primary bg-primary/20 px-2 py-0.5 rounded",children:"MEDIUM"}),r.jsx("span",{children:"Review the change before running"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-white/60 bg-white/10 px-2 py-0.5 rounded",children:"LOW"}),r.jsx("span",{children:"Investigate first, may have dependencies"})]})]}),r.jsx("p",{className:"text-xs text-white/40 italic",children:"For file deletions, we recommend backing up first or using git to track changes."})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4",children:r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(ty,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-sm font-bold",children:"Available Fix Commands"})]}),r.jsx("div",{className:"p-4 space-y-3",children:s.length===0?r.jsx("div",{className:"text-center py-8 text-white/40 text-sm",children:"No fixes available - run a scan first"}):s.map(y=>{const w=p(y.confidence),v=g(y);return r.jsxs("div",{className:"bg-[#0f0f0f] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:y.name}),r.jsx("span",{className:`text-xs font-bold ${w.text} ${w.bg} px-2 py-1 rounded uppercase`,children:y.confidence})]}),r.jsxs("p",{className:"text-xs text-white/50 mb-3",children:[y.issueCount," issues found"]}),r.jsx("div",{className:"bg-black/50 rounded-lg p-3 mb-3",children:r.jsx("pre",{className:"text-xs text-emerald-400 font-mono whitespace-pre-wrap overflow-x-auto",children:v})}),r.jsx("button",{onClick:()=>m(v,y.id),className:`inline-flex items-center gap-2 text-xs font-medium px-4 py-2 rounded transition-all duration-200 ${d===y.id?"bg-emerald-500 text-white scale-105":"bg-primary text-black hover:bg-primary/90"}`,children:d===y.id?r.jsxs(r.Fragment,{children:[r.jsx(as,{className:"w-3 h-3 animate-pulse"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(_t,{className:"w-3 h-3"}),"Copy Command"]})})]},y.id)})})]})}),r.jsx("div",{children:r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Quarantine"})}),o.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("p",{className:"text-white/40 text-sm",children:"No quarantined files"}),r.jsx("p",{className:"text-white/30 text-xs mt-2",children:"Files you delete are backed up here"})]}):r.jsx("div",{className:"p-4 space-y-2",children:o.map(y=>r.jsx("div",{className:"text-xs text-white/60 bg-white/5 rounded p-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[y.fileCount," files"]}),r.jsx("span",{children:new Date(y.timestamp).toLocaleDateString()})]})},y.id))})]})})]})]})]})}function t5(n){if(n===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,s)).toFixed(1))+" "+t[s]}function s5(){const{selectedProject:n,loading:e}=St(),[t,s]=M.useState([]),[i,o]=M.useState(!0),[c,d]=M.useState(null),[u,m]=M.useState(null),[p,g]=M.useState(!1);M.useEffect(()=>{n&&(o(!0),d(null),we.getScans(n,30).then(s).catch(console.error).finally(()=>o(!1)))},[n]);const y=async j=>{if(c===j){d(null),m(null);return}d(j),m(null),g(!0);try{const S=await we.getScan(j);m((S==null?void 0:S.raw)||null)}catch(S){console.error("Failed to load scan detail:",S)}finally{g(!1)}},w=j=>j>=85?"bg-emerald-500":j>=75?"bg-blue-500":j>=65?"bg-primary":"bg-red-500",v=j=>new Date(j).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return e||i?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Q0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Scan History"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-4",children:"Date"}),r.jsx("th",{className:"px-6 py-4",children:"Score"}),r.jsx("th",{className:"px-6 py-4",children:"Waste"}),r.jsx("th",{className:"px-6 py-4",children:"Security"}),r.jsx("th",{className:"px-6 py-4",children:"Outdated"}),r.jsx("th",{className:"px-6 py-4",children:"CO2"}),r.jsx("th",{className:"px-6 py-4"})]})}),r.jsx("tbody",{children:t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-white/40 text-sm",children:"No scan history available"})}):t.map((j,S)=>{const k=c===j.id,C=S<t.length-1?t[S+1]:null;return r.jsxs(M.Fragment,{children:[r.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 cursor-pointer transition-colors ${k?"bg-white/5":""}`,onClick:()=>y(j.id),children:[r.jsx("td",{className:"px-6 py-4 text-sm text-white",children:v(j.timestamp)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full ${w(j.score)} text-sm font-bold text-white`,children:j.score}),C&&r.jsxs("span",{className:`text-xs font-medium ${j.score>C.score?"text-emerald-400":j.score<C.score?"text-red-400":"text-white/30"}`,children:[j.score>C.score?"+":"",j.score-C.score]})]})}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[j.metrics.waste.toFixed(1),"%"]}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:j.metrics.security}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:j.metrics.outdated}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[j.metrics.emissions.toFixed(2)," kg"]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{className:`p-2 rounded-lg transition-colors ${k?"bg-primary/20 text-primary":"hover:bg-white/10 text-white/40"}`,children:k?r.jsx(bj,{className:"w-4 h-4"}):r.jsx(q0,{className:"w-4 h-4"})})})]}),k&&r.jsx("tr",{className:"border-b border-white/5",children:r.jsx("td",{colSpan:7,className:"px-6 py-6 bg-[#0d0d0d]",children:p?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(je,{className:"w-5 h-5 animate-spin text-primary"})}):u?r.jsx(n5,{data:u,scan:j}):r.jsx("p",{className:"text-center text-white/40 text-sm py-4",children:"No detailed data available for this scan"})})})]},j.id)})})]})})})})]})}function n5({data:n,scan:e}){var p,g,y,w,v,j,S,k;const t=n.healthScore||{score:e.score,grade:e.grade},s=((p=n.healthScore)==null?void 0:p.deductions)||n.deductions||[],i=n.summary,o=n.security,c=n.emissions,d=n.codePatterns,u=n.deadCode||((g=n.details)==null?void 0:g.deadCode),m=n.duration;return r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`text-3xl font-bold ${t.score>=85?"text-emerald-400":t.score>=75?"text-blue-400":t.score>=65?"text-primary":"text-red-400"}`,children:[t.score,"/100"]}),r.jsxs("span",{className:"text-lg text-white/50 font-medium",children:["Grade ",t.grade]}),m&&r.jsxs("span",{className:"text-xs text-white/30 ml-auto",children:["Scan took ",(m/1e3).toFixed(1),"s"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(gn,{className:"w-4 h-4 text-amber-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Waste"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[((i==null?void 0:i.wastePercent)??e.metrics.waste).toFixed(1),"%"]}),(i==null?void 0:i.wasteSizeBytes)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[t5(i.wasteSizeBytes)," wasted"]}),u&&r.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[(u.fullyDeadFiles||u.orphanFiles||[]).length," dead files"]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(wn,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Security"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.security," issues"]}),o&&r.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[((y=o.summary)==null?void 0:y.critical)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-500/20 text-red-400",children:[o.summary.critical," critical"]}),((w=o.summary)==null?void 0:w.high)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-400",children:[o.summary.high," high"]}),((v=o.summary)==null?void 0:v.medium)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-400",children:[o.summary.medium," med"]})]}),((j=d==null?void 0:d.summary)==null?void 0:j.total)>0&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[d.summary.total," code patterns"]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($t,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Outdated"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.outdated," packages"]}),n.outdated&&r.jsx("div",{className:"text-xs text-white/40 mt-1",children:Array.isArray(n.outdated)?`${n.outdated.filter(C=>C.updateType==="major").length} major`:`${(n.outdated.major||[]).length} major`})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Rl,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"CO2"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.emissions.toFixed(2)," kg/mo"]}),((S=c==null?void 0:c.waste)==null?void 0:S.wastedCO2Kg)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[c.waste.wastedCO2Kg.toFixed(2)," kg wasted"]}),((k=c==null?void 0:c.equivalents)==null?void 0:k.treesNeeded)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[c.equivalents.treesNeeded.toFixed(1)," trees needed"]})]})]}),s.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-white/40 uppercase tracking-wider mb-2",children:"Score Deductions"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((C,D)=>{var E;return r.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-500/10 text-red-400/80 border border-red-500/10",children:["-",((E=C.points)==null?void 0:E.toFixed(0))||"?"," ",C.reason]},D)})})]}),(i==null?void 0:i.fileCount)!=null&&r.jsxs("div",{className:"text-xs text-white/30 pt-1",children:[i.fileCount.toLocaleString()," files scanned",i.dependencyCount!=null&&`  ${i.dependencyCount} dependencies`]})]})}function r5(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!0);if(M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getBundles(e.id).then(p=>i(p)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const d=s==null?void 0:s.summary,u=d&&(d.entryPoints>0||d.chunks>0||d.totalSizeBytes>0),m=[{value:(d==null?void 0:d.totalSize)||"0 B",label:"Total Size",icon:Bo,bg:"bg-[#141414]"},{value:(d==null?void 0:d.entryPoints)||0,label:"Entry Points",icon:Qt,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(d==null?void 0:d.chunks)||0,label:"Chunks",icon:Aj,bg:"bg-purple-500/20",text:"text-purple-400"},{value:(d==null?void 0:d.buildOutputSize)||"N/A",label:"Build Output",icon:$t,bg:"bg-emerald-500/20",text:"text-emerald-400"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Bo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Bundle Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is Bundle Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This shows what gets shipped to users when they visit your app. The ",r.jsx("strong",{className:"text-white/80",children:"Total Size"})," is what users download on first visit. Smaller bundles mean faster load times and lower bandwidth costs. A typical web app should aim for under 500KB total, with critical path under 200KB."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(p=>r.jsxs("div",{className:`${p.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(p.icon,{className:`w-6 h-6 mx-auto mb-2 ${p.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${p.text||"text-white"}`,children:p.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:p.label})]},p.label))}),d&&d.totalSizeBytes>0&&r.jsx("div",{className:`rounded-xl border p-4 ${d.totalSizeBytes>1024*1024?"bg-orange-500/10 border-orange-500/20":d.totalSizeBytes>500*1024?"bg-yellow-500/10 border-yellow-500/20":"bg-emerald-500/10 border-emerald-500/20"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${d.totalSizeBytes>1024*1024?"text-orange-400":d.totalSizeBytes>500*1024?"text-yellow-400":"text-emerald-400"}`,children:d.totalSizeBytes>1024*1024?"Bundle is larger than recommended":d.totalSizeBytes>500*1024?"Bundle size is acceptable but could be improved":"Bundle size is good"}),r.jsx("p",{className:"text-xs text-white/50 mt-1",children:d.totalSizeBytes>1024*1024?"Consider code splitting, tree shaking, or removing unused dependencies":d.totalSizeBytes>500*1024?"Look for opportunities to lazy-load non-critical code":"Your bundle is well-optimised for fast loading"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:d.totalSize}),r.jsx("p",{className:"text-xs text-white/40",children:(d.totalSizeBytes>1024*1024,"Target: < 500KB")})]})]})}),u?r.jsxs(r.Fragment,{children:[(d==null?void 0:d.hasBuildFolder)&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Build Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Source Size"}),r.jsx("p",{className:"text-lg font-bold",children:d.sourceSize})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Build Output"}),r.jsx("p",{className:"text-lg font-bold",children:d.buildOutputSize})]})]})]}),(s==null?void 0:s.largestModules)&&s.largestModules.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"Largest Modules"}),r.jsx("span",{className:"text-xs text-white/40 ml-2",children:"by size in bundle"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Module"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"% of Total"})]})}),r.jsx("tbody",{children:s.largestModules.map((p,g)=>{var y;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("span",{className:"text-sm text-primary",children:p.name}),p.file&&r.jsx("span",{className:"text-xs text-white/30 ml-2",children:p.file})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:p.sizeFormatted}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-24 h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.min(p.percentage||0,100)}%`}})}),r.jsxs("span",{className:"text-xs text-white/50",children:[(y=p.percentage)==null?void 0:y.toFixed(1),"%"]})]})})]},g)})})]})})]}),(s==null?void 0:s.entryPoints)&&s.entryPoints.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Entry Points"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Name"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Chunks"})]})}),r.jsx("tbody",{children:s.entryPoints.map((p,g)=>{var y;return r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:p.name}),r.jsx("span",{className:"text-white/50 text-xs",children:p.file}),r.jsx("span",{className:"text-white/70",children:p.sizeFormatted}),r.jsx("span",{className:"text-white/50",children:((y=p.chunks)==null?void 0:y.length)||0})],expandedContent:r.jsx("div",{className:"space-y-4",children:p.chunks&&p.chunks.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Chunks"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.chunks.map((w,v)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:w},v))})]})})},g)})})]})})]}),(s==null?void 0:s.chunks)&&s.chunks.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Chunks"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Name"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Type"})]})}),r.jsx("tbody",{children:s.chunks.map((p,g)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-primary",children:p.name}),r.jsx("td",{className:"px-6 py-4 text-xs text-white/50",children:p.file}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:p.sizeFormatted}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:p.type})})]},g))})]})})]})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Bo,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No detailed bundle analysis available"}),r.jsx("p",{className:"text-sm text-white/30 mb-4",children:"Bundle analysis requires a build folder (dist/, build/, .next/, out/) to analyse what ships to production."}),r.jsxs("div",{className:"text-left max-w-md mx-auto bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-2",children:"To enable detailed analysis:"}),r.jsxs("ul",{className:"text-sm text-white/50 space-y-1",children:[r.jsx("li",{children:"1. Run your build command (npm run build)"}),r.jsx("li",{children:"2. Ensure build output is in the project folder"}),r.jsx("li",{children:"3. Re-scan the project"})]})]})]})]})]})}function i5(){var j,S;const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!0),[d,u]=M.useState("files");if(M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getCssAnalysis(e.id).then(k=>i(k)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=(s==null?void 0:s.files)&&s.files.length>0,g=m&&m.totalFiles>0&&p,y=(m==null?void 0:m.totalFiles)||0,w=[{value:y,label:y===1?"CSS File":"CSS Files",icon:Qt,bg:"bg-[#141414]"},{value:(m==null?void 0:m.totalSize)||"0 B",label:"Total Size",icon:Io,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(m==null?void 0:m.unusedSelectorsCount)||0,label:"Unused Selectors",icon:yt,bg:"bg-orange-500/20",text:"text-orange-400"},{value:(m==null?void 0:m.duplicateRulesCount)||0,label:"Duplicate Rules",icon:_t,bg:"bg-purple-500/20",text:"text-purple-400"}],v=[{id:"files",label:"Files",count:((j=s==null?void 0:s.files)==null?void 0:j.length)||0},{id:"unused",label:"Unused Selectors",count:(m==null?void 0:m.unusedSelectorsCount)||0},{id:"duplicates",label:"Duplicates",count:(m==null?void 0:m.duplicateRulesCount)||0}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Io,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"CSS Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is CSS Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This identifies ",r.jsx("strong",{className:"text-white/80",children:"unused CSS selectors"})," that add bytes but never match any HTML elements, and ",r.jsx("strong",{className:"text-white/80",children:"duplicate rules"})," that could be consolidated. Removing unused CSS reduces file size and improves page load times. Modern projects often accumulate CSS debt as features are removed but styles remain."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:w.map(k=>r.jsxs("div",{className:`${k.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(k.icon,{className:`w-6 h-6 mx-auto mb-2 ${k.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${k.text||"text-white"}`,children:k.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.label})]},k.label))}),m&&m.potentialSavingsBytes>0&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:"Potential Savings"}),r.jsx("p",{className:"text-xs text-white/50",children:"By removing unused selectors and deduplicating rules"})]}),r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:m.potentialSavings})]}),g?r.jsxs(r.Fragment,{children:[(s==null?void 0:s.frameworks)&&s.frameworks.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Frameworks Detected"}),r.jsx("div",{className:"flex gap-2",children:s.frameworks.map((k,C)=>r.jsx("span",{className:"text-sm bg-primary/20 text-primary px-3 py-1 rounded-full",children:k},C))})]}),r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:v.map(k=>r.jsxs("button",{onClick:()=>u(k.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===k.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[k.label,k.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:k.count})]},k.id))}),d==="files"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Selectors"}),r.jsx("th",{className:"px-6 py-3",children:"Unused"}),r.jsx("th",{className:"px-6 py-3",children:"Duplicates"})]})}),r.jsx("tbody",{children:(S=s==null?void 0:s.files)==null?void 0:S.map((k,C)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-primary",children:k.relativePath||k.file})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.sizeFormatted}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.selectors}),r.jsx("td",{className:"px-6 py-4",children:k.unusedSelectors>0?r.jsx("span",{className:"text-sm text-orange-400",children:k.unusedSelectors}):r.jsx("span",{className:"text-sm text-white/30",children:"0"})}),r.jsx("td",{className:"px-6 py-4",children:k.duplicates>0?r.jsx("span",{className:"text-sm text-purple-400",children:k.duplicates}):r.jsx("span",{className:"text-sm text-white/30",children:"0"})})]},C))})]})})}),d==="unused"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.unusedSelectors&&s.unusedSelectors.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Selector"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Line"})]})}),r.jsx("tbody",{children:s.unusedSelectors.map((k,C)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-sm text-orange-400 bg-orange-500/10 px-2 py-1 rounded",children:k.selector})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/50",children:k.file}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/50",children:k.line})]},C))})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No unused selectors detected"})})}),d==="duplicates"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.duplicateRules&&s.duplicateRules.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Selector"}),r.jsx("th",{className:"px-6 py-3",children:"Property"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Files"})]})}),r.jsx("tbody",{children:s.duplicateRules.map((k,C)=>{var D,E;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-sm text-purple-400 bg-purple-500/10 px-2 py-1 rounded",children:k.selector})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.property}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[k.count,"x"]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[(D=k.files)==null?void 0:D.slice(0,3).map((I,U)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded",children:I},U)),((E=k.files)==null?void 0:E.length)>3&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",k.files.length-3," more"]})]})})]},C)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No duplicate rules detected"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Io,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No CSS analysis data available"}),r.jsx("p",{className:"text-sm text-white/30",children:y>0?`${y} CSS file${y===1?"":"s"} detected but detailed analysis is not available for this scan`:"CSS analysis requires .css, .scss, or .less files in your project"})]})]})]})}function l5(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!0),[d,u]=M.useState("functions");if(M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getDuplicates(e.id).then(v=>i(v)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=m&&m.totalDuplicates>0,g=[{value:(m==null?void 0:m.totalDuplicates)||0,label:"Total Duplicates",icon:_t,bg:"bg-[#141414]"},{value:(m==null?void 0:m.duplicateFunctions)||0,label:"Duplicate Functions",icon:Qt,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(m==null?void 0:m.similarBlocks)||0,label:"Similar Blocks",icon:mj,bg:"bg-purple-500/20",text:"text-purple-400"},{value:(m==null?void 0:m.totalFormatted)||"0 B",label:"Duplicate Size",icon:_t,bg:"bg-orange-500/20",text:"text-orange-400"}],y=[{id:"functions",label:"Duplicate Functions",count:(m==null?void 0:m.duplicateFunctions)||0},{id:"blocks",label:"Similar Blocks",count:(m==null?void 0:m.similarBlocks)||0}],w=v=>"bg-emerald-500/20 text-emerald-400";return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_t,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Duplicate Code"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is Duplicate Code Detection?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This finds ",r.jsx("strong",{className:"text-white/80",children:"similar code blocks"})," and ",r.jsx("strong",{className:"text-white/80",children:"duplicate functions"})," that appear in multiple places. Duplicated code increases maintenance burden - fixing a bug means updating multiple locations. Consolidating into shared utilities reduces code size and makes your codebase easier to maintain."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:g.map(v=>r.jsxs("div",{className:`${v.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(v.icon,{className:`w-6 h-6 mx-auto mb-2 ${v.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${v.text||"text-white"}`,children:v.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:v.label})]},v.label))}),m&&m.potentialSavings&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:"Potential Savings"}),r.jsx("p",{className:"text-xs text-white/50",children:"By consolidating duplicate code into shared utilities"})]}),r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:m.potentialSavings})]}),p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:y.map(v=>r.jsxs("button",{onClick:()=>u(v.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===v.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[v.label,v.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:v.count})]},v.id))}),d==="blocks"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.similarBlocks&&s.similarBlocks.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Preview"}),r.jsx("th",{className:"px-6 py-3",children:"Lines"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Confidence"})]})}),r.jsx("tbody",{children:s.similarBlocks.map((v,j)=>{var S,k,C,D,E,I;return r.jsx(Rs,{cells:[r.jsxs("code",{className:"text-xs text-purple-400 bg-purple-500/10 px-2 py-1 rounded max-w-xs truncate block",children:[((S=v.preview)==null?void 0:S.substring(0,50))||"Code block","..."]}),r.jsx("span",{className:"text-white/70",children:v.lineCount}),r.jsx("span",{className:"text-white/70",children:v.sizeFormatted}),r.jsxs("span",{className:"text-white/70",children:[((k=v.occurrences)==null?void 0:k.length)||0,"x"]}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${w((C=v.recommendation)==null?void 0:C.confidence)}`,children:"Safe to Remove"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[v.preview&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Code Preview"}),r.jsx("pre",{className:"bg-black/50 rounded-lg p-4 text-xs text-white/70 overflow-x-auto",children:v.preview})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Found In"}),r.jsx("div",{className:"space-y-2",children:(D=v.occurrences)==null?void 0:D.map((U,F)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Qt,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-primary",children:U.relativePath||U.file}),U.startLine&&r.jsxs("span",{className:"text-white/40",children:["lines ",U.startLine,"-",U.endLine]})]},F))})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Action"}),r.jsx(bn,{title:((E=v.recommendation)==null?void 0:E.action)||"Extract to shared utility",priority:((I=v.recommendation)==null?void 0:I.confidence)||"medium",effort:"medium",description:"Extract this repeated code into a shared function or module to reduce duplication.",commands:[]})]})]})},j)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No similar code blocks detected"})})}),d==="functions"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.duplicateFunctions&&s.duplicateFunctions.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Function"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Match"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Confidence"})]})}),r.jsx("tbody",{children:s.duplicateFunctions.map((v,j)=>{var S,k,C,D,E;return r.jsx(Rs,{cells:[r.jsxs("div",{children:[r.jsx("span",{className:"text-primary font-medium",children:v.name}),r.jsx("code",{className:"block text-xs text-white/40 mt-0.5 truncate max-w-[200px]",children:v.signature})]}),r.jsx("span",{className:"text-white/70",children:v.sizeFormatted}),v.isExactMatch||v.similarity===100?r.jsx("span",{className:"text-xs font-bold bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded",children:"EXACT"}):r.jsxs("span",{className:"text-xs font-bold bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:[v.similarity,"%"]}),r.jsxs("span",{className:"text-white/70",children:[((S=v.occurrences)==null?void 0:S.length)||0,"x"]}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${w((k=v.recommendation)==null?void 0:k.confidence)}`,children:"Safe to Remove"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Found In"}),r.jsx("div",{className:"space-y-2",children:(C=v.occurrences)==null?void 0:C.map((I,U)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Qt,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-primary",children:I.relativePath||I.file}),I.line&&r.jsx("span",{className:"text-white/40",children:I.endLine?`lines ${I.line}-${I.endLine}`:`line ${I.line}`}),I.sizeFormatted&&r.jsx("span",{className:"text-blue-400 text-xs",children:I.sizeFormatted})]},U))})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Action"}),r.jsx(bn,{title:((D=v.recommendation)==null?void 0:D.action)||"Consolidate into single function",priority:((E=v.recommendation)==null?void 0:E.confidence)||"medium",effort:"low",description:"These functions are nearly identical. Consolidate into a single shared function.",commands:[]})]})]})},j)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No duplicate functions detected"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(_t,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No duplicate code detected"}),r.jsx("p",{className:"text-sm text-white/30",children:"Your codebase appears to be well-factored"})]})]})]})}function a5(){var j,S,k;const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!0),[d,u]=M.useState("overview");if(M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getLicenses(e.id).then(C=>i(C)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=m&&m.totalPackages>0,g=C=>{switch(C){case"high":return r.jsx(yt,{className:"w-4 h-4 text-red-400"});case"medium":return r.jsx(Xo,{className:"w-4 h-4 text-orange-400"});case"low":return r.jsx(or,{className:"w-4 h-4 text-emerald-400"});default:return r.jsx(V0,{className:"w-4 h-4 text-white/40"})}},y=C=>{switch(C){case"high":return"bg-red-500/20 text-red-400 border-red-500/30";case"medium":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"low":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";default:return"bg-white/10 text-white/50 border-white/20"}},w=[{value:(m==null?void 0:m.totalPackages)||0,label:"Total Packages",color:"text-white"},{value:(m==null?void 0:m.highRisk)||0,label:"High Risk",color:"text-red-400",bg:"bg-red-500/20"},{value:(m==null?void 0:m.mediumRisk)||0,label:"Medium Risk",color:"text-orange-400",bg:"bg-orange-500/20"},{value:(m==null?void 0:m.lowRisk)||0,label:"Low Risk",color:"text-emerald-400",bg:"bg-emerald-500/20"}],v=[{id:"overview",label:"All Licenses",count:(m==null?void 0:m.totalLicenses)||0},{id:"high",label:"High Risk",count:(m==null?void 0:m.highRisk)||0,color:"text-red-400"},{id:"medium",label:"Medium Risk",count:(m==null?void 0:m.mediumRisk)||0,color:"text-orange-400"},{id:"low",label:"Low Risk",count:(m==null?void 0:m.lowRisk)||0,color:"text-emerald-400"},{id:"unknown",label:"Unknown",count:(m==null?void 0:m.unknown)||0,color:"text-white/50"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qs,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"License Compliance"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is License Compliance?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every npm package has a license that defines how you can use it. ",r.jsx("strong",{className:"text-white/80",children:"Permissive licenses"})," (MIT, Apache, BSD) allow almost any use. ",r.jsx("strong",{className:"text-white/80",children:"Copyleft licenses"})," (GPL, AGPL) may require you to open-source your own code. Understanding your license obligations helps avoid legal issues and ensures compliance with company policies."]})]}),m&&r.jsx("div",{className:`rounded-xl border p-4 flex items-center gap-4 ${m.compliant?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:m.compliant?r.jsxs(r.Fragment,{children:[r.jsx(or,{className:"w-8 h-8 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-emerald-400",children:"No High-Risk Licenses Detected"}),r.jsx("p",{className:"text-sm text-white/50",children:"All dependencies use permissive or weak copyleft licenses"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(yt,{className:"w-8 h-8 text-red-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-400",children:"High-Risk Licenses Found"}),r.jsxs("p",{className:"text-sm text-white/50",children:[m.highRisk," package(s) use copyleft licenses that may require source disclosure"]})]})]})}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:w.map(C=>r.jsxs("div",{className:`${C.bg||"bg-[#141414]"} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${C.color}`,children:C.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:C.label})]},C.label))}),(s==null?void 0:s.recommendations)&&s.recommendations.length>0&&r.jsx("div",{className:"space-y-3",children:s.recommendations.map((C,D)=>r.jsx("div",{className:`rounded-xl border p-4 ${C.priority==="high"?"bg-red-500/10 border-red-500/30":"bg-orange-500/10 border-orange-500/30"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(yt,{className:`w-5 h-5 mt-0.5 ${C.priority==="high"?"text-red-400":"text-orange-400"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${C.priority==="high"?"text-red-400":"text-orange-400"}`,children:C.title}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:C.description}),C.packages&&C.packages.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:C.packages.map((E,I)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded",children:E},I))}),r.jsx("p",{className:"text-xs text-white/40 mt-2",children:C.action})]})]})},D))}),p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:v.map(C=>r.jsxs("button",{onClick:()=>u(C.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===C.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[r.jsx("span",{className:C.color,children:C.label}),C.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:C.count})]},C.id))}),d==="overview"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"License"}),r.jsx("th",{className:"px-6 py-3",children:"Packages"}),r.jsx("th",{className:"px-6 py-3",children:"Risk"}),r.jsx("th",{className:"px-6 py-3",children:"Attribution"}),r.jsx("th",{className:"px-6 py-3",children:"Source Disclosure"})]})}),r.jsx("tbody",{children:(j=s==null?void 0:s.byLicense)==null?void 0:j.map((C,D)=>r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:C.license}),r.jsx("span",{className:"text-white/70",children:C.count}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded border ${y(C.risk)}`,children:C.risk.toUpperCase()}),C.compliance.attribution?r.jsx("span",{className:"text-orange-400 text-xs",children:"Required"}):r.jsx("span",{className:"text-white/30 text-xs",children:"Not required"}),C.compliance.sourceDisclosure?r.jsx("span",{className:"text-red-400 text-xs",children:"Required"}):r.jsx("span",{className:"text-white/30 text-xs",children:"Not required"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Risk Assessment"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[g(C.risk),r.jsx("span",{className:"text-white/70",children:C.riskReason})]})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Compliance Requirements"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Attribution"}),r.jsx("p",{className:`text-sm font-medium ${C.compliance.attribution?"text-orange-400":"text-white/30"}`,children:C.compliance.attribution?"Required":"Not required"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Source Disclosure"}),r.jsx("p",{className:`text-sm font-medium ${C.compliance.sourceDisclosure?"text-red-400":"text-white/30"}`,children:C.compliance.sourceDisclosure?"Required":"Not required"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Modifications"}),r.jsx("p",{className:`text-sm font-medium ${C.compliance.modifications?"text-orange-400":"text-white/30"}`,children:C.compliance.modifications?"Must disclose":"Not required"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:["Packages (",C.count,")"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.packages.slice(0,20).map((E,I)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:E},I)),C.packages.length>20&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",C.packages.length-20," more"]})]})]})]})},D))})]})})}),["high","medium","low","unknown"].includes(d)&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:((k=(S=s==null?void 0:s.byRisk)==null?void 0:S[d])==null?void 0:k.length)>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"License"})]})}),r.jsx("tbody",{children:s.byRisk[d].map((C,D)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-primary",children:C.package}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:C.license})]},D))})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No packages in this risk category"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Qs,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No license data available"}),r.jsx("p",{className:"text-sm text-white/30",children:"License analysis requires package.json dependencies"})]})]})]})}function o5(){var p;const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!0);if(M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getHeavyDeps(e.id).then(g=>i(g)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const d=s==null?void 0:s.summary,u=d&&d.totalDependencies>0,m=[{value:(d==null?void 0:d.totalDependencies)||0,label:"Total Dependencies",icon:$t,bg:"bg-[#141414]"},{value:(d==null?void 0:d.totalSize)||"0 B",label:"Total Size",icon:Qs,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(d==null?void 0:d.top10Size)||"0 B",label:"Top 10 Size",icon:$t,bg:"bg-orange-500/20",text:"text-orange-400"},{value:`${(d==null?void 0:d.top10Percentage)||0}%`,label:"Top 10 %",icon:tc,bg:"bg-purple-500/20",text:"text-purple-400"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qs,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Dependencies by Size"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-orange-400 mb-2",children:"What are Heavy Dependencies?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This shows your dependencies sorted by size. A few large packages often account for most of your node_modules.",r.jsx("strong",{className:"text-white/80",children:" Heavy dependencies"})," increase install times, CI build times, and can bloat your bundle if not tree-shaken properly. Many have lighter alternatives that provide the same functionality with a fraction of the size."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(g=>r.jsxs("div",{className:`${g.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(g.icon,{className:`w-6 h-6 mx-auto mb-2 ${g.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${g.text||"text-white"}`,children:g.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:g.label})]},g.label))}),(s==null?void 0:s.quickWins)&&s.quickWins.length>0&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(tc,{className:"w-5 h-5 text-emerald-400"}),r.jsx("span",{className:"font-medium text-emerald-400",children:"Quick Wins"})]}),s.quickWins.map((g,y)=>{var w;return r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-white/70",children:g.title}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(w=g.packages)==null?void 0:w.map((v,j)=>r.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-sm text-orange-400",children:v.from}),r.jsx(Yo,{className:"w-4 h-4 text-white/30"}),r.jsx("span",{className:"text-sm text-emerald-400",children:v.to}),r.jsxs("span",{className:"text-xs text-white/40",children:["(",v.savings," smaller)"]})]},j))})]},y)})]}),u?r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-bold",children:"Dependencies by Size"}),r.jsx("span",{className:"text-xs text-white/40",children:"Sorted largest to smallest"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Version"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"% of Total"}),r.jsx("th",{className:"px-6 py-3",children:"Alternatives"})]})}),r.jsx("tbody",{children:(p=s==null?void 0:s.dependencies)==null?void 0:p.map((g,y)=>{var w,v,j,S;return r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:g.name}),r.jsx("span",{className:"text-white/50",children:g.version}),r.jsx("span",{className:"text-white/70 font-mono",children:g.sizeFormatted}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.min(parseFloat(g.percentage),100)}%`}})}),r.jsxs("span",{className:"text-xs text-white/50",children:[g.percentage,"%"]})]}),g.alternatives&&g.alternatives.length>0?r.jsxs("span",{className:"text-xs text-emerald-400 bg-emerald-500/20 px-2 py-1 rounded",children:[g.alternatives.length," lighter option",g.alternatives.length>1?"s":""]}):r.jsx("span",{className:"text-xs text-white/30",children:"-"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Size Details"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Package Size"}),r.jsx("p",{className:"text-lg font-bold text-white",children:g.sizeFormatted})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"% of node_modules"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[g.percentage,"%"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Sub-dependencies"}),r.jsx("p",{className:"text-lg font-bold text-white",children:g.dependencies})]})]})]}),g.alternatives&&g.alternatives.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Lighter Alternatives"}),r.jsx("div",{className:"space-y-2",children:g.alternatives.map((k,C)=>r.jsxs("div",{className:"flex items-center gap-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3",children:[r.jsx(Yo,{className:"w-4 h-4 text-emerald-400"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm font-medium text-emerald-400",children:k.name})}),r.jsxs("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded",children:[k.savings," smaller"]})]},C))})]}),g.recommendation&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Recommendation"}),r.jsx(bn,{title:g.recommendation.action,priority:((w=g.alternatives)==null?void 0:w.length)>0?"medium":"low",effort:((v=g.alternatives)==null?void 0:v.length)>0?"medium":"low",description:((j=g.alternatives)==null?void 0:j.length)>0?`Consider replacing ${g.name} with ${g.alternatives[0].name} to reduce bundle size by ${g.alternatives[0].savings}.`:"This dependency is large but there are no known lighter alternatives.",commands:((S=g.alternatives)==null?void 0:S.length)>0?[`npm uninstall ${g.name}`,`npm install ${g.alternatives[0].name}`]:[]})]})]})},y)})})]})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Qs,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No dependency size data available"}),r.jsx("p",{className:"text-sm text-white/30",children:"Run a scan to analyse dependency sizes"})]})]})]})}function c5(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!1),[d,u]=M.useState({}),[m,p]=M.useState({}),[g,y]=M.useState({});M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getAssets(e.id).then(E=>{i(E),c(!1)}).catch(E=>{console.error("Failed to load assets:",E),c(!1)}))},[e==null?void 0:e.id]);const w=E=>{if(!E||E===0)return"0 B";const I=1024,U=["B","KB","MB","GB"],F=Math.floor(Math.log(E)/Math.log(I));return parseFloat((E/Math.pow(I,F)).toFixed(1))+" "+U[F]},v=async E=>{var F;const I=E.file||E.relativePath||"";if(!n||!I)return;const U=typeof((F=E.optimisation)==null?void 0:F.suggestedFormat)=="string"?E.optimisation.suggestedFormat.toLowerCase():"webp";u(_=>({..._,[I]:!0})),y(_=>{const R={..._};return delete R[I],R});try{const _=await we.optimiseImage(n,I,U);_.success&&p(R=>({...R,[I]:{savings:_.savings.formatted,percent:_.savings.percent,refs:_.referencesUpdated||0}}))}catch(_){y(R=>({...R,[I]:_.message||"Conversion failed"}))}finally{u(_=>({..._,[I]:!1}))}},j=E=>{switch(E==null?void 0:E.toLowerCase()){case"image":return r.jsx(wj,{className:"w-4 h-4"});case"font":return r.jsx(Vj,{className:"w-4 h-4"});case"video":return r.jsx(jj,{className:"w-4 h-4"});case"audio":return r.jsx(Rj,{className:"w-4 h-4"});default:return r.jsx(Rr,{className:"w-4 h-4"})}},S=E=>{var U,F,_;const I=[];if(E.optimisation){const R=E.optimisation;I.push(r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-blue-400 mb-3",children:"Optimisation Opportunity"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Current Format"}),r.jsx("p",{className:"text-white font-medium",children:(typeof R.currentFormat=="string"?R.currentFormat:typeof E.format=="string"?E.format:"Unknown").toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Suggested Format"}),r.jsx("p",{className:"text-emerald-400 font-medium",children:typeof R.suggestedFormat=="string"?R.suggestedFormat.toUpperCase():"WebP/AVIF"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Current Size"}),r.jsx("p",{className:"text-white font-medium",children:w(R.currentSize||E.sizeBytes)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Estimated After"}),r.jsxs("p",{className:"text-emerald-400 font-medium",children:[w(R.estimatedSize)," (",R.savingsPercent||0,"% smaller)"]})]})]}),R.reason&&r.jsx("p",{className:"text-white/60 text-sm mt-3",children:R.reason})]},"optimisation"))}return E.dimensions&&I.push(r.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-white/80 mb-2",children:"Image Dimensions"}),r.jsxs("p",{className:"text-white/60 text-sm",children:[E.dimensions.width," x ",E.dimensions.height," px",E.dimensions.aspectRatio&&` (${E.dimensions.aspectRatio})`]})]},"dimensions")),E.costImpact&&I.push(r.jsx(Qo,{bandwidth:E.sizeBytes,description:`Monthly transfer: ${E.costImpact.monthlyTransferGB||"0"} GB. Annual cost: ${E.costImpact.annualCostGBP||"0"}. Monthly CO2: ${E.costImpact.monthlyCO2Kg||"0"} kg.`},"cost")),(E.recommendation||E.optimisation)&&I.push(r.jsx(bn,{title:"Optimise This Asset",priority:"low",effort:"low",description:((U=E.recommendation)==null?void 0:U.reasoning)||((F=E.optimisation)==null?void 0:F.reason)||"Convert to a modern format for smaller file size.",commands:(_=E.recommendation)!=null&&_.command?[E.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:I})};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const k=(s==null?void 0:s.summary)||{totalAssets:0,totalSize:0,unusedAssets:0,optimisableAssets:0,potentialSavings:0},C=(s==null?void 0:s.optimisableAssets)||[],D=(s==null?void 0:s.byType)||{};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Asset Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is Asset Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Asset analysis scans your images, fonts, videos, and other media files for optimisation opportunities.",r.jsx("strong",{className:"text-white/80",children:" Modern formats"})," like WebP and AVIF can reduce image sizes by 30-80%.",r.jsx("strong",{className:"text-white/80",children:" Font subsetting"})," removes unused characters.",r.jsx("strong",{className:"text-white/80",children:" Lazy loading"})," defers off-screen assets. These optimisations reduce bandwidth, improve Core Web Vitals, and lower carbon emissions."]})]}),o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:k.totalAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Assets"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:w(k.totalSize)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Size"})]}),r.jsxs("div",{className:`${k.optimisableAssets>0?"bg-blue-500/10 border-blue-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.optimisableAssets>0?"text-blue-400":"text-white"}`,children:k.optimisableAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Can Optimise"})]}),r.jsxs("div",{className:`${k.potentialSavings>0?"bg-emerald-500/10 border-emerald-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.potentialSavings>0?"text-emerald-400":"text-white"}`,children:w(k.potentialSavings)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Potential Savings"})]}),r.jsxs("div",{className:`${k.unusedAssets>0?"bg-orange-500/10 border-orange-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.unusedAssets>0?"text-orange-400":"text-white"}`,children:k.unusedAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused"}),r.jsxs(Mc,{href:"/waste",className:"text-xs text-primary hover:underline mt-1 inline-flex items-center gap-1",children:["View in Waste ",r.jsx(Yo,{className:"w-3 h-3"})]})]})]}),Object.keys(D).length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Assets by Type"}),r.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(D).map(([E,I])=>r.jsxs("div",{className:"flex items-center gap-3 bg-[#1a1a1a] rounded-lg p-3",children:[r.jsx("div",{className:"p-2 bg-white/5 rounded-lg text-white/60",children:j(E)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white capitalize",children:E}),r.jsxs("p",{className:"text-xs text-white/40",children:[I.count," files  ",I.size]})]})]},E))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-bold",children:"Optimisable Assets"})]}),C.length>0&&r.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:C.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Type"}),r.jsx("th",{className:"px-6 py-3",children:"Current Size"}),r.jsx("th",{className:"px-6 py-3",children:"Potential Savings"}),r.jsx("th",{className:"px-6 py-3",children:"Suggestion"})]})}),r.jsx("tbody",{children:C.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No optimisable assets detected - your assets are already well-optimised!"})}):C.map((E,I)=>{var U;return r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary truncate max-w-[300px]",title:E.relativePath||E.file,children:E.relativePath||E.file}),r.jsxs("span",{className:"text-white/70 capitalize flex items-center gap-2",children:[j(E.type),typeof E.format=="string"?E.format.toUpperCase():E.type]}),r.jsx("span",{className:"text-white/70",children:E.sizeFormatted||w(E.sizeBytes)}),r.jsx("span",{className:"text-emerald-400 font-medium",children:(U=E.optimisation)!=null&&U.savingsPercent?`${E.optimisation.savingsPercent}%`:"-"}),(()=>{var _,R;const F=E.file||E.relativePath||"";return m[F]?r.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400 text-xs font-medium",children:[r.jsx(Pn,{className:"w-3.5 h-3.5"}),"Done (",m[F].savings," saved",m[F].refs>0?`, ${m[F].refs} ref${m[F].refs>1?"s":""} updated`:"",")"]}):g[F]?r.jsxs("span",{className:"flex items-center gap-1.5 text-red-400 text-xs",title:g[F],children:[r.jsx(gf,{className:"w-3.5 h-3.5"}),"Failed"]}):E.type==="image"?r.jsxs("button",{onClick:G=>{G.stopPropagation(),v(E)},disabled:d[F],className:"flex items-center gap-1.5 px-2.5 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded-lg hover:bg-blue-500/30 transition-colors disabled:opacity-50",children:[d[F]?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(Zo,{className:"w-3.5 h-3.5"}),(_=E.optimisation)!=null&&_.suggestedFormat&&typeof E.optimisation.suggestedFormat=="string"?`Convert to ${E.optimisation.suggestedFormat.toUpperCase()}`:"Convert to WebP"]}):r.jsx("span",{className:"text-blue-400 text-sm",children:(R=E.optimisation)!=null&&R.suggestedFormat&&typeof E.optimisation.suggestedFormat=="string"?`Convert to ${E.optimisation.suggestedFormat.toUpperCase()}`:"Optimise"})})()],expandedContent:S(E)},I)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Quick Optimisation Tips"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Images"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use WebP/AVIF for photos (97%+ browser support)"}),r.jsx("li",{children:"Use SVG for icons and logos"}),r.jsx("li",{children:"Implement lazy loading for below-fold images"}),r.jsx("li",{children:"Serve responsive images with srcset"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Fonts"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use WOFF2 format (best compression)"}),r.jsx("li",{children:"Subset fonts to only used characters"}),r.jsx("li",{children:"Use font-display: swap for faster text"}),r.jsx("li",{children:"Limit font weights/styles loaded"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Video/Audio"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use MP4 (H.264) for broad support"}),r.jsx("li",{children:"Consider WebM for smaller sizes"}),r.jsx("li",{children:'Lazy load with loading="lazy"'}),r.jsx("li",{children:"Use poster images for videos"})]})]})]})]})]})]})]})}function d5(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState(null),[o,c]=M.useState(!1),[d,u]=M.useState(null);M.useEffect(()=>{e!=null&&e.id&&(c(!0),we.getBuildLogs(e.id).then(v=>{i(v),c(!1)}).catch(v=>{console.error("Failed to load build logs:",v),c(!1)}))},[e==null?void 0:e.id]);const m=v=>{navigator.clipboard.writeText(v),u(v),setTimeout(()=>u(null),2e3)},p=v=>{if(!v||v===0)return"0 B";const j=1024,S=["B","KB","MB","GB"],k=Math.floor(Math.log(v)/Math.log(j));return parseFloat((v/Math.pow(j,k)).toFixed(1))+" "+S[k]},g=v=>{switch(v){case"error":return r.jsx(yt,{className:"w-4 h-4 text-red-400"});case"warning":return r.jsx(yt,{className:"w-4 h-4 text-orange-400"});default:return r.jsx(Or,{className:"w-4 h-4 text-blue-400"})}},y=v=>{switch(v){case"error":return"bg-red-500/10 border-red-500/20 text-red-400";case"warning":return"bg-orange-500/10 border-orange-500/20 text-orange-400";default:return"bg-blue-500/10 border-blue-500/20 text-blue-400"}};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const w=(s==null?void 0:s.summary)||{totalLogBytes:0,logFileCount:0,logDirectoryCount:0};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rr,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Build Logs Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is Build Log Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Build log analysis scans your project for log files, debug outputs, and build artifacts that shouldn't be in production.",r.jsx("strong",{className:"text-white/80",children:" Log files"})," can contain sensitive data and increase deployment size.",r.jsx("strong",{className:"text-white/80",children:" Debug artifacts"})," may expose internal details.",r.jsx("strong",{className:"text-white/80",children:" Source maps"})," in production can reveal your source code."]})]}),o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:`${s!=null&&s.hasIssues?"bg-orange-500/10 border-orange-500/30":"bg-emerald-500/10 border-emerald-500/30"} border rounded-xl p-6 text-center`,children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:s!=null&&s.hasIssues?r.jsx(yt,{className:"w-6 h-6 text-orange-400"}):r.jsx(or,{className:"w-6 h-6 text-emerald-400"})}),r.jsx("p",{className:`text-sm font-medium ${s!=null&&s.hasIssues?"text-orange-400":"text-emerald-400"}`,children:s!=null&&s.hasIssues?"Issues Found":"All Clear"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:w.logFileCount}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Log Files"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:w.logDirectoryCount}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Log Directories"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:w.totalLogFormatted||p(w.totalLogBytes)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Size"})]})]}),(s==null?void 0:s.findings)&&s.findings.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Findings"})}),r.jsx("div",{className:"p-4 space-y-3",children:s.findings.map((v,j)=>r.jsx("div",{className:`rounded-lg border p-4 ${y(v.severity)}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[g(v.severity),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-white",children:v.message}),v.files&&v.files.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Affected files:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.files.slice(0,5).map((S,k)=>r.jsx("span",{className:"text-xs bg-black/30 px-2 py-0.5 rounded text-white/60",children:S},k)),v.files.length>5&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",v.files.length-5," more"]})]})]}),v.solutions&&r.jsxs("div",{className:"mt-3 space-y-2",children:[v.solutions.immediate&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-white/40",children:"Quick fix:"}),r.jsx("code",{className:"text-xs bg-black/30 px-2 py-1 rounded text-primary",children:v.solutions.immediate}),r.jsx("button",{onClick:()=>m(v.solutions.immediate),className:"p-1 hover:bg-white/10 rounded",children:d===v.solutions.immediate?r.jsx(as,{className:"w-3 h-3 text-emerald-500"}):r.jsx(_t,{className:"w-3 h-3 text-white/40"})})]}),v.solutions.permanent&&r.jsxs("p",{className:"text-xs text-white/50",children:["Permanent solution: ",v.solutions.permanent]})]})]})]})},j))})]}),(s==null?void 0:s.logDirectories)&&s.logDirectories.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(G0,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Log Directories"}),r.jsx("span",{className:"bg-white/10 text-white/60 text-xs px-2 py-0.5 rounded-full ml-auto",children:s.logDirectories.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Directory"}),r.jsx("th",{className:"px-6 py-3",children:"Files"}),r.jsx("th",{className:"px-6 py-3",children:"Total Size"})]})}),r.jsx("tbody",{children:s.logDirectories.map((v,j)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-3 text-primary text-sm",children:v.relativePath||v.path}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.fileCount}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.sizeFormatted||p(v.totalSize)})]},j))})]})})]}),(s==null?void 0:s.logFiles)&&s.logFiles.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(K0,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Log Files"}),r.jsx("span",{className:"bg-white/10 text-white/60 text-xs px-2 py-0.5 rounded-full ml-auto",children:s.logFiles.length})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Type"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Last Modified"})]})}),r.jsx("tbody",{children:s.logFiles.slice(0,50).map((v,j)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-3 text-primary text-sm truncate max-w-[400px]",title:v.path,children:v.relativePath||v.path}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.type||"log"}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.sizeFormatted||p(v.sizeBytes)}),r.jsx("td",{className:"px-6 py-3 text-white/50 text-sm",children:v.lastModified||"-"})]},j))})]}),s.logFiles.length>50&&r.jsxs("div",{className:"px-6 py-3 text-center text-white/40 text-sm border-t border-white/10",children:["Showing 50 of ",s.logFiles.length," files"]})]})]}),!(s!=null&&s.hasIssues)&&(!(s!=null&&s.logFiles)||s.logFiles.length===0)&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-8 text-center",children:[r.jsx(or,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-bold text-emerald-400 mb-2",children:"No Log Issues Detected"}),r.jsx("p",{className:"text-sm text-white/60",children:"Your project doesn't have any log files or build artifacts that need attention."})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Best Practices for Log Management"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Git Ignore"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Add *.log to .gitignore"}),r.jsx("li",{children:"Ignore /logs/ directories"}),r.jsx("li",{children:"Exclude npm-debug.log"}),r.jsx("li",{children:"Exclude .env files"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Production Builds"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Disable source maps in prod"}),r.jsx("li",{children:"Remove console.log statements"}),r.jsx("li",{children:"Use environment-based logging"}),r.jsx("li",{children:"Clean build artifacts before deploy"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"CI/CD"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Add log cleanup step"}),r.jsx("li",{children:"Validate no logs in dist/"}),r.jsx("li",{children:"Check for sensitive data"}),r.jsx("li",{children:"Archive logs separately"})]})]})]})]})]})]})]})}function h5({signals:n}){var t,s,i;const e=[{label:"V",score:n.velocity.score,max:25,color:"bg-purple-500"},{label:"I",score:n.importDecline.score,max:25,color:"bg-orange-500"},{label:"C",score:n.contributorWithdrawal.score,max:12,color:"bg-pink-500"},{label:"S",score:n.staleness.score,max:13,color:"bg-cyan-500"},{label:"M",score:((t=n.mtimeStaleness)==null?void 0:t.score)??0,max:10,color:"bg-teal-500"},{label:"F",score:((s=n.importFragility)==null?void 0:s.score)??0,max:8,color:"bg-yellow-500"},{label:"E",score:((i=n.exportUsageRatio)==null?void 0:i.score)??0,max:7,color:"bg-rose-500"}];return r.jsx("div",{className:"flex items-center gap-1.5",children:e.map(o=>{const c=o.max>0?Math.round(o.score/o.max*100):0;return r.jsxs("div",{className:"flex items-center gap-0.5",title:`${o.label}: ${o.score}/${o.max}`,children:[r.jsx("span",{className:"text-[10px] text-white/40 w-2",children:o.label}),r.jsx("div",{className:"w-6 h-1.5 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full ${o.color} rounded-full`,style:{width:`${c}%`}})})]},o.label)})})}function u5({signals:n}){var t,s,i,o,c,d;const e=[{label:"Velocity",score:n.velocity.score,max:25,detail:n.velocity.detail,color:"bg-purple-500",track:"bg-purple-500/20"},{label:"Import Decline",score:n.importDecline.score,max:25,detail:n.importDecline.detail,color:"bg-orange-500",track:"bg-orange-500/20"},{label:"Contributor Withdrawal",score:n.contributorWithdrawal.score,max:12,detail:n.contributorWithdrawal.detail,color:"bg-pink-500",track:"bg-pink-500/20"},{label:"Staleness (git)",score:n.staleness.score,max:13,detail:n.staleness.detail,color:"bg-cyan-500",track:"bg-cyan-500/20"},{label:"Staleness (mtime)",score:((t=n.mtimeStaleness)==null?void 0:t.score)??0,max:10,detail:((s=n.mtimeStaleness)==null?void 0:s.detail)??"-",color:"bg-teal-500",track:"bg-teal-500/20"},{label:"Import Fragility",score:((i=n.importFragility)==null?void 0:i.score)??0,max:8,detail:((o=n.importFragility)==null?void 0:o.detail)??"-",color:"bg-yellow-500",track:"bg-yellow-500/20"},{label:"Export Usage",score:((c=n.exportUsageRatio)==null?void 0:c.score)??0,max:7,detail:((d=n.exportUsageRatio)==null?void 0:d.detail)??"-",color:"bg-rose-500",track:"bg-rose-500/20"}];return r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg p-4 space-y-3",children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase",children:"Signal Breakdown"}),e.map(u=>{const m=u.max>0?Math.round(u.score/u.max*100):0;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm text-white/70",children:u.label}),r.jsxs("span",{className:"text-xs text-white/40",children:[u.score,"/",u.max,"  ",u.detail]})]}),r.jsx("div",{className:`w-full h-2 ${u.track} rounded-full overflow-hidden`,children:r.jsx("div",{className:`h-full ${u.color} rounded-full transition-all`,style:{width:`${m}%`}})})]},u.label)})]})}function f5(n){const e=[];if(e.push(`Commits: ${n.commits30d} (30d) / ${n.commits90d} (90d) / ${n.commits365d} (365d)`),e.push(`Active contributors (90d): ${n.contributors90d}`),e.push(`Current importers: ${n.importerCount}`),n.importerCountPrevious!==null){const t=n.importerCount-n.importerCountPrevious,s=t>0?"+":"";e.push(`Importer trend: ${s}${t} (was ${n.importerCountPrevious})`)}if(n.fileSizeBytes>0){const t=(n.fileSizeBytes/1024).toFixed(1);e.push(`File size: ${t} KB`)}return e}function m5(n){var e,t,s;if(n.riskLevel==="high"){const i=[];n.signals.velocity.score>12&&i.push("declining commit velocity"),n.signals.importDecline.score>12&&i.push("losing importers"),n.signals.contributorWithdrawal.score>6&&i.push("contributor withdrawal"),n.signals.staleness.score>6&&i.push("prolonged staleness"),((e=n.signals.mtimeStaleness)==null?void 0:e.score)>5&&i.push("filesystem staleness"),((t=n.signals.importFragility)==null?void 0:t.score)>4&&i.push("import fragility"),((s=n.signals.exportUsageRatio)==null?void 0:s.score)>3&&i.push("mostly-dead exports");const o=i.length>0?` Key signals: ${i.join(", ")}.`:"";return{title:"Investigate This File",priority:"high",description:`This file shows strong decay signals (score ${n.decayScore}).${o} Check whether it should be deprecated, consolidated, or actively maintained.`}}return n.riskLevel==="medium"?{title:"Monitor This File",priority:"medium",description:`Moderate decay signals detected (score ${n.decayScore}). Monitor over the next few scans. If trends continue, consider refactoring or deprecation.`}:{title:"Low Priority  Keep Watching",priority:"low",description:`Mild decay indicators (score ${n.decayScore}). No immediate action needed, but keep an eye on this file in future scans.`}}function p5(n){if(!n)return"-";const e=new Date(n);if(isNaN(e.getTime()))return"-";const t=Math.round((Date.now()-e.getTime())/(1e3*60*60*24));return t===0?"today":`${t}d ago`}function x5(){const{selectedProject:n,currentScan:e,loading:t}=St(),[s,i]=M.useState([]),[o,c]=M.useState(null),[d,u]=M.useState(!1),[m,p]=M.useState(!1),[g,y]=M.useState("all");if(M.useEffect(()=>{e!=null&&e.id&&(p(!0),u(!1),we.getDecayAnalysis(e.id).then(k=>{c(k.summary),i(k.candidates||[])}).catch(()=>u(!0)).finally(()=>p(!1)))},[e==null?void 0:e.id]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const w=g==="all"?s:s.filter(k=>k.riskLevel===g),v=k=>k>=70?"text-red-400 bg-red-500/20":k>=40?"text-amber-400 bg-amber-500/20":"text-blue-400 bg-blue-500/20",j=k=>k==="high"?"text-red-400":k==="medium"?"text-amber-400":"text-blue-400",S=k=>{const C=m5(k);return r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsx("div",{children:r.jsx(u5,{signals:k.signals})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ls,{type:"info",title:"Activity Evidence",items:f5(k)}),r.jsx(bn,{title:C.title,priority:C.priority,description:C.description})]})]})};return d||!m&&o===null?r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Intelligence"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:r.jsx(zo,{className:"w-8 h-8 text-white/30"})}),r.jsx("p",{className:"text-white/50 text-lg font-medium mb-2",children:"Decay analysis is not available for this scan"}),r.jsx("p",{className:"text-white/30 text-sm",children:"Run a new scan to generate decay intelligence."})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Intelligence"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"How Decay Scoring Works"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every live source file is scored on seven signals:",r.jsx("strong",{className:"text-purple-400",children:" Velocity"})," (commit rate decline),",r.jsx("strong",{className:"text-orange-400",children:" Import Decline"})," (losing importers between scans),",r.jsx("strong",{className:"text-pink-400",children:" Contributor Withdrawal"})," (fewer active contributors),",r.jsx("strong",{className:"text-cyan-400",children:" Staleness"})," (time since last commit),",r.jsx("strong",{className:"text-teal-400",children:" mtime Staleness"})," (filesystem modification time  works without git),",r.jsx("strong",{className:"text-yellow-400",children:" Import Fragility"})," (files with only 1-2 importers), and",r.jsx("strong",{className:"text-rose-400",children:" Export Usage"})," (files where most exports are dead). Files scoring above thresholds are flagged as decay candidates  early warnings of code that may become dead."]}),o&&!o.hasPreviousScan&&r.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-blue-300/70",children:[r.jsx(Or,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{children:"Run a second scan to unlock import trend tracking."})]})]}),m&&r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-white/40"})}),!m&&o&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:o.highRisk+o.mediumRisk+o.lowRisk}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Candidates"})]}),r.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-red-400",children:o.highRisk}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"High Risk"})]}),r.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/30 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-amber-400",children:o.mediumRisk}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Medium Risk"})]}),r.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-blue-400",children:o.lowRisk}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Low Risk"})]})]}),s.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-500/20 flex items-center justify-center mb-4",children:r.jsx(ey,{className:"w-8 h-8 text-emerald-500"})}),r.jsx("p",{className:"text-white/70 text-lg font-medium mb-2",children:"No decay signals detected"}),r.jsx("p",{className:"text-white/40 text-sm",children:"All live files show stable or growing usage patterns."})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-3 flex-wrap",children:[r.jsx("span",{className:"text-sm font-bold",children:"Decay Candidates"}),r.jsx("span",{className:"text-xs bg-white/10 text-white/60 px-2 py-0.5 rounded-full",children:w.length}),r.jsx("div",{className:"flex gap-1 ml-auto",children:["all","high","medium","low"].map(k=>r.jsx("button",{onClick:()=>y(k),className:`text-xs px-3 py-1 rounded-full transition-colors capitalize ${g===k?"bg-white/20 text-white font-medium":"bg-white/5 text-white/40 hover:bg-white/10 hover:text-white/60"}`,children:k},k))})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Score"}),r.jsx("th",{className:"px-6 py-3",children:"Risk"}),r.jsx("th",{className:"px-6 py-3",children:"Signals"}),r.jsx("th",{className:"px-6 py-3",children:"Last Commit"})]})}),r.jsx("tbody",{children:w.map((k,C)=>r.jsx(Rs,{cells:[r.jsx("span",{className:"text-primary text-sm font-mono truncate block max-w-[320px]",title:k.filePath,children:k.filePath}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${v(k.decayScore)}`,children:k.decayScore}),r.jsx("span",{className:`text-xs font-bold uppercase ${j(k.riskLevel)}`,children:k.riskLevel}),r.jsx(h5,{signals:k.signals}),r.jsx("span",{className:"text-white/50 text-sm",children:p5(k.lastCommitDate)})],expandedContent:S(k)},C))})]})})]})]})]})]})}function Us({text:n}){const[e,t]=M.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx("button",{type:"button",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),onFocus:()=>t(!0),onBlur:()=>t(!1),className:"text-white/30 hover:text-white/60 transition-colors ml-1.5",children:r.jsx(V0,{className:"w-3.5 h-3.5"})}),e&&r.jsxs("div",{className:"absolute z-50 left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-2 bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl text-xs text-white/80 w-64 text-left",children:[n,r.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-white/20"})]})]})}const g5=[{code:"GBP",symbol:"",name:"British Pound"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"}],Fo={maxCriticalVulnerabilities:0,maxHighVulnerabilities:0,maxExploitableVulnerabilities:0,maxUnusedDeps:5,maxDeadCodePercent:10,maxDeadFiles:3,maxWasteMb:50,failOnWastePercent:20,maxOutdatedMajor:5,maxOutdatedCritical:0,requireLicenseCompliance:!0},du={currency:"GBP",developerHourlyRate:75,teamSize:5,newHiresPerYear:2,onboardingHoursWasted:8,maintenanceOverheadPercent:10},hu={port:9e3,autoOpen:!0},uu={workers:0},fu={includeAiPrompt:!1},mu={emissions:!1,bundles:!1,cssAnalysis:!1,duplicates:!1,licenses:!1,heavyDeps:!1,assets:!1,buildLogs:!1},pu={emissions:{label:"Emissions",description:"Calculate carbon footprint and environmental impact of your code"},bundles:{label:"Bundles",description:"Analyse build output sizes and bundle composition"},cssAnalysis:{label:"CSS Analysis",description:"Parse and analyse CSS files for unused styles and issues"},duplicates:{label:"Duplicates",description:"Detect duplicate functions and similar code blocks"},licenses:{label:"Licenses",description:"Check dependency license compliance (GPL/AGPL detection)"},heavyDeps:{label:"Heavy Deps",description:"Identify oversized dependencies that bloat your project"},assets:{label:"Assets",description:"Analyse images, fonts, and other assets for optimisation"},buildLogs:{label:"Build Logs",description:"Analyse log files for bloat and issues"}};function y5(){const{refreshFeatures:n}=_r(),[e,t]=M.useState(!0),[s,i]=M.useState(!1),[o,c]=M.useState(!1),[d,u]=M.useState(null),[m,p]=M.useState(Fo),[g,y]=M.useState(du),[w,v]=M.useState(hu),[j,S]=M.useState(uu),[k,C]=M.useState(null),[D,E]=M.useState(fu),[I,U]=M.useState(mu),[F,_]=M.useState({maxCriticalVulnerabilities:!0,maxHighVulnerabilities:!0,maxExploitableVulnerabilities:!0,maxUnusedDeps:!0,maxDeadCodePercent:!0,maxDeadFiles:!0,maxWasteMb:!0,failOnWastePercent:!0,maxOutdatedMajor:!0,maxOutdatedCritical:!0,requireLicenseCompliance:!0});M.useEffect(()=>{R()},[]);const R=async()=>{t(!0);try{const V=(await we.getSettings()).settings||{};V.thresholds&&p({...Fo,...V.thresholds}),V.costAssumptions&&y({...du,...V.costAssumptions}),V.dashboard&&v({...hu,...V.dashboard}),V.output&&E({...fu,...V.output}),V.performance&&S({...uu,...V.performance}),V.features&&U({...mu,...V.features});try{const q=await we.getSystemInfo();q.success&&C(q)}catch{}}catch(H){console.error("Failed to load settings:",H)}finally{t(!1)}},G=async()=>{i(!0),u(null),c(!1);try{const H={};Object.keys(F).forEach(V=>{F[V]&&(H[V]=m[V])}),await we.saveSettings({thresholds:H,costAssumptions:g,dashboard:w,performance:j,output:D,features:I}),await n(),c(!0),setTimeout(()=>c(!1),3e3)}catch(H){u(H instanceof Error?H.message:"Failed to save settings")}finally{i(!1)}},Q=()=>{p(Fo),y(du),v(hu),S(uu),E(fu),U(mu);const H={};Object.keys(Fo).forEach(V=>H[V]=!0),_(H)},ne=H=>{_(V=>({...V,[H]:!V[H]}))},ee=({thresholdKey:H,label:V,description:q,tooltip:de,isBoolean:Y=!1,min:X=0,max:ie,step:T=1,suffix:W=""})=>r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>ne(H),className:`w-10 h-6 rounded-full transition-colors flex-shrink-0 ${F[H]?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${F[H]?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:V}),r.jsx(Us,{text:de})]}),r.jsx("p",{className:"text-xs text-white/40",children:q})]})]}),Y?r.jsx("div",{className:`px-3 py-1 rounded text-xs font-bold ${m[H]&&F[H]?"bg-red-500/20 text-red-400":"bg-white/10 text-white/40"}`,children:m[H]?"ENABLED":"DISABLED"}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",value:m[H],onChange:ce=>p(ue=>({...ue,[H]:Number(ce.target.value)})),disabled:!F[H],className:"w-20 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-right disabled:opacity-30",min:X,max:ie,step:T}),W&&r.jsx("span",{className:"text-xs text-white/40 w-8",children:W})]})]});return e?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ec,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Settings"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:Q,className:"px-4 py-2 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx($o,{className:"w-4 h-4"}),"Reset"]}),r.jsxs("button",{onClick:G,disabled:s,className:"px-4 py-2 text-sm bg-primary text-black font-bold rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50",children:[s?r.jsx(je,{className:"w-4 h-4 animate-spin"}):o?r.jsx(as,{className:"w-4 h-4"}):r.jsx(J0,{className:"w-4 h-4"}),o?"Saved!":"Save"]})]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[d&&r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-center gap-3",children:[r.jsx(yt,{className:"w-5 h-5 text-red-400"}),r.jsx("p",{className:"text-sm text-red-400",children:d})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Hj,{className:"w-5 h-5 text-emerald-400"}),r.jsx("h2",{className:"font-bold",children:"Features"}),r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"Enable additional analysis modules"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("p",{className:"text-xs text-white/50 mb-4",children:"Core features (dead code detection, security scanning, dependency analysis) are always enabled. Toggle these optional modules on or off. Disabled modules are skipped during scans for faster results."}),Object.keys(pu).map(H=>r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/5 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>U(V=>({...V,[H]:!V[H]})),className:`w-10 h-6 rounded-full transition-colors flex-shrink-0 ${I[H]?"bg-emerald-500":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${I[H]?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:pu[H].label}),r.jsx("p",{className:"text-xs text-white/40",children:pu[H].description})]})]}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${I[H]?"bg-emerald-500/20 text-emerald-400":"bg-white/5 text-white/30"}`,children:I[H]?"ON":"OFF"})]},H))]})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-blue-400 font-medium mb-2",children:"CI/CD Quality Gate"}),r.jsxs("p",{className:"text-xs text-white/60",children:["These settings map to CLI options. Use ",r.jsx("code",{className:"bg-black/30 px-1 rounded",children:"swynx check"})," with flags like ",r.jsx("code",{className:"bg-black/30 px-1 rounded",children:"--max-critical-vulnerabilities 0"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(wn,{className:"w-5 h-5 text-red-400"}),r.jsx("h2",{className:"font-bold",children:"Security"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-critical-vulnerabilities"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(ee,{thresholdKey:"maxCriticalVulnerabilities",label:"Max Critical Vulnerabilities",description:"Fail if critical security issues exceed this count",tooltip:"Critical vulnerabilities are the most severe security flaws - they can allow attackers to take control of your system, steal data, or cause major damage. Setting this to 0 means your build fails if any critical issues are found. This is strongly recommended for production code."}),r.jsx(ee,{thresholdKey:"maxHighVulnerabilities",label:"Max High Vulnerabilities",description:"Fail if high severity issues exceed this count",tooltip:"High severity vulnerabilities are serious security issues that could be exploited under the right conditions. They're not as immediately dangerous as critical ones, but should still be fixed promptly. Set a low number to keep your codebase secure."}),r.jsx(ee,{thresholdKey:"maxExploitableVulnerabilities",label:"Max Exploitable Vulnerabilities",description:"Fail if exploitable vulnerabilities exceed this count",tooltip:"Exploitable vulnerabilities have known, working attack methods that hackers can use right now. These are actively dangerous - even if rated lower severity, they should be treated as urgent because real attacks exist for them."})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(gn,{className:"w-5 h-5 text-orange-400"}),r.jsx("h2",{className:"font-bold",children:"Code Quality"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-unused-deps"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(ee,{thresholdKey:"maxUnusedDeps",label:"Max Unused Dependencies",description:"Fail if unused dependencies exceed this count",tooltip:"Unused dependencies are packages listed in your package.json that your code never actually imports or uses. They bloat your node_modules, slow down installs, and increase your attack surface. Removing them makes your project leaner and safer."}),r.jsx(ee,{thresholdKey:"maxDeadCodePercent",label:"Max Dead Code Percent",description:"Fail if dead code exceeds this percentage",max:100,suffix:"%",tooltip:"Dead code is functions, variables, or exports that exist in your codebase but are never called or used anywhere. It clutters your project, confuses developers, and wastes storage/bandwidth. A lower percentage means a cleaner, more maintainable codebase."}),r.jsx(ee,{thresholdKey:"maxDeadFiles",label:"Max Dead Files",description:"Fail if completely dead files exceed this count",tooltip:"Dead files are entire source files that contain no exported code used anywhere else in your project. They're often leftover from refactoring or deleted features. These files can usually be safely deleted to reduce confusion and project size."}),r.jsx(ee,{thresholdKey:"maxWasteMb",label:"Max Waste Size",description:"Fail if total waste size exceeds this value",suffix:"MB",tooltip:"Total waste size combines unused dependencies, dead code, and oversized assets into one number. It represents how much bloat your project is carrying. Keeping this low means faster builds, smaller bundles, and lower hosting costs."}),r.jsx(ee,{thresholdKey:"failOnWastePercent",label:"Fail on Waste Percent",description:"Fail if waste percentage exceeds this value",max:100,suffix:"%",tooltip:"Waste percentage shows what portion of your project is unnecessary bloat compared to the useful code. For example, 20% means one-fifth of your project could be removed. This relative measure helps catch waste regardless of project size."})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx($t,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"font-bold",children:"Dependencies"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-outdated-major"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(ee,{thresholdKey:"maxOutdatedMajor",label:"Max Outdated Major Versions",description:"Fail if major version updates exceed this count",tooltip:"Major version updates (like React 17 to 18) often include breaking changes that require code modifications. While not always urgent, falling too far behind makes future upgrades much harder and may leave you without security patches. Keep this number low to stay current."}),r.jsx(ee,{thresholdKey:"maxOutdatedCritical",label:"Max Outdated Critical",description:"Fail if critically outdated packages exceed this count",tooltip:"Critically outdated packages are so old they're likely missing years of security fixes and bug patches. They may even be abandoned. Using them is risky - setting this to 0 ensures your CI fails if any packages are dangerously out of date."})]})]}),I.licenses&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Qs,{className:"w-5 h-5 text-purple-400"}),r.jsx("h2",{className:"font-bold",children:"License"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--require-license-compliance"})]}),r.jsx("div",{className:"p-6",children:r.jsx(ee,{thresholdKey:"requireLicenseCompliance",label:"Require License Compliance",description:"Fail if restrictive licenses (GPL/AGPL) are detected",isBoolean:!0,tooltip:"GPL and AGPL licenses are 'copyleft' - they require you to release your own source code if you use them. This can be a serious legal issue for commercial or proprietary software. Enable this to catch these licenses before they become a problem."})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(yf,{className:"w-5 h-5 text-emerald-400"}),r.jsx("h2",{className:"font-bold",children:"Developer Time Costs"}),r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"How dead code costs your team"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("p",{className:"text-xs text-white/50 mb-2",children:"Dead code costs developer time  onboarding confusion, maintenance overhead, and cleanup effort. These assumptions drive the cost estimates shown across the dashboard."}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Currency",r.jsx(Us,{text:"The currency used for all cost calculations and reports. Choose the currency your team budgets in."})]}),r.jsx("select",{value:g.currency,onChange:H=>y(V=>({...V,currency:H.target.value})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",children:g5.map(H=>r.jsxs("option",{value:H.code,children:[H.symbol," ",H.name]},H.code))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Developer Hourly Rate",r.jsx(Us,{text:"The average fully-loaded cost of a developer on your team per hour (salary + benefits + overhead). UK average is ~75/hr. Used to convert wasted hours into a cost figure."})]}),r.jsx("input",{type:"number",value:g.developerHourlyRate,onChange:H=>y(V=>({...V,developerHourlyRate:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Team Size",r.jsx(Us,{text:"Number of developers who regularly work in this codebase. More developers means more people impacted by dead code  reading it, reviewing PRs that touch it, and working around it."})]}),r.jsx("input",{type:"number",value:g.teamSize,onChange:H=>y(V=>({...V,teamSize:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"1"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["New Hires Per Year",r.jsx(Us,{text:"How many new developers join this team per year. Each new hire loses time learning code that turns out to be dead  understanding modules, tracing call paths, and reading documentation for unused features."})]}),r.jsx("input",{type:"number",value:g.newHiresPerYear,onChange:H=>y(V=>({...V,newHiresPerYear:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Onboarding Hours Wasted",r.jsx(Us,{text:"Estimated hours each new developer wastes understanding dead code during onboarding. This includes reading unused modules, tracing dead call paths, and asking questions about code nobody actually uses. 8 hours (1 day) is conservative for a medium codebase."})]}),r.jsx("input",{type:"number",value:g.onboardingHoursWasted,onChange:H=>y(V=>({...V,onboardingHoursWasted:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Maintenance Overhead %",r.jsx(Us,{text:"Percentage of developer time wasted maintaining dead code  reviewing PRs that touch it, updating it during refactors, debugging through dead paths, slower IDE/CI from extra files. Industry estimates range from 5-15%. Scaled by actual waste percentage in your codebase."})]}),r.jsx("input",{type:"number",value:g.maintenanceOverheadPercent,onChange:H=>y(V=>({...V,maintenanceOverheadPercent:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0",max:"50",step:"1"})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Z0,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"font-bold",children:"Dashboard"})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Port",r.jsx(Us,{text:"The network port where the dashboard web server runs. Default is 9000. If you get 'port in use' errors, change this to another number like 9001 or 3000. Must be between 1024 and 65535."})]}),r.jsx("input",{type:"number",value:w.port,onChange:H=>v(V=>({...V,port:Number(H.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"1024",max:"65535"})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[r.jsx("button",{onClick:()=>v(H=>({...H,autoOpen:!H.autoOpen})),className:`w-10 h-6 rounded-full transition-colors ${w.autoOpen?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${w.autoOpen?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:"Auto-open Browser"}),r.jsx(Us,{text:"When enabled, running 'swynx dashboard' will automatically open the dashboard in your default web browser. Disable this if you prefer to manually navigate to the URL or if you're running headless/in CI."})]}),r.jsx("p",{className:"text-xs text-white/40",children:"Open dashboard on start"})]})]})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(xj,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h2",{className:"font-bold",children:"Performance"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"SWYNX_WORKERS"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[k&&r.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-cyan-400 font-medium mb-2",children:"System detected"}),r.jsxs("p",{className:"text-xs text-white/60",children:[k.cpuCount," CPU cores  ",k.totalMemoryGb," GB RAM (",k.freeMemoryGb," GB free)  Suggested: ",r.jsxs("strong",{className:"text-cyan-400",children:[k.suggestedWorkers," workers"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Parser Workers",r.jsx(Us,{text:"Number of CPU cores used for parallel file parsing during scans. More workers = faster scans on large codebases. Each worker uses ~300-500MB RAM for big repos. Set to 0 for auto-detect (recommended). The system will leave cores free for the OS and dashboard."})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"range",min:"0",max:(k==null?void 0:k.maxWorkers)||8,step:"1",value:j.workers,onChange:H=>S(V=>({...V,workers:Number(H.target.value)})),className:"flex-1 accent-cyan-400"}),r.jsxs("div",{className:"w-24 text-center",children:[r.jsx("span",{className:"text-lg font-bold text-cyan-400",children:j.workers===0?"Auto":j.workers}),r.jsx("p",{className:"text-[10px] text-white/40",children:j.workers===0?`(${(k==null?void 0:k.suggestedWorkers)||"?"} cores)`:j.workers===1?"Single core":`${j.workers} cores`})]})]}),j.workers>0&&k&&j.workers>k.suggestedWorkers&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-amber-400",children:[r.jsx(yt,{className:"w-3.5 h-3.5"}),"Using more than ",k.suggestedWorkers," workers may cause memory pressure (",k.freeMemoryGb," GB free). Each worker uses ~300-500 MB on large repos."]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(H0,{className:"w-5 h-5 text-purple-400"}),r.jsx("h2",{className:"font-bold",children:"Output"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--ai-prompt"})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>E(H=>({...H,includeAiPrompt:!H.includeAiPrompt})),className:`w-10 h-6 rounded-full transition-colors ${D.includeAiPrompt?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${D.includeAiPrompt?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:"Include AI Fix Prompt"}),r.jsx(Us,{text:"When enabled, CI output includes a ready-to-copy prompt you can paste into AI coding assistants (like Claude, ChatGPT, or Copilot). The prompt lists all issues found and asks the AI to fix them - security vulnerabilities, unused dependencies, dead code, and unused assets."})]}),r.jsx("p",{className:"text-xs text-white/40",children:"Generate copy-paste prompt for AI assistants in CI output"})]})]})})]})]})]})}const C0={slack:{enabled:!1,webhook:null,notify:"on-failure"},github:{enabled:!1,annotations:{enabled:!1,maxAnnotations:50},summary:{enabled:!1}},gitlab:{enabled:!1,codequality:{enabled:!1,outputPath:"gl-code-quality-report.json"}},jenkins:{enabled:!1,console:{enabled:!1,format:"structured"}}};function b5(){const{selectedProject:n}=St(),{showToast:e}=Zl(),[t,s]=M.useState(!0),[i,o]=M.useState(C0),[c,d]=M.useState(null);M.useEffect(()=>{n&&(s(!0),we.getConfig(n).then(p=>{const g=p.config;g!=null&&g.ci&&o({...C0,...g.ci})}).catch(console.error).finally(()=>s(!1)))},[n]);const u=async p=>{if(n)try{await we.saveConfig(n,{ci:p}),o(p),e("Integration settings saved")}catch{e("Failed to save settings")}},m=(p,g)=>{navigator.clipboard.writeText(p),d(g),e(`Copied ${g} command`),setTimeout(()=>d(null),2e3)};return t?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(X0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"CI/CD Integrations"})]}),r.jsx("p",{className:"text-sm text-white/40 mt-1",children:"Configure notifications and reporting for your CI/CD pipelines"})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#4A154B]/20 flex items-center justify-center",children:r.jsx(Dj,{className:"w-5 h-5 text-[#E01E5A]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Slack"}),r.jsx("p",{className:"text-sm text-white/40",children:"Get scan results in your Slack channel"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.slack.enabled,onChange:p=>u({...i,slack:{...i.slack,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.slack.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Webhook URL"}),r.jsx("input",{type:"text",placeholder:"https://hooks.slack.com/services/...",value:i.slack.webhook||"",onChange:p=>o({...i,slack:{...i.slack,webhook:p.target.value}}),onBlur:()=>u(i),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary"}),r.jsxs("p",{className:"text-xs text-white/30 mt-1",children:["Or set ",r.jsx("code",{className:"bg-white/10 px-1 rounded",children:"SWYNX_SLACK_WEBHOOK"})," env var"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Notify when"}),r.jsxs("select",{value:i.slack.notify,onChange:p=>u({...i,slack:{...i.slack,notify:p.target.value}}),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary",children:[r.jsx("option",{value:"always",children:"Always"}),r.jsx("option",{value:"on-failure",children:"On failure (critical issues or low score)"}),r.jsx("option",{value:"on-regression",children:"On regression (score dropped)"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --slack-webhook $SLACK_WEBHOOK"}),r.jsx("button",{onClick:()=>m("swynx scan . --slack-webhook $SLACK_WEBHOOK","Slack"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="Slack"?r.jsx(as,{className:"w-4 h-4 text-green-400"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:r.jsx(Mj,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"GitHub Actions"}),r.jsx("p",{className:"text-sm text-white/40",children:"Annotations and job summaries"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.enabled,onChange:p=>u({...i,github:{...i.github,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.github.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"PR Annotations"}),r.jsx("p",{className:"text-xs text-white/40",children:"Show issues inline in PR diffs"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.annotations.enabled,onChange:p=>u({...i,github:{...i.github,annotations:{...i.github.annotations,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Job Summary"}),r.jsx("p",{className:"text-xs text-white/40",children:"Rich summary in Actions tab"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.summary.enabled,onChange:p=>u({...i,github:{...i.github,summary:{...i.github.summary,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --github-annotations --github-summary"}),r.jsx("button",{onClick:()=>m("swynx scan . --github-annotations --github-summary","GitHub"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="GitHub"?r.jsx(as,{className:"w-4 h-4 text-green-400"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]})]}),r.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-400",children:r.jsxs("a",{href:"https://github.com/features/actions",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:underline",children:["View GitHub Actions docs ",r.jsx(Jl,{className:"w-3 h-3"})]})})})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#FC6D26]/20 flex items-center justify-center",children:r.jsx(Z0,{className:"w-5 h-5 text-[#FC6D26]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"GitLab CI"}),r.jsx("p",{className:"text-sm text-white/40",children:"Code Quality reports for merge requests"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.gitlab.enabled,onChange:p=>u({...i,gitlab:{...i.gitlab,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.gitlab.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Code Quality Report"}),r.jsx("p",{className:"text-xs text-white/40",children:"Generate gl-code-quality-report.json"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.gitlab.codequality.enabled,onChange:p=>u({...i,gitlab:{...i.gitlab,codequality:{...i.gitlab.codequality,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Output Path"}),r.jsx("input",{type:"text",value:i.gitlab.codequality.outputPath,onChange:p=>o({...i,gitlab:{...i.gitlab,codequality:{...i.gitlab.codequality,outputPath:p.target.value}}}),onBlur:()=>u(i),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary font-mono"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --gitlab-codequality"}),r.jsx("button",{onClick:()=>m("swynx scan . --gitlab-codequality","GitLab"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="GitLab"?r.jsx(as,{className:"w-4 h-4 text-green-400"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#D24939]/20 flex items-center justify-center",children:r.jsx(ty,{className:"w-5 h-5 text-[#D24939]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Jenkins"}),r.jsx("p",{className:"text-sm text-white/40",children:"Structured console output for parsing"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.jenkins.enabled,onChange:p=>u({...i,jenkins:{...i.jenkins,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.jenkins.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Structured Console Output"}),r.jsx("p",{className:"text-xs text-white/40",children:"SWYNX_* key=value format"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.jenkins.console.enabled,onChange:p=>u({...i,jenkins:{...i.jenkins,console:{...i.jenkins.console,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --jenkins-console"}),r.jsx("button",{onClick:()=>m("swynx scan . --jenkins-console","Jenkins"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="Jenkins"?r.jsx(as,{className:"w-4 h-4 text-green-400"}):r.jsx(_t,{className:"w-4 h-4 text-white/40"})})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Example Output:"}),r.jsx("pre",{className:"text-xs text-white/60 font-mono overflow-x-auto",children:`SWYNX_SCORE=78
SWYNX_GRADE=C
SWYNX_WASTE_PERCENT=4.2
SWYNX_CRITICAL_COUNT=2
SWYNX_WARNING_COUNT=5`})]})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[r.jsx("h4",{className:"text-sm font-bold mb-2",children:"Configuration File"}),r.jsxs("p",{className:"text-sm text-white/50 mb-3",children:["Settings are saved to ",r.jsx("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-primary",children:".swynx.json"})," in your project root."]}),r.jsx("pre",{className:"text-xs text-white/40 font-mono bg-black/30 p-3 rounded-lg overflow-x-auto",children:`{
  "ci": {
    "slack": { "enabled": true, "webhook": "\${SWYNX_SLACK_WEBHOOK}" },
    "github": { "annotations": { "enabled": true } }
  }
}`})]})]})]})}function w5({children:n}){var T,W,ce,ue,ke,Ne,Re,Pe,Fe,De,pt,Ye,Lt,Jt,hs,us,Le;const[e]=Fi(),{currentScan:t,runStreamingScan:s,scanning:i}=St(),{license:o,slots:c,registeredProjects:d,selectedProjectId:u,setSelectedProjectId:m,goToProjectSelection:p,removeProject:g,features:y}=_r(),[w,v]=M.useState(null);M.useEffect(()=>{we.getVersion().then(pe=>{pe.version&&v(pe.version)}).catch(()=>{})},[]);const[j,S]=M.useState(null),[k,C]=M.useState(null),[D,E]=M.useState(null),[I,U]=M.useState(!1);M.useEffect(()=>{k?(U(!0),E(null),we.getProjectFiles(k).then(pe=>{E(pe),U(!1)}).catch(pe=>{console.error("Failed to load file tree:",pe),E({error:pe.message||"Failed to load files"}),U(!1)})):E(null)},[k]);const F=d.find(pe=>pe.id===u),_=t==null?void 0:t.raw,R=((ce=(W=(T=_==null?void 0:_.details)==null?void 0:T.deadCode)==null?void 0:W.fullyDeadFiles)==null?void 0:ce.length)||((Ne=(ke=(ue=_==null?void 0:_.details)==null?void 0:ue.deadCode)==null?void 0:ke.orphanFiles)==null?void 0:Ne.length)||0,G=((Pe=(Re=_==null?void 0:_.details)==null?void 0:Re.unusedDeps)==null?void 0:Pe.length)||0,Q=R+G,ne=((Fe=_==null?void 0:_.licenses)==null?void 0:Fe.byLicense)||{},ee=["GPL","AGPL","LGPL","SSPL"];let H=0;Object.keys(ne).forEach(pe=>{ee.some(nt=>pe.toUpperCase().includes(nt))&&(H+=ne[pe].length)});const V=(((pt=(De=_==null?void 0:_.duplicates)==null?void 0:De.similarBlocks)==null?void 0:pt.length)||0)+(((Lt=(Ye=_==null?void 0:_.duplicates)==null?void 0:Ye.duplicateFunctions)==null?void 0:Lt.length)||0),q=((hs=(Jt=_==null?void 0:_.decayAnalysis)==null?void 0:Jt.summary)==null?void 0:hs.highRisk)||0,Y=[{icon:uj,label:"Overview",href:"/",badge:null,featureKey:null},{icon:zo,label:"Intelligence",href:"/intelligence",badge:q>0?q:null,featureKey:null},{icon:Pj,label:"Action List",href:"/action-list",badge:null,featureKey:null},{icon:gn,label:"Waste",href:"/waste",badge:Q>0?Q:null,featureKey:null},{icon:wn,label:"Security",href:"/security",badge:((us=t==null?void 0:t.metrics)==null?void 0:us.security)||null,featureKey:null},{icon:$t,label:"Dependencies",href:"/dependencies",badge:((Le=t==null?void 0:t.metrics)==null?void 0:Le.outdated)||null,featureKey:null},{icon:Rl,label:"Emissions",href:"/emissions",badge:null,featureKey:"emissions"},{icon:Bo,label:"Bundles",href:"/bundles",badge:null,featureKey:"bundles"},{icon:Io,label:"CSS Analysis",href:"/css",badge:null,featureKey:"cssAnalysis"},{icon:_t,label:"Duplicates",href:"/duplicates",badge:V>0?V:null,featureKey:"duplicates"},{icon:Qs,label:"Licenses",href:"/licenses",badge:H>0?H:null,featureKey:"licenses"},{icon:Qs,label:"Heavy Deps",href:"/heavy-deps",badge:null,featureKey:"heavyDeps"},{icon:Jo,label:"Assets",href:"/assets",badge:null,featureKey:"assets"},{icon:Rr,label:"Build Logs",href:"/build-logs",badge:null,featureKey:"buildLogs"},{icon:ny,label:"Fix Commands",href:"/quick-fixes",badge:null,featureKey:null},{icon:ec,label:"Settings",href:"/settings",badge:null,featureKey:null},{icon:X0,label:"Integrations",href:"/integrations",badge:null,featureKey:null},{icon:Q0,label:"History",href:"/history",badge:null,featureKey:null}].filter(pe=>!pe.featureKey||y[pe.featureKey]),X=pe=>pe?new Date(pe).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",ie=async pe=>{confirm("Remove this project? This will release the license slot.")&&await g(pe),S(null)};return r.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex",children:[r.jsxs("aside",{className:"w-56 bg-[#0f0f0f] border-r border-white/10 flex flex-col fixed h-screen",children:[r.jsx("div",{className:"px-4 py-1 border-b border-white/10",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("img",{src:"/swynx-white.svg",alt:"Swynx",className:"w-40 h-auto"}),r.jsxs("p",{className:"text-[10px] text-white/40 -mt-1",children:[(o==null?void 0:o.tierName)||"Dashboard","  ",(o==null?void 0:o.daysRemaining)||0," days"]})]})}),r.jsxs("div",{className:"p-3 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("p",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:["Projects (",(c==null?void 0:c.slotsUsed)||0,"/",(c==null?void 0:c.slotsTotal)||0,")"]}),((c==null?void 0:c.slotsRemaining)||0)>0&&r.jsx("button",{onClick:p,className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Add project",children:r.jsx(wi,{className:"w-3.5 h-3.5 text-white/40"})})]}),r.jsxs("div",{className:"space-y-1",children:[d.map(pe=>{var P;const nt=pe.id===u;return r.jsxs("div",{className:`group relative px-2 py-2 rounded-lg cursor-pointer transition-colors ${nt?"bg-primary/20 text-primary":"hover:bg-white/5 text-white/70"}`,onClick:()=>m(pe.id),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wu,{className:`w-4 h-4 flex-shrink-0 ${nt?"text-primary":"text-white/40"}`}),r.jsx("span",{className:"text-sm truncate flex-1 font-medium",children:pe.name}),r.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-white/10 rounded transition-all",onClick:ae=>{ae.stopPropagation(),S(j===pe.id?null:pe.id)},children:r.jsx(yj,{className:"w-3.5 h-3.5 text-white/40"})})]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5 pl-6",title:pe.path,children:pe.path}),j===pe.id&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-[#1a1a1a] border border-white/10 rounded-lg shadow-xl py-1 min-w-[140px]",children:[r.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm text-white/70 hover:bg-white/10 flex items-center gap-2",onClick:ae=>{ae.stopPropagation(),C(pe.path),S(null)},children:[r.jsx(kj,{className:"w-4 h-4"}),"View Files"]}),((P=o==null?void 0:o.tierName)==null?void 0:P.toLowerCase())==="enterprise"&&r.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-2",onClick:ae=>{ae.stopPropagation(),ie(pe.id)},children:[r.jsx(Fr,{className:"w-4 h-4"}),"Remove"]})]})]},pe.id)}),d.length===0&&r.jsxs("button",{onClick:p,className:"w-full flex items-center gap-2 px-2 py-2 rounded-lg text-white/40 hover:bg-white/5 hover:text-white/60 transition-colors",children:[r.jsx(wi,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Add a project"})]}),d.length>0&&r.jsxs("button",{onClick:p,className:"w-full mt-2 flex items-center gap-2 px-3 py-2 rounded-lg border border-dashed border-white/20 text-white/50 hover:border-primary/50 hover:text-primary hover:bg-primary/5 transition-colors text-sm",children:[r.jsx(wi,{className:"w-4 h-4"}),r.jsx("span",{children:"Add New Project"})]})]})]}),r.jsx("nav",{className:"flex-1 p-2 overflow-y-auto",children:Y.map(pe=>{const nt=e===pe.href;return r.jsx(Mc,{href:pe.href,children:r.jsxs("a",{className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm mb-1 transition-colors relative ${nt?"bg-primary/20 text-primary font-medium":"text-white/60 hover:bg-white/5 hover:text-white/80"}`,children:[r.jsx(pe.icon,{className:"w-4 h-4"}),pe.label,pe.badge!==null&&pe.badge>0&&r.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:pe.badge})]})},pe.label)})}),r.jsxs("div",{className:"p-4 border-t border-white/10",children:[r.jsx("button",{onClick:s,disabled:i||!F,className:"w-full btn btn-primary py-2 text-sm disabled:opacity-50 flex items-center justify-center",children:i?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 mr-2 animate-spin"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(zj,{className:"w-4 h-4 mr-2"}),"Rescan Project"]})}),t&&r.jsxs("p",{className:"text-[10px] text-white/30 mt-3 text-center",children:["Last scan: ",X(t==null?void 0:t.timestamp)]}),w&&r.jsxs("p",{className:"text-[10px] text-white/20 mt-2 text-center",children:["v",w]})]})]}),r.jsx("main",{className:"flex-1 ml-56 overflow-auto",children:n}),j&&r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>S(null)}),k&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-lg max-h-[80vh] flex flex-col mx-4",children:[r.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Project Files"}),r.jsx("p",{className:"text-xs text-white/40 mt-1 font-mono",children:k})]}),r.jsx("button",{onClick:()=>C(null),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(Fr,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4",children:I?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-white/40"})}):D!=null&&D.error?r.jsx("p",{className:"text-red-400 text-center py-8",children:D.error}):D!=null&&D.tree?r.jsx(Pb,{items:D.tree}):r.jsx("p",{className:"text-white/40 text-center py-8",children:"Failed to load files"})}),(D==null?void 0:D.truncated)&&r.jsx("p",{className:"p-3 text-xs text-white/30 border-t border-white/10 text-center",children:"Showing first 100 files. Use terminal for full listing."})]})})]})}function Pb({items:n,depth:e=0}){const[t,s]=M.useState({});return!n||n.length===0?r.jsx("p",{className:"text-white/30 text-sm",children:"Empty directory"}):r.jsx("div",{className:"space-y-0.5",children:n.map((i,o)=>{const c=`${e}-${o}-${i.name}`,d=t[c]??e<1;return i.type==="directory"?r.jsxs("div",{children:[r.jsxs("button",{className:"w-full flex items-center gap-1.5 py-1 px-1 hover:bg-white/5 rounded text-left text-sm",style:{paddingLeft:`${e*16+4}px`},onClick:()=>s(u=>({...u,[c]:!d})),children:[r.jsx(Xl,{className:`w-3.5 h-3.5 text-white/30 transition-transform ${d?"rotate-90":""}`}),r.jsx(G0,{className:"w-4 h-4 text-yellow-500/70"}),r.jsx("span",{className:i.collapsed?"text-white/30":"text-white/80",children:i.name}),i.collapsed&&r.jsx("span",{className:"text-[10px] text-white/20 ml-1",children:"(ignored)"})]}),d&&i.children&&i.children.length>0&&r.jsx(Pb,{items:i.children,depth:e+1})]},c):r.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-1 text-sm text-white/60",style:{paddingLeft:`${e*16+22}px`},children:[r.jsx(K0,{className:"w-4 h-4 text-white/30"}),r.jsx("span",{className:"truncate",children:i.name})]},c)})})}const M0={Discovering:{icon:Qt,color:"text-blue-400",bg:"bg-blue-500/20"},Parsing:{icon:Qt,color:"text-cyan-400",bg:"bg-cyan-500/20"},JavaScript:{icon:Qt,color:"text-yellow-400",bg:"bg-yellow-500/20"},TypeScript:{icon:Qt,color:"text-blue-400",bg:"bg-blue-500/20"},CSS:{icon:Qt,color:"text-pink-400",bg:"bg-pink-500/20"},assets:{icon:Qt,color:"text-purple-400",bg:"bg-purple-500/20"},Dependencies:{icon:$t,color:"text-orange-400",bg:"bg-orange-500/20"},import:{icon:tc,color:"text-amber-400",bg:"bg-amber-500/20"},dead:{icon:yt,color:"text-red-400",bg:"bg-red-500/20"},Dead:{icon:yt,color:"text-red-400",bg:"bg-red-500/20"},duplicate:{icon:Qt,color:"text-violet-400",bg:"bg-violet-500/20"},Duplicate:{icon:Qt,color:"text-violet-400",bg:"bg-violet-500/20"},security:{icon:wn,color:"text-red-400",bg:"bg-red-500/20"},Security:{icon:wn,color:"text-red-400",bg:"bg-red-500/20"},vulnerabilities:{icon:cj,color:"text-red-400",bg:"bg-red-500/20"},license:{icon:Qs,color:"text-emerald-400",bg:"bg-emerald-500/20"},License:{icon:Qs,color:"text-emerald-400",bg:"bg-emerald-500/20"},outdated:{icon:$t,color:"text-orange-400",bg:"bg-orange-500/20"},Outdated:{icon:$t,color:"text-orange-400",bg:"bg-orange-500/20"},Analysing:{icon:$t,color:"text-blue-400",bg:"bg-blue-500/20"},bundle:{icon:$t,color:"text-indigo-400",bg:"bg-indigo-500/20"},Bundle:{icon:$t,color:"text-indigo-400",bg:"bg-indigo-500/20"},emission:{icon:Rl,color:"text-green-400",bg:"bg-green-500/20"},Emission:{icon:Rl,color:"text-green-400",bg:"bg-green-500/20"},carbon:{icon:Rl,color:"text-green-400",bg:"bg-green-500/20"},Finaliz:{icon:as,color:"text-emerald-400",bg:"bg-emerald-500/20"},default:{icon:je,color:"text-primary",bg:"bg-primary/20"}};function v5(n){for(const[e,t]of Object.entries(M0))if(n.includes(e))return t;return M0.default}function j5({entries:n}){const e=M.useRef(null);return M.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[n]),r.jsxs("div",{ref:e,className:"font-mono text-xs space-y-1 h-[320px] overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent pr-2",children:[n.map((t,s)=>{const i=v5(t.phase),o=i.icon,c=t.status==="active",d=s===n.length-1;return r.jsxs("div",{className:`
              flex items-center gap-2 py-1.5 px-2 rounded-lg transition-all duration-300
              ${c?"bg-white/5 border border-white/10":"opacity-50"}
              ${d&&c?"ring-1 ring-primary/30":""}
            `,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center shrink-0 ${i.bg}`,children:t.status==="complete"?r.jsx(as,{className:"w-3 h-3 text-emerald-400"}):r.jsx(o,{className:`w-3 h-3 ${i.color} ${c?"animate-pulse":""}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`text-[10px] uppercase tracking-wider ${i.color} font-semibold shrink-0`,children:t.phase.split(" ")[0]}),r.jsx("span",{className:"text-white/70 truncate text-xs",children:t.detail})]}),c&&r.jsx("div",{className:"mt-1 h-1 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.max(t.progress,5)}%`}})})]}),r.jsx("div",{className:"shrink-0 w-12 text-right",children:t.status==="complete"?r.jsx("span",{className:"text-emerald-400/60 text-[10px]",children:"done"}):r.jsxs("span",{className:"text-white/40 text-[10px]",children:[Math.round(t.progress),"%"]})})]},t.id)}),n.length===0&&r.jsxs("div",{className:"flex items-center justify-center h-full text-white/30",children:[r.jsx(je,{className:"w-4 h-4 animate-spin mr-2"}),r.jsx("span",{children:"Initializing scan engine..."})]})]})}function xu({icon:n,label:e,value:t,color:s}){return r.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/10",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg ${s} flex items-center justify-center`,children:r.jsx(n,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold font-mono text-white",children:t.toLocaleString()}),r.jsx("div",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:e})]})]})})}function N5({scanProgress:n}){const e=n.percent||0,t=n.phase||"Initializing",s=n.detail||"",i=n.stats||{filesAnalyzed:0,functionsFound:0,issuesFound:0},o=n.current||0,c=n.total||0,[d,u]=M.useState([]),m=M.useRef(""),p=M.useRef(""),g=M.useRef(0),y=M.useRef(null);return M.useEffect(()=>{const w=Date.now();if(t!==p.current){y.current&&u(j=>j.map(S=>S.id===y.current?{...S,status:"complete",progress:100}:S));const v=`entry-${g.current++}`;y.current=v,u(j=>[...j,{id:v,phase:t,detail:s||"Starting...",status:"active",progress:0,timestamp:w}].slice(-50)),p.current=t,m.current=s;return}if(s&&s!==m.current){y.current&&u(k=>k.map(C=>C.id===y.current?{...C,status:"complete",progress:100}:C));const v=`entry-${g.current++}`;y.current=v;const j=e,S=s.includes("/")&&s.split("/").pop()||s;u(k=>[...k,{id:v,phase:t,detail:S,status:"active",progress:j,timestamp:w}].slice(-50)),m.current=s}else y.current&&u(v=>v.map(j=>j.id===y.current?{...j,progress:Math.max(j.progress,e),timestamp:w}:j))},[t,s,o,c,e,n]),r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a]/90 backdrop-blur-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-emerald-500/5"}),r.jsxs("div",{className:"relative z-10 w-full max-w-3xl px-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"flex items-center justify-center mb-3",children:r.jsx("img",{src:"/favicon.svg",alt:"Swynx",className:"w-16 h-16"})}),r.jsx("p",{className:"text-white/40 text-sm",children:t==="Complete"?"Analysis Complete":"Deep Code Analysis in Progress"})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-white",children:t}),r.jsxs("span",{className:"text-xs text-white/50 font-mono",children:[Math.round(e),"%"]})]}),r.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${t==="Complete"?"bg-emerald-500":"bg-gradient-to-r from-primary via-emerald-500 to-primary bg-[length:200%_100%] animate-[gradient_2s_ease-in-out_infinite]"}`,style:{width:`${Math.max(e,2)}%`}})}),c>0&&r.jsxs("div",{className:"text-xs text-white/40 mt-1 font-mono",children:[o," / ",c]})]}),r.jsxs("div",{className:"px-4 py-4 bg-black/40",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),r.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/40",children:"Live Activity"})]}),r.jsx(j5,{entries:d})]}),r.jsxs("div",{className:"px-5 py-4 border-t border-white/10 grid grid-cols-3 gap-3",children:[r.jsx(xu,{icon:Qt,label:"Files",value:i.filesAnalyzed||o,color:"bg-blue-500/30"}),r.jsx(xu,{icon:gj,label:"Functions",value:i.functionsFound,color:"bg-emerald-500/30"}),r.jsx(xu,{icon:yt,label:"Issues",value:i.issuesFound||0,color:"bg-orange-500/30"})]})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-white/30",children:[r.jsx(Tj,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Air-Gapped  Secure  Local Analysis Only"}),r.jsx(wn,{className:"w-3 h-3"})]})]})]})}function k5(){const{activateLicense:n,error:e}=_r(),[t,s]=M.useState(""),[i,o]=M.useState(""),[c,d]=M.useState(!1),[u,m]=M.useState(null),[p,g]=M.useState(!1);M.useEffect(()=>{const w=new URLSearchParams(window.location.search),v=w.get("key")||w.get("license");v&&s(v)},[]);const y=async w=>{w.preventDefault(),m(null),d(!0);try{await n(t.trim(),i.trim()||void 0)?g(!0):m(e||"Activation failed. Please check your license key.")}catch(v){m(v instanceof Error?v.message:"Activation failed")}finally{d(!1)}};return p?r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(or,{className:"w-8 h-8 text-emerald-500"})}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"License Activated!"}),r.jsx("p",{className:"text-white/60",children:"Redirecting to project selection..."})]})}):r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:"/swynx-white.svg",alt:"Swynx",className:"h-20 mx-auto mb-4"}),r.jsx("p",{className:"text-white/50",children:"Dead code detection that learns"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 p-6",children:[r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"License Key"}),r.jsxs("div",{className:"relative",children:[r.jsx(Y0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),r.jsx("input",{type:"text",value:t,onChange:w=>s(w.target.value),placeholder:"TRIAL-XXXX-XXXX-XXXX",className:"w-full bg-white/5 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary",autoFocus:!0})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-white/70 mb-2",children:["Email ",r.jsx("span",{className:"text-white/30",children:"(optional)"})]}),r.jsx("input",{type:"email",value:i,onChange:w=>o(w.target.value),placeholder:"your@email.com",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary"})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Xo,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-400",children:u})]}),r.jsx("button",{type:"submit",disabled:c||!t.trim(),className:"w-full bg-primary text-black font-bold py-3 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Activating..."]}):"Activate License"})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[r.jsx("p",{className:"text-center text-sm text-white/40 mb-4",children:"Don't have a license?"}),r.jsxs("a",{href:"https://swynx.io",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-primary hover:text-primary/80",children:[r.jsx(Jl,{className:"w-4 h-4"}),"Get a license at swynx.io"]})]})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{className:"p-4 bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("p",{className:"text-2xl font-bold text-primary mb-1",children:"Air-Gapped"}),r.jsx("p",{className:"text-xs text-white/40",children:"Your code never leaves"})]}),r.jsxs("div",{className:"p-4 bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400 mb-1",children:"Self-Hosted"}),r.jsx("p",{className:"text-xs text-white/40",children:"100% on your infra"})]})]})]})})}function S5(){const{slots:n,registeredProjects:e,registerProject:t,goToDashboard:s,license:i,setSelectedProjectId:o}=_r(),[c,d]=M.useState(""),[u,m]=M.useState(""),[p,g]=M.useState(!1),[y,w]=M.useState(null),[v,j]=M.useState(!1),[S,k]=M.useState(!1),C=M.useRef(null),D=async F=>{F.preventDefault(),c.trim()&&j(!0)},E=async()=>{j(!1),w(null),g(!0);try{const F=await t(c.trim(),u.trim()||void 0);F.success||w(F.error||"Failed to register project")}catch(F){w(F instanceof Error?F.message:"Failed to register project")}finally{g(!1)}},I=F=>{var R;F.preventDefault(),k(!1);const _=F.dataTransfer.items;if(_&&_.length>0){const G=_[0];if(G.kind==="file"){const Q=(R=G.webkitGetAsEntry)==null?void 0:R.call(G);Q!=null&&Q.isDirectory&&w("Drag & drop not supported in browser. Please paste the full project path.")}}},U=()=>{var F;(F=C.current)==null||F.focus(),w("Paste the full path to your project directory (e.g., /Users/john/my-project)"),setTimeout(()=>w(null),5e3)};return r.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:[r.jsxs("div",{className:"w-full max-w-xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Select a Project to Scan"}),i&&r.jsxs("p",{className:"text-sm text-white/40",children:[i.tierName," License  ",i.daysRemaining," days remaining"]})]}),e.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-sm font-medium text-white/60 mb-3",children:"Your Projects"}),r.jsx("div",{className:"space-y-2",children:e.map(F=>r.jsxs("button",{onClick:()=>{o(F.id),s()},className:"w-full flex items-center gap-3 p-4 bg-[#141414] rounded-xl border border-white/10 hover:border-primary/50 transition-colors text-left",children:[r.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center",children:r.jsx(wu,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:F.name}),r.jsx("p",{className:"text-xs text-white/40 truncate",children:F.path})]}),F.lastScanAt&&r.jsxs("span",{className:"text-xs text-white/30",children:["Last scan: ",new Date(F.lastScanAt).toLocaleDateString()]})]},F.id))}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-px bg-white/10"}),r.jsx("span",{className:"text-xs text-white/30",children:"or add another project"}),r.jsx("div",{className:"flex-1 h-px bg-white/10"})]})]}),r.jsx("div",{className:`bg-[#141414] rounded-2xl border-2 border-dashed transition-colors p-6 ${S?"border-primary bg-primary/5":"border-white/10"}`,onDragOver:F=>{F.preventDefault(),k(!0)},onDragLeave:()=>k(!1),onDrop:I,children:r.jsxs("form",{onSubmit:D,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Project Name"}),r.jsx("input",{type:"text",value:u,onChange:F=>m(F.target.value),placeholder:"My Awesome Project",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary text-sm",autoFocus:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Project Path"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:C,type:"text",value:c,onChange:F=>d(F.target.value),placeholder:"/Users/john/projects/my-app",className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary font-mono text-sm"}),r.jsx("button",{type:"button",onClick:U,className:"px-4 py-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors",children:r.jsx(wu,{className:"w-5 h-5 text-white/60"})})]})]}),r.jsx("p",{className:"text-sm text-white/40 mb-6 text-center",children:"Or drag and drop a folder here"}),y&&r.jsxs("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Xo,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-400",children:y})]}),r.jsxs("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Or,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-white/60",children:[r.jsx("p",{className:"mb-1",children:(n==null?void 0:n.slotsTotal)===-1?r.jsx(r.Fragment,{children:"Unlimited project slots available."}):r.jsxs(r.Fragment,{children:["This will use ",r.jsxs("strong",{className:"text-white",children:["1 of ",(n==null?void 0:n.slotsTotal)||0]})," project slots."]})}),r.jsxs("p",{className:"text-white/40",children:[(n==null?void 0:n.slotsUsed)||0," slot",(n==null?void 0:n.slotsUsed)!==1?"s":""," used  ",(n==null?void 0:n.slotsRemaining)===-1?"unlimited":(n==null?void 0:n.slotsRemaining)||0," remaining"]})]})]}),r.jsx("button",{type:"submit",disabled:p||!c.trim()||(n==null?void 0:n.slotsRemaining)!==-1&&((n==null?void 0:n.slotsRemaining)||0)<=0,className:"w-full bg-primary text-black font-bold py-3 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Adding Project..."]}):r.jsxs(r.Fragment,{children:[r.jsx(wi,{className:"w-5 h-5"}),"Scan This Project"]})})]})}),n&&n.slotsRemaining!==-1&&n.slotsRemaining<=0&&r.jsxs("div",{className:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Xo,{className:"w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-orange-400 font-medium",children:"No slots available"}),r.jsx("p",{className:"text-white/50",children:"Remove an existing project to add a new one, or upgrade your license."})]})]})]}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Project?"}),r.jsxs("p",{className:"text-white/60 mb-4",children:["This will use ",r.jsx("strong",{className:"text-white",children:"1 project slot"})," from your license."]}),r.jsx("div",{className:"p-4 bg-white/5 rounded-lg mb-6 font-mono text-sm text-white/80 truncate",children:c}),r.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Projects are locked to your license for the license period. You can release a slot by removing a project."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors flex items-center justify-center gap-2",children:[r.jsx(Fr,{className:"w-4 h-4"}),"Cancel"]}),r.jsxs("button",{onClick:E,className:"flex-1 px-4 py-3 bg-primary text-black font-bold rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[r.jsx(as,{className:"w-4 h-4"}),"Yes, Add Project"]})]})]})})]})}function C5(){const[,n]=Fi(),[e,t]=M.useState([]),[s,i]=M.useState(!0),[o,c]=M.useState(""),[d,u]=M.useState("");M.useEffect(()=>{m()},[o]);async function m(){i(!0);try{const g=await As.getCustomers(o||void 0);t(g.customers)}catch(g){console.error("Failed to load customers:",g)}finally{i(!1)}}function p(g){g.preventDefault(),c(d)}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sy,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Customers"})]}),r.jsxs("button",{onClick:()=>n("/admin/customers/new"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(wi,{className:"w-4 h-4"}),"New Customer"]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("form",{onSubmit:p,className:"flex gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx($j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),r.jsx("input",{type:"text",value:d,onChange:g=>u(g.target.value),placeholder:"Search by name, email, or company...",className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:border-primary/50"})]}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Search"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("h2",{className:"font-bold",children:s?"Loading...":`${e.length} Customer${e.length!==1?"s":""}`})}),s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-white/40"})}):e.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-white/40",children:o?"No customers match your search":"No customers yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:e.map(g=>r.jsxs("button",{onClick:()=>n(`/admin/customers/${g.id}`),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-white truncate",children:g.name}),r.jsx("div",{className:"text-sm text-white/50 truncate",children:g.email}),g.company&&r.jsx("div",{className:"text-sm text-white/30 truncate",children:g.company})]}),r.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-primary font-medium",children:g.activeLicenseCount||0}),r.jsx("span",{className:"text-white/40",children:" active"})]}),r.jsxs("div",{className:"text-xs text-white/30",children:[g.licenseCount||0," total license",(g.licenseCount||0)!==1?"s":""]})]}),r.jsx(Xl,{className:"w-4 h-4 text-white/30"})]})]},g.id))})]})]})]})}function M5(){const[,n]=Fi(),t=I0().id,[s,i]=M.useState(null),[o,c]=M.useState([]),[d,u]=M.useState([]),[m,p]=M.useState(!0),[g,y]=M.useState(!1),[w,v]=M.useState({name:"",email:"",company:"",notes:""}),[j,S]=M.useState(!1),[k,C]=M.useState([]),[D,E]=M.useState(null),[I,U]=M.useState(!1),[F,_]=M.useState("starter");M.useEffect(()=>{R(),G()},[t]);async function R(){if(t){p(!0);try{const q=await As.getCustomer(t);i(q.customer),c(q.licenses),u(q.emailHistory),v({name:q.customer.name,email:q.customer.email,company:q.customer.company||"",notes:q.customer.notes||""})}catch(q){console.error("Failed to load customer:",q)}finally{p(!1)}}}async function G(){try{const q=await As.getEmailTemplates();C(q.templates)}catch(q){console.error("Failed to load templates:",q)}}async function Q(){if(t){S(!0);try{await As.updateCustomer(t,w),await R(),y(!1)}catch(q){console.error("Failed to update customer:",q)}finally{S(!1)}}}async function ne(){if(!(!t||!s)&&confirm(`Delete customer "${s.name}"? This cannot be undone.`))try{await As.deleteCustomer(t),n("/admin/customers")}catch(q){alert(q.message||"Failed to delete customer")}}async function ee(q,de){E(`${q}-${de}`);try{await As.sendEmail(q,de),await R(),alert("Email sent successfully!")}catch(Y){alert(Y.message||"Failed to send email")}finally{E(null)}}async function H(){if(t)try{await As.addLicenseToCustomer(t,{tier:F}),U(!1),await R()}catch(q){alert(q.message||"Failed to add license")}}async function V(q){if(t&&confirm("Remove this license from the customer?"))try{await As.removeLicenseFromCustomer(t,q),await R()}catch(de){alert(de.message||"Failed to remove license")}}return m?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):s?r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(pf,{className:"w-5 h-5 text-white/60"})}),r.jsx(Qx,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:s.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-2 px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[r.jsx(Bj,{className:"w-4 h-4"}),"Edit"]}),r.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[r.jsx(gn,{className:"w-4 h-4"}),"Delete"]})]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Qx,{className:"w-5 h-5 text-primary"}),r.jsx("h2",{className:"font-bold",children:"Customer Information"})]}),r.jsx("div",{className:"p-6",children:g?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:w.name,onChange:q=>v({...w,name:q.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:w.email,onChange:q=>v({...w,email:q.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Company"}),r.jsx("input",{type:"text",value:w.company,onChange:q=>v({...w,company:q.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Notes"}),r.jsx("textarea",{value:w.notes,onChange:q=>v({...w,notes:q.target.value}),rows:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:Q,disabled:j,className:"px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 disabled:opacity-50",children:j?"Saving...":"Save Changes"}),r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20",children:"Cancel"})]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qx,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-white/60",children:s.email})]}),s.company&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dj,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-white/60",children:s.company})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(U0,{className:"w-4 h-4 text-white/40"}),r.jsxs("span",{className:"text-white/60",children:["Created ",new Date(s.createdAt).toLocaleDateString()]})]}),s.notes&&r.jsx("div",{className:"mt-4 p-3 bg-white/5 rounded-lg text-white/60 text-sm",children:s.notes})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Y0,{className:"w-5 h-5 text-emerald-400"}),r.jsxs("h2",{className:"font-bold",children:["Licenses (",o.length,")"]})]}),r.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-1 px-3 py-1 text-sm bg-white/10 rounded-lg hover:bg-white/20",children:[r.jsx(wi,{className:"w-3 h-3"}),"Add License"]})]}),I&&r.jsx("div",{className:"px-6 py-4 border-b border-white/10 bg-white/5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("select",{value:F,onChange:q=>_(q.target.value),className:"px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",children:[r.jsx("option",{value:"trial",children:"Trial"}),r.jsx("option",{value:"starter",children:"Starter"}),r.jsx("option",{value:"team",children:"Team"}),r.jsx("option",{value:"enterprise",children:"Enterprise"})]}),r.jsx("button",{onClick:H,className:"px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90",children:"Create License"}),r.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20",children:"Cancel"})]})}),o.length===0?r.jsx("div",{className:"px-6 py-8 text-center text-white/40",children:"No licenses yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:o.map(q=>r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("code",{className:"text-primary text-sm",children:q.key}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${q.status==="active"?"bg-emerald-500/20 text-emerald-400":q.status==="expired"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:q.status}),r.jsx("span",{className:"text-sm text-white/40",children:q.tier}),q.cicdEnabled&&r.jsx("span",{className:"text-xs text-blue-400",children:"CI/CD"})]}),r.jsxs("div",{className:"text-xs text-white/30 mt-1",children:["Expires: ",new Date(q.expires).toLocaleDateString(),q.daysRemaining!==void 0&&q.daysRemaining>0&&r.jsxs("span",{children:[" (",q.daysRemaining," days)"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"px-2 py-1 text-xs bg-white/5 border border-white/10 rounded focus:outline-none",onChange:de=>{de.target.value&&(ee(de.target.value,q.key),de.target.value="")},disabled:D!==null,value:"",children:[r.jsx("option",{value:"",children:"Send Email..."}),k.map(de=>r.jsx("option",{value:de.name,children:de.name},de.name))]}),r.jsx("button",{onClick:()=>V(q.key),className:"p-1 text-white/30 hover:text-red-400 transition-colors",title:"Remove license",children:r.jsx(gn,{className:"w-4 h-4"})})]})]})},q.key))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(qx,{className:"w-5 h-5 text-blue-400"}),r.jsxs("h2",{className:"font-bold",children:["Email History (",d.length,")"]})]}),d.length===0?r.jsx("div",{className:"px-6 py-8 text-center text-white/40",children:"No emails sent yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:d.map((q,de)=>r.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:q.template}),q.licenseKey&&r.jsxs("div",{className:"text-xs text-white/30",children:["To: ",q.licenseKey]})]}),r.jsx("div",{className:"text-xs text-white/40",children:new Date(q.sentAt).toLocaleString()})]},de))})]})]})]}):r.jsx("div",{className:"p-6 text-center text-white/40",children:"Customer not found"})}function A5(){const[,n]=Fi(),[e,t]=M.useState(!1),[s,i]=M.useState(null),[o,c]=M.useState({name:"",email:"",company:"",notes:"",createLicense:!1,tier:"starter",cicdEnabled:!1});async function d(u){u.preventDefault(),i(null),t(!0);try{const m=await As.createCustomer({name:o.name,email:o.email,company:o.company||void 0,notes:o.notes||void 0,createLicenseWith:o.createLicense?{tier:o.tier,cicdEnabled:o.cicdEnabled}:void 0});n(`/admin/customers/${m.customer.id}`)}catch(m){i(m.message||"Failed to create customer")}finally{t(!1)}}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(pf,{className:"w-5 h-5 text-white/60"})}),r.jsx(Uj,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"New Customer"})]}),r.jsx("div",{className:"p-6 max-w-xl",children:r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s&&r.jsx("div",{className:"px-4 py-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:s}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsx("h2",{className:"font-bold mb-4",children:"Customer Information"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm text-white/60 mb-1",children:["Name ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:o.name,onChange:u=>c({...o,name:u.target.value}),placeholder:"John Smith",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm text-white/60 mb-1",children:["Email ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"email",required:!0,value:o.email,onChange:u=>c({...o,email:u.target.value}),placeholder:"john@example.com",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Company"}),r.jsx("input",{type:"text",value:o.company,onChange:u=>c({...o,company:u.target.value}),placeholder:"Acme Inc",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Notes"}),r.jsx("textarea",{value:o.notes,onChange:u=>c({...o,notes:u.target.value}),placeholder:"How did they find us? What are they interested in?",rows:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"font-bold",children:"Create License"}),r.jsx("button",{type:"button",onClick:()=>c({...o,createLicense:!o.createLicense}),className:`relative w-10 h-6 rounded-full transition-colors ${o.createLicense?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${o.createLicense?"translate-x-4":""}`})})]}),o.createLicense&&r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Tier"}),r.jsxs("select",{value:o.tier,onChange:u=>c({...o,tier:u.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",children:[r.jsx("option",{value:"trial",children:"Trial (14 days)"}),r.jsx("option",{value:"starter",children:"Starter (1 year)"}),r.jsx("option",{value:"team",children:"Team (1 year)"}),r.jsx("option",{value:"enterprise",children:"Enterprise (1 year)"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Enable CI/CD"}),r.jsx("div",{className:"text-xs text-white/40",children:"Allow license to be used in CI/CD pipelines"})]}),r.jsx("button",{type:"button",onClick:()=>c({...o,cicdEnabled:!o.cicdEnabled}),className:`relative w-10 h-6 rounded-full transition-colors ${o.cicdEnabled?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${o.cicdEnabled?"translate-x-4":""}`})})]})]})]}),r.jsx("button",{type:"submit",disabled:e,className:"w-full flex items-center justify-center gap-2 py-3 bg-primary text-black font-bold rounded-lg hover:bg-primary/90 disabled:opacity-50",children:e?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create Customer"})]})})]})}function E5(){const[,n]=Fi(),[e,t]=M.useState([]),[s,i]=M.useState(!0),[o,c]=M.useState(!1),[d,u]=M.useState(!1),[m,p]=M.useState(null),[g,y]=M.useState(null),[w,v]=M.useState({template:"version-release",version:"",changelog:"",downloadUrl:"",dryRun:!0});M.useEffect(()=>{j()},[]);async function j(){try{const C=await As.getEmailTemplates();t(C.templates)}catch(C){console.error("Failed to load templates:",C)}finally{i(!1)}}async function S(){u(!0);try{const C=await As.previewEmail(w.template);p(C.html)}catch(C){console.error("Failed to preview:",C)}finally{u(!1)}}async function k(){if(!(!w.dryRun&&!confirm("Send this email to ALL active license holders?"))){c(!0),y(null);try{const C=await As.broadcastEmail({template:w.template,version:w.version||void 0,changelog:w.changelog||void 0,downloadUrl:w.downloadUrl||void 0,dryRun:w.dryRun});y({sent:C.sent,errors:C.errors})}catch(C){alert(C.message||"Broadcast failed")}finally{c(!1)}}}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(pf,{className:"w-5 h-5 text-white/60"})}),r.jsx(Ij,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Broadcast Email"})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-2xl",children:[r.jsx("div",{className:"px-4 py-3 bg-orange-500/20 border border-orange-500/30 rounded-lg text-orange-400 text-sm",children:"This will send an email to all active license holders. Use dry run mode first to see how many recipients there are."}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Template"}),r.jsx("select",{value:w.template,onChange:C=>v({...w,template:C.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",disabled:s,children:e.map(C=>r.jsxs("option",{value:C.name,children:[C.name," - ",C.subject]},C.name))})]}),w.template==="version-release"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Version"}),r.jsx("input",{type:"text",value:w.version,onChange:C=>v({...w,version:C.target.value}),placeholder:"1.0.6",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Changelog"}),r.jsx("textarea",{value:w.changelog,onChange:C=>v({...w,changelog:C.target.value}),placeholder:`- New feature A
- Bug fix B
- Improvement C`,rows:5,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none font-mono text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Download URL"}),r.jsx("input",{type:"url",value:w.downloadUrl,onChange:C=>v({...w,downloadUrl:C.target.value}),placeholder:"https://github.com/...",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Dry Run Mode"}),r.jsx("div",{className:"text-xs text-white/40",children:"Simulates sending without actually emailing anyone"})]}),r.jsx("button",{type:"button",onClick:()=>v({...w,dryRun:!w.dryRun}),className:`relative w-10 h-6 rounded-full transition-colors ${w.dryRun?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${w.dryRun?"translate-x-4":""}`})})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:S,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 disabled:opacity-50",children:[d?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(q0,{className:"w-4 h-4"}),"Preview"]}),r.jsx("button",{onClick:k,disabled:o,className:`flex-1 flex items-center justify-center gap-2 py-2 font-medium rounded-lg disabled:opacity-50 ${w.dryRun?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-primary text-black hover:bg-primary/90"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),w.dryRun?"Simulating...":"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_j,{className:"w-4 h-4"}),w.dryRun?"Run Simulation":"Send Broadcast"]})})]}),g&&r.jsxs("div",{className:`px-4 py-3 rounded-lg ${w.dryRun?"bg-blue-500/20 border border-blue-500/30 text-blue-400":"bg-emerald-500/20 border border-emerald-500/30 text-emerald-400"}`,children:[r.jsx("div",{className:"font-medium",children:w.dryRun?"Simulation Complete":"Broadcast Complete"}),r.jsxs("div",{className:"text-sm mt-1",children:[w.dryRun?`Would send to ${g.sent} recipients`:`Sent to ${g.sent} recipients`,g.errors>0&&`, ${g.errors} errors`]})]}),m&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold",children:"Email Preview"}),r.jsx("button",{onClick:()=>p(null),className:"text-sm text-white/40 hover:text-white",children:"Close"})]}),r.jsx("iframe",{srcDoc:m,className:"w-full h-[600px] bg-white",title:"Email preview"})]})]})]})}function tr({featureKey:n,children:e}){const{features:t}=_r();return t[n]?r.jsx(r.Fragment,{children:e}):r.jsx("div",{className:"flex items-center justify-center h-[80vh]",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4",children:r.jsx(ec,{className:"w-8 h-8 text-white/20"})}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Feature Disabled"}),r.jsx("p",{className:"text-white/50 mb-6",children:"This feature is currently disabled. You can enable it in Settings under the Features section."}),r.jsxs("a",{href:"/settings",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-black font-bold rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(ec,{className:"w-4 h-4"}),"Open Settings"]})]})})}function A0(){return r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(je,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),r.jsx("p",{className:"text-white/60",children:"Loading Swynx..."})]})})}function L5(){const{scanning:n,scanProgress:e}=St();return r.jsxs(r.Fragment,{children:[n&&e&&r.jsx(N5,{scanProgress:e}),r.jsx(w5,{children:r.jsxs(_0,{children:[r.jsx(ct,{path:"/",component:e2}),r.jsx(ct,{path:"/action-list",component:s2}),r.jsx(ct,{path:"/waste",component:QC}),r.jsx(ct,{path:"/security",component:YC}),r.jsx(ct,{path:"/dependencies",component:XC}),r.jsx(ct,{path:"/emissions",children:()=>r.jsx(tr,{featureKey:"emissions",children:r.jsx(ZC,{})})}),r.jsx(ct,{path:"/intelligence",component:x5}),r.jsx(ct,{path:"/bundles",children:()=>r.jsx(tr,{featureKey:"bundles",children:r.jsx(r5,{})})}),r.jsx(ct,{path:"/css",children:()=>r.jsx(tr,{featureKey:"cssAnalysis",children:r.jsx(i5,{})})}),r.jsx(ct,{path:"/duplicates",children:()=>r.jsx(tr,{featureKey:"duplicates",children:r.jsx(l5,{})})}),r.jsx(ct,{path:"/licenses",children:()=>r.jsx(tr,{featureKey:"licenses",children:r.jsx(a5,{})})}),r.jsx(ct,{path:"/heavy-deps",children:()=>r.jsx(tr,{featureKey:"heavyDeps",children:r.jsx(o5,{})})}),r.jsx(ct,{path:"/assets",children:()=>r.jsx(tr,{featureKey:"assets",children:r.jsx(c5,{})})}),r.jsx(ct,{path:"/build-logs",children:()=>r.jsx(tr,{featureKey:"buildLogs",children:r.jsx(d5,{})})}),r.jsx(ct,{path:"/quick-fixes",component:e5}),r.jsx(ct,{path:"/settings",component:y5}),r.jsx(ct,{path:"/integrations",component:b5}),r.jsx(ct,{path:"/history",component:s5})]})})]})}function P5(){return r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:r.jsxs(_0,{children:[r.jsx(ct,{path:"/admin/customers/new",component:A5}),r.jsx(ct,{path:"/admin/customers/:id",component:M5}),r.jsx(ct,{path:"/admin/customers",component:C5}),r.jsx(ct,{path:"/admin/broadcast",component:E5})]})})}function T5(){const{state:n}=_r(),[e]=Fi();if(e.startsWith("/admin"))return r.jsx(P5,{});switch(n){case"loading":return r.jsx(A0,{});case"activation":return r.jsx(k5,{});case"project-selection":return r.jsx(S5,{});case"dashboard":case"scanning":return r.jsx(L5,{});default:return r.jsx(A0,{})}}function D5(){return r.jsx(Yj,{children:r.jsx(Xj,{children:r.jsx(Jj,{children:r.jsx(T5,{})})})})}zv.createRoot(document.getElementById("root")).render(r.jsx(L0.StrictMode,{children:r.jsx(D5,{})}));export{xc as A,E4 as B,o4 as C,kt as D,te as E,Ue as F,fr as G,Oe as H,Ge as I,Xs as J,ye as K,z5 as L,ws as M,F5 as N,Bk as O,Vk as P,Br as R,Qe as S,Es as T,Dc as W,vn as a,tf as b,U5 as c,$5 as d,_5 as e,V5 as f,W5 as g,ds as h,u4 as i,ze as j,E1 as k,gt as l,Pc as m,Ec as n,w1 as o,B5 as p,ve as q,Gs as r,s4 as s,K as t,Ff as u,H5 as v,a4 as w,Ve as x,bi as y,F1 as z};
