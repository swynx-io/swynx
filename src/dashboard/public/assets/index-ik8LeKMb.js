const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DuxxhjhZ.js","assets/index-DUxhamaE.js","assets/index-C-rNDFGd.js","assets/index-FAZ9K0wx.js","assets/index-usQU3IiF.js","assets/index-f1eqPbpq.js","assets/index-DqHUAMjb.js","assets/index-D-0Su16M.js","assets/index-DhVgXkmM.js","assets/index-C5F2v_c2.js","assets/index-sscL7lFK.js","assets/index-CwX96fPT.js","assets/index-XQAohTlC.js"])))=>i.map(i=>d[i]);
var jv=Object.defineProperty;var Nv=(n,e,t)=>e in n?jv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Cx=(n,e,t)=>Nv(n,typeof e!="symbol"?e+"":e,t);function kv(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(s,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function M0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lh={exports:{}},vl={},Ph={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx;function Sv(){if(Mx)return Oe;Mx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=g&&P[g]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,j={};function S(P,H,q){this.props=P,this.context=H,this.refs=j,this.updater=q||b}S.prototype.isReactComponent={},S.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},S.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function k(){}k.prototype=S.prototype;function M(P,H,q){this.props=P,this.context=H,this.refs=j,this.updater=q||b}var R=M.prototype=new k;R.constructor=M,v(R,S.prototype),R.isPureReactComponent=!0;var E=Array.isArray,B=Object.prototype.hasOwnProperty,I={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function ne(P,H,q){var ce,xe={},Ce=null,Re=null;if(H!=null)for(ce in H.ref!==void 0&&(Re=H.ref),H.key!==void 0&&(Ce=""+H.key),H)B.call(H,ce)&&!O.hasOwnProperty(ce)&&(xe[ce]=H[ce]);var Pe=arguments.length-2;if(Pe===1)xe.children=q;else if(1<Pe){for(var Ie=Array(Pe),De=0;De<Pe;De++)Ie[De]=arguments[De+2];xe.children=Ie}if(P&&P.defaultProps)for(ce in Pe=P.defaultProps,Pe)xe[ce]===void 0&&(xe[ce]=Pe[ce]);return{$$typeof:n,type:P,key:Ce,ref:Re,props:xe,_owner:I.current}}function $(P,H){return{$$typeof:n,type:P.type,key:H,ref:P.ref,props:P.props,_owner:P._owner}}function Z(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function _(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(q){return H[q]})}var V=/\/+/g;function ee(P,H){return typeof P=="object"&&P!==null&&P.key!=null?_(""+P.key):H.toString(36)}function ae(P,H,q,ce,xe){var Ce=typeof P;(Ce==="undefined"||Ce==="boolean")&&(P=null);var Re=!1;if(P===null)Re=!0;else switch(Ce){case"string":case"number":Re=!0;break;case"object":switch(P.$$typeof){case n:case e:Re=!0}}if(Re)return Re=P,xe=xe(Re),P=ce===""?"."+ee(Re,0):ce,E(xe)?(q="",P!=null&&(q=P.replace(V,"$&/")+"/"),ae(xe,H,q,"",function(De){return De})):xe!=null&&(Z(xe)&&(xe=$(xe,q+(!xe.key||Re&&Re.key===xe.key?"":(""+xe.key).replace(V,"$&/")+"/")+P)),H.push(xe)),1;if(Re=0,ce=ce===""?".":ce+":",E(P))for(var Pe=0;Pe<P.length;Pe++){Ce=P[Pe];var Ie=ce+ee(Ce,Pe);Re+=ae(Ce,H,q,Ie,xe)}else if(Ie=y(P),typeof Ie=="function")for(P=Ie.call(P),Pe=0;!(Ce=P.next()).done;)Ce=Ce.value,Ie=ce+ee(Ce,Pe++),Re+=ae(Ce,H,q,Ie,xe);else if(Ce==="object")throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Re}function ie(P,H,q){if(P==null)return P;var ce=[],xe=0;return ae(P,ce,"","",function(Ce){return H.call(q,Ce,xe++)}),ce}function U(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(q){(P._status===0||P._status===-1)&&(P._status=1,P._result=q)},function(q){(P._status===0||P._status===-1)&&(P._status=2,P._result=q)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var de={current:null},K={transition:null},Q={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:K,ReactCurrentOwner:I};function se(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:ie,forEach:function(P,H,q){ie(P,function(){H.apply(this,arguments)},q)},count:function(P){var H=0;return ie(P,function(){H++}),H},toArray:function(P){return ie(P,function(H){return H})||[]},only:function(P){if(!Z(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Oe.Component=S,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=M,Oe.StrictMode=s,Oe.Suspense=u,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Oe.act=se,Oe.cloneElement=function(P,H,q){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ce=v({},P.props),xe=P.key,Ce=P.ref,Re=P._owner;if(H!=null){if(H.ref!==void 0&&(Ce=H.ref,Re=I.current),H.key!==void 0&&(xe=""+H.key),P.type&&P.type.defaultProps)var Pe=P.type.defaultProps;for(Ie in H)B.call(H,Ie)&&!O.hasOwnProperty(Ie)&&(ce[Ie]=H[Ie]===void 0&&Pe!==void 0?Pe[Ie]:H[Ie])}var Ie=arguments.length-2;if(Ie===1)ce.children=q;else if(1<Ie){Pe=Array(Ie);for(var De=0;De<Ie;De++)Pe[De]=arguments[De+2];ce.children=Pe}return{$$typeof:n,type:P.type,key:xe,ref:Ce,props:ce,_owner:Re}},Oe.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:o,_context:P},P.Consumer=P},Oe.createElement=ne,Oe.createFactory=function(P){var H=ne.bind(null,P);return H.type=P,H},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(P){return{$$typeof:d,render:P}},Oe.isValidElement=Z,Oe.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:U}},Oe.memo=function(P,H){return{$$typeof:m,type:P,compare:H===void 0?null:H}},Oe.startTransition=function(P){var H=K.transition;K.transition={};try{P()}finally{K.transition=H}},Oe.unstable_act=se,Oe.useCallback=function(P,H){return de.current.useCallback(P,H)},Oe.useContext=function(P){return de.current.useContext(P)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(P){return de.current.useDeferredValue(P)},Oe.useEffect=function(P,H){return de.current.useEffect(P,H)},Oe.useId=function(){return de.current.useId()},Oe.useImperativeHandle=function(P,H,q){return de.current.useImperativeHandle(P,H,q)},Oe.useInsertionEffect=function(P,H){return de.current.useInsertionEffect(P,H)},Oe.useLayoutEffect=function(P,H){return de.current.useLayoutEffect(P,H)},Oe.useMemo=function(P,H){return de.current.useMemo(P,H)},Oe.useReducer=function(P,H,q){return de.current.useReducer(P,H,q)},Oe.useRef=function(P){return de.current.useRef(P)},Oe.useState=function(P){return de.current.useState(P)},Oe.useSyncExternalStore=function(P,H,q){return de.current.useSyncExternalStore(P,H,q)},Oe.useTransition=function(){return de.current.useTransition()},Oe.version="18.3.1",Oe}var Ax;function Nc(){return Ax||(Ax=1,Ph.exports=Sv()),Ph.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex;function Cv(){if(Ex)return vl;Ex=1;var n=Nc(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(d,u,m){var p,g={},y=null,b=null;m!==void 0&&(y=""+m),u.key!==void 0&&(y=""+u.key),u.ref!==void 0&&(b=u.ref);for(p in u)s.call(u,p)&&!o.hasOwnProperty(p)&&(g[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)g[p]===void 0&&(g[p]=u[p]);return{$$typeof:e,type:d,key:y,ref:b,props:g,_owner:i.current}}return vl.Fragment=t,vl.jsx=c,vl.jsxs=c,vl}var Lx;function Mv(){return Lx||(Lx=1,Lh.exports=Cv()),Lh.exports}var r=Mv(),C=Nc();const A0=M0(C),Av=kv({__proto__:null,default:A0},[C]);var po={},Th={exports:{}},ss={},Dh={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function Ev(){return Px||(Px=1,(function(n){function e(K,Q){var se=K.length;K.push(Q);e:for(;0<se;){var P=se-1>>>1,H=K[P];if(0<i(H,Q))K[P]=Q,K[se]=H,se=P;else break e}}function t(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var Q=K[0],se=K.pop();if(se!==Q){K[0]=se;e:for(var P=0,H=K.length,q=H>>>1;P<q;){var ce=2*(P+1)-1,xe=K[ce],Ce=ce+1,Re=K[Ce];if(0>i(xe,se))Ce<H&&0>i(Re,xe)?(K[P]=Re,K[Ce]=se,P=Ce):(K[P]=xe,K[ce]=se,P=ce);else if(Ce<H&&0>i(Re,se))K[P]=Re,K[Ce]=se,P=Ce;else break e}}return Q}function i(K,Q){var se=K.sortIndex-Q.sortIndex;return se!==0?se:K.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var u=[],m=[],p=1,g=null,y=3,b=!1,v=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(K){for(var Q=t(m);Q!==null;){if(Q.callback===null)s(m);else if(Q.startTime<=K)s(m),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=t(m)}}function E(K){if(j=!1,R(K),!v)if(t(u)!==null)v=!0,U(B);else{var Q=t(m);Q!==null&&de(E,Q.startTime-K)}}function B(K,Q){v=!1,j&&(j=!1,k(ne),ne=-1),b=!0;var se=y;try{for(R(Q),g=t(u);g!==null&&(!(g.expirationTime>Q)||K&&!_());){var P=g.callback;if(typeof P=="function"){g.callback=null,y=g.priorityLevel;var H=P(g.expirationTime<=Q);Q=n.unstable_now(),typeof H=="function"?g.callback=H:g===t(u)&&s(u),R(Q)}else s(u);g=t(u)}if(g!==null)var q=!0;else{var ce=t(m);ce!==null&&de(E,ce.startTime-Q),q=!1}return q}finally{g=null,y=se,b=!1}}var I=!1,O=null,ne=-1,$=5,Z=-1;function _(){return!(n.unstable_now()-Z<$)}function V(){if(O!==null){var K=n.unstable_now();Z=K;var Q=!0;try{Q=O(!0,K)}finally{Q?ee():(I=!1,O=null)}}else I=!1}var ee;if(typeof M=="function")ee=function(){M(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ie=ae.port2;ae.port1.onmessage=V,ee=function(){ie.postMessage(null)}}else ee=function(){S(V,0)};function U(K){O=K,I||(I=!0,ee())}function de(K,Q){ne=S(function(){K(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){v||b||(v=!0,U(B))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(K){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var se=y;y=Q;try{return K()}finally{y=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,Q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=y;y=K;try{return Q()}finally{y=se}},n.unstable_scheduleCallback=function(K,Q,se){var P=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?P+se:P):se=P,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=se+H,K={id:p++,callback:Q,priorityLevel:K,startTime:se,expirationTime:H,sortIndex:-1},se>P?(K.sortIndex=se,e(m,K),t(u)===null&&K===t(m)&&(j?(k(ne),ne=-1):j=!0,de(E,se-P))):(K.sortIndex=H,e(u,K),v||b||(v=!0,U(B))),K},n.unstable_shouldYield=_,n.unstable_wrapCallback=function(K){var Q=y;return function(){var se=y;y=Q;try{return K.apply(this,arguments)}finally{y=se}}}})(Rh)),Rh}var Tx;function Lv(){return Tx||(Tx=1,Dh.exports=Ev()),Dh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function Pv(){if(Dx)return ss;Dx=1;var n=Nc(),e=Lv();function t(l){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+l,h=1;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+l+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function o(l,a){c(l,a),c(l+"Capture",a)}function c(l,a){for(i[l]=a,l=0;l<a.length;l++)s.add(a[l])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function y(l){return u.call(g,l)?!0:u.call(p,l)?!1:m.test(l)?g[l]=!0:(p[l]=!0,!1)}function b(l,a,h,f){if(h!==null&&h.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:h!==null?!h.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function v(l,a,h,f){if(a===null||typeof a>"u"||b(l,a,h,f))return!0;if(f)return!1;if(h!==null)switch(h.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function j(l,a,h,f,x,w,N){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=l,this.type=a,this.sanitizeURL=w,this.removeEmptyString=N}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){S[l]=new j(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var a=l[0];S[a]=new j(a,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){S[l]=new j(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){S[l]=new j(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){S[l]=new j(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){S[l]=new j(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){S[l]=new j(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){S[l]=new j(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){S[l]=new j(l,5,!1,l.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function M(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var a=l.replace(k,M);S[a]=new j(a,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var a=l.replace(k,M);S[a]=new j(a,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var a=l.replace(k,M);S[a]=new j(a,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){S[l]=new j(l,1,!1,l.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){S[l]=new j(l,1,!1,l.toLowerCase(),null,!0,!0)});function R(l,a,h,f){var x=S.hasOwnProperty(a)?S[a]:null;(x!==null?x.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(v(a,h,x,f)&&(h=null),f||x===null?y(a)&&(h===null?l.removeAttribute(a):l.setAttribute(a,""+h)):x.mustUseProperty?l[x.propertyName]=h===null?x.type===3?!1:"":h:(a=x.attributeName,f=x.attributeNamespace,h===null?l.removeAttribute(a):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,f?l.setAttributeNS(f,a,h):l.setAttribute(a,h))))}var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),I=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),_=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),K=Symbol.iterator;function Q(l){return l===null||typeof l!="object"?null:(l=K&&l[K]||l["@@iterator"],typeof l=="function"?l:null)}var se=Object.assign,P;function H(l){if(P===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);P=a&&a[1]||""}return`
`+P+l}var q=!1;function ce(l,a){if(!l||q)return"";q=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var f=W}Reflect.construct(l,[],a)}else{try{a.call()}catch(W){f=W}l.call(a.prototype)}else{try{throw Error()}catch(W){f=W}l()}}catch(W){if(W&&f&&typeof W.stack=="string"){for(var x=W.stack.split(`
`),w=f.stack.split(`
`),N=x.length-1,A=w.length-1;1<=N&&0<=A&&x[N]!==w[A];)A--;for(;1<=N&&0<=A;N--,A--)if(x[N]!==w[A]){if(N!==1||A!==1)do if(N--,A--,0>A||x[N]!==w[A]){var L=`
`+x[N].replace(" at new "," at ");return l.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",l.displayName)),L}while(1<=N&&0<=A);break}}}finally{q=!1,Error.prepareStackTrace=h}return(l=l?l.displayName||l.name:"")?H(l):""}function xe(l){switch(l.tag){case 5:return H(l.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return l=ce(l.type,!1),l;case 11:return l=ce(l.type.render,!1),l;case 1:return l=ce(l.type,!0),l;default:return""}}function Ce(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case O:return"Fragment";case I:return"Portal";case $:return"Profiler";case ne:return"StrictMode";case ee:return"Suspense";case ae:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case _:return(l.displayName||"Context")+".Consumer";case Z:return(l._context.displayName||"Context")+".Provider";case V:var a=l.render;return l=l.displayName,l||(l=a.displayName||a.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ie:return a=l.displayName||null,a!==null?a:Ce(l.type)||"Memo";case U:a=l._payload,l=l._init;try{return Ce(l(a))}catch{}}return null}function Re(l){var a=l.type;switch(l.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=a.render,l=l.displayName||l.name||"",a.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(a);case 8:return a===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Pe(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ie(l){var a=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function De(l){var a=Ie(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,a),f=""+l[a];if(!l.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,w=h.set;return Object.defineProperty(l,a,{configurable:!0,get:function(){return x.call(this)},set:function(N){f=""+N,w.call(this,N)}}),Object.defineProperty(l,a,{enumerable:h.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){l._valueTracker=null,delete l[a]}}}}function At(l){l._valueTracker||(l._valueTracker=De(l))}function tt(l){if(!l)return!1;var a=l._valueTracker;if(!a)return!0;var h=a.getValue(),f="";return l&&(f=Ie(l)?l.checked?"true":"false":l.value),l=f,l!==h?(a.setValue(l),!0):!1}function Me(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Wt(l,a){var h=a.checked;return se({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??l._wrapperState.initialChecked})}function Ys(l,a){var h=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;h=Pe(a.value!=null?a.value:h),l._wrapperState={initialChecked:f,initialValue:h,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function os(l,a){a=a.checked,a!=null&&R(l,"checked",a,!1)}function Tn(l,a){os(l,a);var h=Pe(a.value),f=a.type;if(h!=null)f==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+h):l.value!==""+h&&(l.value=""+h);else if(f==="submit"||f==="reset"){l.removeAttribute("value");return}a.hasOwnProperty("value")?ws(l,a.type,h):a.hasOwnProperty("defaultValue")&&ws(l,a.type,Pe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(l.defaultChecked=!!a.defaultChecked)}function pr(l,a,h){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+l._wrapperState.initialValue,h||a===l.value||(l.value=a),l.defaultValue=a}h=l.name,h!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,h!==""&&(l.name=h)}function ws(l,a,h){(a!=="number"||Me(l.ownerDocument)!==l)&&(h==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+h&&(l.defaultValue=""+h))}var T=Array.isArray;function he(l,a,h,f){if(l=l.options,a){a={};for(var x=0;x<h.length;x++)a["$"+h[x]]=!0;for(h=0;h<l.length;h++)x=a.hasOwnProperty("$"+l[h].value),l[h].selected!==x&&(l[h].selected=x),x&&f&&(l[h].defaultSelected=!0)}else{for(h=""+Pe(h),a=null,x=0;x<l.length;x++){if(l[x].value===h){l[x].selected=!0,f&&(l[x].defaultSelected=!0);return}a!==null||l[x].disabled||(a=l[x])}a!==null&&(a.selected=!0)}}function Ae(l,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},a,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Ne(l,a){var h=a.value;if(h==null){if(h=a.children,a=a.defaultValue,h!=null){if(a!=null)throw Error(t(92));if(T(h)){if(1<h.length)throw Error(t(93));h=h[0]}a=h}a==null&&(a=""),h=a}l._wrapperState={initialValue:Pe(h)}}function Le(l,a){var h=Pe(a.value),f=Pe(a.defaultValue);h!=null&&(h=""+h,h!==l.value&&(l.value=h),a.defaultValue==null&&l.defaultValue!==h&&(l.defaultValue=h)),f!=null&&(l.defaultValue=""+f)}function it(l){var a=l.textContent;a===l._wrapperState.initialValue&&a!==""&&a!==null&&(l.value=a)}function Ht(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(l,a){return l==null||l==="http://www.w3.org/1999/xhtml"?Ht(a):l==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var ze,la=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,f,x){MSApp.execUnsafeLocalFunction(function(){return l(a,h,f,x)})}:l})(function(l,a){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=a;else{for(ze=ze||document.createElement("div"),ze.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ze.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;a.firstChild;)l.appendChild(a.firstChild)}});function cs(l,a){if(a){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=a;return}}l.textContent=a}var Ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_c=["Webkit","ms","Moz","O"];Object.keys(Ut).forEach(function(l){_c.forEach(function(a){a=a+l.charAt(0).toUpperCase()+l.substring(1),Ut[a]=Ut[l]})});function Fi(l,a,h){return a==null||typeof a=="boolean"||a===""?"":h||typeof a!="number"||a===0||Ut.hasOwnProperty(l)&&Ut[l]?(""+a).trim():a+"px"}function xr(l,a){l=l.style;for(var h in a)if(a.hasOwnProperty(h)){var f=h.indexOf("--")===0,x=Fi(h,a[h],f);h==="float"&&(h="cssFloat"),f?l.setProperty(h,x):l[h]=x}}var Ii=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(l,a){if(a){if(Ii[l]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Hc(l,a){if(l.indexOf("-")===-1)return typeof a.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=null;function Uc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var qc=null,$r=null,_r=null;function Hf(l){if(l=ll(l)){if(typeof qc!="function")throw Error(t(280));var a=l.stateNode;a&&(a=Ea(a),qc(l.stateNode,l.type,a))}}function Vf(l){$r?_r?_r.push(l):_r=[l]:$r=l}function Uf(){if($r){var l=$r,a=_r;if(_r=$r=null,Hf(l),a)for(l=0;l<a.length;l++)Hf(a[l])}}function qf(l,a){return l(a)}function Gf(){}var Gc=!1;function Kf(l,a,h){if(Gc)return l(a,h);Gc=!0;try{return qf(l,a,h)}finally{Gc=!1,($r!==null||_r!==null)&&(Gf(),Uf())}}function zi(l,a){var h=l.stateNode;if(h===null)return null;var f=Ea(h);if(f===null)return null;h=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(l=l.type,f=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!f;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(t(231,a,typeof h));return h}var Kc=!1;if(d)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Kc=!1}function Aw(l,a,h,f,x,w,N,A,L){var W=Array.prototype.slice.call(arguments,3);try{a.apply(h,W)}catch(Y){this.onError(Y)}}var _i=!1,aa=null,oa=!1,Qc=null,Ew={onError:function(l){_i=!0,aa=l}};function Lw(l,a,h,f,x,w,N,A,L){_i=!1,aa=null,Aw.apply(Ew,arguments)}function Pw(l,a,h,f,x,w,N,A,L){if(Lw.apply(this,arguments),_i){if(_i){var W=aa;_i=!1,aa=null}else throw Error(t(198));oa||(oa=!0,Qc=W)}}function gr(l){var a=l,h=l;if(l.alternate)for(;a.return;)a=a.return;else{l=a;do a=l,(a.flags&4098)!==0&&(h=a.return),l=a.return;while(l)}return a.tag===3?h:null}function Qf(l){if(l.tag===13){var a=l.memoizedState;if(a===null&&(l=l.alternate,l!==null&&(a=l.memoizedState)),a!==null)return a.dehydrated}return null}function Jf(l){if(gr(l)!==l)throw Error(t(188))}function Tw(l){var a=l.alternate;if(!a){if(a=gr(l),a===null)throw Error(t(188));return a!==l?null:l}for(var h=l,f=a;;){var x=h.return;if(x===null)break;var w=x.alternate;if(w===null){if(f=x.return,f!==null){h=f;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===h)return Jf(x),l;if(w===f)return Jf(x),a;w=w.sibling}throw Error(t(188))}if(h.return!==f.return)h=x,f=w;else{for(var N=!1,A=x.child;A;){if(A===h){N=!0,h=x,f=w;break}if(A===f){N=!0,f=x,h=w;break}A=A.sibling}if(!N){for(A=w.child;A;){if(A===h){N=!0,h=w,f=x;break}if(A===f){N=!0,f=w,h=x;break}A=A.sibling}if(!N)throw Error(t(189))}}if(h.alternate!==f)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?l:a}function Yf(l){return l=Tw(l),l!==null?Xf(l):null}function Xf(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var a=Xf(l);if(a!==null)return a;l=l.sibling}return null}var Zf=e.unstable_scheduleCallback,em=e.unstable_cancelCallback,Dw=e.unstable_shouldYield,Rw=e.unstable_requestPaint,at=e.unstable_now,Ow=e.unstable_getCurrentPriorityLevel,Jc=e.unstable_ImmediatePriority,tm=e.unstable_UserBlockingPriority,ca=e.unstable_NormalPriority,Bw=e.unstable_LowPriority,sm=e.unstable_IdlePriority,da=null,Xs=null;function Fw(l){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(da,l,void 0,(l.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:$w,Iw=Math.log,zw=Math.LN2;function $w(l){return l>>>=0,l===0?32:31-(Iw(l)/zw|0)|0}var ha=64,ua=4194304;function Wi(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function fa(l,a){var h=l.pendingLanes;if(h===0)return 0;var f=0,x=l.suspendedLanes,w=l.pingedLanes,N=h&268435455;if(N!==0){var A=N&~x;A!==0?f=Wi(A):(w&=N,w!==0&&(f=Wi(w)))}else N=h&~x,N!==0?f=Wi(N):w!==0&&(f=Wi(w));if(f===0)return 0;if(a!==0&&a!==f&&(a&x)===0&&(x=f&-f,w=a&-a,x>=w||x===16&&(w&4194240)!==0))return a;if((f&4)!==0&&(f|=h&16),a=l.entangledLanes,a!==0)for(l=l.entanglements,a&=f;0<a;)h=31-Ds(a),x=1<<h,f|=l[h],a&=~x;return f}function _w(l,a){switch(l){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ww(l,a){for(var h=l.suspendedLanes,f=l.pingedLanes,x=l.expirationTimes,w=l.pendingLanes;0<w;){var N=31-Ds(w),A=1<<N,L=x[N];L===-1?((A&h)===0||(A&f)!==0)&&(x[N]=_w(A,a)):L<=a&&(l.expiredLanes|=A),w&=~A}}function Yc(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function nm(){var l=ha;return ha<<=1,(ha&4194240)===0&&(ha=64),l}function Xc(l){for(var a=[],h=0;31>h;h++)a.push(l);return a}function Hi(l,a,h){l.pendingLanes|=a,a!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,a=31-Ds(a),l[a]=h}function Hw(l,a){var h=l.pendingLanes&~a;l.pendingLanes=a,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=a,l.mutableReadLanes&=a,l.entangledLanes&=a,a=l.entanglements;var f=l.eventTimes;for(l=l.expirationTimes;0<h;){var x=31-Ds(h),w=1<<x;a[x]=0,f[x]=-1,l[x]=-1,h&=~w}}function Zc(l,a){var h=l.entangledLanes|=a;for(l=l.entanglements;h;){var f=31-Ds(h),x=1<<f;x&a|l[f]&a&&(l[f]|=a),h&=~x}}var Ue=0;function rm(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var im,ed,lm,am,om,td=!1,ma=[],Dn=null,Rn=null,On=null,Vi=new Map,Ui=new Map,Bn=[],Vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cm(l,a){switch(l){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Vi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ui.delete(a.pointerId)}}function qi(l,a,h,f,x,w){return l===null||l.nativeEvent!==w?(l={blockedOn:a,domEventName:h,eventSystemFlags:f,nativeEvent:w,targetContainers:[x]},a!==null&&(a=ll(a),a!==null&&ed(a)),l):(l.eventSystemFlags|=f,a=l.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),l)}function Uw(l,a,h,f,x){switch(a){case"focusin":return Dn=qi(Dn,l,a,h,f,x),!0;case"dragenter":return Rn=qi(Rn,l,a,h,f,x),!0;case"mouseover":return On=qi(On,l,a,h,f,x),!0;case"pointerover":var w=x.pointerId;return Vi.set(w,qi(Vi.get(w)||null,l,a,h,f,x)),!0;case"gotpointercapture":return w=x.pointerId,Ui.set(w,qi(Ui.get(w)||null,l,a,h,f,x)),!0}return!1}function dm(l){var a=yr(l.target);if(a!==null){var h=gr(a);if(h!==null){if(a=h.tag,a===13){if(a=Qf(h),a!==null){l.blockedOn=a,om(l.priority,function(){lm(h)});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function pa(l){if(l.blockedOn!==null)return!1;for(var a=l.targetContainers;0<a.length;){var h=nd(l.domEventName,l.eventSystemFlags,a[0],l.nativeEvent);if(h===null){h=l.nativeEvent;var f=new h.constructor(h.type,h);Vc=f,h.target.dispatchEvent(f),Vc=null}else return a=ll(h),a!==null&&ed(a),l.blockedOn=h,!1;a.shift()}return!0}function hm(l,a,h){pa(l)&&h.delete(a)}function qw(){td=!1,Dn!==null&&pa(Dn)&&(Dn=null),Rn!==null&&pa(Rn)&&(Rn=null),On!==null&&pa(On)&&(On=null),Vi.forEach(hm),Ui.forEach(hm)}function Gi(l,a){l.blockedOn===a&&(l.blockedOn=null,td||(td=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qw)))}function Ki(l){function a(x){return Gi(x,l)}if(0<ma.length){Gi(ma[0],l);for(var h=1;h<ma.length;h++){var f=ma[h];f.blockedOn===l&&(f.blockedOn=null)}}for(Dn!==null&&Gi(Dn,l),Rn!==null&&Gi(Rn,l),On!==null&&Gi(On,l),Vi.forEach(a),Ui.forEach(a),h=0;h<Bn.length;h++)f=Bn[h],f.blockedOn===l&&(f.blockedOn=null);for(;0<Bn.length&&(h=Bn[0],h.blockedOn===null);)dm(h),h.blockedOn===null&&Bn.shift()}var Wr=E.ReactCurrentBatchConfig,xa=!0;function Gw(l,a,h,f){var x=Ue,w=Wr.transition;Wr.transition=null;try{Ue=1,sd(l,a,h,f)}finally{Ue=x,Wr.transition=w}}function Kw(l,a,h,f){var x=Ue,w=Wr.transition;Wr.transition=null;try{Ue=4,sd(l,a,h,f)}finally{Ue=x,Wr.transition=w}}function sd(l,a,h,f){if(xa){var x=nd(l,a,h,f);if(x===null)bd(l,a,f,ga,h),cm(l,f);else if(Uw(x,l,a,h,f))f.stopPropagation();else if(cm(l,f),a&4&&-1<Vw.indexOf(l)){for(;x!==null;){var w=ll(x);if(w!==null&&im(w),w=nd(l,a,h,f),w===null&&bd(l,a,f,ga,h),w===x)break;x=w}x!==null&&f.stopPropagation()}else bd(l,a,f,null,h)}}var ga=null;function nd(l,a,h,f){if(ga=null,l=Uc(f),l=yr(l),l!==null)if(a=gr(l),a===null)l=null;else if(h=a.tag,h===13){if(l=Qf(a),l!==null)return l;l=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;l=null}else a!==l&&(l=null);return ga=l,null}function um(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ow()){case Jc:return 1;case tm:return 4;case ca:case Bw:return 16;case sm:return 536870912;default:return 16}default:return 16}}var Fn=null,rd=null,ya=null;function fm(){if(ya)return ya;var l,a=rd,h=a.length,f,x="value"in Fn?Fn.value:Fn.textContent,w=x.length;for(l=0;l<h&&a[l]===x[l];l++);var N=h-l;for(f=1;f<=N&&a[h-f]===x[w-f];f++);return ya=x.slice(l,1<f?1-f:void 0)}function wa(l){var a=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&a===13&&(l=13)):l=a,l===10&&(l=13),32<=l||l===13?l:0}function ba(){return!0}function mm(){return!1}function ds(l){function a(h,f,x,w,N){this._reactName=h,this._targetInst=x,this.type=f,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var A in l)l.hasOwnProperty(A)&&(h=l[A],this[A]=h?h(w):w[A]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ba:mm,this.isPropagationStopped=mm,this}return se(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),a}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=ds(Hr),Qi=se({},Hr,{view:0,detail:0}),Qw=ds(Qi),ld,ad,Ji,va=se({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ji&&(Ji&&l.type==="mousemove"?(ld=l.screenX-Ji.screenX,ad=l.screenY-Ji.screenY):ad=ld=0,Ji=l),ld)},movementY:function(l){return"movementY"in l?l.movementY:ad}}),pm=ds(va),Jw=se({},va,{dataTransfer:0}),Yw=ds(Jw),Xw=se({},Qi,{relatedTarget:0}),od=ds(Xw),Zw=se({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),eb=ds(Zw),tb=se({},Hr,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),sb=ds(tb),nb=se({},Hr,{data:0}),xm=ds(nb),rb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ab(l){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(l):(l=lb[l])?!!a[l]:!1}function cd(){return ab}var ob=se({},Qi,{key:function(l){if(l.key){var a=rb[l.key]||l.key;if(a!=="Unidentified")return a}return l.type==="keypress"?(l=wa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ib[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cd,charCode:function(l){return l.type==="keypress"?wa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?wa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),cb=ds(ob),db=se({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gm=ds(db),hb=se({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cd}),ub=ds(hb),fb=se({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mb=ds(fb),pb=se({},va,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),xb=ds(pb),gb=[9,13,27,32],dd=d&&"CompositionEvent"in window,Yi=null;d&&"documentMode"in document&&(Yi=document.documentMode);var yb=d&&"TextEvent"in window&&!Yi,ym=d&&(!dd||Yi&&8<Yi&&11>=Yi),wm=" ",bm=!1;function vm(l,a){switch(l){case"keyup":return gb.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jm(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Vr=!1;function wb(l,a){switch(l){case"compositionend":return jm(a);case"keypress":return a.which!==32?null:(bm=!0,wm);case"textInput":return l=a.data,l===wm&&bm?null:l;default:return null}}function bb(l,a){if(Vr)return l==="compositionend"||!dd&&vm(l,a)?(l=fm(),ya=rd=Fn=null,Vr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ym&&a.locale!=="ko"?null:a.data;default:return null}}var vb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(l){var a=l&&l.nodeName&&l.nodeName.toLowerCase();return a==="input"?!!vb[l.type]:a==="textarea"}function km(l,a,h,f){Vf(f),a=Ca(a,"onChange"),0<a.length&&(h=new id("onChange","change",null,h,f),l.push({event:h,listeners:a}))}var Xi=null,Zi=null;function jb(l){Wm(l,0)}function ja(l){var a=Qr(l);if(tt(a))return l}function Nb(l,a){if(l==="change")return a}var Sm=!1;if(d){var hd;if(d){var ud="oninput"in document;if(!ud){var Cm=document.createElement("div");Cm.setAttribute("oninput","return;"),ud=typeof Cm.oninput=="function"}hd=ud}else hd=!1;Sm=hd&&(!document.documentMode||9<document.documentMode)}function Mm(){Xi&&(Xi.detachEvent("onpropertychange",Am),Zi=Xi=null)}function Am(l){if(l.propertyName==="value"&&ja(Zi)){var a=[];km(a,Zi,l,Uc(l)),Kf(jb,a)}}function kb(l,a,h){l==="focusin"?(Mm(),Xi=a,Zi=h,Xi.attachEvent("onpropertychange",Am)):l==="focusout"&&Mm()}function Sb(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ja(Zi)}function Cb(l,a){if(l==="click")return ja(a)}function Mb(l,a){if(l==="input"||l==="change")return ja(a)}function Ab(l,a){return l===a&&(l!==0||1/l===1/a)||l!==l&&a!==a}var Rs=typeof Object.is=="function"?Object.is:Ab;function el(l,a){if(Rs(l,a))return!0;if(typeof l!="object"||l===null||typeof a!="object"||a===null)return!1;var h=Object.keys(l),f=Object.keys(a);if(h.length!==f.length)return!1;for(f=0;f<h.length;f++){var x=h[f];if(!u.call(a,x)||!Rs(l[x],a[x]))return!1}return!0}function Em(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Lm(l,a){var h=Em(l);l=0;for(var f;h;){if(h.nodeType===3){if(f=l+h.textContent.length,l<=a&&f>=a)return{node:h,offset:a-l};l=f}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Em(h)}}function Pm(l,a){return l&&a?l===a?!0:l&&l.nodeType===3?!1:a&&a.nodeType===3?Pm(l,a.parentNode):"contains"in l?l.contains(a):l.compareDocumentPosition?!!(l.compareDocumentPosition(a)&16):!1:!1}function Tm(){for(var l=window,a=Me();a instanceof l.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)l=a.contentWindow;else break;a=Me(l.document)}return a}function fd(l){var a=l&&l.nodeName&&l.nodeName.toLowerCase();return a&&(a==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||a==="textarea"||l.contentEditable==="true")}function Eb(l){var a=Tm(),h=l.focusedElem,f=l.selectionRange;if(a!==h&&h&&h.ownerDocument&&Pm(h.ownerDocument.documentElement,h)){if(f!==null&&fd(h)){if(a=f.start,l=f.end,l===void 0&&(l=a),"selectionStart"in h)h.selectionStart=a,h.selectionEnd=Math.min(l,h.value.length);else if(l=(a=h.ownerDocument||document)&&a.defaultView||window,l.getSelection){l=l.getSelection();var x=h.textContent.length,w=Math.min(f.start,x);f=f.end===void 0?w:Math.min(f.end,x),!l.extend&&w>f&&(x=f,f=w,w=x),x=Lm(h,w);var N=Lm(h,f);x&&N&&(l.rangeCount!==1||l.anchorNode!==x.node||l.anchorOffset!==x.offset||l.focusNode!==N.node||l.focusOffset!==N.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),l.removeAllRanges(),w>f?(l.addRange(a),l.extend(N.node,N.offset)):(a.setEnd(N.node,N.offset),l.addRange(a)))}}for(a=[],l=h;l=l.parentNode;)l.nodeType===1&&a.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<a.length;h++)l=a[h],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Lb=d&&"documentMode"in document&&11>=document.documentMode,Ur=null,md=null,tl=null,pd=!1;function Dm(l,a,h){var f=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;pd||Ur==null||Ur!==Me(f)||(f=Ur,"selectionStart"in f&&fd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),tl&&el(tl,f)||(tl=f,f=Ca(md,"onSelect"),0<f.length&&(a=new id("onSelect","select",null,a,h),l.push({event:a,listeners:f}),a.target=Ur)))}function Na(l,a){var h={};return h[l.toLowerCase()]=a.toLowerCase(),h["Webkit"+l]="webkit"+a,h["Moz"+l]="moz"+a,h}var qr={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},xd={},Rm={};d&&(Rm=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function ka(l){if(xd[l])return xd[l];if(!qr[l])return l;var a=qr[l],h;for(h in a)if(a.hasOwnProperty(h)&&h in Rm)return xd[l]=a[h];return l}var Om=ka("animationend"),Bm=ka("animationiteration"),Fm=ka("animationstart"),Im=ka("transitionend"),zm=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function In(l,a){zm.set(l,a),o(a,[l])}for(var gd=0;gd<$m.length;gd++){var yd=$m[gd],Pb=yd.toLowerCase(),Tb=yd[0].toUpperCase()+yd.slice(1);In(Pb,"on"+Tb)}In(Om,"onAnimationEnd"),In(Bm,"onAnimationIteration"),In(Fm,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(Im,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Db=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function _m(l,a,h){var f=l.type||"unknown-event";l.currentTarget=h,Pw(f,a,void 0,l),l.currentTarget=null}function Wm(l,a){a=(a&4)!==0;for(var h=0;h<l.length;h++){var f=l[h],x=f.event;f=f.listeners;e:{var w=void 0;if(a)for(var N=f.length-1;0<=N;N--){var A=f[N],L=A.instance,W=A.currentTarget;if(A=A.listener,L!==w&&x.isPropagationStopped())break e;_m(x,A,W),w=L}else for(N=0;N<f.length;N++){if(A=f[N],L=A.instance,W=A.currentTarget,A=A.listener,L!==w&&x.isPropagationStopped())break e;_m(x,A,W),w=L}}}if(oa)throw l=Qc,oa=!1,Qc=null,l}function Xe(l,a){var h=a[Cd];h===void 0&&(h=a[Cd]=new Set);var f=l+"__bubble";h.has(f)||(Hm(a,l,2,!1),h.add(f))}function wd(l,a,h){var f=0;a&&(f|=4),Hm(h,l,f,a)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function nl(l){if(!l[Sa]){l[Sa]=!0,s.forEach(function(h){h!=="selectionchange"&&(Db.has(h)||wd(h,!1,l),wd(h,!0,l))});var a=l.nodeType===9?l:l.ownerDocument;a===null||a[Sa]||(a[Sa]=!0,wd("selectionchange",!1,a))}}function Hm(l,a,h,f){switch(um(a)){case 1:var x=Gw;break;case 4:x=Kw;break;default:x=sd}h=x.bind(null,a,h,l),x=void 0,!Kc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),f?x!==void 0?l.addEventListener(a,h,{capture:!0,passive:x}):l.addEventListener(a,h,!0):x!==void 0?l.addEventListener(a,h,{passive:x}):l.addEventListener(a,h,!1)}function bd(l,a,h,f,x){var w=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var N=f.tag;if(N===3||N===4){var A=f.stateNode.containerInfo;if(A===x||A.nodeType===8&&A.parentNode===x)break;if(N===4)for(N=f.return;N!==null;){var L=N.tag;if((L===3||L===4)&&(L=N.stateNode.containerInfo,L===x||L.nodeType===8&&L.parentNode===x))return;N=N.return}for(;A!==null;){if(N=yr(A),N===null)return;if(L=N.tag,L===5||L===6){f=w=N;continue e}A=A.parentNode}}f=f.return}Kf(function(){var W=w,Y=Uc(h),te=[];e:{var J=zm.get(l);if(J!==void 0){var ue=id,pe=l;switch(l){case"keypress":if(wa(h)===0)break e;case"keydown":case"keyup":ue=cb;break;case"focusin":pe="focus",ue=od;break;case"focusout":pe="blur",ue=od;break;case"beforeblur":case"afterblur":ue=od;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Yw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=ub;break;case Om:case Bm:case Fm:ue=eb;break;case Im:ue=mb;break;case"scroll":ue=Qw;break;case"wheel":ue=xb;break;case"copy":case"cut":case"paste":ue=sb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=gm}var ge=(a&4)!==0,ot=!ge&&l==="scroll",F=ge?J!==null?J+"Capture":null:J;ge=[];for(var D=W,z;D!==null;){z=D;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,F!==null&&(re=zi(D,F),re!=null&&ge.push(rl(D,re,z)))),ot)break;D=D.return}0<ge.length&&(J=new ue(J,pe,null,h,Y),te.push({event:J,listeners:ge}))}}if((a&7)===0){e:{if(J=l==="mouseover"||l==="pointerover",ue=l==="mouseout"||l==="pointerout",J&&h!==Vc&&(pe=h.relatedTarget||h.fromElement)&&(yr(pe)||pe[gn]))break e;if((ue||J)&&(J=Y.window===Y?Y:(J=Y.ownerDocument)?J.defaultView||J.parentWindow:window,ue?(pe=h.relatedTarget||h.toElement,ue=W,pe=pe?yr(pe):null,pe!==null&&(ot=gr(pe),pe!==ot||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=W),ue!==pe)){if(ge=pm,re="onMouseLeave",F="onMouseEnter",D="mouse",(l==="pointerout"||l==="pointerover")&&(ge=gm,re="onPointerLeave",F="onPointerEnter",D="pointer"),ot=ue==null?J:Qr(ue),z=pe==null?J:Qr(pe),J=new ge(re,D+"leave",ue,h,Y),J.target=ot,J.relatedTarget=z,re=null,yr(Y)===W&&(ge=new ge(F,D+"enter",pe,h,Y),ge.target=z,ge.relatedTarget=ot,re=ge),ot=re,ue&&pe)t:{for(ge=ue,F=pe,D=0,z=ge;z;z=Gr(z))D++;for(z=0,re=F;re;re=Gr(re))z++;for(;0<D-z;)ge=Gr(ge),D--;for(;0<z-D;)F=Gr(F),z--;for(;D--;){if(ge===F||F!==null&&ge===F.alternate)break t;ge=Gr(ge),F=Gr(F)}ge=null}else ge=null;ue!==null&&Vm(te,J,ue,ge,!1),pe!==null&&ot!==null&&Vm(te,ot,pe,ge,!0)}}e:{if(J=W?Qr(W):window,ue=J.nodeName&&J.nodeName.toLowerCase(),ue==="select"||ue==="input"&&J.type==="file")var we=Nb;else if(Nm(J))if(Sm)we=Mb;else{we=Sb;var ke=kb}else(ue=J.nodeName)&&ue.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(we=Cb);if(we&&(we=we(l,W))){km(te,we,h,Y);break e}ke&&ke(l,J,W),l==="focusout"&&(ke=J._wrapperState)&&ke.controlled&&J.type==="number"&&ws(J,"number",J.value)}switch(ke=W?Qr(W):window,l){case"focusin":(Nm(ke)||ke.contentEditable==="true")&&(Ur=ke,md=W,tl=null);break;case"focusout":tl=md=Ur=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Dm(te,h,Y);break;case"selectionchange":if(Lb)break;case"keydown":case"keyup":Dm(te,h,Y)}var Se;if(dd)e:{switch(l){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Vr?vm(l,h)&&(Ee="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(Ee="onCompositionStart");Ee&&(ym&&h.locale!=="ko"&&(Vr||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Vr&&(Se=fm()):(Fn=Y,rd="value"in Fn?Fn.value:Fn.textContent,Vr=!0)),ke=Ca(W,Ee),0<ke.length&&(Ee=new xm(Ee,l,null,h,Y),te.push({event:Ee,listeners:ke}),Se?Ee.data=Se:(Se=jm(h),Se!==null&&(Ee.data=Se)))),(Se=yb?wb(l,h):bb(l,h))&&(W=Ca(W,"onBeforeInput"),0<W.length&&(Y=new xm("onBeforeInput","beforeinput",null,h,Y),te.push({event:Y,listeners:W}),Y.data=Se))}Wm(te,a)})}function rl(l,a,h){return{instance:l,listener:a,currentTarget:h}}function Ca(l,a){for(var h=a+"Capture",f=[];l!==null;){var x=l,w=x.stateNode;x.tag===5&&w!==null&&(x=w,w=zi(l,h),w!=null&&f.unshift(rl(l,w,x)),w=zi(l,a),w!=null&&f.push(rl(l,w,x))),l=l.return}return f}function Gr(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Vm(l,a,h,f,x){for(var w=a._reactName,N=[];h!==null&&h!==f;){var A=h,L=A.alternate,W=A.stateNode;if(L!==null&&L===f)break;A.tag===5&&W!==null&&(A=W,x?(L=zi(h,w),L!=null&&N.unshift(rl(h,L,A))):x||(L=zi(h,w),L!=null&&N.push(rl(h,L,A)))),h=h.return}N.length!==0&&l.push({event:a,listeners:N})}var Rb=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function Um(l){return(typeof l=="string"?l:""+l).replace(Rb,`
`).replace(Ob,"")}function Ma(l,a,h){if(a=Um(a),Um(l)!==a&&h)throw Error(t(425))}function Aa(){}var vd=null,jd=null;function Nd(l,a){return l==="textarea"||l==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,Bb=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,Fb=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(l){return qm.resolve(null).then(l).catch(Ib)}:kd;function Ib(l){setTimeout(function(){throw l})}function Sd(l,a){var h=a,f=0;do{var x=h.nextSibling;if(l.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(f===0){l.removeChild(x),Ki(a);return}f--}else h!=="$"&&h!=="$?"&&h!=="$!"||f++;h=x}while(h);Ki(a)}function zn(l){for(;l!=null;l=l.nextSibling){var a=l.nodeType;if(a===1||a===3)break;if(a===8){if(a=l.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return l}function Gm(l){l=l.previousSibling;for(var a=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return l;a--}else h==="/$"&&a++}l=l.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),Zs="__reactFiber$"+Kr,il="__reactProps$"+Kr,gn="__reactContainer$"+Kr,Cd="__reactEvents$"+Kr,zb="__reactListeners$"+Kr,$b="__reactHandles$"+Kr;function yr(l){var a=l[Zs];if(a)return a;for(var h=l.parentNode;h;){if(a=h[gn]||h[Zs]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(l=Gm(l);l!==null;){if(h=l[Zs])return h;l=Gm(l)}return a}l=h,h=l.parentNode}return null}function ll(l){return l=l[Zs]||l[gn],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Qr(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Ea(l){return l[il]||null}var Md=[],Jr=-1;function $n(l){return{current:l}}function Ze(l){0>Jr||(l.current=Md[Jr],Md[Jr]=null,Jr--)}function Qe(l,a){Jr++,Md[Jr]=l.current,l.current=a}var _n={},Dt=$n(_n),Yt=$n(!1),wr=_n;function Yr(l,a){var h=l.type.contextTypes;if(!h)return _n;var f=l.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var x={},w;for(w in h)x[w]=a[w];return f&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=a,l.__reactInternalMemoizedMaskedChildContext=x),x}function Xt(l){return l=l.childContextTypes,l!=null}function La(){Ze(Yt),Ze(Dt)}function Km(l,a,h){if(Dt.current!==_n)throw Error(t(168));Qe(Dt,a),Qe(Yt,h)}function Qm(l,a,h){var f=l.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return h;f=f.getChildContext();for(var x in f)if(!(x in a))throw Error(t(108,Re(l)||"Unknown",x));return se({},h,f)}function Pa(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||_n,wr=Dt.current,Qe(Dt,l),Qe(Yt,Yt.current),!0}function Jm(l,a,h){var f=l.stateNode;if(!f)throw Error(t(169));h?(l=Qm(l,a,wr),f.__reactInternalMemoizedMergedChildContext=l,Ze(Yt),Ze(Dt),Qe(Dt,l)):Ze(Yt),Qe(Yt,h)}var yn=null,Ta=!1,Ad=!1;function Ym(l){yn===null?yn=[l]:yn.push(l)}function _b(l){Ta=!0,Ym(l)}function Wn(){if(!Ad&&yn!==null){Ad=!0;var l=0,a=Ue;try{var h=yn;for(Ue=1;l<h.length;l++){var f=h[l];do f=f(!0);while(f!==null)}yn=null,Ta=!1}catch(x){throw yn!==null&&(yn=yn.slice(l+1)),Zf(Jc,Wn),x}finally{Ue=a,Ad=!1}}return null}var Xr=[],Zr=0,Da=null,Ra=0,bs=[],vs=0,br=null,wn=1,bn="";function vr(l,a){Xr[Zr++]=Ra,Xr[Zr++]=Da,Da=l,Ra=a}function Xm(l,a,h){bs[vs++]=wn,bs[vs++]=bn,bs[vs++]=br,br=l;var f=wn;l=bn;var x=32-Ds(f)-1;f&=~(1<<x),h+=1;var w=32-Ds(a)+x;if(30<w){var N=x-x%5;w=(f&(1<<N)-1).toString(32),f>>=N,x-=N,wn=1<<32-Ds(a)+x|h<<x|f,bn=w+l}else wn=1<<w|h<<x|f,bn=l}function Ed(l){l.return!==null&&(vr(l,1),Xm(l,1,0))}function Ld(l){for(;l===Da;)Da=Xr[--Zr],Xr[Zr]=null,Ra=Xr[--Zr],Xr[Zr]=null;for(;l===br;)br=bs[--vs],bs[vs]=null,bn=bs[--vs],bs[vs]=null,wn=bs[--vs],bs[vs]=null}var hs=null,us=null,et=!1,Os=null;function Zm(l,a){var h=Ss(5,null,null,0);h.elementType="DELETED",h.stateNode=a,h.return=l,a=l.deletions,a===null?(l.deletions=[h],l.flags|=16):a.push(h)}function ep(l,a){switch(l.tag){case 5:var h=l.type;return a=a.nodeType!==1||h.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(l.stateNode=a,hs=l,us=zn(a.firstChild),!0):!1;case 6:return a=l.pendingProps===""||a.nodeType!==3?null:a,a!==null?(l.stateNode=a,hs=l,us=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(h=br!==null?{id:wn,overflow:bn}:null,l.memoizedState={dehydrated:a,treeContext:h,retryLane:1073741824},h=Ss(18,null,null,0),h.stateNode=a,h.return=l,l.child=h,hs=l,us=null,!0):!1;default:return!1}}function Pd(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Td(l){if(et){var a=us;if(a){var h=a;if(!ep(l,a)){if(Pd(l))throw Error(t(418));a=zn(h.nextSibling);var f=hs;a&&ep(l,a)?Zm(f,h):(l.flags=l.flags&-4097|2,et=!1,hs=l)}}else{if(Pd(l))throw Error(t(418));l.flags=l.flags&-4097|2,et=!1,hs=l}}}function tp(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;hs=l}function Oa(l){if(l!==hs)return!1;if(!et)return tp(l),et=!0,!1;var a;if((a=l.tag!==3)&&!(a=l.tag!==5)&&(a=l.type,a=a!=="head"&&a!=="body"&&!Nd(l.type,l.memoizedProps)),a&&(a=us)){if(Pd(l))throw sp(),Error(t(418));for(;a;)Zm(l,a),a=zn(a.nextSibling)}if(tp(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,a=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"){if(a===0){us=zn(l.nextSibling);break e}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++}l=l.nextSibling}us=null}}else us=hs?zn(l.stateNode.nextSibling):null;return!0}function sp(){for(var l=us;l;)l=zn(l.nextSibling)}function ei(){us=hs=null,et=!1}function Dd(l){Os===null?Os=[l]:Os.push(l)}var Wb=E.ReactCurrentBatchConfig;function al(l,a,h){if(l=h.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var f=h.stateNode}if(!f)throw Error(t(147,l));var x=f,w=""+l;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(N){var A=x.refs;N===null?delete A[w]:A[w]=N},a._stringRef=w,a)}if(typeof l!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,l))}return l}function Ba(l,a){throw l=Object.prototype.toString.call(a),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":l))}function np(l){var a=l._init;return a(l._payload)}function rp(l){function a(F,D){if(l){var z=F.deletions;z===null?(F.deletions=[D],F.flags|=16):z.push(D)}}function h(F,D){if(!l)return null;for(;D!==null;)a(F,D),D=D.sibling;return null}function f(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function x(F,D){return F=Jn(F,D),F.index=0,F.sibling=null,F}function w(F,D,z){return F.index=z,l?(z=F.alternate,z!==null?(z=z.index,z<D?(F.flags|=2,D):z):(F.flags|=2,D)):(F.flags|=1048576,D)}function N(F){return l&&F.alternate===null&&(F.flags|=2),F}function A(F,D,z,re){return D===null||D.tag!==6?(D=kh(z,F.mode,re),D.return=F,D):(D=x(D,z),D.return=F,D)}function L(F,D,z,re){var we=z.type;return we===O?Y(F,D,z.props.children,re,z.key):D!==null&&(D.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===U&&np(we)===D.type)?(re=x(D,z.props),re.ref=al(F,D,z),re.return=F,re):(re=lo(z.type,z.key,z.props,null,F.mode,re),re.ref=al(F,D,z),re.return=F,re)}function W(F,D,z,re){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Sh(z,F.mode,re),D.return=F,D):(D=x(D,z.children||[]),D.return=F,D)}function Y(F,D,z,re,we){return D===null||D.tag!==7?(D=Er(z,F.mode,re,we),D.return=F,D):(D=x(D,z),D.return=F,D)}function te(F,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=kh(""+D,F.mode,z),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case B:return z=lo(D.type,D.key,D.props,null,F.mode,z),z.ref=al(F,null,D),z.return=F,z;case I:return D=Sh(D,F.mode,z),D.return=F,D;case U:var re=D._init;return te(F,re(D._payload),z)}if(T(D)||Q(D))return D=Er(D,F.mode,z,null),D.return=F,D;Ba(F,D)}return null}function J(F,D,z,re){var we=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return we!==null?null:A(F,D,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case B:return z.key===we?L(F,D,z,re):null;case I:return z.key===we?W(F,D,z,re):null;case U:return we=z._init,J(F,D,we(z._payload),re)}if(T(z)||Q(z))return we!==null?null:Y(F,D,z,re,null);Ba(F,z)}return null}function ue(F,D,z,re,we){if(typeof re=="string"&&re!==""||typeof re=="number")return F=F.get(z)||null,A(D,F,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case B:return F=F.get(re.key===null?z:re.key)||null,L(D,F,re,we);case I:return F=F.get(re.key===null?z:re.key)||null,W(D,F,re,we);case U:var ke=re._init;return ue(F,D,z,ke(re._payload),we)}if(T(re)||Q(re))return F=F.get(z)||null,Y(D,F,re,we,null);Ba(D,re)}return null}function pe(F,D,z,re){for(var we=null,ke=null,Se=D,Ee=D=0,kt=null;Se!==null&&Ee<z.length;Ee++){Se.index>Ee?(kt=Se,Se=null):kt=Se.sibling;var We=J(F,Se,z[Ee],re);if(We===null){Se===null&&(Se=kt);break}l&&Se&&We.alternate===null&&a(F,Se),D=w(We,D,Ee),ke===null?we=We:ke.sibling=We,ke=We,Se=kt}if(Ee===z.length)return h(F,Se),et&&vr(F,Ee),we;if(Se===null){for(;Ee<z.length;Ee++)Se=te(F,z[Ee],re),Se!==null&&(D=w(Se,D,Ee),ke===null?we=Se:ke.sibling=Se,ke=Se);return et&&vr(F,Ee),we}for(Se=f(F,Se);Ee<z.length;Ee++)kt=ue(Se,F,Ee,z[Ee],re),kt!==null&&(l&&kt.alternate!==null&&Se.delete(kt.key===null?Ee:kt.key),D=w(kt,D,Ee),ke===null?we=kt:ke.sibling=kt,ke=kt);return l&&Se.forEach(function(Yn){return a(F,Yn)}),et&&vr(F,Ee),we}function ge(F,D,z,re){var we=Q(z);if(typeof we!="function")throw Error(t(150));if(z=we.call(z),z==null)throw Error(t(151));for(var ke=we=null,Se=D,Ee=D=0,kt=null,We=z.next();Se!==null&&!We.done;Ee++,We=z.next()){Se.index>Ee?(kt=Se,Se=null):kt=Se.sibling;var Yn=J(F,Se,We.value,re);if(Yn===null){Se===null&&(Se=kt);break}l&&Se&&Yn.alternate===null&&a(F,Se),D=w(Yn,D,Ee),ke===null?we=Yn:ke.sibling=Yn,ke=Yn,Se=kt}if(We.done)return h(F,Se),et&&vr(F,Ee),we;if(Se===null){for(;!We.done;Ee++,We=z.next())We=te(F,We.value,re),We!==null&&(D=w(We,D,Ee),ke===null?we=We:ke.sibling=We,ke=We);return et&&vr(F,Ee),we}for(Se=f(F,Se);!We.done;Ee++,We=z.next())We=ue(Se,F,Ee,We.value,re),We!==null&&(l&&We.alternate!==null&&Se.delete(We.key===null?Ee:We.key),D=w(We,D,Ee),ke===null?we=We:ke.sibling=We,ke=We);return l&&Se.forEach(function(vv){return a(F,vv)}),et&&vr(F,Ee),we}function ot(F,D,z,re){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case B:e:{for(var we=z.key,ke=D;ke!==null;){if(ke.key===we){if(we=z.type,we===O){if(ke.tag===7){h(F,ke.sibling),D=x(ke,z.props.children),D.return=F,F=D;break e}}else if(ke.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===U&&np(we)===ke.type){h(F,ke.sibling),D=x(ke,z.props),D.ref=al(F,ke,z),D.return=F,F=D;break e}h(F,ke);break}else a(F,ke);ke=ke.sibling}z.type===O?(D=Er(z.props.children,F.mode,re,z.key),D.return=F,F=D):(re=lo(z.type,z.key,z.props,null,F.mode,re),re.ref=al(F,D,z),re.return=F,F=re)}return N(F);case I:e:{for(ke=z.key;D!==null;){if(D.key===ke)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){h(F,D.sibling),D=x(D,z.children||[]),D.return=F,F=D;break e}else{h(F,D);break}else a(F,D);D=D.sibling}D=Sh(z,F.mode,re),D.return=F,F=D}return N(F);case U:return ke=z._init,ot(F,D,ke(z._payload),re)}if(T(z))return pe(F,D,z,re);if(Q(z))return ge(F,D,z,re);Ba(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(h(F,D.sibling),D=x(D,z),D.return=F,F=D):(h(F,D),D=kh(z,F.mode,re),D.return=F,F=D),N(F)):h(F,D)}return ot}var ti=rp(!0),ip=rp(!1),Fa=$n(null),Ia=null,si=null,Rd=null;function Od(){Rd=si=Ia=null}function Bd(l){var a=Fa.current;Ze(Fa),l._currentValue=a}function Fd(l,a,h){for(;l!==null;){var f=l.alternate;if((l.childLanes&a)!==a?(l.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),l===h)break;l=l.return}}function ni(l,a){Ia=l,Rd=si=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&a)!==0&&(Zt=!0),l.firstContext=null)}function js(l){var a=l._currentValue;if(Rd!==l)if(l={context:l,memoizedValue:a,next:null},si===null){if(Ia===null)throw Error(t(308));si=l,Ia.dependencies={lanes:0,firstContext:l}}else si=si.next=l;return a}var jr=null;function Id(l){jr===null?jr=[l]:jr.push(l)}function lp(l,a,h,f){var x=a.interleaved;return x===null?(h.next=h,Id(a)):(h.next=x.next,x.next=h),a.interleaved=h,vn(l,f)}function vn(l,a){l.lanes|=a;var h=l.alternate;for(h!==null&&(h.lanes|=a),h=l,l=l.return;l!==null;)l.childLanes|=a,h=l.alternate,h!==null&&(h.childLanes|=a),h=l,l=l.return;return h.tag===3?h.stateNode:null}var Hn=!1;function zd(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ap(l,a){l=l.updateQueue,a.updateQueue===l&&(a.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function jn(l,a){return{eventTime:l,lane:a,tag:0,payload:null,callback:null,next:null}}function Vn(l,a,h){var f=l.updateQueue;if(f===null)return null;if(f=f.shared,(_e&2)!==0){var x=f.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),f.pending=a,vn(l,h)}return x=f.interleaved,x===null?(a.next=a,Id(f)):(a.next=x.next,x.next=a),f.interleaved=a,vn(l,h)}function za(l,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194240)!==0)){var f=a.lanes;f&=l.pendingLanes,h|=f,a.lanes=h,Zc(l,h)}}function op(l,a){var h=l.updateQueue,f=l.alternate;if(f!==null&&(f=f.updateQueue,h===f)){var x=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var N={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?x=w=N:w=w.next=N,h=h.next}while(h!==null);w===null?x=w=a:w=w.next=a}else x=w=a;h={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:f.shared,effects:f.effects},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=a:l.next=a,h.lastBaseUpdate=a}function $a(l,a,h,f){var x=l.updateQueue;Hn=!1;var w=x.firstBaseUpdate,N=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,W=L.next;L.next=null,N===null?w=W:N.next=W,N=L;var Y=l.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==N&&(A===null?Y.firstBaseUpdate=W:A.next=W,Y.lastBaseUpdate=L))}if(w!==null){var te=x.baseState;N=0,Y=W=L=null,A=w;do{var J=A.lane,ue=A.eventTime;if((f&J)===J){Y!==null&&(Y=Y.next={eventTime:ue,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var pe=l,ge=A;switch(J=a,ue=h,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){te=pe.call(ue,te,J);break e}te=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,J=typeof pe=="function"?pe.call(ue,te,J):pe,J==null)break e;te=se({},te,J);break e;case 2:Hn=!0}}A.callback!==null&&A.lane!==0&&(l.flags|=64,J=x.effects,J===null?x.effects=[A]:J.push(A))}else ue={eventTime:ue,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(W=Y=ue,L=te):Y=Y.next=ue,N|=J;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;J=A,A=J.next,J.next=null,x.lastBaseUpdate=J,x.shared.pending=null}}while(!0);if(Y===null&&(L=te),x.baseState=L,x.firstBaseUpdate=W,x.lastBaseUpdate=Y,a=x.shared.interleaved,a!==null){x=a;do N|=x.lane,x=x.next;while(x!==a)}else w===null&&(x.shared.lanes=0);Sr|=N,l.lanes=N,l.memoizedState=te}}function cp(l,a,h){if(l=a.effects,a.effects=null,l!==null)for(a=0;a<l.length;a++){var f=l[a],x=f.callback;if(x!==null){if(f.callback=null,f=h,typeof x!="function")throw Error(t(191,x));x.call(f)}}}var ol={},en=$n(ol),cl=$n(ol),dl=$n(ol);function Nr(l){if(l===ol)throw Error(t(174));return l}function $d(l,a){switch(Qe(dl,a),Qe(cl,l),Qe(en,ol),l=a.nodeType,l){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Vt(null,"");break;default:l=l===8?a.parentNode:a,a=l.namespaceURI||null,l=l.tagName,a=Vt(a,l)}Ze(en),Qe(en,a)}function ri(){Ze(en),Ze(cl),Ze(dl)}function dp(l){Nr(dl.current);var a=Nr(en.current),h=Vt(a,l.type);a!==h&&(Qe(cl,l),Qe(en,h))}function _d(l){cl.current===l&&(Ze(en),Ze(cl))}var st=$n(0);function _a(l){for(var a=l;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break;for(;a.sibling===null;){if(a.return===null||a.return===l)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wd=[];function Hd(){for(var l=0;l<Wd.length;l++)Wd[l]._workInProgressVersionPrimary=null;Wd.length=0}var Wa=E.ReactCurrentDispatcher,Vd=E.ReactCurrentBatchConfig,kr=0,nt=null,gt=null,jt=null,Ha=!1,hl=!1,ul=0,Hb=0;function Rt(){throw Error(t(321))}function Ud(l,a){if(a===null)return!1;for(var h=0;h<a.length&&h<l.length;h++)if(!Rs(l[h],a[h]))return!1;return!0}function qd(l,a,h,f,x,w){if(kr=w,nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Wa.current=l===null||l.memoizedState===null?Gb:Kb,l=h(f,x),hl){w=0;do{if(hl=!1,ul=0,25<=w)throw Error(t(301));w+=1,jt=gt=null,a.updateQueue=null,Wa.current=Qb,l=h(f,x)}while(hl)}if(Wa.current=qa,a=gt!==null&&gt.next!==null,kr=0,jt=gt=nt=null,Ha=!1,a)throw Error(t(300));return l}function Gd(){var l=ul!==0;return ul=0,l}function tn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?nt.memoizedState=jt=l:jt=jt.next=l,jt}function Ns(){if(gt===null){var l=nt.alternate;l=l!==null?l.memoizedState:null}else l=gt.next;var a=jt===null?nt.memoizedState:jt.next;if(a!==null)jt=a,gt=l;else{if(l===null)throw Error(t(310));gt=l,l={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},jt===null?nt.memoizedState=jt=l:jt=jt.next=l}return jt}function fl(l,a){return typeof a=="function"?a(l):a}function Kd(l){var a=Ns(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var f=gt,x=f.baseQueue,w=h.pending;if(w!==null){if(x!==null){var N=x.next;x.next=w.next,w.next=N}f.baseQueue=x=w,h.pending=null}if(x!==null){w=x.next,f=f.baseState;var A=N=null,L=null,W=w;do{var Y=W.lane;if((kr&Y)===Y)L!==null&&(L=L.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),f=W.hasEagerState?W.eagerState:l(f,W.action);else{var te={lane:Y,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};L===null?(A=L=te,N=f):L=L.next=te,nt.lanes|=Y,Sr|=Y}W=W.next}while(W!==null&&W!==w);L===null?N=f:L.next=A,Rs(f,a.memoizedState)||(Zt=!0),a.memoizedState=f,a.baseState=N,a.baseQueue=L,h.lastRenderedState=f}if(l=h.interleaved,l!==null){x=l;do w=x.lane,nt.lanes|=w,Sr|=w,x=x.next;while(x!==l)}else x===null&&(h.lanes=0);return[a.memoizedState,h.dispatch]}function Qd(l){var a=Ns(),h=a.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=l;var f=h.dispatch,x=h.pending,w=a.memoizedState;if(x!==null){h.pending=null;var N=x=x.next;do w=l(w,N.action),N=N.next;while(N!==x);Rs(w,a.memoizedState)||(Zt=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),h.lastRenderedState=w}return[w,f]}function hp(){}function up(l,a){var h=nt,f=Ns(),x=a(),w=!Rs(f.memoizedState,x);if(w&&(f.memoizedState=x,Zt=!0),f=f.queue,Jd(pp.bind(null,h,f,l),[l]),f.getSnapshot!==a||w||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,ml(9,mp.bind(null,h,f,x,a),void 0,null),Nt===null)throw Error(t(349));(kr&30)!==0||fp(h,a,x)}return x}function fp(l,a,h){l.flags|=16384,l={getSnapshot:a,value:h},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.stores=[l]):(h=a.stores,h===null?a.stores=[l]:h.push(l))}function mp(l,a,h,f){a.value=h,a.getSnapshot=f,xp(a)&&gp(l)}function pp(l,a,h){return h(function(){xp(a)&&gp(l)})}function xp(l){var a=l.getSnapshot;l=l.value;try{var h=a();return!Rs(l,h)}catch{return!0}}function gp(l){var a=vn(l,1);a!==null&&zs(a,l,1,-1)}function yp(l){var a=tn();return typeof l=="function"&&(l=l()),a.memoizedState=a.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fl,lastRenderedState:l},a.queue=l,l=l.dispatch=qb.bind(null,nt,l),[a.memoizedState,l]}function ml(l,a,h,f){return l={tag:l,create:a,destroy:h,deps:f,next:null},a=nt.updateQueue,a===null?(a={lastEffect:null,stores:null},nt.updateQueue=a,a.lastEffect=l.next=l):(h=a.lastEffect,h===null?a.lastEffect=l.next=l:(f=h.next,h.next=l,l.next=f,a.lastEffect=l)),l}function wp(){return Ns().memoizedState}function Va(l,a,h,f){var x=tn();nt.flags|=l,x.memoizedState=ml(1|a,h,void 0,f===void 0?null:f)}function Ua(l,a,h,f){var x=Ns();f=f===void 0?null:f;var w=void 0;if(gt!==null){var N=gt.memoizedState;if(w=N.destroy,f!==null&&Ud(f,N.deps)){x.memoizedState=ml(a,h,w,f);return}}nt.flags|=l,x.memoizedState=ml(1|a,h,w,f)}function bp(l,a){return Va(8390656,8,l,a)}function Jd(l,a){return Ua(2048,8,l,a)}function vp(l,a){return Ua(4,2,l,a)}function jp(l,a){return Ua(4,4,l,a)}function Np(l,a){if(typeof a=="function")return l=l(),a(l),function(){a(null)};if(a!=null)return l=l(),a.current=l,function(){a.current=null}}function kp(l,a,h){return h=h!=null?h.concat([l]):null,Ua(4,4,Np.bind(null,a,l),h)}function Yd(){}function Sp(l,a){var h=Ns();a=a===void 0?null:a;var f=h.memoizedState;return f!==null&&a!==null&&Ud(a,f[1])?f[0]:(h.memoizedState=[l,a],l)}function Cp(l,a){var h=Ns();a=a===void 0?null:a;var f=h.memoizedState;return f!==null&&a!==null&&Ud(a,f[1])?f[0]:(l=l(),h.memoizedState=[l,a],l)}function Mp(l,a,h){return(kr&21)===0?(l.baseState&&(l.baseState=!1,Zt=!0),l.memoizedState=h):(Rs(h,a)||(h=nm(),nt.lanes|=h,Sr|=h,l.baseState=!0),a)}function Vb(l,a){var h=Ue;Ue=h!==0&&4>h?h:4,l(!0);var f=Vd.transition;Vd.transition={};try{l(!1),a()}finally{Ue=h,Vd.transition=f}}function Ap(){return Ns().memoizedState}function Ub(l,a,h){var f=Kn(l);if(h={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null},Ep(l))Lp(a,h);else if(h=lp(l,a,h,f),h!==null){var x=Gt();zs(h,l,f,x),Pp(h,a,f)}}function qb(l,a,h){var f=Kn(l),x={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ep(l))Lp(a,x);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var N=a.lastRenderedState,A=w(N,h);if(x.hasEagerState=!0,x.eagerState=A,Rs(A,N)){var L=a.interleaved;L===null?(x.next=x,Id(a)):(x.next=L.next,L.next=x),a.interleaved=x;return}}catch{}finally{}h=lp(l,a,x,f),h!==null&&(x=Gt(),zs(h,l,f,x),Pp(h,a,f))}}function Ep(l){var a=l.alternate;return l===nt||a!==null&&a===nt}function Lp(l,a){hl=Ha=!0;var h=l.pending;h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a}function Pp(l,a,h){if((h&4194240)!==0){var f=a.lanes;f&=l.pendingLanes,h|=f,a.lanes=h,Zc(l,h)}}var qa={readContext:js,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Gb={readContext:js,useCallback:function(l,a){return tn().memoizedState=[l,a===void 0?null:a],l},useContext:js,useEffect:bp,useImperativeHandle:function(l,a,h){return h=h!=null?h.concat([l]):null,Va(4194308,4,Np.bind(null,a,l),h)},useLayoutEffect:function(l,a){return Va(4194308,4,l,a)},useInsertionEffect:function(l,a){return Va(4,2,l,a)},useMemo:function(l,a){var h=tn();return a=a===void 0?null:a,l=l(),h.memoizedState=[l,a],l},useReducer:function(l,a,h){var f=tn();return a=h!==void 0?h(a):a,f.memoizedState=f.baseState=a,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:a},f.queue=l,l=l.dispatch=Ub.bind(null,nt,l),[f.memoizedState,l]},useRef:function(l){var a=tn();return l={current:l},a.memoizedState=l},useState:yp,useDebugValue:Yd,useDeferredValue:function(l){return tn().memoizedState=l},useTransition:function(){var l=yp(!1),a=l[0];return l=Vb.bind(null,l[1]),tn().memoizedState=l,[a,l]},useMutableSource:function(){},useSyncExternalStore:function(l,a,h){var f=nt,x=tn();if(et){if(h===void 0)throw Error(t(407));h=h()}else{if(h=a(),Nt===null)throw Error(t(349));(kr&30)!==0||fp(f,a,h)}x.memoizedState=h;var w={value:h,getSnapshot:a};return x.queue=w,bp(pp.bind(null,f,w,l),[l]),f.flags|=2048,ml(9,mp.bind(null,f,w,h,a),void 0,null),h},useId:function(){var l=tn(),a=Nt.identifierPrefix;if(et){var h=bn,f=wn;h=(f&~(1<<32-Ds(f)-1)).toString(32)+h,a=":"+a+"R"+h,h=ul++,0<h&&(a+="H"+h.toString(32)),a+=":"}else h=Hb++,a=":"+a+"r"+h.toString(32)+":";return l.memoizedState=a},unstable_isNewReconciler:!1},Kb={readContext:js,useCallback:Sp,useContext:js,useEffect:Jd,useImperativeHandle:kp,useInsertionEffect:vp,useLayoutEffect:jp,useMemo:Cp,useReducer:Kd,useRef:wp,useState:function(){return Kd(fl)},useDebugValue:Yd,useDeferredValue:function(l){var a=Ns();return Mp(a,gt.memoizedState,l)},useTransition:function(){var l=Kd(fl)[0],a=Ns().memoizedState;return[l,a]},useMutableSource:hp,useSyncExternalStore:up,useId:Ap,unstable_isNewReconciler:!1},Qb={readContext:js,useCallback:Sp,useContext:js,useEffect:Jd,useImperativeHandle:kp,useInsertionEffect:vp,useLayoutEffect:jp,useMemo:Cp,useReducer:Qd,useRef:wp,useState:function(){return Qd(fl)},useDebugValue:Yd,useDeferredValue:function(l){var a=Ns();return gt===null?a.memoizedState=l:Mp(a,gt.memoizedState,l)},useTransition:function(){var l=Qd(fl)[0],a=Ns().memoizedState;return[l,a]},useMutableSource:hp,useSyncExternalStore:up,useId:Ap,unstable_isNewReconciler:!1};function Bs(l,a){if(l&&l.defaultProps){a=se({},a),l=l.defaultProps;for(var h in l)a[h]===void 0&&(a[h]=l[h]);return a}return a}function Xd(l,a,h,f){a=l.memoizedState,h=h(f,a),h=h==null?a:se({},a,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Ga={isMounted:function(l){return(l=l._reactInternals)?gr(l)===l:!1},enqueueSetState:function(l,a,h){l=l._reactInternals;var f=Gt(),x=Kn(l),w=jn(f,x);w.payload=a,h!=null&&(w.callback=h),a=Vn(l,w,x),a!==null&&(zs(a,l,x,f),za(a,l,x))},enqueueReplaceState:function(l,a,h){l=l._reactInternals;var f=Gt(),x=Kn(l),w=jn(f,x);w.tag=1,w.payload=a,h!=null&&(w.callback=h),a=Vn(l,w,x),a!==null&&(zs(a,l,x,f),za(a,l,x))},enqueueForceUpdate:function(l,a){l=l._reactInternals;var h=Gt(),f=Kn(l),x=jn(h,f);x.tag=2,a!=null&&(x.callback=a),a=Vn(l,x,f),a!==null&&(zs(a,l,f,h),za(a,l,f))}};function Tp(l,a,h,f,x,w,N){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(f,w,N):a.prototype&&a.prototype.isPureReactComponent?!el(h,f)||!el(x,w):!0}function Dp(l,a,h){var f=!1,x=_n,w=a.contextType;return typeof w=="object"&&w!==null?w=js(w):(x=Xt(a)?wr:Dt.current,f=a.contextTypes,w=(f=f!=null)?Yr(l,x):_n),a=new a(h,w),l.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ga,l.stateNode=a,a._reactInternals=l,f&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=x,l.__reactInternalMemoizedMaskedChildContext=w),a}function Rp(l,a,h,f){l=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,f),a.state!==l&&Ga.enqueueReplaceState(a,a.state,null)}function Zd(l,a,h,f){var x=l.stateNode;x.props=h,x.state=l.memoizedState,x.refs={},zd(l);var w=a.contextType;typeof w=="object"&&w!==null?x.context=js(w):(w=Xt(a)?wr:Dt.current,x.context=Yr(l,w)),x.state=l.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(Xd(l,a,w,h),x.state=l.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&Ga.enqueueReplaceState(x,x.state,null),$a(l,h,x,f),x.state=l.memoizedState),typeof x.componentDidMount=="function"&&(l.flags|=4194308)}function ii(l,a){try{var h="",f=a;do h+=xe(f),f=f.return;while(f);var x=h}catch(w){x=`
Error generating stack: `+w.message+`
`+w.stack}return{value:l,source:a,stack:x,digest:null}}function eh(l,a,h){return{value:l,source:null,stack:h??null,digest:a??null}}function th(l,a){try{console.error(a.value)}catch(h){setTimeout(function(){throw h})}}var Jb=typeof WeakMap=="function"?WeakMap:Map;function Op(l,a,h){h=jn(-1,h),h.tag=3,h.payload={element:null};var f=a.value;return h.callback=function(){eo||(eo=!0,xh=f),th(l,a)},h}function Bp(l,a,h){h=jn(-1,h),h.tag=3;var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var x=a.value;h.payload=function(){return f(x)},h.callback=function(){th(l,a)}}var w=l.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){th(l,a),typeof f!="function"&&(qn===null?qn=new Set([this]):qn.add(this));var N=a.stack;this.componentDidCatch(a.value,{componentStack:N!==null?N:""})}),h}function Fp(l,a,h){var f=l.pingCache;if(f===null){f=l.pingCache=new Jb;var x=new Set;f.set(a,x)}else x=f.get(a),x===void 0&&(x=new Set,f.set(a,x));x.has(h)||(x.add(h),l=dv.bind(null,l,a,h),a.then(l,l))}function Ip(l){do{var a;if((a=l.tag===13)&&(a=l.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return l;l=l.return}while(l!==null);return null}function zp(l,a,h,f,x){return(l.mode&1)===0?(l===a?l.flags|=65536:(l.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(a=jn(-1,1),a.tag=2,Vn(h,a,1))),h.lanes|=1),l):(l.flags|=65536,l.lanes=x,l)}var Yb=E.ReactCurrentOwner,Zt=!1;function qt(l,a,h,f){a.child=l===null?ip(a,null,h,f):ti(a,l.child,h,f)}function $p(l,a,h,f,x){h=h.render;var w=a.ref;return ni(a,x),f=qd(l,a,h,f,w,x),h=Gd(),l!==null&&!Zt?(a.updateQueue=l.updateQueue,a.flags&=-2053,l.lanes&=~x,Nn(l,a,x)):(et&&h&&Ed(a),a.flags|=1,qt(l,a,f,x),a.child)}function _p(l,a,h,f,x){if(l===null){var w=h.type;return typeof w=="function"&&!Nh(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(a.tag=15,a.type=w,Wp(l,a,w,f,x)):(l=lo(h.type,null,f,a,a.mode,x),l.ref=a.ref,l.return=a,a.child=l)}if(w=l.child,(l.lanes&x)===0){var N=w.memoizedProps;if(h=h.compare,h=h!==null?h:el,h(N,f)&&l.ref===a.ref)return Nn(l,a,x)}return a.flags|=1,l=Jn(w,f),l.ref=a.ref,l.return=a,a.child=l}function Wp(l,a,h,f,x){if(l!==null){var w=l.memoizedProps;if(el(w,f)&&l.ref===a.ref)if(Zt=!1,a.pendingProps=f=w,(l.lanes&x)!==0)(l.flags&131072)!==0&&(Zt=!0);else return a.lanes=l.lanes,Nn(l,a,x)}return sh(l,a,h,f,x)}function Hp(l,a,h){var f=a.pendingProps,x=f.children,w=l!==null?l.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ai,fs),fs|=h;else{if((h&1073741824)===0)return l=w!==null?w.baseLanes|h:h,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:l,cachePool:null,transitions:null},a.updateQueue=null,Qe(ai,fs),fs|=l,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:h,Qe(ai,fs),fs|=f}else w!==null?(f=w.baseLanes|h,a.memoizedState=null):f=h,Qe(ai,fs),fs|=f;return qt(l,a,x,h),a.child}function Vp(l,a){var h=a.ref;(l===null&&h!==null||l!==null&&l.ref!==h)&&(a.flags|=512,a.flags|=2097152)}function sh(l,a,h,f,x){var w=Xt(h)?wr:Dt.current;return w=Yr(a,w),ni(a,x),h=qd(l,a,h,f,w,x),f=Gd(),l!==null&&!Zt?(a.updateQueue=l.updateQueue,a.flags&=-2053,l.lanes&=~x,Nn(l,a,x)):(et&&f&&Ed(a),a.flags|=1,qt(l,a,h,x),a.child)}function Up(l,a,h,f,x){if(Xt(h)){var w=!0;Pa(a)}else w=!1;if(ni(a,x),a.stateNode===null)Qa(l,a),Dp(a,h,f),Zd(a,h,f,x),f=!0;else if(l===null){var N=a.stateNode,A=a.memoizedProps;N.props=A;var L=N.context,W=h.contextType;typeof W=="object"&&W!==null?W=js(W):(W=Xt(h)?wr:Dt.current,W=Yr(a,W));var Y=h.getDerivedStateFromProps,te=typeof Y=="function"||typeof N.getSnapshotBeforeUpdate=="function";te||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(A!==f||L!==W)&&Rp(a,N,f,W),Hn=!1;var J=a.memoizedState;N.state=J,$a(a,f,N,x),L=a.memoizedState,A!==f||J!==L||Yt.current||Hn?(typeof Y=="function"&&(Xd(a,h,Y,f),L=a.memoizedState),(A=Hn||Tp(a,h,A,f,J,L,W))?(te||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(a.flags|=4194308)):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=L),N.props=f,N.state=L,N.context=W,f=A):(typeof N.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{N=a.stateNode,ap(l,a),A=a.memoizedProps,W=a.type===a.elementType?A:Bs(a.type,A),N.props=W,te=a.pendingProps,J=N.context,L=h.contextType,typeof L=="object"&&L!==null?L=js(L):(L=Xt(h)?wr:Dt.current,L=Yr(a,L));var ue=h.getDerivedStateFromProps;(Y=typeof ue=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(A!==te||J!==L)&&Rp(a,N,f,L),Hn=!1,J=a.memoizedState,N.state=J,$a(a,f,N,x);var pe=a.memoizedState;A!==te||J!==pe||Yt.current||Hn?(typeof ue=="function"&&(Xd(a,h,ue,f),pe=a.memoizedState),(W=Hn||Tp(a,h,W,f,J,pe,L)||!1)?(Y||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(f,pe,L),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(f,pe,L)),typeof N.componentDidUpdate=="function"&&(a.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof N.componentDidUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=pe),N.props=f,N.state=pe,N.context=L,f=W):(typeof N.componentDidUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||A===l.memoizedProps&&J===l.memoizedState||(a.flags|=1024),f=!1)}return nh(l,a,h,f,w,x)}function nh(l,a,h,f,x,w){Vp(l,a);var N=(a.flags&128)!==0;if(!f&&!N)return x&&Jm(a,h,!1),Nn(l,a,w);f=a.stateNode,Yb.current=a;var A=N&&typeof h.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,l!==null&&N?(a.child=ti(a,l.child,null,w),a.child=ti(a,null,A,w)):qt(l,a,A,w),a.memoizedState=f.state,x&&Jm(a,h,!0),a.child}function qp(l){var a=l.stateNode;a.pendingContext?Km(l,a.pendingContext,a.pendingContext!==a.context):a.context&&Km(l,a.context,!1),$d(l,a.containerInfo)}function Gp(l,a,h,f,x){return ei(),Dd(x),a.flags|=256,qt(l,a,h,f),a.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function ih(l){return{baseLanes:l,cachePool:null,transitions:null}}function Kp(l,a,h){var f=a.pendingProps,x=st.current,w=!1,N=(a.flags&128)!==0,A;if((A=N)||(A=l!==null&&l.memoizedState===null?!1:(x&2)!==0),A?(w=!0,a.flags&=-129):(l===null||l.memoizedState!==null)&&(x|=1),Qe(st,x&1),l===null)return Td(a),l=a.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((a.mode&1)===0?a.lanes=1:l.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(N=f.children,l=f.fallback,w?(f=a.mode,w=a.child,N={mode:"hidden",children:N},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=N):w=ao(N,f,0,null),l=Er(l,f,h,null),w.return=a,l.return=a,w.sibling=l,a.child=w,a.child.memoizedState=ih(h),a.memoizedState=rh,l):lh(a,N));if(x=l.memoizedState,x!==null&&(A=x.dehydrated,A!==null))return Xb(l,a,N,f,A,x,h);if(w){w=f.fallback,N=a.mode,x=l.child,A=x.sibling;var L={mode:"hidden",children:f.children};return(N&1)===0&&a.child!==x?(f=a.child,f.childLanes=0,f.pendingProps=L,a.deletions=null):(f=Jn(x,L),f.subtreeFlags=x.subtreeFlags&14680064),A!==null?w=Jn(A,w):(w=Er(w,N,h,null),w.flags|=2),w.return=a,f.return=a,f.sibling=w,a.child=f,f=w,w=a.child,N=l.child.memoizedState,N=N===null?ih(h):{baseLanes:N.baseLanes|h,cachePool:null,transitions:N.transitions},w.memoizedState=N,w.childLanes=l.childLanes&~h,a.memoizedState=rh,f}return w=l.child,l=w.sibling,f=Jn(w,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=h),f.return=a,f.sibling=null,l!==null&&(h=a.deletions,h===null?(a.deletions=[l],a.flags|=16):h.push(l)),a.child=f,a.memoizedState=null,f}function lh(l,a){return a=ao({mode:"visible",children:a},l.mode,0,null),a.return=l,l.child=a}function Ka(l,a,h,f){return f!==null&&Dd(f),ti(a,l.child,null,h),l=lh(a,a.pendingProps.children),l.flags|=2,a.memoizedState=null,l}function Xb(l,a,h,f,x,w,N){if(h)return a.flags&256?(a.flags&=-257,f=eh(Error(t(422))),Ka(l,a,N,f)):a.memoizedState!==null?(a.child=l.child,a.flags|=128,null):(w=f.fallback,x=a.mode,f=ao({mode:"visible",children:f.children},x,0,null),w=Er(w,x,N,null),w.flags|=2,f.return=a,w.return=a,f.sibling=w,a.child=f,(a.mode&1)!==0&&ti(a,l.child,null,N),a.child.memoizedState=ih(N),a.memoizedState=rh,w);if((a.mode&1)===0)return Ka(l,a,N,null);if(x.data==="$!"){if(f=x.nextSibling&&x.nextSibling.dataset,f)var A=f.dgst;return f=A,w=Error(t(419)),f=eh(w,f,void 0),Ka(l,a,N,f)}if(A=(N&l.childLanes)!==0,Zt||A){if(f=Nt,f!==null){switch(N&-N){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(f.suspendedLanes|N))!==0?0:x,x!==0&&x!==w.retryLane&&(w.retryLane=x,vn(l,x),zs(f,l,x,-1))}return jh(),f=eh(Error(t(421))),Ka(l,a,N,f)}return x.data==="$?"?(a.flags|=128,a.child=l.child,a=hv.bind(null,l),x._reactRetry=a,null):(l=w.treeContext,us=zn(x.nextSibling),hs=a,et=!0,Os=null,l!==null&&(bs[vs++]=wn,bs[vs++]=bn,bs[vs++]=br,wn=l.id,bn=l.overflow,br=a),a=lh(a,f.children),a.flags|=4096,a)}function Qp(l,a,h){l.lanes|=a;var f=l.alternate;f!==null&&(f.lanes|=a),Fd(l.return,a,h)}function ah(l,a,h,f,x){var w=l.memoizedState;w===null?l.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:h,tailMode:x}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=h,w.tailMode=x)}function Jp(l,a,h){var f=a.pendingProps,x=f.revealOrder,w=f.tail;if(qt(l,a,f.children,h),f=st.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=a.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Qp(l,h,a);else if(l.tag===19)Qp(l,h,a);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}f&=1}if(Qe(st,f),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(h=a.child,x=null;h!==null;)l=h.alternate,l!==null&&_a(l)===null&&(x=h),h=h.sibling;h=x,h===null?(x=a.child,a.child=null):(x=h.sibling,h.sibling=null),ah(a,!1,x,h,w);break;case"backwards":for(h=null,x=a.child,a.child=null;x!==null;){if(l=x.alternate,l!==null&&_a(l)===null){a.child=x;break}l=x.sibling,x.sibling=h,h=x,x=l}ah(a,!0,h,null,w);break;case"together":ah(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Qa(l,a){(a.mode&1)===0&&l!==null&&(l.alternate=null,a.alternate=null,a.flags|=2)}function Nn(l,a,h){if(l!==null&&(a.dependencies=l.dependencies),Sr|=a.lanes,(h&a.childLanes)===0)return null;if(l!==null&&a.child!==l.child)throw Error(t(153));if(a.child!==null){for(l=a.child,h=Jn(l,l.pendingProps),a.child=h,h.return=a;l.sibling!==null;)l=l.sibling,h=h.sibling=Jn(l,l.pendingProps),h.return=a;h.sibling=null}return a.child}function Zb(l,a,h){switch(a.tag){case 3:qp(a),ei();break;case 5:dp(a);break;case 1:Xt(a.type)&&Pa(a);break;case 4:$d(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,x=a.memoizedProps.value;Qe(Fa,f._currentValue),f._currentValue=x;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Qe(st,st.current&1),a.flags|=128,null):(h&a.child.childLanes)!==0?Kp(l,a,h):(Qe(st,st.current&1),l=Nn(l,a,h),l!==null?l.sibling:null);Qe(st,st.current&1);break;case 19:if(f=(h&a.childLanes)!==0,(l.flags&128)!==0){if(f)return Jp(l,a,h);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Qe(st,st.current),f)break;return null;case 22:case 23:return a.lanes=0,Hp(l,a,h)}return Nn(l,a,h)}var Yp,oh,Xp,Zp;Yp=function(l,a){for(var h=a.child;h!==null;){if(h.tag===5||h.tag===6)l.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},oh=function(){},Xp=function(l,a,h,f){var x=l.memoizedProps;if(x!==f){l=a.stateNode,Nr(en.current);var w=null;switch(h){case"input":x=Wt(l,x),f=Wt(l,f),w=[];break;case"select":x=se({},x,{value:void 0}),f=se({},f,{value:void 0}),w=[];break;case"textarea":x=Ae(l,x),f=Ae(l,f),w=[];break;default:typeof x.onClick!="function"&&typeof f.onClick=="function"&&(l.onclick=Aa)}Wc(h,f);var N;h=null;for(W in x)if(!f.hasOwnProperty(W)&&x.hasOwnProperty(W)&&x[W]!=null)if(W==="style"){var A=x[W];for(N in A)A.hasOwnProperty(N)&&(h||(h={}),h[N]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?w||(w=[]):(w=w||[]).push(W,null));for(W in f){var L=f[W];if(A=x!=null?x[W]:void 0,f.hasOwnProperty(W)&&L!==A&&(L!=null||A!=null))if(W==="style")if(A){for(N in A)!A.hasOwnProperty(N)||L&&L.hasOwnProperty(N)||(h||(h={}),h[N]="");for(N in L)L.hasOwnProperty(N)&&A[N]!==L[N]&&(h||(h={}),h[N]=L[N])}else h||(w||(w=[]),w.push(W,h)),h=L;else W==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(w=w||[]).push(W,L)):W==="children"?typeof L!="string"&&typeof L!="number"||(w=w||[]).push(W,""+L):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(L!=null&&W==="onScroll"&&Xe("scroll",l),w||A===L||(w=[])):(w=w||[]).push(W,L))}h&&(w=w||[]).push("style",h);var W=w;(a.updateQueue=W)&&(a.flags|=4)}},Zp=function(l,a,h,f){h!==f&&(a.flags|=4)};function pl(l,a){if(!et)switch(l.tailMode){case"hidden":a=l.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?a||l.tail===null?l.tail=null:l.tail.sibling=null:f.sibling=null}}function Ot(l){var a=l.alternate!==null&&l.alternate.child===l.child,h=0,f=0;if(a)for(var x=l.child;x!==null;)h|=x.lanes|x.childLanes,f|=x.subtreeFlags&14680064,f|=x.flags&14680064,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)h|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=f,l.childLanes=h,a}function ev(l,a,h){var f=a.pendingProps;switch(Ld(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(a),null;case 1:return Xt(a.type)&&La(),Ot(a),null;case 3:return f=a.stateNode,ri(),Ze(Yt),Ze(Dt),Hd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Oa(a)?a.flags|=4:l===null||l.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Os!==null&&(wh(Os),Os=null))),oh(l,a),Ot(a),null;case 5:_d(a);var x=Nr(dl.current);if(h=a.type,l!==null&&a.stateNode!=null)Xp(l,a,h,f,x),l.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Ot(a),null}if(l=Nr(en.current),Oa(a)){f=a.stateNode,h=a.type;var w=a.memoizedProps;switch(f[Zs]=a,f[il]=w,l=(a.mode&1)!==0,h){case"dialog":Xe("cancel",f),Xe("close",f);break;case"iframe":case"object":case"embed":Xe("load",f);break;case"video":case"audio":for(x=0;x<sl.length;x++)Xe(sl[x],f);break;case"source":Xe("error",f);break;case"img":case"image":case"link":Xe("error",f),Xe("load",f);break;case"details":Xe("toggle",f);break;case"input":Ys(f,w),Xe("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},Xe("invalid",f);break;case"textarea":Ne(f,w),Xe("invalid",f)}Wc(h,w),x=null;for(var N in w)if(w.hasOwnProperty(N)){var A=w[N];N==="children"?typeof A=="string"?f.textContent!==A&&(w.suppressHydrationWarning!==!0&&Ma(f.textContent,A,l),x=["children",A]):typeof A=="number"&&f.textContent!==""+A&&(w.suppressHydrationWarning!==!0&&Ma(f.textContent,A,l),x=["children",""+A]):i.hasOwnProperty(N)&&A!=null&&N==="onScroll"&&Xe("scroll",f)}switch(h){case"input":At(f),pr(f,w,!0);break;case"textarea":At(f),it(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Aa)}f=x,a.updateQueue=f,f!==null&&(a.flags|=4)}else{N=x.nodeType===9?x:x.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Ht(h)),l==="http://www.w3.org/1999/xhtml"?h==="script"?(l=N.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof f.is=="string"?l=N.createElement(h,{is:f.is}):(l=N.createElement(h),h==="select"&&(N=l,f.multiple?N.multiple=!0:f.size&&(N.size=f.size))):l=N.createElementNS(l,h),l[Zs]=a,l[il]=f,Yp(l,a,!1,!1),a.stateNode=l;e:{switch(N=Hc(h,f),h){case"dialog":Xe("cancel",l),Xe("close",l),x=f;break;case"iframe":case"object":case"embed":Xe("load",l),x=f;break;case"video":case"audio":for(x=0;x<sl.length;x++)Xe(sl[x],l);x=f;break;case"source":Xe("error",l),x=f;break;case"img":case"image":case"link":Xe("error",l),Xe("load",l),x=f;break;case"details":Xe("toggle",l),x=f;break;case"input":Ys(l,f),x=Wt(l,f),Xe("invalid",l);break;case"option":x=f;break;case"select":l._wrapperState={wasMultiple:!!f.multiple},x=se({},f,{value:void 0}),Xe("invalid",l);break;case"textarea":Ne(l,f),x=Ae(l,f),Xe("invalid",l);break;default:x=f}Wc(h,x),A=x;for(w in A)if(A.hasOwnProperty(w)){var L=A[w];w==="style"?xr(l,L):w==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&la(l,L)):w==="children"?typeof L=="string"?(h!=="textarea"||L!=="")&&cs(l,L):typeof L=="number"&&cs(l,""+L):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?L!=null&&w==="onScroll"&&Xe("scroll",l):L!=null&&R(l,w,L,N))}switch(h){case"input":At(l),pr(l,f,!1);break;case"textarea":At(l),it(l);break;case"option":f.value!=null&&l.setAttribute("value",""+Pe(f.value));break;case"select":l.multiple=!!f.multiple,w=f.value,w!=null?he(l,!!f.multiple,w,!1):f.defaultValue!=null&&he(l,!!f.multiple,f.defaultValue,!0);break;default:typeof x.onClick=="function"&&(l.onclick=Aa)}switch(h){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ot(a),null;case 6:if(l&&a.stateNode!=null)Zp(l,a,l.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(h=Nr(dl.current),Nr(en.current),Oa(a)){if(f=a.stateNode,h=a.memoizedProps,f[Zs]=a,(w=f.nodeValue!==h)&&(l=hs,l!==null))switch(l.tag){case 3:Ma(f.nodeValue,h,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Ma(f.nodeValue,h,(l.mode&1)!==0)}w&&(a.flags|=4)}else f=(h.nodeType===9?h:h.ownerDocument).createTextNode(f),f[Zs]=a,a.stateNode=f}return Ot(a),null;case 13:if(Ze(st),f=a.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(et&&us!==null&&(a.mode&1)!==0&&(a.flags&128)===0)sp(),ei(),a.flags|=98560,w=!1;else if(w=Oa(a),f!==null&&f.dehydrated!==null){if(l===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Zs]=a}else ei(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ot(a),w=!1}else Os!==null&&(wh(Os),Os=null),w=!0;if(!w)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=h,a):(f=f!==null,f!==(l!==null&&l.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(l===null||(st.current&1)!==0?yt===0&&(yt=3):jh())),a.updateQueue!==null&&(a.flags|=4),Ot(a),null);case 4:return ri(),oh(l,a),l===null&&nl(a.stateNode.containerInfo),Ot(a),null;case 10:return Bd(a.type._context),Ot(a),null;case 17:return Xt(a.type)&&La(),Ot(a),null;case 19:if(Ze(st),w=a.memoizedState,w===null)return Ot(a),null;if(f=(a.flags&128)!==0,N=w.rendering,N===null)if(f)pl(w,!1);else{if(yt!==0||l!==null&&(l.flags&128)!==0)for(l=a.child;l!==null;){if(N=_a(l),N!==null){for(a.flags|=128,pl(w,!1),f=N.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=h,h=a.child;h!==null;)w=h,l=f,w.flags&=14680066,N=w.alternate,N===null?(w.childLanes=0,w.lanes=l,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=N.childLanes,w.lanes=N.lanes,w.child=N.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=N.memoizedProps,w.memoizedState=N.memoizedState,w.updateQueue=N.updateQueue,w.type=N.type,l=N.dependencies,w.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),h=h.sibling;return Qe(st,st.current&1|2),a.child}l=l.sibling}w.tail!==null&&at()>oi&&(a.flags|=128,f=!0,pl(w,!1),a.lanes=4194304)}else{if(!f)if(l=_a(N),l!==null){if(a.flags|=128,f=!0,h=l.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),pl(w,!0),w.tail===null&&w.tailMode==="hidden"&&!N.alternate&&!et)return Ot(a),null}else 2*at()-w.renderingStartTime>oi&&h!==1073741824&&(a.flags|=128,f=!0,pl(w,!1),a.lanes=4194304);w.isBackwards?(N.sibling=a.child,a.child=N):(h=w.last,h!==null?h.sibling=N:a.child=N,w.last=N)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=at(),a.sibling=null,h=st.current,Qe(st,f?h&1|2:h&1),a):(Ot(a),null);case 22:case 23:return vh(),f=a.memoizedState!==null,l!==null&&l.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(fs&1073741824)!==0&&(Ot(a),a.subtreeFlags&6&&(a.flags|=8192)):Ot(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function tv(l,a){switch(Ld(a),a.tag){case 1:return Xt(a.type)&&La(),l=a.flags,l&65536?(a.flags=l&-65537|128,a):null;case 3:return ri(),Ze(Yt),Ze(Dt),Hd(),l=a.flags,(l&65536)!==0&&(l&128)===0?(a.flags=l&-65537|128,a):null;case 5:return _d(a),null;case 13:if(Ze(st),l=a.memoizedState,l!==null&&l.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ei()}return l=a.flags,l&65536?(a.flags=l&-65537|128,a):null;case 19:return Ze(st),null;case 4:return ri(),null;case 10:return Bd(a.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var Ja=!1,Bt=!1,sv=typeof WeakSet=="function"?WeakSet:Set,fe=null;function li(l,a){var h=l.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(f){lt(l,a,f)}else h.current=null}function ch(l,a,h){try{h()}catch(f){lt(l,a,f)}}var ex=!1;function nv(l,a){if(vd=xa,l=Tm(),fd(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var f=h.getSelection&&h.getSelection();if(f&&f.rangeCount!==0){h=f.anchorNode;var x=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break e}var N=0,A=-1,L=-1,W=0,Y=0,te=l,J=null;t:for(;;){for(var ue;te!==h||x!==0&&te.nodeType!==3||(A=N+x),te!==w||f!==0&&te.nodeType!==3||(L=N+f),te.nodeType===3&&(N+=te.nodeValue.length),(ue=te.firstChild)!==null;)J=te,te=ue;for(;;){if(te===l)break t;if(J===h&&++W===x&&(A=N),J===w&&++Y===f&&(L=N),(ue=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=ue}h=A===-1||L===-1?null:{start:A,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(jd={focusedElem:l,selectionRange:h},xa=!1,fe=a;fe!==null;)if(a=fe,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,fe=l;else for(;fe!==null;){a=fe;try{var pe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,ot=pe.memoizedState,F=a.stateNode,D=F.getSnapshotBeforeUpdate(a.elementType===a.type?ge:Bs(a.type,ge),ot);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){lt(a,a.return,re)}if(l=a.sibling,l!==null){l.return=a.return,fe=l;break}fe=a.return}return pe=ex,ex=!1,pe}function xl(l,a,h){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&l)===l){var w=x.destroy;x.destroy=void 0,w!==void 0&&ch(a,h,w)}x=x.next}while(x!==f)}}function Ya(l,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&l)===l){var f=h.create;h.destroy=f()}h=h.next}while(h!==a)}}function dh(l){var a=l.ref;if(a!==null){var h=l.stateNode;switch(l.tag){case 5:l=h;break;default:l=h}typeof a=="function"?a(l):a.current=l}}function tx(l){var a=l.alternate;a!==null&&(l.alternate=null,tx(a)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(a=l.stateNode,a!==null&&(delete a[Zs],delete a[il],delete a[Cd],delete a[zb],delete a[$b])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function sx(l){return l.tag===5||l.tag===3||l.tag===4}function nx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||sx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function hh(l,a,h){var f=l.tag;if(f===5||f===6)l=l.stateNode,a?h.nodeType===8?h.parentNode.insertBefore(l,a):h.insertBefore(l,a):(h.nodeType===8?(a=h.parentNode,a.insertBefore(l,h)):(a=h,a.appendChild(l)),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=Aa));else if(f!==4&&(l=l.child,l!==null))for(hh(l,a,h),l=l.sibling;l!==null;)hh(l,a,h),l=l.sibling}function uh(l,a,h){var f=l.tag;if(f===5||f===6)l=l.stateNode,a?h.insertBefore(l,a):h.appendChild(l);else if(f!==4&&(l=l.child,l!==null))for(uh(l,a,h),l=l.sibling;l!==null;)uh(l,a,h),l=l.sibling}var Et=null,Fs=!1;function Un(l,a,h){for(h=h.child;h!==null;)rx(l,a,h),h=h.sibling}function rx(l,a,h){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(da,h)}catch{}switch(h.tag){case 5:Bt||li(h,a);case 6:var f=Et,x=Fs;Et=null,Un(l,a,h),Et=f,Fs=x,Et!==null&&(Fs?(l=Et,h=h.stateNode,l.nodeType===8?l.parentNode.removeChild(h):l.removeChild(h)):Et.removeChild(h.stateNode));break;case 18:Et!==null&&(Fs?(l=Et,h=h.stateNode,l.nodeType===8?Sd(l.parentNode,h):l.nodeType===1&&Sd(l,h),Ki(l)):Sd(Et,h.stateNode));break;case 4:f=Et,x=Fs,Et=h.stateNode.containerInfo,Fs=!0,Un(l,a,h),Et=f,Fs=x;break;case 0:case 11:case 14:case 15:if(!Bt&&(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){x=f=f.next;do{var w=x,N=w.destroy;w=w.tag,N!==void 0&&((w&2)!==0||(w&4)!==0)&&ch(h,a,N),x=x.next}while(x!==f)}Un(l,a,h);break;case 1:if(!Bt&&(li(h,a),f=h.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(A){lt(h,a,A)}Un(l,a,h);break;case 21:Un(l,a,h);break;case 22:h.mode&1?(Bt=(f=Bt)||h.memoizedState!==null,Un(l,a,h),Bt=f):Un(l,a,h);break;default:Un(l,a,h)}}function ix(l){var a=l.updateQueue;if(a!==null){l.updateQueue=null;var h=l.stateNode;h===null&&(h=l.stateNode=new sv),a.forEach(function(f){var x=uv.bind(null,l,f);h.has(f)||(h.add(f),f.then(x,x))})}}function Is(l,a){var h=a.deletions;if(h!==null)for(var f=0;f<h.length;f++){var x=h[f];try{var w=l,N=a,A=N;e:for(;A!==null;){switch(A.tag){case 5:Et=A.stateNode,Fs=!1;break e;case 3:Et=A.stateNode.containerInfo,Fs=!0;break e;case 4:Et=A.stateNode.containerInfo,Fs=!0;break e}A=A.return}if(Et===null)throw Error(t(160));rx(w,N,x),Et=null,Fs=!1;var L=x.alternate;L!==null&&(L.return=null),x.return=null}catch(W){lt(x,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)lx(a,l),a=a.sibling}function lx(l,a){var h=l.alternate,f=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Is(a,l),sn(l),f&4){try{xl(3,l,l.return),Ya(3,l)}catch(ge){lt(l,l.return,ge)}try{xl(5,l,l.return)}catch(ge){lt(l,l.return,ge)}}break;case 1:Is(a,l),sn(l),f&512&&h!==null&&li(h,h.return);break;case 5:if(Is(a,l),sn(l),f&512&&h!==null&&li(h,h.return),l.flags&32){var x=l.stateNode;try{cs(x,"")}catch(ge){lt(l,l.return,ge)}}if(f&4&&(x=l.stateNode,x!=null)){var w=l.memoizedProps,N=h!==null?h.memoizedProps:w,A=l.type,L=l.updateQueue;if(l.updateQueue=null,L!==null)try{A==="input"&&w.type==="radio"&&w.name!=null&&os(x,w),Hc(A,N);var W=Hc(A,w);for(N=0;N<L.length;N+=2){var Y=L[N],te=L[N+1];Y==="style"?xr(x,te):Y==="dangerouslySetInnerHTML"?la(x,te):Y==="children"?cs(x,te):R(x,Y,te,W)}switch(A){case"input":Tn(x,w);break;case"textarea":Le(x,w);break;case"select":var J=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!w.multiple;var ue=w.value;ue!=null?he(x,!!w.multiple,ue,!1):J!==!!w.multiple&&(w.defaultValue!=null?he(x,!!w.multiple,w.defaultValue,!0):he(x,!!w.multiple,w.multiple?[]:"",!1))}x[il]=w}catch(ge){lt(l,l.return,ge)}}break;case 6:if(Is(a,l),sn(l),f&4){if(l.stateNode===null)throw Error(t(162));x=l.stateNode,w=l.memoizedProps;try{x.nodeValue=w}catch(ge){lt(l,l.return,ge)}}break;case 3:if(Is(a,l),sn(l),f&4&&h!==null&&h.memoizedState.isDehydrated)try{Ki(a.containerInfo)}catch(ge){lt(l,l.return,ge)}break;case 4:Is(a,l),sn(l);break;case 13:Is(a,l),sn(l),x=l.child,x.flags&8192&&(w=x.memoizedState!==null,x.stateNode.isHidden=w,!w||x.alternate!==null&&x.alternate.memoizedState!==null||(ph=at())),f&4&&ix(l);break;case 22:if(Y=h!==null&&h.memoizedState!==null,l.mode&1?(Bt=(W=Bt)||Y,Is(a,l),Bt=W):Is(a,l),sn(l),f&8192){if(W=l.memoizedState!==null,(l.stateNode.isHidden=W)&&!Y&&(l.mode&1)!==0)for(fe=l,Y=l.child;Y!==null;){for(te=fe=Y;fe!==null;){switch(J=fe,ue=J.child,J.tag){case 0:case 11:case 14:case 15:xl(4,J,J.return);break;case 1:li(J,J.return);var pe=J.stateNode;if(typeof pe.componentWillUnmount=="function"){f=J,h=J.return;try{a=f,pe.props=a.memoizedProps,pe.state=a.memoizedState,pe.componentWillUnmount()}catch(ge){lt(f,h,ge)}}break;case 5:li(J,J.return);break;case 22:if(J.memoizedState!==null){cx(te);continue}}ue!==null?(ue.return=J,fe=ue):cx(te)}Y=Y.sibling}e:for(Y=null,te=l;;){if(te.tag===5){if(Y===null){Y=te;try{x=te.stateNode,W?(w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(A=te.stateNode,L=te.memoizedProps.style,N=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=Fi("display",N))}catch(ge){lt(l,l.return,ge)}}}else if(te.tag===6){if(Y===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(ge){lt(l,l.return,ge)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===l)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===l)break e;for(;te.sibling===null;){if(te.return===null||te.return===l)break e;Y===te&&(Y=null),te=te.return}Y===te&&(Y=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Is(a,l),sn(l),f&4&&ix(l);break;case 21:break;default:Is(a,l),sn(l)}}function sn(l){var a=l.flags;if(a&2){try{e:{for(var h=l.return;h!==null;){if(sx(h)){var f=h;break e}h=h.return}throw Error(t(160))}switch(f.tag){case 5:var x=f.stateNode;f.flags&32&&(cs(x,""),f.flags&=-33);var w=nx(l);uh(l,w,x);break;case 3:case 4:var N=f.stateNode.containerInfo,A=nx(l);hh(l,A,N);break;default:throw Error(t(161))}}catch(L){lt(l,l.return,L)}l.flags&=-3}a&4096&&(l.flags&=-4097)}function rv(l,a,h){fe=l,ax(l)}function ax(l,a,h){for(var f=(l.mode&1)!==0;fe!==null;){var x=fe,w=x.child;if(x.tag===22&&f){var N=x.memoizedState!==null||Ja;if(!N){var A=x.alternate,L=A!==null&&A.memoizedState!==null||Bt;A=Ja;var W=Bt;if(Ja=N,(Bt=L)&&!W)for(fe=x;fe!==null;)N=fe,L=N.child,N.tag===22&&N.memoizedState!==null?dx(x):L!==null?(L.return=N,fe=L):dx(x);for(;w!==null;)fe=w,ax(w),w=w.sibling;fe=x,Ja=A,Bt=W}ox(l)}else(x.subtreeFlags&8772)!==0&&w!==null?(w.return=x,fe=w):ox(l)}}function ox(l){for(;fe!==null;){var a=fe;if((a.flags&8772)!==0){var h=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Bt||Ya(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Bt)if(h===null)f.componentDidMount();else{var x=a.elementType===a.type?h.memoizedProps:Bs(a.type,h.memoizedProps);f.componentDidUpdate(x,h.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&cp(a,w,f);break;case 3:var N=a.updateQueue;if(N!==null){if(h=null,a.child!==null)switch(a.child.tag){case 5:h=a.child.stateNode;break;case 1:h=a.child.stateNode}cp(a,N,h)}break;case 5:var A=a.stateNode;if(h===null&&a.flags&4){h=A;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&h.focus();break;case"img":L.src&&(h.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var Y=W.memoizedState;if(Y!==null){var te=Y.dehydrated;te!==null&&Ki(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||a.flags&512&&dh(a)}catch(J){lt(a,a.return,J)}}if(a===l){fe=null;break}if(h=a.sibling,h!==null){h.return=a.return,fe=h;break}fe=a.return}}function cx(l){for(;fe!==null;){var a=fe;if(a===l){fe=null;break}var h=a.sibling;if(h!==null){h.return=a.return,fe=h;break}fe=a.return}}function dx(l){for(;fe!==null;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var h=a.return;try{Ya(4,a)}catch(L){lt(a,h,L)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var x=a.return;try{f.componentDidMount()}catch(L){lt(a,x,L)}}var w=a.return;try{dh(a)}catch(L){lt(a,w,L)}break;case 5:var N=a.return;try{dh(a)}catch(L){lt(a,N,L)}}}catch(L){lt(a,a.return,L)}if(a===l){fe=null;break}var A=a.sibling;if(A!==null){A.return=a.return,fe=A;break}fe=a.return}}var iv=Math.ceil,Xa=E.ReactCurrentDispatcher,fh=E.ReactCurrentOwner,ks=E.ReactCurrentBatchConfig,_e=0,Nt=null,ft=null,Lt=0,fs=0,ai=$n(0),yt=0,gl=null,Sr=0,Za=0,mh=0,yl=null,es=null,ph=0,oi=1/0,kn=null,eo=!1,xh=null,qn=null,to=!1,Gn=null,so=0,wl=0,gh=null,no=-1,ro=0;function Gt(){return(_e&6)!==0?at():no!==-1?no:no=at()}function Kn(l){return(l.mode&1)===0?1:(_e&2)!==0&&Lt!==0?Lt&-Lt:Wb.transition!==null?(ro===0&&(ro=nm()),ro):(l=Ue,l!==0||(l=window.event,l=l===void 0?16:um(l.type)),l)}function zs(l,a,h,f){if(50<wl)throw wl=0,gh=null,Error(t(185));Hi(l,h,f),((_e&2)===0||l!==Nt)&&(l===Nt&&((_e&2)===0&&(Za|=h),yt===4&&Qn(l,Lt)),ts(l,f),h===1&&_e===0&&(a.mode&1)===0&&(oi=at()+500,Ta&&Wn()))}function ts(l,a){var h=l.callbackNode;Ww(l,a);var f=fa(l,l===Nt?Lt:0);if(f===0)h!==null&&em(h),l.callbackNode=null,l.callbackPriority=0;else if(a=f&-f,l.callbackPriority!==a){if(h!=null&&em(h),a===1)l.tag===0?_b(ux.bind(null,l)):Ym(ux.bind(null,l)),Fb(function(){(_e&6)===0&&Wn()}),h=null;else{switch(rm(f)){case 1:h=Jc;break;case 4:h=tm;break;case 16:h=ca;break;case 536870912:h=sm;break;default:h=ca}h=bx(h,hx.bind(null,l))}l.callbackPriority=a,l.callbackNode=h}}function hx(l,a){if(no=-1,ro=0,(_e&6)!==0)throw Error(t(327));var h=l.callbackNode;if(ci()&&l.callbackNode!==h)return null;var f=fa(l,l===Nt?Lt:0);if(f===0)return null;if((f&30)!==0||(f&l.expiredLanes)!==0||a)a=io(l,f);else{a=f;var x=_e;_e|=2;var w=mx();(Nt!==l||Lt!==a)&&(kn=null,oi=at()+500,Mr(l,a));do try{ov();break}catch(A){fx(l,A)}while(!0);Od(),Xa.current=w,_e=x,ft!==null?a=0:(Nt=null,Lt=0,a=yt)}if(a!==0){if(a===2&&(x=Yc(l),x!==0&&(f=x,a=yh(l,x))),a===1)throw h=gl,Mr(l,0),Qn(l,f),ts(l,at()),h;if(a===6)Qn(l,f);else{if(x=l.current.alternate,(f&30)===0&&!lv(x)&&(a=io(l,f),a===2&&(w=Yc(l),w!==0&&(f=w,a=yh(l,w))),a===1))throw h=gl,Mr(l,0),Qn(l,f),ts(l,at()),h;switch(l.finishedWork=x,l.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Ar(l,es,kn);break;case 3:if(Qn(l,f),(f&130023424)===f&&(a=ph+500-at(),10<a)){if(fa(l,0)!==0)break;if(x=l.suspendedLanes,(x&f)!==f){Gt(),l.pingedLanes|=l.suspendedLanes&x;break}l.timeoutHandle=kd(Ar.bind(null,l,es,kn),a);break}Ar(l,es,kn);break;case 4:if(Qn(l,f),(f&4194240)===f)break;for(a=l.eventTimes,x=-1;0<f;){var N=31-Ds(f);w=1<<N,N=a[N],N>x&&(x=N),f&=~w}if(f=x,f=at()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*iv(f/1960))-f,10<f){l.timeoutHandle=kd(Ar.bind(null,l,es,kn),f);break}Ar(l,es,kn);break;case 5:Ar(l,es,kn);break;default:throw Error(t(329))}}}return ts(l,at()),l.callbackNode===h?hx.bind(null,l):null}function yh(l,a){var h=yl;return l.current.memoizedState.isDehydrated&&(Mr(l,a).flags|=256),l=io(l,a),l!==2&&(a=es,es=h,a!==null&&wh(a)),l}function wh(l){es===null?es=l:es.push.apply(es,l)}function lv(l){for(var a=l;;){if(a.flags&16384){var h=a.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var f=0;f<h.length;f++){var x=h[f],w=x.getSnapshot;x=x.value;try{if(!Rs(w(),x))return!1}catch{return!1}}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===l)break;for(;a.sibling===null;){if(a.return===null||a.return===l)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qn(l,a){for(a&=~mh,a&=~Za,l.suspendedLanes|=a,l.pingedLanes&=~a,l=l.expirationTimes;0<a;){var h=31-Ds(a),f=1<<h;l[h]=-1,a&=~f}}function ux(l){if((_e&6)!==0)throw Error(t(327));ci();var a=fa(l,0);if((a&1)===0)return ts(l,at()),null;var h=io(l,a);if(l.tag!==0&&h===2){var f=Yc(l);f!==0&&(a=f,h=yh(l,f))}if(h===1)throw h=gl,Mr(l,0),Qn(l,a),ts(l,at()),h;if(h===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=a,Ar(l,es,kn),ts(l,at()),null}function bh(l,a){var h=_e;_e|=1;try{return l(a)}finally{_e=h,_e===0&&(oi=at()+500,Ta&&Wn())}}function Cr(l){Gn!==null&&Gn.tag===0&&(_e&6)===0&&ci();var a=_e;_e|=1;var h=ks.transition,f=Ue;try{if(ks.transition=null,Ue=1,l)return l()}finally{Ue=f,ks.transition=h,_e=a,(_e&6)===0&&Wn()}}function vh(){fs=ai.current,Ze(ai)}function Mr(l,a){l.finishedWork=null,l.finishedLanes=0;var h=l.timeoutHandle;if(h!==-1&&(l.timeoutHandle=-1,Bb(h)),ft!==null)for(h=ft.return;h!==null;){var f=h;switch(Ld(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&La();break;case 3:ri(),Ze(Yt),Ze(Dt),Hd();break;case 5:_d(f);break;case 4:ri();break;case 13:Ze(st);break;case 19:Ze(st);break;case 10:Bd(f.type._context);break;case 22:case 23:vh()}h=h.return}if(Nt=l,ft=l=Jn(l.current,null),Lt=fs=a,yt=0,gl=null,mh=Za=Sr=0,es=yl=null,jr!==null){for(a=0;a<jr.length;a++)if(h=jr[a],f=h.interleaved,f!==null){h.interleaved=null;var x=f.next,w=h.pending;if(w!==null){var N=w.next;w.next=x,f.next=N}h.pending=f}jr=null}return l}function fx(l,a){do{var h=ft;try{if(Od(),Wa.current=qa,Ha){for(var f=nt.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}Ha=!1}if(kr=0,jt=gt=nt=null,hl=!1,ul=0,fh.current=null,h===null||h.return===null){yt=1,gl=a,ft=null;break}e:{var w=l,N=h.return,A=h,L=a;if(a=Lt,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=L,Y=A,te=Y.tag;if((Y.mode&1)===0&&(te===0||te===11||te===15)){var J=Y.alternate;J?(Y.updateQueue=J.updateQueue,Y.memoizedState=J.memoizedState,Y.lanes=J.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ue=Ip(N);if(ue!==null){ue.flags&=-257,zp(ue,N,A,w,a),ue.mode&1&&Fp(w,W,a),a=ue,L=W;var pe=a.updateQueue;if(pe===null){var ge=new Set;ge.add(L),a.updateQueue=ge}else pe.add(L);break e}else{if((a&1)===0){Fp(w,W,a),jh();break e}L=Error(t(426))}}else if(et&&A.mode&1){var ot=Ip(N);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),zp(ot,N,A,w,a),Dd(ii(L,A));break e}}w=L=ii(L,A),yt!==4&&(yt=2),yl===null?yl=[w]:yl.push(w),w=N;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var F=Op(w,L,a);op(w,F);break e;case 1:A=L;var D=w.type,z=w.stateNode;if((w.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(qn===null||!qn.has(z)))){w.flags|=65536,a&=-a,w.lanes|=a;var re=Bp(w,A,a);op(w,re);break e}}w=w.return}while(w!==null)}xx(h)}catch(we){a=we,ft===h&&h!==null&&(ft=h=h.return);continue}break}while(!0)}function mx(){var l=Xa.current;return Xa.current=qa,l===null?qa:l}function jh(){(yt===0||yt===3||yt===2)&&(yt=4),Nt===null||(Sr&268435455)===0&&(Za&268435455)===0||Qn(Nt,Lt)}function io(l,a){var h=_e;_e|=2;var f=mx();(Nt!==l||Lt!==a)&&(kn=null,Mr(l,a));do try{av();break}catch(x){fx(l,x)}while(!0);if(Od(),_e=h,Xa.current=f,ft!==null)throw Error(t(261));return Nt=null,Lt=0,yt}function av(){for(;ft!==null;)px(ft)}function ov(){for(;ft!==null&&!Dw();)px(ft)}function px(l){var a=wx(l.alternate,l,fs);l.memoizedProps=l.pendingProps,a===null?xx(l):ft=a,fh.current=null}function xx(l){var a=l;do{var h=a.alternate;if(l=a.return,(a.flags&32768)===0){if(h=ev(h,a,fs),h!==null){ft=h;return}}else{if(h=tv(h,a),h!==null){h.flags&=32767,ft=h;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{yt=6,ft=null;return}}if(a=a.sibling,a!==null){ft=a;return}ft=a=l}while(a!==null);yt===0&&(yt=5)}function Ar(l,a,h){var f=Ue,x=ks.transition;try{ks.transition=null,Ue=1,cv(l,a,h,f)}finally{ks.transition=x,Ue=f}return null}function cv(l,a,h,f){do ci();while(Gn!==null);if((_e&6)!==0)throw Error(t(327));h=l.finishedWork;var x=l.finishedLanes;if(h===null)return null;if(l.finishedWork=null,l.finishedLanes=0,h===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var w=h.lanes|h.childLanes;if(Hw(l,w),l===Nt&&(ft=Nt=null,Lt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||to||(to=!0,bx(ca,function(){return ci(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=ks.transition,ks.transition=null;var N=Ue;Ue=1;var A=_e;_e|=4,fh.current=null,nv(l,h),lx(h,l),Eb(jd),xa=!!vd,jd=vd=null,l.current=h,rv(h),Rw(),_e=A,Ue=N,ks.transition=w}else l.current=h;if(to&&(to=!1,Gn=l,so=x),w=l.pendingLanes,w===0&&(qn=null),Fw(h.stateNode),ts(l,at()),a!==null)for(f=l.onRecoverableError,h=0;h<a.length;h++)x=a[h],f(x.value,{componentStack:x.stack,digest:x.digest});if(eo)throw eo=!1,l=xh,xh=null,l;return(so&1)!==0&&l.tag!==0&&ci(),w=l.pendingLanes,(w&1)!==0?l===gh?wl++:(wl=0,gh=l):wl=0,Wn(),null}function ci(){if(Gn!==null){var l=rm(so),a=ks.transition,h=Ue;try{if(ks.transition=null,Ue=16>l?16:l,Gn===null)var f=!1;else{if(l=Gn,Gn=null,so=0,(_e&6)!==0)throw Error(t(331));var x=_e;for(_e|=4,fe=l.current;fe!==null;){var w=fe,N=w.child;if((fe.flags&16)!==0){var A=w.deletions;if(A!==null){for(var L=0;L<A.length;L++){var W=A[L];for(fe=W;fe!==null;){var Y=fe;switch(Y.tag){case 0:case 11:case 15:xl(8,Y,w)}var te=Y.child;if(te!==null)te.return=Y,fe=te;else for(;fe!==null;){Y=fe;var J=Y.sibling,ue=Y.return;if(tx(Y),Y===W){fe=null;break}if(J!==null){J.return=ue,fe=J;break}fe=ue}}}var pe=w.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var ot=ge.sibling;ge.sibling=null,ge=ot}while(ge!==null)}}fe=w}}if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,fe=N;else e:for(;fe!==null;){if(w=fe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:xl(9,w,w.return)}var F=w.sibling;if(F!==null){F.return=w.return,fe=F;break e}fe=w.return}}var D=l.current;for(fe=D;fe!==null;){N=fe;var z=N.child;if((N.subtreeFlags&2064)!==0&&z!==null)z.return=N,fe=z;else e:for(N=D;fe!==null;){if(A=fe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Ya(9,A)}}catch(we){lt(A,A.return,we)}if(A===N){fe=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,fe=re;break e}fe=A.return}}if(_e=x,Wn(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(da,l)}catch{}f=!0}return f}finally{Ue=h,ks.transition=a}}return!1}function gx(l,a,h){a=ii(h,a),a=Op(l,a,1),l=Vn(l,a,1),a=Gt(),l!==null&&(Hi(l,1,a),ts(l,a))}function lt(l,a,h){if(l.tag===3)gx(l,l,h);else for(;a!==null;){if(a.tag===3){gx(a,l,h);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qn===null||!qn.has(f))){l=ii(h,l),l=Bp(a,l,1),a=Vn(a,l,1),l=Gt(),a!==null&&(Hi(a,1,l),ts(a,l));break}}a=a.return}}function dv(l,a,h){var f=l.pingCache;f!==null&&f.delete(a),a=Gt(),l.pingedLanes|=l.suspendedLanes&h,Nt===l&&(Lt&h)===h&&(yt===4||yt===3&&(Lt&130023424)===Lt&&500>at()-ph?Mr(l,0):mh|=h),ts(l,a)}function yx(l,a){a===0&&((l.mode&1)===0?a=1:(a=ua,ua<<=1,(ua&130023424)===0&&(ua=4194304)));var h=Gt();l=vn(l,a),l!==null&&(Hi(l,a,h),ts(l,h))}function hv(l){var a=l.memoizedState,h=0;a!==null&&(h=a.retryLane),yx(l,h)}function uv(l,a){var h=0;switch(l.tag){case 13:var f=l.stateNode,x=l.memoizedState;x!==null&&(h=x.retryLane);break;case 19:f=l.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),yx(l,h)}var wx;wx=function(l,a,h){if(l!==null)if(l.memoizedProps!==a.pendingProps||Yt.current)Zt=!0;else{if((l.lanes&h)===0&&(a.flags&128)===0)return Zt=!1,Zb(l,a,h);Zt=(l.flags&131072)!==0}else Zt=!1,et&&(a.flags&1048576)!==0&&Xm(a,Ra,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Qa(l,a),l=a.pendingProps;var x=Yr(a,Dt.current);ni(a,h),x=qd(null,a,f,l,x,h);var w=Gd();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Xt(f)?(w=!0,Pa(a)):w=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,zd(a),x.updater=Ga,a.stateNode=x,x._reactInternals=a,Zd(a,f,l,h),a=nh(null,a,f,!0,w,h)):(a.tag=0,et&&w&&Ed(a),qt(null,a,x,h),a=a.child),a;case 16:f=a.elementType;e:{switch(Qa(l,a),l=a.pendingProps,x=f._init,f=x(f._payload),a.type=f,x=a.tag=mv(f),l=Bs(f,l),x){case 0:a=sh(null,a,f,l,h);break e;case 1:a=Up(null,a,f,l,h);break e;case 11:a=$p(null,a,f,l,h);break e;case 14:a=_p(null,a,f,Bs(f.type,l),h);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Bs(f,x),sh(l,a,f,x,h);case 1:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Bs(f,x),Up(l,a,f,x,h);case 3:e:{if(qp(a),l===null)throw Error(t(387));f=a.pendingProps,w=a.memoizedState,x=w.element,ap(l,a),$a(a,f,null,h);var N=a.memoizedState;if(f=N.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:N.cache,pendingSuspenseBoundaries:N.pendingSuspenseBoundaries,transitions:N.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){x=ii(Error(t(423)),a),a=Gp(l,a,f,h,x);break e}else if(f!==x){x=ii(Error(t(424)),a),a=Gp(l,a,f,h,x);break e}else for(us=zn(a.stateNode.containerInfo.firstChild),hs=a,et=!0,Os=null,h=ip(a,null,f,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ei(),f===x){a=Nn(l,a,h);break e}qt(l,a,f,h)}a=a.child}return a;case 5:return dp(a),l===null&&Td(a),f=a.type,x=a.pendingProps,w=l!==null?l.memoizedProps:null,N=x.children,Nd(f,x)?N=null:w!==null&&Nd(f,w)&&(a.flags|=32),Vp(l,a),qt(l,a,N,h),a.child;case 6:return l===null&&Td(a),null;case 13:return Kp(l,a,h);case 4:return $d(a,a.stateNode.containerInfo),f=a.pendingProps,l===null?a.child=ti(a,null,f,h):qt(l,a,f,h),a.child;case 11:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Bs(f,x),$p(l,a,f,x,h);case 7:return qt(l,a,a.pendingProps,h),a.child;case 8:return qt(l,a,a.pendingProps.children,h),a.child;case 12:return qt(l,a,a.pendingProps.children,h),a.child;case 10:e:{if(f=a.type._context,x=a.pendingProps,w=a.memoizedProps,N=x.value,Qe(Fa,f._currentValue),f._currentValue=N,w!==null)if(Rs(w.value,N)){if(w.children===x.children&&!Yt.current){a=Nn(l,a,h);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var A=w.dependencies;if(A!==null){N=w.child;for(var L=A.firstContext;L!==null;){if(L.context===f){if(w.tag===1){L=jn(-1,h&-h),L.tag=2;var W=w.updateQueue;if(W!==null){W=W.shared;var Y=W.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),W.pending=L}}w.lanes|=h,L=w.alternate,L!==null&&(L.lanes|=h),Fd(w.return,h,a),A.lanes|=h;break}L=L.next}}else if(w.tag===10)N=w.type===a.type?null:w.child;else if(w.tag===18){if(N=w.return,N===null)throw Error(t(341));N.lanes|=h,A=N.alternate,A!==null&&(A.lanes|=h),Fd(N,h,a),N=w.sibling}else N=w.child;if(N!==null)N.return=w;else for(N=w;N!==null;){if(N===a){N=null;break}if(w=N.sibling,w!==null){w.return=N.return,N=w;break}N=N.return}w=N}qt(l,a,x.children,h),a=a.child}return a;case 9:return x=a.type,f=a.pendingProps.children,ni(a,h),x=js(x),f=f(x),a.flags|=1,qt(l,a,f,h),a.child;case 14:return f=a.type,x=Bs(f,a.pendingProps),x=Bs(f.type,x),_p(l,a,f,x,h);case 15:return Wp(l,a,a.type,a.pendingProps,h);case 17:return f=a.type,x=a.pendingProps,x=a.elementType===f?x:Bs(f,x),Qa(l,a),a.tag=1,Xt(f)?(l=!0,Pa(a)):l=!1,ni(a,h),Dp(a,f,x),Zd(a,f,x,h),nh(null,a,f,!0,l,h);case 19:return Jp(l,a,h);case 22:return Hp(l,a,h)}throw Error(t(156,a.tag))};function bx(l,a){return Zf(l,a)}function fv(l,a,h,f){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(l,a,h,f){return new fv(l,a,h,f)}function Nh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function mv(l){if(typeof l=="function")return Nh(l)?1:0;if(l!=null){if(l=l.$$typeof,l===V)return 11;if(l===ie)return 14}return 2}function Jn(l,a){var h=l.alternate;return h===null?(h=Ss(l.tag,a,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=a,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&14680064,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,a=l.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h}function lo(l,a,h,f,x,w){var N=2;if(f=l,typeof l=="function")Nh(l)&&(N=1);else if(typeof l=="string")N=5;else e:switch(l){case O:return Er(h.children,x,w,a);case ne:N=8,x|=8;break;case $:return l=Ss(12,h,a,x|2),l.elementType=$,l.lanes=w,l;case ee:return l=Ss(13,h,a,x),l.elementType=ee,l.lanes=w,l;case ae:return l=Ss(19,h,a,x),l.elementType=ae,l.lanes=w,l;case de:return ao(h,x,w,a);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Z:N=10;break e;case _:N=9;break e;case V:N=11;break e;case ie:N=14;break e;case U:N=16,f=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return a=Ss(N,h,a,x),a.elementType=l,a.type=f,a.lanes=w,a}function Er(l,a,h,f){return l=Ss(7,l,f,a),l.lanes=h,l}function ao(l,a,h,f){return l=Ss(22,l,f,a),l.elementType=de,l.lanes=h,l.stateNode={isHidden:!1},l}function kh(l,a,h){return l=Ss(6,l,null,a),l.lanes=h,l}function Sh(l,a,h){return a=Ss(4,l.children!==null?l.children:[],l.key,a),a.lanes=h,a.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},a}function pv(l,a,h,f,x){this.tag=a,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xc(0),this.expirationTimes=Xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.identifierPrefix=f,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ch(l,a,h,f,x,w,N,A,L){return l=new pv(l,a,h,A,L),a===1?(a=1,w===!0&&(a|=8)):a=0,w=Ss(3,null,null,a),l.current=w,w.stateNode=l,w.memoizedState={element:f,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},zd(w),l}function xv(l,a,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:f==null?null:""+f,children:l,containerInfo:a,implementation:h}}function vx(l){if(!l)return _n;l=l._reactInternals;e:{if(gr(l)!==l||l.tag!==1)throw Error(t(170));var a=l;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Xt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(l.tag===1){var h=l.type;if(Xt(h))return Qm(l,h,a)}return a}function jx(l,a,h,f,x,w,N,A,L){return l=Ch(h,f,!0,l,x,w,N,A,L),l.context=vx(null),h=l.current,f=Gt(),x=Kn(h),w=jn(f,x),w.callback=a??null,Vn(h,w,x),l.current.lanes=x,Hi(l,x,f),ts(l,f),l}function oo(l,a,h,f){var x=a.current,w=Gt(),N=Kn(x);return h=vx(h),a.context===null?a.context=h:a.pendingContext=h,a=jn(w,N),a.payload={element:l},f=f===void 0?null:f,f!==null&&(a.callback=f),l=Vn(x,a,N),l!==null&&(zs(l,x,N,w),za(l,x,N)),N}function co(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Nx(l,a){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<a?h:a}}function Mh(l,a){Nx(l,a),(l=l.alternate)&&Nx(l,a)}function gv(){return null}var kx=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ah(l){this._internalRoot=l}ho.prototype.render=Ah.prototype.render=function(l){var a=this._internalRoot;if(a===null)throw Error(t(409));oo(l,a,null,null)},ho.prototype.unmount=Ah.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var a=l.containerInfo;Cr(function(){oo(null,l,null,null)}),a[gn]=null}};function ho(l){this._internalRoot=l}ho.prototype.unstable_scheduleHydration=function(l){if(l){var a=am();l={blockedOn:null,target:l,priority:a};for(var h=0;h<Bn.length&&a!==0&&a<Bn[h].priority;h++);Bn.splice(h,0,l),h===0&&dm(l)}};function Eh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function uo(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Sx(){}function yv(l,a,h,f,x){if(x){if(typeof f=="function"){var w=f;f=function(){var W=co(N);w.call(W)}}var N=jx(a,f,l,0,null,!1,!1,"",Sx);return l._reactRootContainer=N,l[gn]=N.current,nl(l.nodeType===8?l.parentNode:l),Cr(),N}for(;x=l.lastChild;)l.removeChild(x);if(typeof f=="function"){var A=f;f=function(){var W=co(L);A.call(W)}}var L=Ch(l,0,!1,null,null,!1,!1,"",Sx);return l._reactRootContainer=L,l[gn]=L.current,nl(l.nodeType===8?l.parentNode:l),Cr(function(){oo(a,L,h,f)}),L}function fo(l,a,h,f,x){var w=h._reactRootContainer;if(w){var N=w;if(typeof x=="function"){var A=x;x=function(){var L=co(N);A.call(L)}}oo(a,N,l,x)}else N=yv(h,a,l,x,f);return co(N)}im=function(l){switch(l.tag){case 3:var a=l.stateNode;if(a.current.memoizedState.isDehydrated){var h=Wi(a.pendingLanes);h!==0&&(Zc(a,h|1),ts(a,at()),(_e&6)===0&&(oi=at()+500,Wn()))}break;case 13:Cr(function(){var f=vn(l,1);if(f!==null){var x=Gt();zs(f,l,1,x)}}),Mh(l,1)}},ed=function(l){if(l.tag===13){var a=vn(l,134217728);if(a!==null){var h=Gt();zs(a,l,134217728,h)}Mh(l,134217728)}},lm=function(l){if(l.tag===13){var a=Kn(l),h=vn(l,a);if(h!==null){var f=Gt();zs(h,l,a,f)}Mh(l,a)}},am=function(){return Ue},om=function(l,a){var h=Ue;try{return Ue=l,a()}finally{Ue=h}},qc=function(l,a,h){switch(a){case"input":if(Tn(l,h),a=h.name,h.type==="radio"&&a!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<h.length;a++){var f=h[a];if(f!==l&&f.form===l.form){var x=Ea(f);if(!x)throw Error(t(90));tt(f),Tn(f,x)}}}break;case"textarea":Le(l,h);break;case"select":a=h.value,a!=null&&he(l,!!h.multiple,a,!1)}},qf=bh,Gf=Cr;var wv={usingClientEntryPoint:!1,Events:[ll,Qr,Ea,Vf,Uf,bh]},bl={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bv={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Yf(l),l===null?null:l.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||gv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{da=mo.inject(bv),Xs=mo}catch{}}return ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wv,ss.createPortal=function(l,a){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(a))throw Error(t(200));return xv(l,a,null,h)},ss.createRoot=function(l,a){if(!Eh(l))throw Error(t(299));var h=!1,f="",x=kx;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ch(l,1,!1,null,null,h,!1,f,x),l[gn]=a.current,nl(l.nodeType===8?l.parentNode:l),new Ah(a)},ss.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var a=l._reactInternals;if(a===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=Yf(a),l=l===null?null:l.stateNode,l},ss.flushSync=function(l){return Cr(l)},ss.hydrate=function(l,a,h){if(!uo(a))throw Error(t(200));return fo(null,l,a,!0,h)},ss.hydrateRoot=function(l,a,h){if(!Eh(l))throw Error(t(405));var f=h!=null&&h.hydratedSources||null,x=!1,w="",N=kx;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(N=h.onRecoverableError)),a=jx(a,null,l,1,h??null,x,!1,w,N),l[gn]=a.current,nl(l),f)for(l=0;l<f.length;l++)h=f[l],x=h._getVersion,x=x(h._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[h,x]:a.mutableSourceEagerHydrationData.push(h,x);return new ho(a)},ss.render=function(l,a,h){if(!uo(a))throw Error(t(200));return fo(null,l,a,!1,h)},ss.unmountComponentAtNode=function(l){if(!uo(l))throw Error(t(40));return l._reactRootContainer?(Cr(function(){fo(null,null,l,!1,function(){l._reactRootContainer=null,l[gn]=null})}),!0):!1},ss.unstable_batchedUpdates=bh,ss.unstable_renderSubtreeIntoContainer=function(l,a,h,f){if(!uo(h))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return fo(l,a,h,!1,f)},ss.version="18.3.1-next-f1338f8080-20240426",ss}var Rx;function Tv(){if(Rx)return Th.exports;Rx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Th.exports=Pv(),Th.exports}var Ox;function Dv(){if(Ox)return po;Ox=1;var n=Tv();return po.createRoot=n.createRoot,po.hydrateRoot=n.hydrateRoot,po}var Rv=Dv();const Ov=M0(Rv);function Bv(n,e){if(n instanceof RegExp)return{keys:!1,pattern:n};var t,s,i,o,c=[],d="",u=n.split("/");for(u[0]||u.shift();i=u.shift();)t=i[0],t==="*"?(c.push(t),d+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=i.indexOf("?",1),o=i.indexOf(".",1),c.push(i.substring(1,~s?s:~o?o:i.length)),d+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(d+=(~s?"?":"")+"\\"+i.substring(o))):d+="/"+i;return{keys:c,pattern:new RegExp("^"+d+(e?"(?=$|/)":"/?$"),"i")}}var Oh={exports:{}},Bh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function Fv(){if(Bx)return Bh;Bx=1;var n=Nc();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function d(g,y){var b=y(),v=s({inst:{value:b,getSnapshot:y}}),j=v[0].inst,S=v[1];return o(function(){j.value=b,j.getSnapshot=y,u(j)&&S({inst:j})},[g,b,y]),i(function(){return u(j)&&S({inst:j}),g(function(){u(j)&&S({inst:j})})},[g]),c(b),b}function u(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!t(g,b)}catch{return!0}}function m(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:d;return Bh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Bh}var Fx;function Iv(){return Fx||(Fx=1,Oh.exports=Fv()),Oh.exports}var zv=Iv();const $v=Av.useInsertionEffect,_v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wv=_v?C.useLayoutEffect:C.useEffect,Hv=$v||Wv,E0=n=>{const e=C.useRef([n,(...t)=>e[0](...t)]).current;return Hv(()=>{e[0]=n}),e[1]},Vv="popstate",cf="pushState",df="replaceState",Uv="hashchange",Ix=[Vv,cf,df,Uv],qv=n=>{for(const e of Ix)addEventListener(e,n);return()=>{for(const e of Ix)removeEventListener(e,n)}},L0=(n,e)=>zv.useSyncExternalStore(qv,n,e),zx=()=>location.search,Gv=({ssrSearch:n}={})=>L0(zx,n!=null?()=>n:zx),$x=()=>location.pathname,Kv=({ssrPath:n}={})=>L0($x,n!=null?()=>n:$x),Qv=(n,{replace:e=!1,state:t=null}={})=>history[e?df:cf](t,"",n),Jv=(n={})=>[Kv(n),Qv],_x=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[_x]>"u"){for(const n of[cf,df]){const e=history[n];history[n]=function(){const t=e.apply(this,arguments),s=new Event(n);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,_x,{value:!0})}const Yv=(n,e)=>e.toLowerCase().indexOf(n.toLowerCase())?"~"+e:e.slice(n.length)||"/",P0=(n="")=>n==="/"?"":n,Xv=(n,e)=>n[0]==="~"?n.slice(1):P0(e)+n,Zv=(n="",e)=>Yv(Wx(P0(n)),Wx(e)),Wx=n=>{try{return decodeURI(n)}catch{return n}},T0={hook:Jv,searchHook:Gv,parser:Bv,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:n=>n,aroundNav:(n,e,t)=>n(e,t)},D0=C.createContext(T0),Ql=()=>C.useContext(D0),R0={},O0=C.createContext(R0),B0=()=>C.useContext(O0),kc=n=>{const[e,t]=n.hook(n);return[Zv(n.base,e),E0((s,i)=>n.aroundNav(t,Xv(s,n.base),i))]},Ri=()=>kc(Ql()),F0=(n,e,t,s)=>{const{pattern:i,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:n(e||"*",s),c=i.exec(t)||[],[d,...u]=c;return d!==void 0?[!0,(()=>{const m=o!==!1?Object.fromEntries(o.map((g,y)=>[g,u[y]])):c.groups;let p={...u};return m&&Object.assign(p,m),p})(),...s?[d]:[]]:[!1,null]},ej=({children:n,...e})=>{var p,g,y;const t=Ql(),s=e.hook?T0:t;let i=s;const[o,c=e.ssrSearch??""]=((p=e.ssrPath)==null?void 0:p.split("?"))??[];o&&(e.ssrSearch=c,e.ssrPath=o),e.hrefs=e.hrefs??((g=e.hook)==null?void 0:g.hrefs),e.searchHook=e.searchHook??((y=e.hook)==null?void 0:y.searchHook);let d=C.useRef({}),u=d.current,m=u;for(let b in s){const v=b==="base"?s[b]+(e[b]??""):e[b]??s[b];u===m&&v!==m[b]&&(d.current=m={...m}),m[b]=v,(v!==s[b]||v!==i[b])&&(i=m)}return C.createElement(D0.Provider,{value:i,children:n})},Hx=({children:n,component:e},t)=>e?C.createElement(e,{params:t}):typeof n=="function"?n(t):n,tj=n=>{let e=C.useRef(R0);const t=e.current;return e.current=Object.keys(n).length!==Object.keys(t).length||Object.entries(n).some(([s,i])=>i!==t[s])?n:t},ct=({path:n,nest:e,match:t,...s})=>{const i=Ql(),[o]=kc(i),[c,d,u]=t??F0(i.parser,n,o,e),m=tj({...B0(),...d});if(!c)return null;const p=u?C.createElement(ej,{base:u},Hx(s,m)):Hx(s,m);return C.createElement(O0.Provider,{value:m,children:p})},hf=C.forwardRef((n,e)=>{const t=Ql(),[s,i]=kc(t),{to:o="",href:c=o,onClick:d,asChild:u,children:m,className:p,replace:g,state:y,transition:b,...v}=n,j=E0(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(d==null||d(k),k.defaultPrevented||(k.preventDefault(),i(c,n)))}),S=t.hrefs(c[0]==="~"?c.slice(1):t.base+c,t);return u&&C.isValidElement(m)?C.cloneElement(m,{onClick:j,href:S}):C.createElement("a",{...v,onClick:j,href:S,className:p!=null&&p.call?p(s===c):p,children:m,ref:e})}),I0=n=>Array.isArray(n)?n.flatMap(e=>I0(e&&e.type===C.Fragment?e.props.children:e)):[n],z0=({children:n,location:e})=>{const t=Ql(),[s]=kc(t);for(const i of I0(n)){let o=0;if(C.isValidElement(i)&&(o=F0(t.parser,i.props.path,e||s,i.props.nest))[0])return C.cloneElement(i,{match:o})}return null};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$0=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:o,iconNode:c,...d},u)=>C.createElement("svg",{ref:u,...nj,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:$0("lucide",i),...d},[...c.map(([m,p])=>C.createElement(m,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(n,e)=>{const t=C.forwardRef(({className:s,...i},o)=>C.createElement(rj,{ref:o,iconNode:e,className:$0(`lucide-${sj(n)}`,s),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=le("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=le("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=le("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=le("CircleArrowRight",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=le("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=le("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=le("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=le("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=le("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=le("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=le("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=le("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=le("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=le("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=le("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=le("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=le("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=le("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=le("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=le("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=le("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=le("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=le("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=le("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=le("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=le("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=le("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=le("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=le("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=le("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=le("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=le("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=le("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=le("SquareDashed",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=le("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=le("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=le("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mi="";async function Be(n,e){const t=await fetch(`${mi}${n}`);if(!t.ok)throw new Error(`API error: ${t.status}`);const s=await t.json();if(s.success===!1)throw new Error(s.error||"API request failed");return e?s[e]:s}async function Je(n,e,t){const s=await fetch(`${mi}${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`API error: ${s.status}`);const i=await s.json();if(i.success===!1)throw new Error(i.error||"API request failed");return t?i[t]:i}function Fj(n){return n>=90?"A":n>=80?"B":n>=70?"C":n>=60?"D":"F"}function xo(n){var j,S,k,M,R,E,B,I,O;const e="projectPath"in n||"scannedAt"in n||"summary"in n;let t;if(e)t=n;else if(n.raw_data)try{t=typeof n.raw_data=="string"?JSON.parse(n.raw_data):n.raw_data}catch{}const s=(t==null?void 0:t.summary)||{},i=(t==null?void 0:t.healthScore)||{},o=(t==null?void 0:t.security)||{},c=(t==null?void 0:t.outdated)||{},d=(((j=o.critical)==null?void 0:j.length)||0)+(((S=o.high)==null?void 0:S.length)||0)+(((k=o.medium)==null?void 0:k.length)||0)+(((M=o.low)==null?void 0:M.length)||0),u=(n.security_critical||0)+(n.security_high||0)+(n.security_medium||0)+(n.security_low||0),m=d||u,g=(Array.isArray(c)?c.length:c.totalOutdated||(((R=c.major)==null?void 0:R.length)||0)+(((E=c.minor)==null?void 0:E.length)||0)+(((B=c.patch)==null?void 0:B.length)||0))||n.outdated_count||0,y=((O=(I=t==null?void 0:t.emissions)==null?void 0:I.current)==null?void 0:O.monthlyCO2Kg)||n.co2_monthly||0,b=i.score||n.score||n.health_score||0,v=i.grade||n.grade||Fj(b);return{id:n.id,projectPath:n.projectPath||n.project_path,timestamp:n.scannedAt||n.scanned_at||n.created_at,score:b,grade:v,metrics:{waste:s.wastePercent||n.waste_percent||0,security:m,outdated:g,emissions:y},raw:t}}function Ij(n){var t,s,i,o,c,d,u,m;const e=n.components||{};return{waste:{score:((t=e.waste)==null?void 0:t.score)||0,max:((s=e.waste)==null?void 0:s.maxScore)||30},security:{score:((i=e.security)==null?void 0:i.score)||0,max:((o=e.security)==null?void 0:o.maxScore)||40},dependencies:{score:((c=e.outdated)==null?void 0:c.score)||0,max:((d=e.outdated)==null?void 0:d.maxScore)||20},emissions:{score:((u=e.emissions)==null?void 0:u.score)||0,max:((m=e.emissions)==null?void 0:m.maxScore)||10}}}function zj(n){const e=n.scans||[];return{dates:e.map(t=>{const s=new Date(t.created_at);return`${s.getDate()} ${s.toLocaleString("en",{month:"short"})}`}).reverse(),scores:e.map(t=>t.score||0).reverse(),waste:e.map(t=>t.waste_percent||0).reverse()}}const be={getProjects:async()=>(await Be("/api/projects")).projects||[],getLatestScan:async n=>{const e=await Be(`/api/scans/latest/${encodeURIComponent(n)}?includeRaw=1`);return e.scan?xo(e.scan):null},getScans:async(n,e=30)=>((await Be(`/api/scans?project=${encodeURIComponent(n)}&limit=${e}`)).scans||[]).map(xo),getScan:async n=>{const e=await Be(`/api/scans/${n}?includeRaw=1`);return e.scan?xo(e.scan):null},getStats:async(n,e=30)=>{const t=await Be(`/api/scans?project=${encodeURIComponent(n)}&limit=${e}`);return zj(t)},runScan:async n=>{const e=await Je("/api/scan",{projectPath:n});return xo(e.scan)},getScoreBreakdown:async n=>{const e=await Be(`/api/drill/score/${n}`);return Ij(e)},getUnusedDeps:async n=>(await Be(`/api/drill/unused-deps/${n}`)).dependencies||[],getDeadCode:async n=>Be(`/api/drill/dead-code/${n}`),getSecurity:async n=>Be(`/api/drill/security/${n}`),getOutdated:async n=>Be(`/api/drill/outdated/${n}`),getEmissions:async n=>Be(`/api/drill/costs/${n}`),recalculateEmissions:async(n,e)=>Je("/api/drill/emissions/recalculate",{scanId:n,monthlyVisitors:e}),getFixStatus:async n=>(await Be(`/api/fix/status/${encodeURIComponent(n)}`)).status||{modules:[]},previewFix:async(n,e)=>Be(`/api/fix/preview/${n}/${encodeURIComponent(e)}`),applyFix:async(n,e)=>Je("/api/fix/apply",{moduleId:n,projectPath:e}),getQuarantine:async n=>Be(`/api/quarantine/${encodeURIComponent(n)}`),restoreQuarantine:async(n,e)=>Je("/api/quarantine/restore",{projectPath:n,sessionId:e}),purgeQuarantine:async(n,e)=>Je("/api/quarantine/purge",{projectPath:n,sessionId:e}),quarantineDeadCode:async(n,e)=>Je("/api/quarantine/dead-code",{projectPath:n,scanId:e}),quarantineUnusedAssets:async(n,e)=>Je("/api/quarantine/unused-assets",{projectPath:n,scanId:e}),getBundles:async n=>Be(`/api/drill/bundles/${n}`),getCssAnalysis:async n=>Be(`/api/drill/css/${n}`),getDuplicates:async n=>Be(`/api/drill/duplicates/${n}`),getLicenses:async n=>Be(`/api/drill/licenses/${n}`),getHeavyDeps:async n=>Be(`/api/drill/heavy-deps/${n}`),getAssets:async n=>Be(`/api/drill/assets/${n}`),optimiseImage:async(n,e,t="webp",s=80)=>Je("/api/fix/optimise-image",{projectPath:n,filePath:e,format:t,quality:s}),getBuildLogs:async n=>Be(`/api/drill/logs/${n}`),getSystemInfo:async()=>Be("/api/system-info"),getSettings:async()=>Be("/api/settings"),saveSettings:async n=>Je("/api/settings",{settings:n}),getConfig:async n=>Be(`/api/config/${encodeURIComponent(n)}`),saveConfig:async(n,e)=>Je(`/api/config/${encodeURIComponent(n)}`,e),getLicenseStatus:async()=>Be("/api/license/status"),activateLicense:async(n,e)=>Je("/api/license/activate",{licenseKey:n,email:e}),getRegisteredProjects:async()=>Be("/api/projects/registered"),getSlotInfo:async()=>Be("/api/projects/slots"),registerProject:async(n,e)=>Je("/api/projects/register",{projectPath:n,projectName:e}),removeProject:async n=>{const e=await fetch(`${mi}/api/projects/registered/${n}`,{method:"DELETE"});if(!e.ok)throw new Error(`API error: ${e.status}`);return e.json()},checkProjectRegistered:async n=>Be(`/api/projects/check/${encodeURIComponent(n)}`),getProjectFiles:async(n,e=2)=>Be(`/api/projects/files/${encodeURIComponent(n)}?depth=${e}`),getActionList:async(n,e="json")=>e==="json"?Be(`/api/report/action-list/${n}?format=json`):(await fetch(`${mi}/api/report/action-list/${n}?format=${e}`)).text(),getProgressReport:async(n,e,t="json")=>{const s=e||"previous";return t==="json"?Be(`/api/report/progress?to=${n}&from=${s}&format=json`):(await fetch(`${mi}/api/report/progress?to=${n}&from=${s}&format=${t}`)).text()},getScansForDiff:async n=>Be(`/api/report/scans/${encodeURIComponent(n)}`),getVersion:async()=>Be("/api/version"),checkForUpdate:async()=>Be("/api/update/check"),installUpdate:async()=>Je("/api/update/install",{}),getESGPresets:async()=>Be("/api/report/esg/presets"),downloadESGReport:async n=>{var s;const e=new URLSearchParams;e.set("format",n.format),n.period&&e.set("period",n.period),n.after&&e.set("after",n.after),n.before&&e.set("before",n.before),(s=n.projects)!=null&&s.length&&e.set("projects",n.projects.join(","));const t=await fetch(`${mi}/api/report/esg?${e}`);if(!t.ok){const i=await t.json();throw new Error(i.error||"Failed to generate ESG report")}return t.blob()},getESGReportJSON:async n=>{var t;const e=new URLSearchParams;return e.set("format","json"),n.period&&e.set("period",n.period),n.after&&e.set("after",n.after),n.before&&e.set("before",n.before),(t=n.projects)!=null&&t.length&&e.set("projects",n.projects.join(",")),Be(`/api/report/esg?${e}`)},previewDeadCodeFix:async(n,e)=>Je("/api/fix/dead-code/preview",{projectPath:n,minConfidence:e}),applyDeadCodeFix:async(n,e)=>Je("/api/fix/dead-code/apply",{projectPath:n,...e}),listFixSnapshots:async n=>Be(`/api/fix/snapshots/${encodeURIComponent(n)}`),rollbackFix:async(n,e)=>Je("/api/fix/rollback",{projectPath:n,snapshotId:e}),previewCleanup:async(n,e)=>Je("/api/fix/cleanup/preview",{projectPath:n,...e}),applyCleanup:async(n,e)=>Je("/api/fix/cleanup/apply",{projectPath:n,...e}),rollbackCleanup:async(n,e)=>Je("/api/fix/cleanup/rollback",{projectPath:n,snapshotId:e}),readFile:async(n,e)=>Je("/api/file/read",{projectPath:n,file:e}),saveFile:async(n,e,t)=>Je("/api/file/save",{projectPath:n,file:e,content:t}),saveResolutions:async(n,e,t)=>Je("/api/resolutions",{projectPath:n,scanId:e,resolutions:t}),getResolutions:async n=>Be(`/api/resolutions/${n}`),uninstallDep:async(n,e)=>Je("/api/fix/uninstall-dep",{projectPath:n,packageName:e}),updateDep:async(n,e,t)=>Je("/api/fix/update-dep",{projectPath:n,packageName:e,version:t}),openFile:async(n,e,t)=>Je("/api/open",{projectPath:n,file:e,line:t}),openFolder:async(n,e)=>Je("/api/open-folder",{projectPath:n,file:e})},$j="https://peer-audit.oynk.co.uk";async function rt(n,e={}){const t=localStorage.getItem("admin_token"),s={"Content-Type":"application/json",...e.headers||{}};t&&(s.Authorization=`Bearer ${t}`);const i=await fetch(`${$j}${n}`,{...e,headers:s});if(i.status===401)throw localStorage.removeItem("admin_token"),new Error("Session expired");if(!i.ok){const o=await i.json().catch(()=>({error:`HTTP ${i.status}`}));throw new Error(o.error||"Request failed")}return i.json()}const Cs={login:async n=>{const e=await rt("/admin/login",{method:"POST",body:JSON.stringify({password:n})});return e.token&&localStorage.setItem("admin_token",e.token),e},logout:async()=>{try{await rt("/admin/logout",{method:"POST"})}finally{localStorage.removeItem("admin_token")}},isLoggedIn:()=>!!localStorage.getItem("admin_token"),getCustomers:async n=>{const e=n?`?search=${encodeURIComponent(n)}`:"";return rt(`/admin/customers${e}`)},getCustomer:async n=>rt(`/admin/customers/${n}`),createCustomer:async n=>rt("/admin/customers",{method:"POST",body:JSON.stringify(n)}),updateCustomer:async(n,e)=>rt(`/admin/customers/${n}`,{method:"PUT",body:JSON.stringify(e)}),deleteCustomer:async n=>rt(`/admin/customers/${n}`,{method:"DELETE"}),addLicenseToCustomer:async(n,e)=>rt(`/admin/customers/${n}/licenses`,{method:"POST",body:JSON.stringify(e)}),removeLicenseFromCustomer:async(n,e)=>rt(`/admin/customers/${n}/licenses/${e}`,{method:"DELETE"}),getLicenses:async n=>{const e=new URLSearchParams;n!=null&&n.search&&e.set("search",n.search),n!=null&&n.tier&&e.set("tier",n.tier),n!=null&&n.status&&e.set("status",n.status);const t=e.toString();return rt(`/admin/licenses${t?`?${t}`:""}`)},getLicense:async n=>rt(`/admin/licenses/${n}`),createLicense:async n=>rt("/admin/licenses",{method:"POST",body:JSON.stringify(n)}),revokeLicense:async n=>rt(`/admin/licenses/${n}/revoke`,{method:"POST"}),toggleCICD:async(n,e)=>rt(`/admin/licenses/${n}/cicd`,{method:"POST",body:JSON.stringify({enabled:e})}),getTiers:async()=>rt("/admin/tiers"),getStats:async()=>rt("/admin/stats"),getEmailStatus:async()=>rt("/admin/emails/status"),getEmailTemplates:async()=>rt("/admin/emails/templates"),previewEmail:async(n,e)=>{const t=e?`?license=${e}`:"";return rt(`/admin/emails/preview/${n}${t}`)},sendEmail:async(n,e,t)=>rt("/admin/emails/send",{method:"POST",body:JSON.stringify({template:n,licenseKey:e,force:t})}),getEmailHistory:async n=>rt(`/admin/emails/history/${n}`),broadcastEmail:async n=>rt("/admin/emails/broadcast",{method:"POST",body:JSON.stringify(n)}),checkScheduledEmails:async n=>rt("/admin/emails/check-scheduled",{method:"POST",body:JSON.stringify({dryRun:n})})},ey=C.createContext(null);function _j({children:n}){const[e,t]=C.useState("loading"),[s,i]=C.useState(null),[o,c]=C.useState(null),[d,u]=C.useState([]),[m,p]=C.useState(null),[g,y]=C.useState(null),b=C.useCallback(async()=>{try{t("loading"),y(null);const E=await be.getLicenseStatus(),B=await be.getRegisteredProjects();i({active:E.active,orderId:E.orderId,email:E.email,tier:E.tier,tierName:E.tierName,expires:E.expires,daysRemaining:E.daysRemaining,expired:E.expired}),c({hasLicense:B.hasLicense,tier:B.tier,tierName:B.tierName,slotsUsed:B.slotsUsed,slotsTotal:B.slotsTotal,slotsRemaining:B.slotsRemaining,expires:B.expires,daysRemaining:B.daysRemaining}),u(B.projects||[]),E.active?!B.projects||B.projects.length===0?t("project-selection"):(t("dashboard"),!m&&B.projects.length>0&&p(B.projects[0].id)):t("activation")}catch(E){console.error("Failed to load app state:",E),t("activation"),y(E instanceof Error?E.message:"Failed to connect to dashboard server")}},[m]);C.useEffect(()=>{b()},[b]);const R={state:e,license:s,slots:o,registeredProjects:d,selectedProjectId:m,error:g,setSelectedProjectId:p,activateLicense:async(E,B)=>{try{y(null);const I=await be.activateLicense(E,B);return I.success?(await b(),!0):(y(I.error||"Activation failed"),!1)}catch(I){return y(I instanceof Error?I.message:"Activation failed"),!1}},registerProject:async(E,B)=>{try{y(null);const I=await be.registerProject(E,B);return I.success?(I.project&&!I.alreadyRegistered&&(u(O=>[...O,I.project]),c(O=>O?{...O,slotsUsed:I.slotsUsed??O.slotsUsed,slotsRemaining:(I.slotsTotal??O.slotsTotal)-(I.slotsUsed??O.slotsUsed)}:null)),p(I.project.id),t("dashboard"),{success:!0}):{success:!1,error:I.error}}catch(I){const O=I instanceof Error?I.message:"Failed to register project";return y(O),{success:!1,error:O}}},removeProject:async E=>{try{y(null);const B=await be.removeProject(E);if(B.success){if(u(I=>I.filter(O=>O.id!==E)),c(I=>I?{...I,slotsUsed:B.slotsUsed??I.slotsUsed,slotsRemaining:(B.slotsTotal??I.slotsTotal)-(B.slotsUsed??I.slotsUsed)}:null),m===E){const I=d.filter(O=>O.id!==E);I.length>0?p(I[0].id):(p(null),t("project-selection"))}return!0}return!1}catch(B){return y(B instanceof Error?B.message:"Failed to remove project"),!1}},refresh:b,goToProjectSelection:()=>{t("project-selection")},goToDashboard:()=>{d.length>0&&t("dashboard")}};return r.jsx(ey.Provider,{value:R,children:n})}function Yl(){const n=C.useContext(ey);if(!n)throw new Error("useAppState must be used within AppStateProvider");return n}const ty=C.createContext(null);function Wj({children:n}){const e=Yl(),t=(e==null?void 0:e.registeredProjects)||[],s=e==null?void 0:e.selectedProjectId,i=t.find(ie=>ie.id===s),o=(i==null?void 0:i.path)||null,[c,d]=C.useState([]),[u,m]=C.useState(null),[p,g]=C.useState(null),[y,b]=C.useState(!0),[v,j]=C.useState(!1),[S,k]=C.useState(null),[M,R]=C.useState(null),[E,B]=C.useState(null);C.useEffect(()=>{o&&o!==u&&m(o)},[o,u]);const I=ie=>{m(ie);const U=t.find(de=>de.path===ie);U&&(e!=null&&e.setSelectedProjectId)&&e.setSelectedProjectId(U.id)},O=async()=>{try{const ie=await be.getProjects();d(ie)}catch(ie){R(ie instanceof Error?ie.message:"Failed to load projects")}},ne=async()=>{if(u){b(!0);try{const ie=await be.getLatestScan(u);g(ie),R(null)}catch(ie){R(ie instanceof Error?ie.message:"Failed to load scan")}finally{b(!1)}}},$=async()=>{if(!(!u||v)){j(!0);try{const ie=await be.runScan(u);g(ie),R(null)}catch(ie){R(ie instanceof Error?ie.message:"Scan failed")}finally{j(!1)}}},Z=C.useCallback(()=>{const ie=o||u;if(!ie)return;E&&(E.close(),B(null)),j(!0),k({phase:"Initializing",percent:0,detail:"Starting scan...",current:0,total:0,fileLines:[],stats:{filesAnalyzed:0,functionsFound:0,issuesFound:0}}),R(null);const U=setTimeout(()=>{console.warn("[Scan] Safety timeout reached, resetting state"),j(!1),k(null),R("Scan timed out. Please try again.")},18e4),K=`/api/scan-stream/${encodeURIComponent(ie)}`,Q=new EventSource(K);B(Q),Q.onmessage=se=>{var P,H,q,ce,xe,Ce,Re,Pe,Ie,De,At,tt,Me,Wt,Ys,os,Tn,pr,ws,T,he,Ae;try{const Ne=JSON.parse(se.data);if(console.log("[SSE]",Ne.type,Ne.phase,(P=Ne.detail)==null?void 0:P.slice(-30),Ne.current,"/",Ne.total),Ne.type==="progress")k({phase:Ne.phase||"Processing",percent:Ne.percent||0,detail:Ne.detail||"",current:Ne.current||0,total:Ne.total||0,fileLines:Ne.fileLines||[],stats:Ne.stats||{filesAnalyzed:0,functionsFound:0,issuesFound:0}});else if(Ne.type==="complete"){clearTimeout(U);const Le=Ne.scan,it={id:Le.id,projectPath:Le.projectPath,timestamp:Le.scannedAt,score:((H=Le.healthScore)==null?void 0:H.score)||0,grade:((q=Le.healthScore)==null?void 0:q.grade)||"F",metrics:{waste:((ce=Le.summary)==null?void 0:ce.wastePercent)||0,security:(((Ce=(xe=Le.security)==null?void 0:xe.critical)==null?void 0:Ce.length)||0)+(((Pe=(Re=Le.security)==null?void 0:Re.high)==null?void 0:Pe.length)||0)+(((De=(Ie=Le.security)==null?void 0:Ie.medium)==null?void 0:De.length)||0)+(((tt=(At=Le.security)==null?void 0:At.low)==null?void 0:tt.length)||0),outdated:((Me=Le.outdated)==null?void 0:Me.totalOutdated)||0,emissions:((Ys=(Wt=Le.emissions)==null?void 0:Wt.current)==null?void 0:Ys.monthlyCO2Kg)||0},raw:Le};g(it),Q.close(),B(null),k({phase:"Complete",percent:100,detail:`Scan complete  ${((Tn=(os=Le.deadCode)==null?void 0:os.summary)==null?void 0:Tn.count)||0} dead files found`,current:((pr=Le.summary)==null?void 0:pr.totalFiles)||0,total:((ws=Le.summary)==null?void 0:ws.totalFiles)||0,fileLines:[],stats:{filesAnalyzed:((T=Le.summary)==null?void 0:T.totalFiles)||0,functionsFound:0,issuesFound:((Ae=(he=Le.deadCode)==null?void 0:he.summary)==null?void 0:Ae.count)||0}}),setTimeout(()=>{j(!1),k(null)},1500)}else Ne.type==="error"&&(clearTimeout(U),R(Ne.error||"Scan failed"),j(!1),k(null),Q.close(),B(null))}catch(Ne){clearTimeout(U),console.error("Failed to parse SSE data:",Ne),j(!1),k(null),R("Failed to process scan result"),Q.close(),B(null)}},Q.onerror=()=>{clearTimeout(U),R("Connection lost during scan"),j(!1),k(null),Q.close(),B(null)}},[u,o,v]),_=C.useCallback(()=>{E&&(E.close(),B(null)),j(!1),k(null)},[E]);C.useEffect(()=>{O()},[]);const[V,ee]=C.useState(new Set);C.useEffect(()=>{if(!u)return;let ie=!1;return g(null),b(!0),R(null),be.getLatestScan(u).then(U=>{ie||(g(U),b(!1),!U&&!v&&!V.has(u)&&(ee(de=>new Set(de).add(u)),Z()))}).catch(U=>{ie||(R(U instanceof Error?U.message:"Failed to load scan"),b(!1))}),()=>{ie=!0}},[u]);const ae=()=>{O(),u&&ne()};return C.useEffect(()=>()=>{E&&E.close()},[E]),r.jsx(ty.Provider,{value:{projects:c,selectedProject:u,setSelectedProject:I,currentScan:p,loading:y,error:M,refetch:ae,runScan:$,runStreamingScan:Z,scanning:v,scanProgress:S,cancelScan:_},children:n})}function Mt(){const n=C.useContext(ty);if(!n)throw new Error("useProject must be used within ProjectProvider");return n}const sy=C.createContext(null);function Xl(){const n=C.useContext(sy);if(!n)throw new Error("useToast must be used within ToastProvider");return n}function Hj({children:n}){const[e,t]=C.useState([]),s=(o,c="success")=>{const d=Date.now().toString();t(u=>[...u,{id:d,message:o,type:c}]),setTimeout(()=>{t(u=>u.filter(m=>m.id!==d))},3e3)},i=o=>{t(c=>c.filter(d=>d.id!==o))};return r.jsxs(sy.Provider,{value:{showToast:s},children:[n,r.jsx("div",{className:"fixed bottom-6 right-6 z-50 space-y-2",children:e.map(o=>r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm border animate-slide-up ${o.type==="success"?"bg-emerald-500/20 border-emerald-500/30 text-emerald-400":o.type==="error"?"bg-red-500/20 border-red-500/30 text-red-400":"bg-primary/20 border-primary/30 text-primary"}`,children:[r.jsx(zt,{className:"w-4 h-4 shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:o.message}),r.jsx("button",{onClick:()=>i(o.id),className:"ml-2 p-1 hover:bg-white/10 rounded transition-colors",children:r.jsx(or,{className:"w-3 h-3"})})]},o.id))})]})}function Vj({settings:n,source:e,onEdit:t}){const s=i=>i.toLocaleString();return r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zo,{className:"w-4 h-4 text-primary"}),r.jsx("h3",{className:"font-bold text-sm",children:"Cost Calculation Assumptions"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[e&&r.jsx("span",{className:"text-xs text-white/40 bg-white/5 px-2 py-1 rounded",children:e}),r.jsxs("button",{onClick:t,className:"text-xs text-primary hover:text-primary/80 font-medium flex items-center gap-1",children:[r.jsx(Zo,{className:"w-3 h-3"}),"Edit"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(K0,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Monthly Loads"})]}),r.jsx("p",{className:"text-sm font-medium",children:s(n.monthlyPageLoads)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(Jo,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Cache Rate"})]}),r.jsxs("p",{className:"text-sm font-medium",children:[(n.cacheHitRate*100).toFixed(0),"%"]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(zl,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Bandwidth"})]}),r.jsxs("p",{className:"text-sm font-medium",children:[n.currencySymbol,n.bandwidthPerGb,"/GB"]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate",title:n.bandwidthSource,children:n.bandwidthSource})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(zl,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Storage"})]}),r.jsxs("p",{className:"text-sm font-medium",children:[n.currencySymbol,n.storagePerGbMonth,"/GB/mo"]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate",title:n.storageSource,children:n.storageSource})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(xf,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Developer Rate"})]}),r.jsxs("p",{className:"text-sm font-medium",children:[n.currencySymbol,n.developerHourlyRate,"/hr"]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate",title:n.developerSource,children:n.developerSource})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(nr,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"CO2/GB"})]}),r.jsxs("p",{className:"text-sm font-medium",children:[n.co2PerGb," kg"]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate",title:n.co2Source,children:n.co2Source})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(sr,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Currency"})]}),r.jsx("p",{className:"text-sm font-medium",children:n.currency})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[r.jsx(sr,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs",children:"Mode"})]}),r.jsx("p",{className:"text-sm font-medium capitalize",children:n.mode}),r.jsx("p",{className:"text-[10px] text-white/30",children:n.mode==="served"?"Bandwidth + Storage":"Storage only"})]})]}),r.jsxs("p",{className:"text-[10px] text-white/30 mt-4 flex items-center gap-1",children:[r.jsx(sr,{className:"w-3 h-3"}),"All cost figures are estimates based on these assumptions. Click Edit to customize."]})]})}const Gx=[{code:"GBP",symbol:"",name:"British Pound"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"}];function Uj({isOpen:n,onClose:e,settings:t,defaults:s,onSave:i}){const[o,c]=C.useState(t),[d,u]=C.useState(!1),[m,p]=C.useState(null);if(C.useEffect(()=>{c(t)},[t]),!n)return null;const g=(j,S)=>{c(k=>({...k,[j]:S}))},y=j=>{const S=Gx.find(k=>k.code===j);S&&c(k=>({...k,currency:S.code,currencySymbol:S.symbol}))},b=()=>{c(s)},v=async()=>{u(!0),p(null);try{await i(o),e()}catch(j){p(j instanceof Error?j.message:"Failed to save settings")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsx("h2",{className:"text-lg font-bold",children:"Cost Calculation Settings"}),r.jsx("button",{onClick:e,className:"p-1 hover:bg-white/10 rounded",children:r.jsx(or,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)] space-y-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[r.jsx(K0,{className:"w-4 h-4 text-blue-400"}),"Traffic Assumptions"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Monthly Page Loads"}),r.jsx("input",{type:"number",value:o.monthlyPageLoads,onChange:j=>g("monthlyPageLoads",parseInt(j.target.value)||0),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm focus:outline-none focus:border-primary"}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Total page views per month"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Cache Hit Rate"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:o.cacheHitRate,onChange:j=>g("cacheHitRate",parseFloat(j.target.value)),className:"flex-1"}),r.jsxs("span",{className:"text-sm w-12 text-right",children:[(o.cacheHitRate*100).toFixed(0),"%"]})]}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:"Percentage of requests served from cache"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[r.jsx(zl,{className:"w-4 h-4 text-emerald-400"}),"Cost Rates"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Bandwidth Cost (per GB)"}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"bg-white/10 border border-white/10 border-r-0 rounded-l px-3 py-2 text-sm text-white/50",children:o.currencySymbol}),r.jsx("input",{type:"number",step:"0.01",value:o.bandwidthPerGb,onChange:j=>g("bandwidthPerGb",parseFloat(j.target.value)||0),className:"flex-1 bg-white/5 border border-white/10 rounded-r px-3 py-2 text-sm focus:outline-none focus:border-primary"})]}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:o.bandwidthSource})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Storage Cost (per GB/month)"}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"bg-white/10 border border-white/10 border-r-0 rounded-l px-3 py-2 text-sm text-white/50",children:o.currencySymbol}),r.jsx("input",{type:"number",step:"0.001",value:o.storagePerGbMonth,onChange:j=>g("storagePerGbMonth",parseFloat(j.target.value)||0),className:"flex-1 bg-white/5 border border-white/10 rounded-r px-3 py-2 text-sm focus:outline-none focus:border-primary"})]}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:o.storageSource})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Developer Hourly Rate"}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"bg-white/10 border border-white/10 border-r-0 rounded-l px-3 py-2 text-sm text-white/50",children:o.currencySymbol}),r.jsx("input",{type:"number",step:"1",value:o.developerHourlyRate,onChange:j=>g("developerHourlyRate",parseFloat(j.target.value)||0),className:"flex-1 bg-white/5 border border-white/10 rounded-r px-3 py-2 text-sm focus:outline-none focus:border-primary"})]}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:o.developerSource})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"Currency"}),r.jsx("select",{value:o.currency,onChange:j=>y(j.target.value),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm focus:outline-none focus:border-primary",children:Gx.map(j=>r.jsxs("option",{value:j.code,children:[j.symbol," ",j.name," (",j.code,")"]},j.code))})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[r.jsx(nr,{className:"w-4 h-4 text-green-400"}),"Environmental Impact"]}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/50 mb-1",children:"CO2 per GB (kg)"}),r.jsx("input",{type:"number",step:"0.1",value:o.co2PerGb,onChange:j=>g("co2PerGb",parseFloat(j.target.value)||0),className:"w-full bg-white/5 border border-white/10 rounded px-3 py-2 text-sm focus:outline-none focus:border-primary"}),r.jsx("p",{className:"text-[10px] text-white/30 mt-1",children:o.co2Source})]})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-white/70 mb-3 flex items-center gap-2",children:[r.jsx(pf,{className:"w-4 h-4 text-purple-400"}),"Calculation Mode"]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:`flex-1 p-4 rounded-lg border cursor-pointer transition-all ${o.mode==="served"?"bg-primary/10 border-primary":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[r.jsx("input",{type:"radio",name:"mode",value:"served",checked:o.mode==="served",onChange:()=>g("mode","served"),className:"sr-only"}),r.jsx("p",{className:"font-medium text-sm mb-1",children:"Served"}),r.jsx("p",{className:"text-xs text-white/50",children:"Bandwidth + Storage costs for web-served assets"})]}),r.jsxs("label",{className:`flex-1 p-4 rounded-lg border cursor-pointer transition-all ${o.mode==="storage"?"bg-primary/10 border-primary":"bg-white/5 border-white/10 hover:border-white/20"}`,children:[r.jsx("input",{type:"radio",name:"mode",value:"storage",checked:o.mode==="storage",onChange:()=>g("mode","storage"),className:"sr-only"}),r.jsx("p",{className:"font-medium text-sm mb-1",children:"Storage Only"}),r.jsx("p",{className:"text-xs text-white/50",children:"Storage costs only for archived files"})]})]})]}),r.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx(sr,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-white/70 mb-1",children:["Settings are saved to ",r.jsx("code",{className:"text-primary",children:".swynx.json"})]}),r.jsx("p",{className:"text-xs text-white/50",children:"These settings will be used for all cost calculations in this project. Run a new scan to see updated cost estimates with these assumptions."})]})]})}),m&&r.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-sm text-red-400",children:m})]}),r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-white/10 bg-black/20",children:[r.jsxs("button",{onClick:b,className:"flex items-center gap-2 text-sm text-white/50 hover:text-white/70",children:[r.jsx(Tl,{className:"w-4 h-4"}),"Reset to Defaults"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white/70 hover:text-white",children:"Cancel"}),r.jsxs("button",{onClick:v,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-primary text-black font-medium rounded-lg text-sm hover:bg-primary/90 disabled:opacity-50",children:[r.jsx(mf,{className:"w-4 h-4"}),d?"Saving...":"Save Settings"]})]})]})]})})}function qj({scanId:n,hasPreviousScan:e}){const[t,s]=C.useState(!1),[i,o]=C.useState(null),c=(u,m,p)=>{const g=new Blob([u],{type:p}),y=URL.createObjectURL(g),b=document.createElement("a");b.href=y,b.download=m,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(y)},d=async(u,m)=>{o(`${u}-${m}`);try{if(u==="action-list"){const p=await be.getActionList(n,m),g=m==="md"?"md":m==="llm"?"txt":m,y=m==="json"?"application/json":m==="csv"?"text/csv":m==="llm"?"text/plain":"text/markdown",b=m==="json"?JSON.stringify(p,null,2):p,v=m==="llm"?`llm-prompt-${n}.txt`:`action-list-${n}.${g}`;c(b,v,y)}else if(u==="progress"){const p=await be.getProgressReport(n,"previous",m),g=m==="md"?"md":m,y=m==="json"?"application/json":m==="csv"?"text/csv":"text/markdown",b=m==="json"?JSON.stringify(p,null,2):p;c(b,`progress-report-${n}.${g}`,y)}}catch(p){console.error("Export failed:",p)}finally{o(null),s(!1)}};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors text-sm",children:[r.jsx(Cc,{className:"w-4 h-4"}),"Export",r.jsx(ff,{className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`})]}),t&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 z-50 bg-[#1a1a1a] border border-white/10 rounded-xl shadow-xl py-2 min-w-[220px]",children:[r.jsx("div",{className:"px-3 py-1.5 text-xs text-white/40 uppercase tracking-wider",children:"Action List"}),r.jsxs("button",{onClick:()=>d("action-list","md"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-md"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(ar,{className:"w-4 h-4 text-blue-400"}),"Markdown (.md)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"GitHub, Notion"})]}),r.jsxs("button",{onClick:()=>d("action-list","csv"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-csv"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(mu,{className:"w-4 h-4 text-green-400"}),"CSV (.csv)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"Jira, Linear"})]}),r.jsxs("button",{onClick:()=>d("action-list","json"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-json"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(fu,{className:"w-4 h-4 text-yellow-400"}),"JSON (.json)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"API"})]}),r.jsxs("button",{onClick:()=>d("action-list","llm"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="action-list-llm"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(_0,{className:"w-4 h-4 text-purple-400"}),"LLM Prompt (.txt)",r.jsx("span",{className:"ml-auto text-xs text-white/30",children:"Claude, GPT"})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"my-2 border-t border-white/10"}),r.jsxs("div",{className:"px-3 py-1.5 text-xs text-white/40 uppercase tracking-wider flex items-center gap-1",children:[r.jsx(vj,{className:"w-3 h-3"}),"Progress Report"]}),r.jsxs("button",{onClick:()=>d("progress","md"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-md"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(ar,{className:"w-4 h-4 text-blue-400"}),"Progress (Markdown)"]}),r.jsxs("button",{onClick:()=>d("progress","csv"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-csv"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(mu,{className:"w-4 h-4 text-green-400"}),"Progress (CSV)"]}),r.jsxs("button",{onClick:()=>d("progress","json"),disabled:!!i,className:"w-full px-3 py-2 text-left text-sm hover:bg-white/5 flex items-center gap-2 disabled:opacity-50",children:[i==="progress-json"?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(fu,{className:"w-4 h-4 text-yellow-400"}),"Progress (JSON)"]})]})]})]})]})}function Gj(){var ee,ae,ie,U,de,K,Q,se,P,H;const{selectedProject:n,currentScan:e,loading:t,scanning:s,runStreamingScan:i}=Mt(),{showToast:o}=Xl(),[c,d]=C.useState(null),[u,m]=C.useState(null),[p,g]=C.useState(null),[y,b]=C.useState(null),[v,j]=C.useState(null),[S,k]=C.useState(null),[M,R]=C.useState("defaults"),[E,B]=C.useState(!1),[I,O]=C.useState(!1);C.useEffect(()=>{e!=null&&e.id&&(be.getScoreBreakdown(e.id).then(d).catch(console.error),fetch(`/api/drill/logs/${e.id}`).then(q=>q.json()).then(q=>{q.success&&q.hasIssues?g(q):g(null)}).catch(()=>g(null)))},[e==null?void 0:e.id]),C.useEffect(()=>{n&&(be.getStats(n,30).then(m).catch(console.error),be.getScansForDiff(n).then(q=>{O(q.scans&&q.scans.length>1)}).catch(()=>O(!1)),be.getConfig(n).then(q=>{var ce,xe;(ce=q.config)!=null&&ce.costs&&(j(q.config.costs),R(q.source||"defaults")),(xe=q.defaults)!=null&&xe.costs&&k(q.defaults.costs)}).catch(console.error))},[n]);const ne=async q=>{try{await navigator.clipboard.writeText(q),b(q),o("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>b(null),2e3)}catch{const xe=document.createElement("textarea");xe.value=q,xe.style.position="fixed",xe.style.opacity="0",document.body.appendChild(xe),xe.select(),document.execCommand("copy"),document.body.removeChild(xe),b(q),o("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>b(null),2e3)}},$=q=>{switch(q){case"A":return"text-emerald-400";case"B":return"text-blue-400";case"C":return"text-primary";case"D":return"text-orange-400";default:return"text-red-400"}},Z=async q=>{n&&(await be.saveConfig(n,{costs:q}),j(q),R("project"),o("Cost settings saved to .swynx.json"))};if(t)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});if(!e)return r.jsx("div",{className:"flex flex-col items-center justify-center h-screen gap-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"No scan data yet"}),r.jsx("p",{className:"text-white/60 mb-4",children:"Run a scan to see your codebase analysis"}),r.jsx("button",{onClick:()=>i(),disabled:s||!n,className:"px-6 py-3 bg-primary hover:bg-primary/80 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg font-semibold flex items-center gap-2 mx-auto",children:s?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Xo,{className:"w-5 h-5"}),"Start Scan"]})})]})});const _=c?[{label:"Waste",score:c.waste.score,max:c.waste.max,color:c.waste.score>=c.waste.max*.8?"bg-emerald-500":"bg-orange-500"},{label:"Security",score:c.security.score,max:c.security.max,color:c.security.score>=c.security.max*.8?"bg-emerald-500":"bg-red-500"},{label:"Dependencies",score:c.dependencies.score,max:c.dependencies.max,color:c.dependencies.score>=c.dependencies.max*.5?"bg-emerald-500":"bg-red-500"},{label:"Emissions",score:c.emissions.score,max:c.emissions.max,color:"bg-primary"}]:[],V=[{icon:$l,value:`${e.metrics.waste.toFixed(1)}%`,label:"Waste",iconBg:e.metrics.waste<2?"bg-emerald-500/20":"bg-orange-500/20",iconColor:e.metrics.waste<2?"text-emerald-500":"text-orange-500"},{icon:pn,value:String(e.metrics.security),label:"Vulnerabilities",iconBg:e.metrics.security===0?"bg-primary/20":"bg-red-500/20",iconColor:e.metrics.security===0?"text-primary":"text-red-500"},{icon:It,value:String(e.metrics.outdated),label:"Outdated Deps",iconBg:e.metrics.outdated===0?"bg-emerald-500/20":"bg-red-500/20",iconColor:e.metrics.outdated===0?"text-emerald-500":"text-red-500"},{icon:nr,value:`${e.metrics.emissions.toFixed(2)} kg`,label:"CO/month",iconBg:"bg-emerald-500/20",iconColor:"text-emerald-500"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(W0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Overview"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-sm text-white/40",children:n}),(e==null?void 0:e.id)&&r.jsx(qj,{scanId:e.id,projectPath:n||"",hasPreviousScan:I})]})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[p&&p.hasIssues&&r.jsx("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-xl p-5",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center flex-shrink-0",children:r.jsx(ar,{className:"w-5 h-5 text-orange-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(pt,{className:"w-4 h-4 text-orange-400"}),r.jsx("h3",{className:"font-bold text-orange-400",children:"Large Log Files Detected"})]}),r.jsxs("p",{className:"text-sm text-white/70 mb-3",children:[p.headline,". Large logs bloat your project and should be rotated."]}),p.logFiles.length>0&&r.jsx("div",{className:"mb-4 space-y-1",children:p.logFiles.slice(0,5).map((q,ce)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:q.severity==="critical"?"text-red-400":"text-orange-400",children:q.severity==="critical"?"!!":"!"}),r.jsx("span",{className:"text-white/60 font-mono",children:q.relativePath}),r.jsx("span",{className:"text-orange-400 font-bold",children:q.sizeFormatted})]},ce))}),p.solutions.length>0&&r.jsxs("div",{className:"space-y-4",children:[((ee=p.solutions[0])==null?void 0:ee.immediate)&&r.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-bold text-orange-400 uppercase mb-1",children:"Immediate: Truncate to reclaim space"}),r.jsx("p",{className:"text-xs text-white/50 mb-3",children:p.solutions[0].immediate.description}),(ae=p.solutions[0].immediate.commands)==null?void 0:ae.slice(0,4).map((q,ce)=>r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("code",{className:"flex-1 bg-black/50 text-orange-400 text-xs font-mono px-3 py-2 rounded",children:q}),r.jsx("button",{onClick:()=>ne(q),className:`p-2 rounded transition-all duration-200 ${y===q?"bg-emerald-500/20 scale-110":"hover:bg-white/10"}`,title:"Copy command",children:y===q?r.jsx(zt,{className:"w-4 h-4 text-emerald-400 animate-pulse"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]},ce))]}),((ie=p.solutions[0])==null?void 0:ie.permanent)&&r.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-bold text-emerald-400 uppercase mb-1",children:"Permanent: Set up log rotation"}),r.jsx("p",{className:"text-xs text-white/50 mb-3",children:p.solutions[0].permanent.description}),r.jsx("div",{className:"bg-black/50 rounded p-3 font-mono text-xs text-emerald-400 overflow-x-auto",children:r.jsx("pre",{className:"whitespace-pre",children:(U=p.solutions[0].permanent.commands)==null?void 0:U.join(`
`)})}),r.jsx("button",{onClick:()=>{var q,ce,xe;return ne(((xe=(ce=(q=p.solutions[0])==null?void 0:q.permanent)==null?void 0:ce.commands)==null?void 0:xe.join(`
`))||"")},className:`mt-2 flex items-center gap-2 text-xs px-3 py-1.5 rounded transition-all duration-200 ${y===((Q=(K=(de=p.solutions[0])==null?void 0:de.permanent)==null?void 0:K.commands)==null?void 0:Q.join(`
`))?"bg-emerald-500 text-white scale-105":"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:y===((H=(P=(se=p.solutions[0])==null?void 0:se.permanent)==null?void 0:P.commands)==null?void 0:H.join(`
`))?r.jsxs(r.Fragment,{children:[r.jsx(zt,{className:"w-3 h-3 animate-pulse"}),r.jsx("span",{children:"Copied!"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ct,{className:"w-3 h-3"}),r.jsx("span",{children:"Copy logrotate config"})]})})]})]})]})]})}),v&&r.jsx(Vj,{settings:v,source:M,onEdit:()=>B(!0)}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx("div",{className:"bg-[#141414] rounded-2xl border border-white/10 p-8 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"relative w-40 h-40 mx-auto mb-4",children:[r.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[r.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#1a1a1a",strokeWidth:"6"}),r.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"url(#scoreGrad)",strokeWidth:"6",strokeLinecap:"round",strokeDasharray:`${e.score*2.64} ${100*2.64}`}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"scoreGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[r.jsx("stop",{offset:"0%",stopColor:"#fdcb0f"}),r.jsx("stop",{offset:"100%",stopColor:"#10b981"})]})})]}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("span",{className:"text-5xl font-bold text-white",children:e.score}),r.jsx("span",{className:`text-xl font-bold ${$(e.grade)}`,children:e.grade})]})]}),r.jsx("p",{className:"text-xl font-bold text-white",children:"Health Score"}),r.jsx("p",{className:"text-sm text-white/50",children:e.score>=90?"Excellent":e.score>=80?"Good  minor issues":e.score>=70?"Fair  needs attention":"Poor  action required"})]})}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold text-white mb-5",children:"Score Breakdown"}),r.jsx("div",{className:"space-y-4",children:_.map(q=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-white/70",children:q.label}),r.jsxs("span",{className:"text-white font-medium",children:[q.score,"/",q.max]})]}),r.jsx("div",{className:"h-2.5 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all ${q.color}`,style:{width:`${q.score/q.max*100}%`}})})]},q.label))})]})]}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:V.map(q=>r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg ${q.iconBg} flex items-center justify-center mb-3`,children:r.jsx(q.icon,{className:`w-5 h-5 ${q.iconColor}`})}),r.jsx("p",{className:"text-2xl font-bold text-white",children:q.value}),r.jsx("p",{className:"text-sm text-white/50",children:q.label})]},q.label))}),u&&u.scores.length>1&&r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold text-white mb-4",children:"Trends (Last 30 Days)"}),r.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-1 bg-blue-500 rounded"}),r.jsx("span",{className:"text-xs text-white/50",children:"Score"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary rounded"}),r.jsx("span",{className:"text-xs text-white/50",children:"Waste %"})]})]}),r.jsxs("div",{className:"relative h-48",children:[r.jsxs("div",{className:"absolute left-0 top-0 bottom-8 w-8 flex flex-col justify-between text-[10px] text-white/30",children:[r.jsx("span",{children:"100"}),r.jsx("span",{children:"80"}),r.jsx("span",{children:"60"}),r.jsx("span",{children:"40"}),r.jsx("span",{children:"20"}),r.jsx("span",{children:"0"})]}),r.jsx("div",{className:"ml-10 mr-8 h-40 relative",children:r.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 300 100",children:[r.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:u.scores.map((q,ce)=>`${ce/Math.max(u.scores.length-1,1)*300},${100-q}`).join(" ")}),r.jsx("polyline",{fill:"none",stroke:"#fdcb0f",strokeWidth:"2",points:u.waste.map((q,ce)=>`${ce/Math.max(u.waste.length-1,1)*300},${100-q*14}`).join(" ")})]})}),r.jsx("div",{className:"ml-10 mr-8 flex justify-between text-[10px] text-white/30 mt-2",children:u.dates.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:u.dates[0]}),u.dates.length>1&&r.jsx("span",{children:u.dates[Math.floor(u.dates.length/2)]}),u.dates.length>2&&r.jsx("span",{children:u.dates[u.dates.length-1]})]})})]})]})]}),v&&S&&r.jsx(Uj,{isOpen:E,onClose:()=>B(!1),settings:v,defaults:S,onSave:Z})]})}const Kx={critical:"text-red-500 bg-red-500/10 border-red-500/20",high:"text-orange-500 bg-orange-500/10 border-orange-500/20",medium:"text-yellow-500 bg-yellow-500/10 border-yellow-500/20",low:"text-blue-400 bg-blue-500/10 border-blue-500/20"},Qx={critical:pt,high:pt,medium:Pl,low:Pl},Kj={security:pn,"unused-dependency":It,"dead-code":Mn,duplicate:Ct,outdated:It,"license-risk":Us};function Jx(n){return n.title.startsWith("Outdated: ")?n.title.slice(10).split(" ")[0]||null:n.title.startsWith("Unused dependency: ")?n.title.slice(19).trim():null}function Qj(){const{currentScan:n,selectedProject:e}=Mt(),[t,s]=C.useState(null),[i,o]=C.useState(!0),[c,d]=C.useState({critical:!0,high:!0,medium:!1,low:!1}),[u,m]=C.useState(new Set),[p,g]=C.useState(null),[y,b]=C.useState(new Set),[v,j]=C.useState({});C.useEffect(()=>{n!=null&&n.id&&(o(!0),be.getActionList(n.id,"json").then($=>{s($),o(!1)}).catch($=>{console.error("Failed to load action list:",$),o(!1)}))},[n==null?void 0:n.id]);const S=$=>{d(Z=>({...Z,[$]:!Z[$]}))},k=$=>{m(Z=>{const _=new Set(Z);return _.has($)?_.delete($):_.add($),_})},M=$=>{navigator.clipboard.writeText($)},R=async $=>{var Z;if(!(!e||p)){g($.id),j(_=>{const V={..._};return delete V[$.id],V});try{if(((Z=$.fix)==null?void 0:Z.type)==="dependency-update"&&$.latest){const _=Jx($);if(!_)throw new Error("Could not extract package name");await be.updateDep(e,_,$.latest)}else if($.category==="unused-dependency"){const _=Jx($);if(!_)throw new Error("Could not extract package name");await be.uninstallDep(e,_)}else throw new Error("No automatic fix available");b(_=>new Set(_).add($.id)),m(_=>new Set(_).add($.id))}catch(_){j(V=>({...V,[$.id]:_.message||"Fix failed"}))}finally{g(null)}}},E=$=>{var Z;return!!(((Z=$.fix)==null?void 0:Z.type)==="dependency-update"&&$.latest||$.category==="unused-dependency")},B=async()=>{if(!(n!=null&&n.id))return;const $=await be.getActionList(n.id,"md"),Z=new Blob([$],{type:"text/markdown"}),_=URL.createObjectURL(Z),V=document.createElement("a");V.href=_,V.download=`action-list-${n.id}.md`,V.click(),URL.revokeObjectURL(_)};if(i)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-white/40"})});if(!t)return r.jsx("div",{className:"p-6 text-center text-white/40",children:"No scan data available. Run a scan first."});const I={critical:t.issues.filter($=>$.severity==="critical"),high:t.issues.filter($=>$.severity==="high"),medium:t.issues.filter($=>$.severity==="medium"),low:t.issues.filter($=>$.severity==="low")},O=u.size,ne=t.summary.total>0?Math.round(O/t.summary.total*100):0;return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ar,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Action List"}),r.jsxs("span",{className:"text-sm text-white/40",children:[t.summary.total," issues to fix"]}),y.size>0&&r.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[y.size," fixed"]})]}),r.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors text-sm",children:[r.jsx(Cc,{className:"w-4 h-4"}),"Export Markdown"]})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-white/60",children:"Progress"}),r.jsxs("span",{className:"text-sm font-medium",children:[O," / ",t.summary.total," completed"]})]}),r.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${ne}%`}})})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:["critical","high","medium","low"].map($=>{const Z=t.summary[$],_=Qx[$];return r.jsxs("button",{onClick:()=>S($),className:`p-4 rounded-xl border ${Kx[$]} text-left transition-all hover:scale-[1.02]`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(_,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs uppercase tracking-wider opacity-70",children:$})]}),r.jsx("p",{className:"text-2xl font-bold",children:Z})]},$)})}),t.quickWins&&t.quickWins.length>0&&r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx($l,{className:"w-5 h-5 text-green-400"}),r.jsx("h2",{className:"font-bold text-green-400",children:"Quick Wins"}),r.jsx("span",{className:"text-sm text-green-400/60",children:"Fix these first for maximum impact"})]}),r.jsx("div",{className:"space-y-2",children:t.quickWins.slice(0,5).map($=>{var ee;const Z=y.has($.id),_=p===$.id,V=u.has($.id);return r.jsxs("div",{className:`flex items-center gap-3 p-2 bg-black/20 rounded-lg ${Z?"opacity-60":""}`,children:[r.jsx("button",{onClick:()=>k($.id),className:"flex-shrink-0",children:V?r.jsx(Dr,{className:"w-5 h-5 text-green-400"}):r.jsx(Pl,{className:"w-5 h-5 text-white/30"})}),r.jsx("span",{className:`flex-1 text-sm ${V?"line-through text-white/30":""}`,children:$.title}),E($)&&!Z&&r.jsxs("button",{onClick:ae=>{ae.stopPropagation(),R($)},disabled:!!p,className:"flex items-center gap-1 px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded text-xs font-medium hover:bg-emerald-500/30 disabled:opacity-50 transition-colors",children:[_?r.jsx(je,{className:"w-3 h-3 animate-spin"}):r.jsx(Xo,{className:"w-3 h-3"}),"Run"]}),Z&&r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:"Done"}),!E($)&&((ee=$.fix)==null?void 0:ee.command)&&r.jsxs("button",{onClick:()=>M($.fix.command),className:"px-2 py-1 bg-white/5 rounded text-xs font-mono hover:bg-white/10",title:"Copy command",children:[$.fix.command.slice(0,30),$.fix.command.length>30?"...":""]})]},$.id)})})]}),["critical","high","medium","low"].map($=>{const Z=I[$];if(Z.length===0)return null;const _=c[$],V=Qx[$];return r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:[r.jsxs("button",{onClick:()=>S($),className:`w-full flex items-center justify-between p-4 ${Kx[$]} border-b`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(V,{className:"w-5 h-5"}),r.jsx("span",{className:"font-bold capitalize",children:$}),r.jsxs("span",{className:"text-sm opacity-60",children:["(",Z.length," issues)"]})]}),_?r.jsx(ff,{className:"w-5 h-5"}):r.jsx(Sc,{className:"w-5 h-5"})]}),_&&r.jsx("div",{className:"divide-y divide-white/5",children:Z.map(ee=>{var Q,se,P,H;const ae=Kj[ee.category]||Pl,ie=u.has(ee.id),U=y.has(ee.id),de=p===ee.id,K=v[ee.id];return r.jsx("div",{className:`p-4 ${U?"bg-emerald-500/5":""} ${ie&&!U?"opacity-50":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("button",{onClick:()=>k(ee.id),className:"flex-shrink-0 mt-0.5",children:ie?r.jsx(Dr,{className:"w-5 h-5 text-green-400"}):r.jsx(Pl,{className:"w-5 h-5 text-white/30 hover:text-white/50"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ae,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:ee.category.replace("-"," ")}),U&&r.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400 font-medium",children:"Fixed"})]}),r.jsx("h3",{className:`font-medium ${ie?"line-through":""}`,children:ee.title}),ee.description&&r.jsx("p",{className:"text-sm text-white/50 mt-1",children:ee.description}),ee.file&&ee.file!=="package.json"&&r.jsx("p",{className:"text-xs text-white/30 font-mono mt-1",children:ee.file}),((Q=ee.fix)==null?void 0:Q.command)&&r.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 px-3 py-2 bg-black/30 rounded text-xs font-mono text-white/70 truncate",children:ee.fix.command}),E(ee)&&!U?r.jsxs("button",{onClick:()=>R(ee),disabled:!!p,className:"flex items-center gap-1.5 px-3 py-2 bg-emerald-500/20 text-emerald-400 rounded hover:bg-emerald-500/30 text-xs font-medium disabled:opacity-50 transition-colors whitespace-nowrap",children:[de?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(Xo,{className:"w-3.5 h-3.5"}),de?"Running...":"Run"]}):r.jsx("button",{onClick:()=>M(ee.fix.command),className:"px-3 py-2 bg-white/5 rounded hover:bg-white/10 text-xs whitespace-nowrap",children:"Copy"})]}),K&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-red-400",children:[r.jsx(V0,{className:"w-3.5 h-3.5 flex-shrink-0"}),r.jsx("span",{children:K})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/40",children:[((se=ee.fix)==null?void 0:se.effort)&&r.jsxs("span",{children:["Effort: ",ee.fix.effort]}),((P=ee.impact)==null?void 0:P.cost)&&r.jsxs("span",{children:["Saves: ",ee.impact.cost.toFixed(0),"/year"]}),((H=ee.impact)==null?void 0:H.bytes)&&r.jsxs("span",{children:["Size: ",Jj(ee.impact.bytes)]})]})]})]})},ee.id)})})]},$)})]})]})}function Jj(n){if(!n)return"0 B";const e=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,s)).toFixed(1))+" "+t[s]}function qs({cells:n,expandedContent:e,rowClassName:t=""}){const[s,i]=C.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 cursor-pointer ${t} ${s?"bg-white/5":""}`,onClick:()=>i(!s),children:[r.jsx("td",{className:"px-4 py-4 w-10",children:s?r.jsx(ff,{className:"w-4 h-4 text-primary"}):r.jsx(Sc,{className:"w-4 h-4 text-white/40"})}),n.map((o,c)=>r.jsx("td",{className:"px-6 py-4 text-sm",children:o},c))]}),s&&r.jsx("tr",{className:"bg-[#0a0a0a] border-b-2 border-primary/30",children:r.jsx("td",{colSpan:n.length+1,className:"p-0",children:r.jsx("div",{className:"p-6 animate-in slide-in-from-top-2 duration-200",children:e})})})]})}const Yj="modulepreload",Xj=function(n){return"/"+n},Yx={},$s=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(t.map(m=>{if(m=Xj(m),m in Yx)return;Yx[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":Yj,p||(y.as="script"),y.crossOrigin="",y.href=m,u&&y.setAttribute("nonce",u),document.head.appendChild(y),p)return new Promise((b,v)=>{y.addEventListener("load",b),y.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};let xu=[],ny=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?ny:xu).push(t=t+n[e])})();function Zj(n){if(n<768)return!1;for(let e=0,t=xu.length;;){let s=e+t>>1;if(n<xu[s])t=s;else if(n>=ny[s])e=s+1;else return!0;if(e==t)return!1}}function Xx(n){return n>=127462&&n<=127487}const Zx=8205;function eN(n,e,t=!0,s=!0){return(t?ry:tN)(n,e,s)}function ry(n,e,t){if(e==n.length)return e;e&&iy(n.charCodeAt(e))&&ly(n.charCodeAt(e-1))&&e--;let s=Fh(n,e);for(e+=eg(s);e<n.length;){let i=Fh(n,e);if(s==Zx||i==Zx||t&&Zj(i))e+=eg(i),s=i;else if(Xx(i)){let o=0,c=e-2;for(;c>=0&&Xx(Fh(n,c));)o++,c-=2;if(o%2==0)break;e+=2}else break}return e}function tN(n,e,t){for(;e>0;){let s=ry(n,e-2,t);if(s<e)return s;e--}return 0}function Fh(n,e){let t=n.charCodeAt(e);if(!ly(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return iy(s)?(t-55296<<10)+(s-56320)+65536:t}function iy(n){return n>=56320&&n<57344}function ly(n){return n>=55296&&n<56320}function eg(n){return n<65536?1:2}class Ve{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,s){[e,t]=Si(this,e,t);let i=[];return this.decompose(0,e,i,2),s.length&&s.decompose(0,s.length,i,3),this.decompose(t,this.length,i,1),on.from(i,this.length-(t-e)+s.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Si(this,e,t);let s=[];return this.decompose(e,t,s,0),on.from(s,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),s=this.length-this.scanIdentical(e,-1),i=new Dl(this),o=new Dl(e);for(let c=t,d=t;;){if(i.next(c),o.next(c),c=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(d+=i.value.length,i.done||d>=s)return!0}}iter(e=1){return new Dl(this,e)}iterRange(e,t=this.length){return new ay(this,e,t)}iterLines(e,t){let s;if(e==null)s=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;s=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new oy(s)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ve.empty:e.length<=32?new dt(e):on.from(dt.split(e,[]))}}class dt extends Ve{constructor(e,t=sN(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,s,i){for(let o=0;;o++){let c=this.text[o],d=i+c.length;if((t?s:d)>=e)return new nN(i,d,s,c);i=d+1,s++}}decompose(e,t,s,i){let o=e<=0&&t>=this.length?this:new dt(tg(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let c=s.pop(),d=zo(o.text,c.text.slice(),0,o.length);if(d.length<=32)s.push(new dt(d,c.length+o.length));else{let u=d.length>>1;s.push(new dt(d.slice(0,u)),new dt(d.slice(u)))}}else s.push(o)}replace(e,t,s){if(!(s instanceof dt))return super.replace(e,t,s);[e,t]=Si(this,e,t);let i=zo(this.text,zo(s.text,tg(this.text,0,e)),t),o=this.length+s.length-(t-e);return i.length<=32?new dt(i,o):on.from(dt.split(i,[]),o)}sliceString(e,t=this.length,s=`
`){[e,t]=Si(this,e,t);let i="";for(let o=0,c=0;o<=t&&c<this.text.length;c++){let d=this.text[c],u=o+d.length;o>e&&c&&(i+=s),e<u&&t>o&&(i+=d.slice(Math.max(0,e-o),t-o)),o=u+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let s=[],i=-1;for(let o of e)s.push(o),i+=o.length+1,s.length==32&&(t.push(new dt(s,i)),s=[],i=-1);return i>-1&&t.push(new dt(s,i)),t}}class on extends Ve{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let s of e)this.lines+=s.lines}lineInner(e,t,s,i){for(let o=0;;o++){let c=this.children[o],d=i+c.length,u=s+c.lines-1;if((t?u:d)>=e)return c.lineInner(e,t,s,i);i=d+1,s=u+1}}decompose(e,t,s,i){for(let o=0,c=0;c<=t&&o<this.children.length;o++){let d=this.children[o],u=c+d.length;if(e<=u&&t>=c){let m=i&((c<=e?1:0)|(u>=t?2:0));c>=e&&u<=t&&!m?s.push(d):d.decompose(e-c,t-c,s,m)}c=u+1}}replace(e,t,s){if([e,t]=Si(this,e,t),s.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let c=this.children[i],d=o+c.length;if(e>=o&&t<=d){let u=c.replace(e-o,t-o,s),m=this.lines-c.lines+u.lines;if(u.lines<m>>4&&u.lines>m>>6){let p=this.children.slice();return p[i]=u,new on(p,this.length-(t-e)+s.length)}return super.replace(o,d,u)}o=d+1}return super.replace(e,t,s)}sliceString(e,t=this.length,s=`
`){[e,t]=Si(this,e,t);let i="";for(let o=0,c=0;o<this.children.length&&c<=t;o++){let d=this.children[o],u=c+d.length;c>e&&o&&(i+=s),e<u&&t>c&&(i+=d.sliceString(e-c,t-c,s)),c=u+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof on))return 0;let s=0,[i,o,c,d]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==c||o==d)return s;let u=this.children[i],m=e.children[o];if(u!=m)return s+u.scanIdentical(m,t);s+=u.length+1}}static from(e,t=e.reduce((s,i)=>s+i.length+1,-1)){let s=0;for(let b of e)s+=b.lines;if(s<32){let b=[];for(let v of e)v.flatten(b);return new dt(b,t)}let i=Math.max(32,s>>5),o=i<<1,c=i>>1,d=[],u=0,m=-1,p=[];function g(b){let v;if(b.lines>o&&b instanceof on)for(let j of b.children)g(j);else b.lines>c&&(u>c||!u)?(y(),d.push(b)):b instanceof dt&&u&&(v=p[p.length-1])instanceof dt&&b.lines+v.lines<=32?(u+=b.lines,m+=b.length+1,p[p.length-1]=new dt(v.text.concat(b.text),v.length+1+b.length)):(u+b.lines>i&&y(),u+=b.lines,m+=b.length+1,p.push(b))}function y(){u!=0&&(d.push(p.length==1?p[0]:on.from(p,m)),m=-1,u=p.length=0)}for(let b of e)g(b);return y(),d.length==1?d[0]:new on(d,t)}}Ve.empty=new dt([""],0);function sN(n){let e=-1;for(let t of n)e+=t.length+1;return e}function zo(n,e,t=0,s=1e9){for(let i=0,o=0,c=!0;o<n.length&&i<=s;o++){let d=n[o],u=i+d.length;u>=t&&(u>s&&(d=d.slice(0,s-i)),i<t&&(d=d.slice(t-i)),c?(e[e.length-1]+=d,c=!1):e.push(d)),i=u+1}return e}function tg(n,e,t){return zo(n,[""],e,t)}class Dl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof dt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let s=this.nodes.length-1,i=this.nodes[s],o=this.offsets[s],c=o>>1,d=i instanceof dt?i.text.length:i.children.length;if(c==(t>0?d:0)){if(s==0)return this.done=!0,this.value="",this;t>0&&this.offsets[s-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[s]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof dt){let u=i.text[c+(t<0?-1:0)];if(this.offsets[s]+=t,u.length>Math.max(0,e))return this.value=e==0?u:t>0?u.slice(e):u.slice(0,u.length-e),this;e-=u.length}else{let u=i.children[c+(t<0?-1:0)];e>u.length?(e-=u.length,this.offsets[s]+=t):(t<0&&this.offsets[s]--,this.nodes.push(u),this.offsets.push(t>0?1:(u instanceof dt?u.text.length:u.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ay{constructor(e,t,s){this.value="",this.done=!1,this.cursor=new Dl(e,t>s?-1:1),this.pos=t>s?e.length:0,this.from=Math.min(t,s),this.to=Math.max(t,s)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let s=t<0?this.pos-this.from:this.to-this.pos;e>s&&(e=s),s-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=s?i:t<0?i.slice(i.length-s):i.slice(0,s),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class oy{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:s,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):s?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ve.prototype[Symbol.iterator]=function(){return this.iter()},Dl.prototype[Symbol.iterator]=ay.prototype[Symbol.iterator]=oy.prototype[Symbol.iterator]=function(){return this});class nN{constructor(e,t,s,i){this.from=e,this.to=t,this.number=s,this.text=i}get length(){return this.to-this.from}}function Si(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function bt(n,e,t=!0,s=!0){return eN(n,e,t,s)}function rN(n){return n>=56320&&n<57344}function iN(n){return n>=55296&&n<56320}function cy(n,e){let t=n.charCodeAt(e);if(!iN(t)||e+1==n.length)return t;let s=n.charCodeAt(e+1);return rN(s)?(t-55296<<10)+(s-56320)+65536:t}function lN(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function dy(n){return n<65536?1:2}const gu=/\r\n?|\n/;var gs=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(gs||(gs={}));class mn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t+1];e+=s<0?this.sections[t]:s}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,s=0,i=0;t<this.sections.length;){let o=this.sections[t++],c=this.sections[t++];c<0?(e(s,i,o),i+=o):i+=c,s+=o}}iterChangedRanges(e,t=!1){yu(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];i<0?e.push(s,i):e.push(i,s)}return new mn(e)}composeDesc(e){return this.empty?e:e.empty?this:hy(this,e)}mapDesc(e,t=!1){return e.empty?this:wu(this,e,t)}mapPos(e,t=-1,s=gs.Simple){let i=0,o=0;for(let c=0;c<this.sections.length;){let d=this.sections[c++],u=this.sections[c++],m=i+d;if(u<0){if(m>e)return o+(e-i);o+=d}else{if(s!=gs.Simple&&m>=e&&(s==gs.TrackDel&&i<e&&m>e||s==gs.TrackBefore&&i<e||s==gs.TrackAfter&&m>e))return null;if(m>e||m==e&&t<0&&!d)return e==i||t<0?o:o+u;o+=u}i=m}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let s=0,i=0;s<this.sections.length&&i<=t;){let o=this.sections[s++],c=this.sections[s++],d=i+o;if(c>=0&&i<=t&&d>=e)return i<e&&d>t?"cover":!0;i=d}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let s=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+s+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mn(e)}static create(e){return new mn(e)}}class wt extends mn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return yu(this,(t,s,i,o,c)=>e=e.replace(i,i+(s-t),c),!1),e}mapDesc(e,t=!1){return wu(this,e,t,!0)}invert(e){let t=this.sections.slice(),s=[];for(let i=0,o=0;i<t.length;i+=2){let c=t[i],d=t[i+1];if(d>=0){t[i]=d,t[i+1]=c;let u=i>>1;for(;s.length<u;)s.push(Ve.empty);s.push(c?e.slice(o,o+c):Ve.empty)}o+=c}return new wt(t,s)}compose(e){return this.empty?e:e.empty?this:hy(this,e,!0)}map(e,t=!1){return e.empty?this:wu(this,e,t,!0)}iterChanges(e,t=!1){yu(this,e,t)}get desc(){return mn.create(this.sections)}filter(e){let t=[],s=[],i=[],o=new _l(this);e:for(let c=0,d=0;;){let u=c==e.length?1e9:e[c++];for(;d<u||d==u&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,u-d);Ft(i,p,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;Ft(t,p,g),g>0&&tr(s,t,o.text),o.forward(p),d+=p}let m=e[c++];for(;d<m;){if(o.done)break e;let p=Math.min(o.len,m-d);Ft(t,p,-1),Ft(i,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),d+=p}}return{changes:new wt(t,s),filtered:mn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let s=this.sections[t],i=this.sections[t+1];i<0?e.push(s):i==0?e.push([s]):e.push([s].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,s){let i=[],o=[],c=0,d=null;function u(p=!1){if(!p&&!i.length)return;c<t&&Ft(i,t-c,-1);let g=new wt(i,o);d=d?d.compose(g.map(d)):g,i=[],o=[],c=0}function m(p){if(Array.isArray(p))for(let g of p)m(g);else if(p instanceof wt){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);u(),d=d?d.compose(p.map(d)):p}else{let{from:g,to:y=g,insert:b}=p;if(g>y||g<0||y>t)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${t})`);let v=b?typeof b=="string"?Ve.of(b.split(s||gu)):b:Ve.empty,j=v.length;if(g==y&&j==0)return;g<c&&u(),g>c&&Ft(i,g-c,-1),Ft(i,y-g,j),tr(o,i,v),c=y}}return m(e),u(!d),d}static empty(e){return new wt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],s=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((c,d)=>d&&typeof c!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;s.length<i;)s.push(Ve.empty);s[i]=Ve.of(o.slice(1)),t.push(o[0],s[i].length)}}}return new wt(t,s)}static createSet(e,t){return new wt(e,t)}}function Ft(n,e,t,s=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:s?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function tr(n,e,t){if(t.length==0)return;let s=e.length-2>>1;if(s<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<s;)n.push(Ve.empty);n.push(t)}}function yu(n,e,t){let s=n.inserted;for(let i=0,o=0,c=0;c<n.sections.length;){let d=n.sections[c++],u=n.sections[c++];if(u<0)i+=d,o+=d;else{let m=i,p=o,g=Ve.empty;for(;m+=d,p+=u,u&&s&&(g=g.append(s[c-2>>1])),!(t||c==n.sections.length||n.sections[c+1]<0);)d=n.sections[c++],u=n.sections[c++];e(i,m,o,p,g),i=m,o=p}}}function wu(n,e,t,s=!1){let i=[],o=s?[]:null,c=new _l(n),d=new _l(e);for(let u=-1;;){if(c.done&&d.len||d.done&&c.len)throw new Error("Mismatched change set lengths");if(c.ins==-1&&d.ins==-1){let m=Math.min(c.len,d.len);Ft(i,m,-1),c.forward(m),d.forward(m)}else if(d.ins>=0&&(c.ins<0||u==c.i||c.off==0&&(d.len<c.len||d.len==c.len&&!t))){let m=d.len;for(Ft(i,d.ins,-1);m;){let p=Math.min(c.len,m);c.ins>=0&&u<c.i&&c.len<=p&&(Ft(i,0,c.ins),o&&tr(o,i,c.text),u=c.i),c.forward(p),m-=p}d.next()}else if(c.ins>=0){let m=0,p=c.len;for(;p;)if(d.ins==-1){let g=Math.min(p,d.len);m+=g,p-=g,d.forward(g)}else if(d.ins==0&&d.len<p)p-=d.len,d.next();else break;Ft(i,m,u<c.i?c.ins:0),o&&u<c.i&&tr(o,i,c.text),u=c.i,c.forward(c.len-p)}else{if(c.done&&d.done)return o?wt.createSet(i,o):mn.create(i);throw new Error("Mismatched change set lengths")}}}function hy(n,e,t=!1){let s=[],i=t?[]:null,o=new _l(n),c=new _l(e);for(let d=!1;;){if(o.done&&c.done)return i?wt.createSet(s,i):mn.create(s);if(o.ins==0)Ft(s,o.len,0,d),o.next();else if(c.len==0&&!c.done)Ft(s,0,c.ins,d),i&&tr(i,s,c.text),c.next();else{if(o.done||c.done)throw new Error("Mismatched change set lengths");{let u=Math.min(o.len2,c.len),m=s.length;if(o.ins==-1){let p=c.ins==-1?-1:c.off?0:c.ins;Ft(s,u,p,d),i&&p&&tr(i,s,c.text)}else c.ins==-1?(Ft(s,o.off?0:o.len,u,d),i&&tr(i,s,o.textBit(u))):(Ft(s,o.off?0:o.len,c.off?0:c.ins,d),i&&!c.off&&tr(i,s,c.text));d=(o.ins>u||c.ins>=0&&c.len>u)&&(d||s.length>m),o.forward2(u),c.forward(u)}}}}class _l{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ve.empty:e[t]}textBit(e){let{inserted:t}=this.set,s=this.i-2>>1;return s>=t.length&&!e?Ve.empty:t[s].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Rr{constructor(e,t,s){this.from=e,this.to=t,this.flags=s}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let s,i;return this.empty?s=i=e.mapPos(this.from,t):(s=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),s==this.from&&i==this.to?this:new Rr(s,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return X.range(e,t);let s=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return X.range(this.anchor,s)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return X.range(e.anchor,e.head)}static create(e,t,s){return new Rr(e,t,s)}}class X{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:X.create(this.ranges.map(s=>s.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let s=0;s<this.ranges.length;s++)if(!this.ranges[s].eq(e.ranges[s],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new X([this.main],0)}addRange(e,t=!0){return X.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let s=this.ranges.slice();return s[t]=e,X.create(s,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new X(e.ranges.map(t=>Rr.fromJSON(t)),e.main)}static single(e,t=e){return new X([X.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let s=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=s:o.from<s)return X.normalized(e.slice(),t);s=o.to}return new X(e,t)}static cursor(e,t=0,s,i){return Rr.create(e,e,(t==0?0:t<0?8:16)|(s==null?7:Math.min(6,s))|(i??16777215)<<6)}static range(e,t,s,i){let o=(s??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Rr.create(t,e,48|o):Rr.create(e,t,(t>e?8:0)|o)}static normalized(e,t=0){let s=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(s);for(let i=1;i<e.length;i++){let o=e[i],c=e[i-1];if(o.empty?o.from<=c.to:o.from<c.to){let d=c.from,u=Math.max(o.to,c.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?X.range(u,d):X.range(d,u))}}return new X(e,t)}}function uy(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let gf=0;class ye{constructor(e,t,s,i,o){this.combine=e,this.compareInput=t,this.compare=s,this.isStatic=i,this.id=gf++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ye(e.combine||(t=>t),e.compareInput||((t,s)=>t===s),e.compare||(e.combine?(t,s)=>t===s:yf),!!e.static,e.enables)}of(e){return new $o([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $o(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new $o(e,this,2,t)}from(e,t){return t||(t=s=>s),this.compute([e],s=>t(s.field(e)))}}function yf(n,e){return n==e||n.length==e.length&&n.every((t,s)=>t===e[s])}class $o{constructor(e,t,s,i){this.dependencies=e,this.facet=t,this.type=s,this.value=i,this.id=gf++}dynamicSlot(e){var t;let s=this.value,i=this.facet.compareInput,o=this.id,c=e[o]>>1,d=this.type==2,u=!1,m=!1,p=[];for(let g of this.dependencies)g=="doc"?u=!0:g=="selection"?m=!0:(((t=e[g.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[c]=s(g),1},update(g,y){if(u&&y.docChanged||m&&(y.docChanged||y.selection)||bu(g,p)){let b=s(g);if(d?!sg(b,g.values[c],i):!i(b,g.values[c]))return g.values[c]=b,1}return 0},reconfigure:(g,y)=>{let b,v=y.config.address[o];if(v!=null){let j=tc(y,v);if(this.dependencies.every(S=>S instanceof ye?y.facet(S)===g.facet(S):S instanceof Ks?y.field(S,!1)==g.field(S,!1):!0)||(d?sg(b=s(g),j,i):i(b=s(g),j)))return g.values[c]=j,0}else b=s(g);return g.values[c]=b,1}}}}function sg(n,e,t){if(n.length!=e.length)return!1;for(let s=0;s<n.length;s++)if(!t(n[s],e[s]))return!1;return!0}function bu(n,e){let t=!1;for(let s of e)Rl(n,s)&1&&(t=!0);return t}function aN(n,e,t){let s=t.map(u=>n[u.id]),i=t.map(u=>u.type),o=s.filter(u=>!(u&1)),c=n[e.id]>>1;function d(u){let m=[];for(let p=0;p<s.length;p++){let g=tc(u,s[p]);if(i[p]==2)for(let y of g)m.push(y);else m.push(g)}return e.combine(m)}return{create(u){for(let m of s)Rl(u,m);return u.values[c]=d(u),1},update(u,m){if(!bu(u,o))return 0;let p=d(u);return e.compare(p,u.values[c])?0:(u.values[c]=p,1)},reconfigure(u,m){let p=bu(u,s),g=m.config.facets[e.id],y=m.facet(e);if(g&&!p&&yf(t,g))return u.values[c]=y,0;let b=d(u);return e.compare(b,y)?(u.values[c]=y,0):(u.values[c]=b,1)}}}const go=ye.define({static:!0});class Ks{constructor(e,t,s,i,o){this.id=e,this.createF=t,this.updateF=s,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Ks(gf++,e.create,e.update,e.compare||((s,i)=>s===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(go).find(s=>s.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:s=>(s.values[t]=this.create(s),1),update:(s,i)=>{let o=s.values[t],c=this.updateF(o,i);return this.compareF(o,c)?0:(s.values[t]=c,1)},reconfigure:(s,i)=>{let o=s.facet(go),c=i.facet(go),d;return(d=o.find(u=>u.field==this))&&d!=c.find(u=>u.field==this)?(s.values[t]=d.create(s),1):i.config.address[this.id]!=null?(s.values[t]=i.field(this),0):(s.values[t]=this.create(s),1)}}}init(e){return[this,go.of({field:this,create:e})]}get extension(){return this}}const Tr={lowest:4,low:3,default:2,high:1,highest:0};function jl(n){return e=>new fy(e,n)}const Mc={highest:jl(Tr.highest),high:jl(Tr.high),default:jl(Tr.default),low:jl(Tr.low),lowest:jl(Tr.lowest)};class fy{constructor(e,t){this.inner=e,this.prec=t}}class Ac{of(e){return new vu(this,e)}reconfigure(e){return Ac.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class vu{constructor(e,t){this.compartment=e,this.inner=t}}class ec{constructor(e,t,s,i,o,c){for(this.base=e,this.compartments=t,this.dynamicSlots=s,this.address=i,this.staticValues=o,this.facets=c,this.statusTemplate=[];this.statusTemplate.length<s.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,s){let i=[],o=Object.create(null),c=new Map;for(let y of oN(e,t,c))y instanceof Ks?i.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let d=Object.create(null),u=[],m=[];for(let y of i)d[y.id]=m.length<<1,m.push(b=>y.slot(b));let p=s==null?void 0:s.config.facets;for(let y in o){let b=o[y],v=b[0].facet,j=p&&p[y]||[];if(b.every(S=>S.type==0))if(d[v.id]=u.length<<1|1,yf(j,b))u.push(s.facet(v));else{let S=v.combine(b.map(k=>k.value));u.push(s&&v.compare(S,s.facet(v))?s.facet(v):S)}else{for(let S of b)S.type==0?(d[S.id]=u.length<<1|1,u.push(S.value)):(d[S.id]=m.length<<1,m.push(k=>S.dynamicSlot(k)));d[v.id]=m.length<<1,m.push(S=>aN(S,v,b))}}let g=m.map(y=>y(d));return new ec(e,c,g,d,u,o)}}function oN(n,e,t){let s=[[],[],[],[],[]],i=new Map;function o(c,d){let u=i.get(c);if(u!=null){if(u<=d)return;let m=s[u].indexOf(c);m>-1&&s[u].splice(m,1),c instanceof vu&&t.delete(c.compartment)}if(i.set(c,d),Array.isArray(c))for(let m of c)o(m,d);else if(c instanceof vu){if(t.has(c.compartment))throw new RangeError("Duplicate use of compartment in extensions");let m=e.get(c.compartment)||c.inner;t.set(c.compartment,m),o(m,d)}else if(c instanceof fy)o(c.inner,c.prec);else if(c instanceof Ks)s[d].push(c),c.provides&&o(c.provides,d);else if(c instanceof $o)s[d].push(c),c.facet.extensions&&o(c.facet.extensions,Tr.default);else{let m=c.extension;if(!m)throw new Error(`Unrecognized extension value in extension set (${c}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(m,d)}}return o(n,Tr.default),s.reduce((c,d)=>c.concat(d))}function Rl(n,e){if(e&1)return 2;let t=e>>1,s=n.status[t];if(s==4)throw new Error("Cyclic dependency between fields and/or facets");if(s&2)return s;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function tc(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const my=ye.define(),ju=ye.define({combine:n=>n.some(e=>e),static:!0}),py=ye.define({combine:n=>n.length?n[0]:void 0,static:!0}),xy=ye.define(),gy=ye.define(),yy=ye.define(),wy=ye.define({combine:n=>n.length?n[0]:!1});class fr{constructor(e,t){this.type=e,this.value=t}static define(){return new cN}}class cN{of(e){return new fr(this,e)}}class dN{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ke(this.type,t)}is(e){return this.type==e}static define(e={}){return new dN(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let s=[];for(let i of e){let o=i.map(t);o&&s.push(o)}return s}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class vt{constructor(e,t,s,i,o,c){this.startState=e,this.changes=t,this.selection=s,this.effects=i,this.annotations=o,this.scrollIntoView=c,this._doc=null,this._state=null,s&&uy(s,t.newLength),o.some(d=>d.type==vt.time)||(this.annotations=o.concat(vt.time.of(Date.now())))}static create(e,t,s,i,o,c){return new vt(e,t,s,i,o,c)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(vt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}vt.time=fr.define();vt.userEvent=fr.define();vt.addToHistory=fr.define();vt.remote=fr.define();function hN(n,e){let t=[];for(let s=0,i=0;;){let o,c;if(s<n.length&&(i==e.length||e[i]>=n[s]))o=n[s++],c=n[s++];else if(i<e.length)o=e[i++],c=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,c):t[t.length-1]<c&&(t[t.length-1]=c)}}function by(n,e,t){var s;let i,o,c;return t?(i=e.changes,o=wt.empty(e.changes.length),c=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),c=n.changes.compose(i)),{changes:c,selection:e.selection?e.selection.map(o):(s=n.selection)===null||s===void 0?void 0:s.map(i),effects:Ke.mapEffects(n.effects,i).concat(Ke.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Nu(n,e,t){let s=e.selection,i=wi(e.annotations);return e.userEvent&&(i=i.concat(vt.userEvent.of(e.userEvent))),{changes:e.changes instanceof wt?e.changes:wt.of(e.changes||[],t,n.facet(py)),selection:s&&(s instanceof X?s:X.single(s.anchor,s.head)),effects:wi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function vy(n,e,t){let s=Nu(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let c=!!e[o].sequential;s=by(s,Nu(n,e[o],c?s.changes.newLength:n.doc.length),c)}let i=vt.create(n,s.changes,s.selection,s.effects,s.annotations,s.scrollIntoView);return fN(t?uN(i):i)}function uN(n){let e=n.startState,t=!0;for(let i of e.facet(xy)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:hN(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=wt.empty(e.doc.length);else{let c=n.changes.filter(t);i=c.changes,o=c.filtered.mapDesc(c.changes).invertedDesc}n=vt.create(e,i,n.selection&&n.selection.map(o),Ke.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let s=e.facet(gy);for(let i=s.length-1;i>=0;i--){let o=s[i](n);o instanceof vt?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof vt?n=o[0]:n=vy(e,wi(o),!1)}return n}function fN(n){let e=n.startState,t=e.facet(yy),s=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(s=by(s,Nu(e,o,n.changes.newLength),!0))}return s==n?n:vt.create(e,n.changes,n.selection,s.effects,s.annotations,s.scrollIntoView)}const mN=[];function wi(n){return n==null?mN:Array.isArray(n)?n:[n]}var ht=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(ht||(ht={}));const pN=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ku;try{ku=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function xN(n){if(ku)return ku.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||pN.test(t)))return!0}return!1}function gN(n){return e=>{if(!/\S/.test(e))return ht.Space;if(xN(e))return ht.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return ht.Word;return ht.Other}}class He{constructor(e,t,s,i,o,c){this.config=e,this.doc=t,this.selection=s,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,c&&(c._state=this);for(let d=0;d<this.config.dynamicSlots.length;d++)Rl(this,d<<1);this.computeSlot=null}field(e,t=!0){let s=this.config.address[e.id];if(s==null){if(t)throw new RangeError("Field is not present in this state");return}return Rl(this,s),tc(this,s)}update(...e){return vy(this,e,!0)}applyTransaction(e){let t=this.config,{base:s,compartments:i}=t;for(let d of e.effects)d.is(Ac.reconfigure)?(t&&(i=new Map,t.compartments.forEach((u,m)=>i.set(m,u)),t=null),i.set(d.value.compartment,d.value.extension)):d.is(Ke.reconfigure)?(t=null,s=d.value):d.is(Ke.appendConfig)&&(t=null,s=wi(s).concat(d.value));let o;t?o=e.startState.values.slice():(t=ec.resolve(s,i,this),o=new He(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(u,m)=>m.reconfigure(u,this),null).values);let c=e.startState.facet(ju)?e.newSelection:e.newSelection.asSingle();new He(t,e.newDoc,c,o,(d,u)=>u.update(d,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:X.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,s=e(t.ranges[0]),i=this.changes(s.changes),o=[s.range],c=wi(s.effects);for(let d=1;d<t.ranges.length;d++){let u=e(t.ranges[d]),m=this.changes(u.changes),p=m.map(i);for(let y=0;y<d;y++)o[y]=o[y].map(p);let g=i.mapDesc(m,!0);o.push(u.range.map(g)),i=i.compose(p),c=Ke.mapEffects(c,p).concat(Ke.mapEffects(wi(u.effects),g))}return{changes:i,selection:X.create(o,t.mainIndex),effects:c}}changes(e=[]){return e instanceof wt?e:wt.of(e,this.doc.length,this.facet(He.lineSeparator))}toText(e){return Ve.of(e.split(this.facet(He.lineSeparator)||gu))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Rl(this,t),tc(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let s in e){let i=e[s];i instanceof Ks&&this.config.address[i.id]!=null&&(t[s]=i.spec.toJSON(this.field(e[s]),this))}return t}static fromJSON(e,t={},s){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(s){for(let o in s)if(Object.prototype.hasOwnProperty.call(e,o)){let c=s[o],d=e[o];i.push(c.init(u=>c.spec.fromJSON(d,u)))}}return He.create({doc:e.doc,selection:X.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=ec.resolve(e.extensions||[],new Map),s=e.doc instanceof Ve?e.doc:Ve.of((e.doc||"").split(t.staticFacet(He.lineSeparator)||gu)),i=e.selection?e.selection instanceof X?e.selection:X.single(e.selection.anchor,e.selection.head):X.single(0);return uy(i,s.length),t.staticFacet(ju)||(i=i.asSingle()),new He(t,s,i,t.dynamicSlots.map(()=>null),(o,c)=>c.create(o),null)}get tabSize(){return this.facet(He.tabSize)}get lineBreak(){return this.facet(He.lineSeparator)||`
`}get readOnly(){return this.facet(wy)}phrase(e,...t){for(let s of this.facet(He.phrases))if(Object.prototype.hasOwnProperty.call(s,e)){e=s[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(s,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?s:t[o-1]})),e}languageDataAt(e,t,s=-1){let i=[];for(let o of this.facet(my))for(let c of o(this,t,s))Object.prototype.hasOwnProperty.call(c,e)&&i.push(c[e]);return i}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return gN(t.length?t[0]:"")}wordAt(e){let{text:t,from:s,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),c=e-s,d=e-s;for(;c>0;){let u=bt(t,c,!1);if(o(t.slice(u,c))!=ht.Word)break;c=u}for(;d<i;){let u=bt(t,d);if(o(t.slice(d,u))!=ht.Word)break;d=u}return c==d?null:X.range(c+s,d+s)}}He.allowMultipleSelections=ju;He.tabSize=ye.define({combine:n=>n.length?n[0]:4});He.lineSeparator=py;He.readOnly=wy;He.phrases=ye.define({compare(n,e){let t=Object.keys(n),s=Object.keys(e);return t.length==s.length&&t.every(i=>n[i]==e[i])}});He.languageData=my;He.changeFilter=xy;He.transactionFilter=gy;He.transactionExtender=yy;Ac.reconfigure=Ke.define();function Zl(n,e,t={}){let s={};for(let i of n)for(let o of Object.keys(i)){let c=i[o],d=s[o];if(d===void 0)s[o]=c;else if(!(d===c||c===void 0))if(Object.hasOwnProperty.call(t,o))s[o]=t[o](d,c);else throw new Error("Config merge conflict for field "+o)}for(let i in e)s[i]===void 0&&(s[i]=e[i]);return s}class Br{eq(e){return this==e}range(e,t=e){return Su.create(e,t,this)}}Br.prototype.startSide=Br.prototype.endSide=0;Br.prototype.point=!1;Br.prototype.mapMode=gs.TrackDel;function wf(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let Su=class jy{constructor(e,t,s){this.from=e,this.to=t,this.value=s}static create(e,t,s){return new jy(e,t,s)}};function Cu(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class bf{constructor(e,t,s,i){this.from=e,this.to=t,this.value=s,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,s,i=0){let o=s?this.to:this.from;for(let c=i,d=o.length;;){if(c==d)return c;let u=c+d>>1,m=o[u]-e||(s?this.value[u].endSide:this.value[u].startSide)-t;if(u==c)return m>=0?c:d;m>=0?d=u:c=u+1}}between(e,t,s,i){for(let o=this.findIndex(t,-1e9,!0),c=this.findIndex(s,1e9,!1,o);o<c;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let s=[],i=[],o=[],c=-1,d=-1;for(let u=0;u<this.value.length;u++){let m=this.value[u],p=this.from[u]+e,g=this.to[u]+e,y,b;if(p==g){let v=t.mapPos(p,m.startSide,m.mapMode);if(v==null||(y=b=v,m.startSide!=m.endSide&&(b=t.mapPos(p,m.endSide),b<y)))continue}else if(y=t.mapPos(p,m.startSide),b=t.mapPos(g,m.endSide),y>b||y==b&&m.startSide>0&&m.endSide<=0)continue;(b-y||m.endSide-m.startSide)<0||(c<0&&(c=y),m.point&&(d=Math.max(d,b-y)),s.push(m),i.push(y-c),o.push(b-c))}return{mapped:s.length?new bf(i,o,s,d):null,pos:c}}}class $e{constructor(e,t,s,i){this.chunkPos=e,this.chunk=t,this.nextLayer=s,this.maxPoint=i}static create(e,t,s,i){return new $e(e,t,s,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:s=!1,filterFrom:i=0,filterTo:o=this.length}=e,c=e.filter;if(t.length==0&&!c)return this;if(s&&(t=t.slice().sort(Cu)),this.isEmpty)return t.length?$e.of(t):this;let d=new Ny(this,null,-1).goto(0),u=0,m=[],p=new Ci;for(;d.value||u<t.length;)if(u<t.length&&(d.from-t[u].from||d.startSide-t[u].value.startSide)>=0){let g=t[u++];p.addInner(g.from,g.to,g.value)||m.push(g)}else d.rangeIndex==1&&d.chunkIndex<this.chunk.length&&(u==t.length||this.chunkEnd(d.chunkIndex)<t[u].from)&&(!c||i>this.chunkEnd(d.chunkIndex)||o<this.chunkPos[d.chunkIndex])&&p.addChunk(this.chunkPos[d.chunkIndex],this.chunk[d.chunkIndex])?d.nextChunk():((!c||i>d.to||o<d.from||c(d.from,d.to,d.value))&&(p.addInner(d.from,d.to,d.value)||m.push(Su.create(d.from,d.to,d.value))),d.next());return p.finishInner(this.nextLayer.isEmpty&&!m.length?$e.empty:this.nextLayer.update({add:m,filter:c,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],s=[],i=-1;for(let c=0;c<this.chunk.length;c++){let d=this.chunkPos[c],u=this.chunk[c],m=e.touchesRange(d,d+u.length);if(m===!1)i=Math.max(i,u.maxPoint),t.push(u),s.push(e.mapPos(d));else if(m===!0){let{mapped:p,pos:g}=u.map(d,e);p&&(i=Math.max(i,p.maxPoint),t.push(p),s.push(g))}}let o=this.nextLayer.map(e);return t.length==0?o:new $e(s,t,o||$e.empty,i)}between(e,t,s){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],c=this.chunk[i];if(t>=o&&e<=o+c.length&&c.between(o,e-o,t-o,s)===!1)return}this.nextLayer.between(e,t,s)}}iter(e=0){return Wl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Wl.from(e).goto(t)}static compare(e,t,s,i,o=-1){let c=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),d=t.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),u=ng(c,d,s),m=new Nl(c,u,o),p=new Nl(d,u,o);s.iterGaps((g,y,b)=>rg(m,g,p,y,b,i)),s.empty&&s.length==0&&rg(m,0,p,0,0,i)}static eq(e,t,s=0,i){i==null&&(i=999999999);let o=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),c=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=c.length)return!1;if(!o.length)return!0;let d=ng(o,c),u=new Nl(o,d,0).goto(s),m=new Nl(c,d,0).goto(s);for(;;){if(u.to!=m.to||!Mu(u.active,m.active)||u.point&&(!m.point||!wf(u.point,m.point)))return!1;if(u.to>i)return!0;u.next(),m.next()}}static spans(e,t,s,i,o=-1){let c=new Nl(e,null,o).goto(t),d=t,u=c.openStart;for(;;){let m=Math.min(c.to,s);if(c.point){let p=c.activeForPoint(c.to),g=c.pointFrom<t?p.length+1:c.point.startSide<0?p.length:Math.min(p.length,u);i.point(d,m,c.point,p,g,c.pointRank),u=Math.min(c.openEnd(m),p.length)}else m>d&&(i.span(d,m,c.active,u),u=c.openEnd(m));if(c.to>s)return u+(c.point&&c.to>s?1:0);d=c.to,c.next()}}static of(e,t=!1){let s=new Ci;for(let i of e instanceof Su?[e]:t?yN(e):e)s.add(i.from,i.to,i.value);return s.finish()}static join(e){if(!e.length)return $e.empty;let t=e[e.length-1];for(let s=e.length-2;s>=0;s--)for(let i=e[s];i!=$e.empty;i=i.nextLayer)t=new $e(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}$e.empty=new $e([],[],null,-1);function yN(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let s=n[t];if(Cu(e,s)>0)return n.slice().sort(Cu);e=s}return n}$e.empty.nextLayer=$e.empty;class Ci{finishChunk(e){this.chunks.push(new bf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,s){this.addInner(e,t,s)||(this.nextLayer||(this.nextLayer=new Ci)).add(e,t,s)}addInner(e,t,s){let i=e-this.lastTo||s.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||s.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=s,this.lastFrom=e,this.lastTo=t,this.value.push(s),s.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let s=t.value.length-1;return this.last=t.value[s],this.lastFrom=t.from[s]+e,this.lastTo=t.to[s]+e,!0}finish(){return this.finishInner($e.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=$e.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ng(n,e,t){let s=new Map;for(let o of n)for(let c=0;c<o.chunk.length;c++)o.chunk[c].maxPoint<=0&&s.set(o.chunk[c],o.chunkPos[c]);let i=new Set;for(let o of e)for(let c=0;c<o.chunk.length;c++){let d=s.get(o.chunk[c]);d!=null&&(t?t.mapPos(d):d)==o.chunkPos[c]&&!(t!=null&&t.touchesRange(d,d+o.chunk[c].length))&&i.add(o.chunk[c])}return i}class Ny{constructor(e,t,s,i=0){this.layer=e,this.skip=t,this.minPoint=s,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,s){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,s=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!s||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],s=e+t.from[this.rangeIndex];if(this.from=s,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Wl{constructor(e){this.heap=e}static from(e,t=null,s=-1){let i=[];for(let o=0;o<e.length;o++)for(let c=e[o];!c.isEmpty;c=c.nextLayer)c.maxPoint>=s&&i.push(new Ny(c,t,s,o));return i.length==1?i[0]:new Wl(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let s of this.heap)s.goto(e,t);for(let s=this.heap.length>>1;s>=0;s--)Ih(this.heap,s);return this.next(),this}forward(e,t){for(let s of this.heap)s.forward(e,t);for(let s=this.heap.length>>1;s>=0;s--)Ih(this.heap,s);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ih(this.heap,0)}}}function Ih(n,e){for(let t=n[e];;){let s=(e<<1)+1;if(s>=n.length)break;let i=n[s];if(s+1<n.length&&i.compare(n[s+1])>=0&&(i=n[s+1],s++),t.compare(i)<0)break;n[s]=t,n[e]=i,e=s}}class Nl{constructor(e,t,s){this.minPoint=s,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Wl.from(e,t,s)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){yo(this.active,e),yo(this.activeTo,e),yo(this.activeRank,e),this.minActive=ig(this.active,this.activeTo)}addActive(e){let t=0,{value:s,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&(o-this.activeRank[t]||i-this.activeTo[t])>0;)t++;wo(this.active,t,s),wo(this.activeTo,t,i),wo(this.activeRank,t,o),e&&wo(e,t,this.cursor.from),this.minActive=ig(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let s=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),s&&yo(s,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(s),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(s){this.openStart=0;for(let i=s.length-1;i>=0&&s[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let s=this.active.length-1;s>=0&&!(this.activeRank[s]<this.pointRank);s--)(this.activeTo[s]>e||this.activeTo[s]==e&&this.active[s].endSide>=this.point.endSide)&&t.push(this.active[s]);return t.reverse()}openEnd(e){let t=0;for(let s=this.activeTo.length-1;s>=0&&this.activeTo[s]>e;s--)t++;return t}}function rg(n,e,t,s,i,o){n.goto(e),t.goto(s);let c=s+i,d=s,u=s-e,m=!!o.boundChange;for(let p=!1;;){let g=n.to+u-t.to,y=g||n.endSide-t.endSide,b=y<0?n.to+u:t.to,v=Math.min(b,c);if(n.point||t.point?(n.point&&t.point&&wf(n.point,t.point)&&Mu(n.activeForPoint(n.to),t.activeForPoint(t.to))||o.comparePoint(d,v,n.point,t.point),p=!1):(p&&o.boundChange(d),v>d&&!Mu(n.active,t.active)&&o.compareRange(d,v,n.active,t.active),m&&v<c&&(g||n.openEnd(b)!=t.openEnd(b))&&(p=!0)),b>c)break;d=b,y<=0&&n.next(),y>=0&&t.next()}}function Mu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!wf(n[t],e[t]))return!1;return!0}function yo(n,e){for(let t=e,s=n.length-1;t<s;t++)n[t]=n[t+1];n.pop()}function wo(n,e,t){for(let s=n.length-1;s>=e;s--)n[s+1]=n[s];n[e]=t}function ig(n,e){let t=-1,s=1e9;for(let i=0;i<e.length;i++)(e[i]-s||n[i].endSide-n[t].endSide)<0&&(t=i,s=e[i]);return t}function Ec(n,e,t=n.length){let s=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(s+=e-s%e,i++):(s++,i=bt(n,i));return s}function wN(n,e,t,s){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=bt(n,i)}return n.length}const Au="",lg=typeof Symbol>"u"?"__"+Au:Symbol.for(Au),Eu=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class cr{constructor(e,t){this.rules=[];let{finish:s}=t||{};function i(c){return/^@/.test(c)?[c]:c.split(/,\s*/)}function o(c,d,u,m){let p=[],g=/^@(\w+)\b/.exec(c[0]),y=g&&g[1]=="keyframes";if(g&&d==null)return u.push(c[0]+";");for(let b in d){let v=d[b];if(/&/.test(b))o(b.split(/,\s*/).map(j=>c.map(S=>j.replace(/&/,S))).reduce((j,S)=>j.concat(S)),v,u);else if(v&&typeof v=="object"){if(!g)throw new RangeError("The value of a property ("+b+") should be a primitive value.");o(i(b),v,p,y)}else v!=null&&p.push(b.replace(/_.*/,"").replace(/[A-Z]/g,j=>"-"+j.toLowerCase())+": "+v+";")}(p.length||y)&&u.push((s&&!g&&!m?c.map(s):c).join(", ")+" {"+p.join(" ")+"}")}for(let c in e)o(i(c),e[c],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ag[lg]||1;return ag[lg]=e+1,Au+e.toString(36)}static mount(e,t,s){let i=e[Eu],o=s&&s.nonce;i?o&&i.setNonce(o):i=new bN(e,o),i.mount(Array.isArray(t)?t:[t],e)}}let og=new Map;class bN{constructor(e,t){let s=e.ownerDocument||e,i=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let o=og.get(s);if(o)return e[Eu]=o;this.sheet=new i.CSSStyleSheet,og.set(s,this)}else this.styleTag=s.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Eu]=this}mount(e,t){let s=this.sheet,i=0,o=0;for(let c=0;c<e.length;c++){let d=e[c],u=this.modules.indexOf(d);if(u<o&&u>-1&&(this.modules.splice(u,1),o--,u=-1),u==-1){if(this.modules.splice(o++,0,d),s)for(let m=0;m<d.rules.length;m++)s.insertRule(d.rules[m],i++)}else{for(;o<u;)i+=this.modules[o++].rules.length;i+=d.rules.length,o++}}if(s)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let c="";for(let u=0;u<this.modules.length;u++)c+=this.modules[u].getRules()+`
`;this.styleTag.textContent=c;let d=t.head||t;this.styleTag.parentNode!=d&&d.insertBefore(this.styleTag,d.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var dr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Hl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},vN=typeof navigator<"u"&&/Mac/.test(navigator.platform),jN=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tt=0;Tt<10;Tt++)dr[48+Tt]=dr[96+Tt]=String(Tt);for(var Tt=1;Tt<=24;Tt++)dr[Tt+111]="F"+Tt;for(var Tt=65;Tt<=90;Tt++)dr[Tt]=String.fromCharCode(Tt+32),Hl[Tt]=String.fromCharCode(Tt);for(var zh in dr)Hl.hasOwnProperty(zh)||(Hl[zh]=dr[zh]);function NN(n){var e=vN&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||jN&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Hl:dr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function St(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=t[s];typeof i=="string"?n.setAttribute(s,i):i!=null&&(n[s]=i)}e++}for(;e<arguments.length;e++)ky(n,arguments[e]);return n}function ky(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)ky(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}let Qt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Lu=typeof document<"u"?document:{documentElement:{style:{}}};const Pu=/Edge\/(\d+)/.exec(Qt.userAgent),Sy=/MSIE \d/.test(Qt.userAgent),Tu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qt.userAgent),Lc=!!(Sy||Tu||Pu),cg=!Lc&&/gecko\/(\d+)/i.test(Qt.userAgent),$h=!Lc&&/Chrome\/(\d+)/.exec(Qt.userAgent),kN="webkitFontSmoothing"in Lu.documentElement.style,Du=!Lc&&/Apple Computer/.test(Qt.vendor),dg=Du&&(/Mobile\/\w+/.test(Qt.userAgent)||Qt.maxTouchPoints>2);var me={mac:dg||/Mac/.test(Qt.platform),windows:/Win/.test(Qt.platform),linux:/Linux|X11/.test(Qt.platform),ie:Lc,ie_version:Sy?Lu.documentMode||6:Tu?+Tu[1]:Pu?+Pu[1]:0,gecko:cg,gecko_version:cg?+(/Firefox\/(\d+)/.exec(Qt.userAgent)||[0,0])[1]:0,chrome:!!$h,chrome_version:$h?+$h[1]:0,ios:dg,android:/Android\b/.test(Qt.userAgent),webkit_version:kN?+(/\bAppleWebKit\/(\d+)/.exec(Qt.userAgent)||[0,0])[1]:0,safari:Du,safari_version:Du?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Qt.userAgent)||[0,0])[1]:0,tabSize:Lu.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function vf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const sc=Object.create(null);function jf(n,e,t){if(n==e)return!0;n||(n=sc),e||(e=sc);let s=Object.keys(n),i=Object.keys(e);if(s.length-0!=i.length-0)return!1;for(let o of s)if(o!=t&&(i.indexOf(o)==-1||n[o]!==e[o]))return!1;return!0}function SN(n,e){for(let t=n.attributes.length-1;t>=0;t--){let s=n.attributes[t].name;e[s]==null&&n.removeAttribute(s)}for(let t in e){let s=e[t];t=="style"?n.style.cssText=s:n.getAttribute(t)!=s&&n.setAttribute(t,s)}}function hg(n,e,t){let s=!1;if(e)for(let i in e)t&&i in t||(s=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(s=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return s}function CN(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let s=n.attributes[t];e[s.name]=s.value}return e}class Pc{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,s){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ls=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(ls||(ls={}));class Te extends Br{constructor(e,t,s,i){super(),this.startSide=e,this.endSide=t,this.widget=s,this.spec=i}get heightRelevant(){return!1}static mark(e){return new ea(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),s=!!e.block;return t+=s&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Fr(e,t,t,s,e.widget||null,!1)}static replace(e){let t=!!e.block,s,i;if(e.isBlockGap)s=-5e8,i=4e8;else{let{start:o,end:c}=Cy(e,t);s=(o?t?-3e8:-1:5e8)-1,i=(c?t?2e8:1:-6e8)+1}return new Fr(e,s,i,t,e.widget||null,!0)}static line(e){return new ta(e)}static set(e,t=!1){return $e.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Te.none=$e.empty;class ea extends Te{constructor(e){let{start:t,end:s}=Cy(e);super(t?-1:5e8,s?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?vf(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||sc}eq(e){return this==e||e instanceof ea&&this.tagName==e.tagName&&jf(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ea.prototype.point=!1;class ta extends Te{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ta&&this.spec.class==e.spec.class&&jf(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ta.prototype.mapMode=gs.TrackBefore;ta.prototype.point=!0;class Fr extends Te{constructor(e,t,s,i,o,c){super(t,s,o,e),this.block=i,this.isReplace=c,this.mapMode=i?t<=0?gs.TrackBefore:gs.TrackAfter:gs.TrackDel}get type(){return this.startSide!=this.endSide?ls.WidgetRange:this.startSide<=0?ls.WidgetBefore:ls.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Fr&&MN(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Fr.prototype.point=!0;function Cy(n,e=!1){let{inclusiveStart:t,inclusiveEnd:s}=n;return t==null&&(t=n.inclusive),s==null&&(s=n.inclusive),{start:t??e,end:s??e}}function MN(n,e){return n==e||!!(n&&e&&n.compare(e))}function bi(n,e,t,s=0){let i=t.length-1;i>=0&&t[i]+s>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Vl extends Br{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof Vl&&this.tagName==e.tagName&&jf(this.attributes,e.attributes)}static create(e){return new Vl(e.tagName,e.attributes||sc)}static set(e,t=!1){return $e.of(e,t)}}Vl.prototype.startSide=Vl.prototype.endSide=-1;function Mi(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Ru(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ol(n,e){if(!e.anchorNode)return!1;try{return Ru(n,e.anchorNode)}catch{return!1}}function _o(n){return n.nodeType==3?Ul(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Bl(n,e,t,s){return t?ug(n,e,t,s,-1)||ug(n,e,t,s,1):!1}function hr(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function nc(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function ug(n,e,t,s,i){for(;;){if(n==t&&e==s)return!0;if(e==(i<0?0:Ln(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=hr(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Ln(n):0}else return!1}}function Ln(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function rc(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function AN(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function My(n,e){let t=e.width/n.offsetWidth,s=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(s>.995&&s<1.005||!isFinite(s)||Math.abs(e.height-n.offsetHeight)<1)&&(s=1),{scaleX:t,scaleY:s}}function EN(n,e,t,s,i,o,c,d){let u=n.ownerDocument,m=u.defaultView||window;for(let p=n,g=!1;p&&!g;)if(p.nodeType==1){let y,b=p==u.body,v=1,j=1;if(b)y=AN(m);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let M=p.getBoundingClientRect();({scaleX:v,scaleY:j}=My(p,M)),y={left:M.left,right:M.left+p.clientWidth*v,top:M.top,bottom:M.top+p.clientHeight*j}}let S=0,k=0;if(i=="nearest")e.top<y.top?(k=e.top-(y.top+c),t>0&&e.bottom>y.bottom+k&&(k=e.bottom-y.bottom+c)):e.bottom>y.bottom&&(k=e.bottom-y.bottom+c,t<0&&e.top-k<y.top&&(k=e.top-(y.top+c)));else{let M=e.bottom-e.top,R=y.bottom-y.top;k=(i=="center"&&M<=R?e.top+M/2-R/2:i=="start"||i=="center"&&t<0?e.top-c:e.bottom-R+c)-y.top}if(s=="nearest"?e.left<y.left?(S=e.left-(y.left+o),t>0&&e.right>y.right+S&&(S=e.right-y.right+o)):e.right>y.right&&(S=e.right-y.right+o,t<0&&e.left<y.left+S&&(S=e.left-(y.left+o))):S=(s=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:s=="start"==d?e.left-o:e.right-(y.right-y.left)+o)-y.left,S||k)if(b)m.scrollBy(S,k);else{let M=0,R=0;if(k){let E=p.scrollTop;p.scrollTop+=k/j,R=(p.scrollTop-E)*j}if(S){let E=p.scrollLeft;p.scrollLeft+=S/v,M=(p.scrollLeft-E)*v}e={left:e.left-M,top:e.top-R,right:e.right-M,bottom:e.bottom-R},M&&Math.abs(M-S)<1&&(s="nearest"),R&&Math.abs(R-k)<1&&(i="nearest")}if(b)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function LN(n){let e=n.ownerDocument,t,s;for(let i=n.parentNode;i&&!(i==e.body||t&&s);)if(i.nodeType==1)!s&&i.scrollHeight>i.clientHeight&&(s=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:s}}class PN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:s}=e;this.set(t,Math.min(e.anchorOffset,t?Ln(t):0),s,Math.min(e.focusOffset,s?Ln(s):0))}set(e,t,s,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=s,this.focusOffset=i}}let Pr=null;me.safari&&me.safari_version>=26&&(Pr=!1);function Ay(n){if(n.setActive)return n.setActive();if(Pr)return n.focus(Pr);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Pr==null?{get preventScroll(){return Pr={preventScroll:!0},!0}}:void 0),!Pr){Pr=!1;for(let t=0;t<e.length;){let s=e[t++],i=e[t++],o=e[t++];s.scrollTop!=i&&(s.scrollTop=i),s.scrollLeft!=o&&(s.scrollLeft=o)}}}let fg;function Ul(n,e,t=e){let s=fg||(fg=document.createRange());return s.setEnd(n,t),s.setStart(n,e),s}function vi(n,e,t,s){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};s&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=s);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,n.dispatchEvent(o);let c=new KeyboardEvent("keyup",i);return c.synthetic=!0,n.dispatchEvent(c),o.defaultPrevented||c.defaultPrevented}function TN(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function DN(n,e){let t=e.focusNode,s=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=s)return!1;for(s=Math.min(s,Ln(t));;)if(s){if(t.nodeType!=1)return!1;let i=t.childNodes[s-1];i.contentEditable=="false"?s--:(t=i,s=Ln(t))}else{if(t==n)return!0;s=hr(t),t=t.parentNode}}function Ey(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Ly(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s>0)return{node:t,offset:s};if(t.nodeType==1&&s>0){if(t.contentEditable=="false")return null;t=t.childNodes[s-1],s=Ln(t)}else if(t.parentNode&&!nc(t))s=hr(t),t=t.parentNode;else return null}}function Py(n,e){for(let t=n,s=e;;){if(t.nodeType==3&&s<t.nodeValue.length)return{node:t,offset:s};if(t.nodeType==1&&s<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[s],s=0}else if(t.parentNode&&!nc(t))s=hr(t)+1,t=t.parentNode;else return null}}class Hs{constructor(e,t,s=!0){this.node=e,this.offset=t,this.precise=s}static before(e,t){return new Hs(e.parentNode,hr(e),t)}static after(e,t){return new Hs(e.parentNode,hr(e)+1,t)}}var ut=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(ut||(ut={}));const Ir=ut.LTR,Nf=ut.RTL;function Ty(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const RN=Ty("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ON=Ty("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ou=Object.create(null),nn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Ou[e]=t,Ou[t]=-e}function Dy(n){return n<=247?RN[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?ON[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const BN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Cn{get dir(){return this.level%2?Nf:Ir}constructor(e,t,s){this.from=e,this.to=t,this.level=s}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,s,i){let o=-1;for(let c=0;c<e.length;c++){let d=e[c];if(d.from<=t&&d.to>=t){if(d.level==s)return c;(o<0||(i!=0?i<0?d.from<t:d.to>t:e[o].level>d.level))&&(o=c)}}if(o<0)throw new RangeError("Index out of range");return o}}function Ry(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let s=n[t],i=e[t];if(s.from!=i.from||s.to!=i.to||s.direction!=i.direction||!Ry(s.inner,i.inner))return!1}return!0}const qe=[];function FN(n,e,t,s,i){for(let o=0;o<=s.length;o++){let c=o?s[o-1].to:e,d=o<s.length?s[o].from:t,u=o?256:i;for(let m=c,p=u,g=u;m<d;m++){let y=Dy(n.charCodeAt(m));y==512?y=p:y==8&&g==4&&(y=16),qe[m]=y==4?2:y,y&7&&(g=y),p=y}for(let m=c,p=u,g=u;m<d;m++){let y=qe[m];if(y==128)m<d-1&&p==qe[m+1]&&p&24?y=qe[m]=p:qe[m]=256;else if(y==64){let b=m+1;for(;b<d&&qe[b]==64;)b++;let v=m&&p==8||b<t&&qe[b]==8?g==1?1:8:256;for(let j=m;j<b;j++)qe[j]=v;m=b-1}else y==8&&g==1&&(qe[m]=1);p=y,y&7&&(g=y)}}}function IN(n,e,t,s,i){let o=i==1?2:1;for(let c=0,d=0,u=0;c<=s.length;c++){let m=c?s[c-1].to:e,p=c<s.length?s[c].from:t;for(let g=m,y,b,v;g<p;g++)if(b=Ou[y=n.charCodeAt(g)])if(b<0){for(let j=d-3;j>=0;j-=3)if(nn[j+1]==-b){let S=nn[j+2],k=S&2?i:S&4?S&1?o:i:0;k&&(qe[g]=qe[nn[j]]=k),d=j;break}}else{if(nn.length==189)break;nn[d++]=g,nn[d++]=y,nn[d++]=u}else if((v=qe[g])==2||v==1){let j=v==i;u=j?0:1;for(let S=d-3;S>=0;S-=3){let k=nn[S+2];if(k&2)break;if(j)nn[S+2]|=2;else{if(k&4)break;nn[S+2]|=4}}}}}function zN(n,e,t,s){for(let i=0,o=s;i<=t.length;i++){let c=i?t[i-1].to:n,d=i<t.length?t[i].from:e;for(let u=c;u<d;){let m=qe[u];if(m==256){let p=u+1;for(;;)if(p==d){if(i==t.length)break;p=t[i++].to,d=i<t.length?t[i].from:e}else if(qe[p]==256)p++;else break;let g=o==1,y=(p<e?qe[p]:s)==1,b=g==y?g?1:2:s;for(let v=p,j=i,S=j?t[j-1].to:n;v>u;)v==S&&(v=t[--j].from,S=j?t[j-1].to:n),qe[--v]=b;u=p}else o=m,u++}}}function Bu(n,e,t,s,i,o,c){let d=s%2?2:1;if(s%2==i%2)for(let u=e,m=0;u<t;){let p=!0,g=!1;if(m==o.length||u<o[m].from){let j=qe[u];j!=d&&(p=!1,g=j==16)}let y=!p&&d==1?[]:null,b=p?s:s+1,v=u;e:for(;;)if(m<o.length&&v==o[m].from){if(g)break e;let j=o[m];if(!p)for(let S=j.to,k=m+1;;){if(S==t)break e;if(k<o.length&&o[k].from==S)S=o[k++].to;else{if(qe[S]==d)break e;break}}if(m++,y)y.push(j);else{j.from>u&&c.push(new Cn(u,j.from,b));let S=j.direction==Ir!=!(b%2);Fu(n,S?s+1:s,i,j.inner,j.from,j.to,c),u=j.to}v=j.to}else{if(v==t||(p?qe[v]!=d:qe[v]==d))break;v++}y?Bu(n,u,v,s+1,i,y,c):u<v&&c.push(new Cn(u,v,b)),u=v}else for(let u=t,m=o.length;u>e;){let p=!0,g=!1;if(!m||u>o[m-1].to){let j=qe[u-1];j!=d&&(p=!1,g=j==16)}let y=!p&&d==1?[]:null,b=p?s:s+1,v=u;e:for(;;)if(m&&v==o[m-1].to){if(g)break e;let j=o[--m];if(!p)for(let S=j.from,k=m;;){if(S==e)break e;if(k&&o[k-1].to==S)S=o[--k].from;else{if(qe[S-1]==d)break e;break}}if(y)y.push(j);else{j.to<u&&c.push(new Cn(j.to,u,b));let S=j.direction==Ir!=!(b%2);Fu(n,S?s+1:s,i,j.inner,j.from,j.to,c),u=j.from}v=j.from}else{if(v==e||(p?qe[v-1]!=d:qe[v-1]==d))break;v--}y?Bu(n,v,u,s+1,i,y,c):v<u&&c.push(new Cn(v,u,b)),u=v}}function Fu(n,e,t,s,i,o,c){let d=e%2?2:1;FN(n,i,o,s,d),IN(n,i,o,s,d),zN(i,o,s,d),Bu(n,i,o,e,t,s,c)}function $N(n,e,t){if(!n)return[new Cn(0,0,e==Nf?1:0)];if(e==Ir&&!t.length&&!BN.test(n))return Oy(n.length);if(t.length)for(;n.length>qe.length;)qe[qe.length]=256;let s=[],i=e==Ir?0:1;return Fu(n,i,i,t,0,n.length,s),s}function Oy(n){return[new Cn(0,n,0)]}let By="";function _N(n,e,t,s,i){var o;let c=s.head-n.from,d=Cn.find(e,c,(o=s.bidiLevel)!==null&&o!==void 0?o:-1,s.assoc),u=e[d],m=u.side(i,t);if(c==m){let y=d+=i?1:-1;if(y<0||y>=e.length)return null;u=e[d=y],c=u.side(!i,t),m=u.side(i,t)}let p=bt(n.text,c,u.forward(i,t));(p<u.from||p>u.to)&&(p=m),By=n.text.slice(Math.min(c,p),Math.max(c,p));let g=d==(i?e.length-1:0)?null:e[d+(i?1:-1)];return g&&p==m&&g.level+(i?0:1)<u.level?X.cursor(g.side(!i,t)+n.from,g.forward(i,t)?1:-1,g.level):X.cursor(p+n.from,u.forward(i,t)?-1:1,u.level)}function WN(n,e,t){for(let s=e;s<t;s++){let i=Dy(n.charCodeAt(s));if(i==1)return Ir;if(i==2||i==4)return Nf}return Ir}const Fy=ye.define(),Iy=ye.define(),zy=ye.define(),$y=ye.define(),Iu=ye.define(),_y=ye.define(),Wy=ye.define(),kf=ye.define(),Sf=ye.define(),Hy=ye.define({combine:n=>n.some(e=>e)}),HN=ye.define({combine:n=>n.some(e=>e)}),Vy=ye.define();class ji{constructor(e,t="nearest",s="nearest",i=5,o=5,c=!1){this.range=e,this.y=t,this.x=s,this.yMargin=i,this.xMargin=o,this.isSnapshot=c}map(e){return e.empty?this:new ji(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ji(X.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const bo=Ke.define({map:(n,e)=>n.map(e)}),Uy=Ke.define();function dn(n,e,t){let s=n.facet($y);s.length?s[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Sn=ye.define({combine:n=>n.length?n[0]:!0});let VN=0;const pi=ye.define({combine(n){return n.filter((e,t)=>{for(let s=0;s<t;s++)if(n[s].plugin==e.plugin)return!1;return!0})}});class ys{constructor(e,t,s,i,o){this.id=e,this.create=t,this.domEventHandlers=s,this.domEventObservers=i,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(pi.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(pi.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:s,eventObservers:i,provide:o,decorations:c}=t||{};return new ys(VN++,e,s,i,d=>{let u=[];return c&&u.push(Tc.of(m=>{let p=m.plugin(d);return p?c(p):Te.none})),o&&u.push(o(d)),u})}static fromClass(e,t){return ys.define((s,i)=>new e(s,i),t)}}class _h{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(s){if(dn(t.state,s,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){dn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(s){dn(e.state,s,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const qy=ye.define(),Cf=ye.define(),Tc=ye.define(),Gy=ye.define(),Mf=ye.define(),sa=ye.define(),Ky=ye.define();function mg(n,e){let t=n.state.facet(Ky);if(!t.length)return t;let s=t.map(o=>o instanceof Function?o(n):o),i=[];return $e.spans(s,e.from,e.to,{point(){},span(o,c,d,u){let m=o-e.from,p=c-e.from,g=i;for(let y=d.length-1;y>=0;y--,u--){let b=d[y].spec.bidiIsolate,v;if(b==null&&(b=WN(e.text,m,p)),u>0&&g.length&&(v=g[g.length-1]).to==m&&v.direction==b)v.to=p,g=v.inner;else{let j={from:m,to:p,direction:b,inner:[]};g.push(j),g=j.inner}}}}),i}const Qy=ye.define();function Jy(n){let e=0,t=0,s=0,i=0;for(let o of n.state.facet(Qy)){let c=o(n);c&&(c.left!=null&&(e=Math.max(e,c.left)),c.right!=null&&(t=Math.max(t,c.right)),c.top!=null&&(s=Math.max(s,c.top)),c.bottom!=null&&(i=Math.max(i,c.bottom)))}return{left:e,right:t,top:s,bottom:i}}const Ml=ye.define();class As{constructor(e,t,s,i){this.fromA=e,this.toA=t,this.fromB=s,this.toB=i}join(e){return new As(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,s=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>s.toA)){if(i.toA<s.fromA)break;s=s.join(i),e.splice(t-1,1)}}return e.splice(t,0,s),e}static extendWithRanges(e,t){if(t.length==0)return e;let s=[];for(let i=0,o=0,c=0;;){let d=i<e.length?e[i].fromB:1e9,u=o<t.length?t[o]:1e9,m=Math.min(d,u);if(m==1e9)break;let p=m+c,g=m,y=p;for(;;)if(o<t.length&&t[o]<=g){let b=t[o+1];o+=2,g=Math.max(g,b);for(let v=i;v<e.length&&e[v].fromB<=g;v++)c=e[v].toA-e[v].toB;y=Math.max(y,b+c)}else if(i<e.length&&e[i].fromB<=g){let b=e[i++];g=Math.max(g,b.toB),y=Math.max(y,b.toA),c=b.toA-b.toB}else break;s.push(new As(p,y,m,g))}return s}}class ic{constructor(e,t,s){this.view=e,this.state=t,this.transactions=s,this.flags=0,this.startState=e.state,this.changes=wt.empty(this.startState.doc.length);for(let o of s)this.changes=this.changes.compose(o.changes);let i=[];this.changes.iterChangedRanges((o,c,d,u)=>i.push(new As(o,c,d,u))),this.changedRanges=i}static create(e,t,s){return new ic(e,t,s)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const UN=[];class xt{constructor(e,t,s=0){this.dom=e,this.length=t,this.flags=s,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return UN}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&SN(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let s=t;for(let i of this.children){if(i==e)return s;s+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let s=hr(this.dom),i=this.length?e>0:t>0;return new Hs(this.parent.dom,s+(i?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Rc)return e;return null}static get(e){return e.cmTile}}class Dc extends xt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,s=null,i,o=(e==null?void 0:e.node)==t?e:null,c=0;for(let d of this.children){if(d.sync(e),c+=d.length+d.breakAfter,i=s?s.nextSibling:t.firstChild,o&&i!=d.dom&&(o.written=!0),d.dom.parentNode==t)for(;i&&i!=d.dom;)i=pg(i);else t.insertBefore(d.dom,i);s=d.dom}for(i=s?s.nextSibling:t.firstChild,o&&i&&(o.written=!0);i;)i=pg(i);this.length=c}}function pg(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Rc extends Dc{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=xt.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],s=this,i=0,o=0;;)if(i==s.children.length){if(!t.length)return;s=s.parent,s.breakAfter&&o++,i=t.pop()}else{let c=s.children[i++];if(c instanceof rr)t.push(i),s=c,i=0;else{let d=o+c.length,u=e(c,o);if(u!==void 0)return u;o=d+c.breakAfter}}}resolveBlock(e,t){let s,i=-1,o,c=-1;if(this.blockTiles((d,u)=>{let m=u+d.length;if(e>=u&&e<=m){if(d.isWidget()&&t>=-1&&t<=1){if(d.flags&32)return!0;d.flags&16&&(s=void 0)}(u<e||e==m&&(t<-1?d.length:d.covers(1)))&&(!s||!d.isWidget()&&s.isWidget())&&(s=d,i=e-u),(m>e||e==u&&(t>1?d.length:d.covers(-1)))&&(!o||!d.isWidget()&&o.isWidget())&&(o=d,c=e-u)}}),!s&&!o)throw new Error("No tile at position "+e);return s&&t<0||!o?{tile:s,offset:i}:{tile:o,offset:c}}}class rr extends Dc{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let s=new rr(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class Ai extends Dc{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,s){let i=new Ai(t||document.createElement("div"),e);return(!t||!s)&&(i.flags|=4),i}get domAttrs(){return this.attrs}resolveInline(e,t,s){let i=null,o=-1,c=null,d=-1;function u(p,g){for(let y=0,b=0;y<p.children.length&&b<=g;y++){let v=p.children[y],j=b+v.length;j>=g&&(v.isComposite()?u(v,g-b):(!c||c.isHidden&&(t>0||s&&GN(c,v)))&&(j>g||v.flags&32)?(c=v,d=g-b):(b<g||v.flags&16&&!v.isHidden)&&(i=v,o=g-b)),b=j}}u(this,e);let m=(t<0?i:c)||i||c;return m?{tile:m,offset:m==i?o:d}:null}coordsIn(e,t){let s=this.resolveInline(e,t,!0);return s?s.tile.coordsIn(Math.max(0,s.offset),t):qN(this)}domIn(e,t){let s=this.resolveInline(e,t);if(s){let{tile:i,offset:o}=s;if(this.dom.contains(i.dom))return i.isText()?new Hs(i.dom,Math.min(i.dom.nodeValue.length,o)):i.domPosFor(o,i.flags&16?1:i.flags&32?-1:t);let c=s.tile.parent,d=!1;for(let u of c.children){if(d)return new Hs(u.dom,0);u==s.tile&&(d=!0)}}return new Hs(this.dom,0)}}function qN(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=_o(e);return t[t.length-1]||null}function GN(n,e){let t=n.coordsIn(0,1),s=e.coordsIn(0,1);return t&&s&&s.top<t.bottom}class rs extends Dc{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let s=new rs(t||document.createElement(e.tagName),e);return t||(s.flags|=4),s}}class Or extends xt{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let s=this.dom.nodeValue.length;e>s&&(e=s);let i=e,o=e,c=0;e==0&&t<0||e==s&&t>=0?me.chrome||me.gecko||(e?(i--,c=1):o<s&&(o++,c=-1)):t<0?i--:o<s&&o++;let d=Ul(this.dom,i,o).getClientRects();if(!d.length)return null;let u=d[(c?c<0:t>=0)?0:d.length-1];return me.safari&&!c&&u.width==0&&(u=Array.prototype.find.call(d,m=>m.width)||u),c?rc(u,c<0):u||null}static of(e,t){let s=new Or(t||document.createTextNode(e),e);return t||(s.flags|=2),s}}class zr extends xt{constructor(e,t,s,i){super(e,t,i),this.widget=s}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,s){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;if(s)return rc(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let o=this.dom.getClientRects(),c=null;if(!o.length)return null;let d=this.flags&16?!0:this.flags&32?!1:e>0;for(let u=d?o.length-1:0;c=o[u],!(e>0?u==0:u==o.length-1||c.top<c.bottom);u+=d?-1:1);return rc(c,!d)}}get overrideDOMText(){if(!this.length)return Ve.empty;let{root:e}=this;if(!e)return Ve.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,s,i,o){return o||(o=e.toDOM(t),e.editable||(o.contentEditable="false")),new zr(o,s,e,i)}}class lc extends xt{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Ve.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class KN{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,s){let{tile:i,index:o,beforeBreak:c,parents:d}=this;for(;e||t>0;)if(i.isComposite())if(c){if(!e)break;s&&s.break(),e--,c=!1}else if(o==i.children.length){if(!e&&!d.length)break;s&&s.leave(i),c=!!i.breakAfter,{tile:i,index:o}=d.pop(),o++}else{let u=i.children[o],m=u.breakAfter;(t>0?u.length<=e:u.length<e)&&(!s||s.skip(u,0,u.length)!==!1||!u.isComposite)?(c=!!m,o++,e-=u.length):(d.push({tile:i,index:o}),i=u,o=0,s&&u.isComposite()&&s.enter(u))}else if(o==i.length)c=!!i.breakAfter,{tile:i,index:o}=d.pop(),o++;else if(e){let u=Math.min(e,i.length-o);s&&s.skip(i,o,o+u),e-=u,o+=u}else break;return this.tile=i,this.index=o,this.beforeBreak=c,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class QN{constructor(e,t,s,i){this.from=e,this.to=t,this.wrapper=s,this.rank=i}}class JN{constructor(e,t,s){this.cache=e,this.root=t,this.blockWrappers=s,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,s,i){var o;this.flushBuffer();let c=this.ensureMarks(t,s),d=c.lastChild;if(d&&d.isText()&&!(d.flags&8)&&d.length+e.length<512){this.cache.reused.set(d,2);let u=c.children[c.children.length-1]=new Or(d.dom,d.text+e);u.parent=c}else c.append(i||Or.of(e,(o=this.cache.find(Or))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let s=this.curLine;s.dom!=t.line.dom&&(s.setDOM(this.cache.reused.has(t.line)?Wh(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let i=s;for(let d=t.marks.length-1;d>=0;d--){let u=t.marks[d],m=i.lastChild;if(m instanceof rs&&m.mark.eq(u.mark))m.dom!=u.dom&&m.setDOM(Wh(u.dom)),i=m;else{if(this.cache.reused.get(u)){let g=xt.get(u.dom);g&&g.setDOM(Wh(u.dom))}let p=rs.of(u.mark,u.dom);i.append(p),i=p}this.cache.reused.set(u,2)}let o=xt.get(e.text);o&&this.cache.reused.set(o,2);let c=new Or(e.text,e.text.nodeValue);c.flags|=8,i.append(c)}addInlineWidget(e,t,s){let i=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);i||this.flushBuffer();let o=this.ensureMarks(t,s);!i&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,s){this.flushBuffer(),this.ensureMarks(t,s).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var s;e||(e=Yy);let i=Ai.start(e,t||((s=this.cache.find(Ai))===null||s===void 0?void 0:s.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=i)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var s;let i=this.curLine;for(let o=e.length-1;o>=0;o--){let c=e[o],d;if(t>0&&(d=i.lastChild)&&d instanceof rs&&d.mark.eq(c))i=d,t--;else{let u=rs.of(c,(s=this.cache.find(rs,m=>m.mark.eq(c)))===null||s===void 0?void 0:s.dom);i.append(u),i=u,t=0}}return i}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!xg(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(me.ios&&xg(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Hh,0,32)||new zr(Hh.toDOM(),0,Hh,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new QN(e.from,e.to,e.value,e.rank),s=this.wrappers.length;for(;s>0&&(this.wrappers[s-1].rank-t.rank||this.wrappers[s-1].to-t.to)<0;)s--;this.wrappers.splice(s,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let s of this.wrappers){let i=t.lastChild;if(s.from<this.pos&&i instanceof rr&&i.wrapper.eq(s.wrapper))t=i;else{let o=rr.of(s.wrapper,(e=this.cache.find(rr,c=>c.wrapper.eq(s.wrapper)))===null||e===void 0?void 0:e.dom);t.append(o),t=o}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),s=this.cache.find(lc,void 0,1);return s&&(s.flags=t),s||new lc(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class YN{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:c}=this.cursor.next(this.skipCount);if(this.skipCount=0,c)throw new Error("Ran out of text content when drawing inline views");this.text=i;let d=this.textOff=Math.min(e,i.length);return o?null:i.slice(0,d)}let t=Math.min(this.text.length,this.textOff+e),s=this.text.slice(this.textOff,t);return this.textOff=t,s}}const ac=[zr,Ai,Or,rs,lc,rr,Rc];for(let n=0;n<ac.length;n++)ac[n].bucket=n;class XN{constructor(e){this.view=e,this.buckets=ac.map(()=>[]),this.index=ac.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,s=this.buckets[t];s.length<6?s.push(e):s[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,s=2){let i=e.bucket,o=this.buckets[i],c=this.index[i];for(let d=o.length-1;d>=0;d--){let u=(d+c)%o.length,m=o[u];if((!t||t(m))&&!this.reused.has(m))return o.splice(u,1),u<c&&this.index[i]--,this.reused.set(m,s),m}return null}findWidget(e,t,s){let i=this.buckets[0];if(i.length)for(let o=0,c=0;;o++){if(o==i.length){if(c)return null;c=1,o=0}let d=i[o];if(!this.reused.has(d)&&(c==0?d.widget.compare(e):d.widget.constructor==e.constructor&&e.updateDOM(d.dom,this.view)))return i.splice(o,1),o<this.index[0]&&this.index[0]--,d.widget==e&&d.length==t&&(d.flags&497)==s?(this.reused.set(d,1),d):(this.reused.set(d,2),new zr(d.dom,t,e,d.flags&-498|s))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class ZN{constructor(e,t,s,i,o){this.view=e,this.decorations=i,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new XN(e),this.text=new YN(e.state.doc),this.builder=new JN(this.cache,new Rc(e,e.contentDOM),$e.iter(s)),this.cache.reused.set(t,2),this.old=new KN(t),this.reuseWalker={skip:(c,d,u)=>{if(this.cache.add(c),c.isComposite())return!1},enter:c=>this.cache.add(c),leave:()=>{},break:()=>{}}}run(e,t){let s=t&&this.getCompositionContext(t.text);for(let i=0,o=0,c=0;;){let d=c<e.length?e[c++]:null,u=d?d.fromA:this.old.root.length;if(u>i){let m=u-i;this.preserve(m,!c,!d),i=u,o+=m}if(!d)break;t&&d.fromA<=t.range.fromA&&d.toA>=t.range.toA?(this.forward(d.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(o,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,s),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,d.toA),this.emit(t.range.toB,d.toB)):(this.forward(d.fromA,d.toA),this.emit(o,d.toB)),o=d.toB,i=d.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,s){let i=s2(this.old),o=this.openMarks;this.old.advance(e,s?1:-1,{skip:(c,d,u)=>{if(c.isWidget())if(this.openWidget)this.builder.continueWidget(u-d);else{let m=u>0||d<c.length?zr.of(c.widget,this.view,u-d,c.flags&496,this.cache.maybeReuse(c)):this.cache.reuse(c);m.flags&256?(m.flags&=-2,this.builder.addBlockWidget(m)):(this.builder.ensureLine(null),this.builder.addInlineWidget(m,i,o),o=i.length)}else if(c.isText())this.builder.ensureLine(null),!d&&u==c.length?this.builder.addText(c.text,i,o,this.cache.reuse(c)):(this.cache.add(c),this.builder.addText(c.text.slice(d,u),i,o)),o=i.length;else if(c.isLine())c.flags&=-2,this.cache.reused.set(c,1),this.builder.addLine(c);else if(c instanceof lc)this.cache.add(c);else if(c instanceof rs)this.builder.ensureLine(null),this.builder.addMark(c,i,o),this.cache.reused.set(c,1),o=i.length;else return!1;this.openWidget=!1},enter:c=>{c.isLine()?this.builder.addLineStart(c.attrs,this.cache.maybeReuse(c)):(this.cache.add(c),c instanceof rs&&i.unshift(c.mark)),this.openWidget=!1},leave:c=>{c.isLine()?i.length&&(i.length=o=0):c instanceof rs&&(i.shift(),o=Math.min(o,i.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let s=null,i=this.builder,o=0,c=$e.spans(this.decorations,e,t,{point:(d,u,m,p,g,y)=>{if(m instanceof Fr){if(this.disallowBlockEffectsFor[y]){if(m.block)throw new RangeError("Block decorations may not be specified via plugins");if(u>this.view.state.doc.lineAt(d).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,g>p.length)i.continueWidget(u-d);else{let b=m.widget||(m.block?Ei.block:Ei.inline),v=e2(m),j=this.cache.findWidget(b,u-d,v)||zr.of(b,this.view,u-d,v);m.block?(m.startSide>0&&i.addLineStartIfNotCovered(s),i.addBlockWidget(j)):(i.ensureLine(s),i.addInlineWidget(j,p,g))}s=null}else s=t2(s,m);u>d&&this.text.skip(u-d)},span:(d,u,m,p)=>{for(let g=d;g<u;){let y=this.text.next(Math.min(512,u-g));y==null?(i.addLineStartIfNotCovered(s),i.addBreak(),g++):(i.ensureLine(s),i.addText(y,m,g==d?p:m.length),g+=y.length),s=null}}});i.addLineStartIfNotCovered(s),this.openWidget=c>o,this.openMarks=c}forward(e,t,s=1){t-e<=10?this.old.advance(t-e,s,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,s,this.reuseWalker))}getCompositionContext(e){let t=[],s=null;for(let i=e.parentNode;;i=i.parentNode){let o=xt.get(i);if(i==this.view.contentDOM)break;o instanceof rs?t.push(o):o!=null&&o.isLine()?s=o:i.nodeName=="DIV"&&!s&&i!=this.view.contentDOM?s=new Ai(i,Yy):t.push(rs.of(new ea({tagName:i.nodeName.toLowerCase(),attributes:CN(i)}),i))}return{line:s,marks:t}}}function xg(n,e){let t=s=>{for(let i of s.children)if((e?i.isText():i.length)||t(i))return!0;return!1};return t(n)}function e2(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const Yy={class:"cm-line"};function t2(n,e){let t=e.spec.attributes,s=e.spec.class;return!t&&!s||(n||(n={class:"cm-line"}),t&&vf(t,n),s&&(n.class+=" "+s)),n}function s2(n){let e=[];for(let t=n.parents.length;t>1;t--){let s=t==n.parents.length?n.tile:n.parents[t].tile;s instanceof rs&&e.push(s.mark)}return e}function Wh(n){let e=xt.get(n);return e&&e.setDOM(n.cloneNode()),n}class Ei extends Pc{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ei.inline=new Ei("span");Ei.block=new Ei("div");const Hh=new class extends Pc{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class gg{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Te.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Rc(e,e.contentDOM),this.updateInner([new As(0,0,0,e.state.doc.length)],null)}update(e){var t;let s=e.changedRanges;this.minWidth>0&&s.length&&(s.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!h2(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let o=i>-1?r2(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;s=new As(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(s.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(me.ie||me.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let c=this.decorations,d=this.blockWrappers;this.updateDeco();let u=a2(c,this.decorations,e.changes);u.length&&(s=As.extendWithRanges(s,u));let m=c2(d,this.blockWrappers,e.changes);return m.length&&(s=As.extendWithRanges(s,m)),o&&!s.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(s=o.range.addToSet(s.slice())),this.tile.flags&2&&s.length==0?!1:(this.updateInner(s,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:s}=this.view;s.ignore(()=>{if(t||e.length){let c=this.tile,d=new ZN(this.view,c,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=d.run(e,t),zu(c,d.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=me.chrome||me.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||s.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof Vh&&i.push(o.dom);s.updateGaps(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let s of t.effects)s.is(Uy)&&(this.editContextFormatting=s.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:s}=this.tile,i=this.view.root.activeElement,o=i==s,c=!o&&!(this.view.state.facet(Sn)||s.tabIndex>-1)&&Ol(s,this.view.observer.selectionRange)&&!(i&&s.contains(i));if(!(o||t||c))return;let d=this.forceSelection;this.forceSelection=!1;let u=this.view.state.selection.main,m,p;if(u.empty?p=m=this.inlineDOMNearPos(u.anchor,u.assoc||1):(p=this.inlineDOMNearPos(u.head,u.head==u.from?1:-1),m=this.inlineDOMNearPos(u.anchor,u.anchor==u.from?1:-1)),me.gecko&&u.empty&&!this.hasComposition&&n2(m)){let y=document.createTextNode("");this.view.observer.ignore(()=>m.node.insertBefore(y,m.node.childNodes[m.offset]||null)),m=p=new Hs(y,0),d=!0}let g=this.view.observer.selectionRange;(d||!g.focusNode||(!Bl(m.node,m.offset,g.anchorNode,g.anchorOffset)||!Bl(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,u))&&(this.view.observer.ignore(()=>{me.android&&me.chrome&&s.contains(g.focusNode)&&d2(g.focusNode,s)&&(s.blur(),s.focus({preventScroll:!0}));let y=Mi(this.view.root);if(y)if(u.empty){if(me.gecko){let b=i2(m.node,m.offset);if(b&&b!=3){let v=(b==1?Ly:Py)(m.node,m.offset);v&&(m=new Hs(v.node,v.offset))}}y.collapse(m.node,m.offset),u.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=u.bidiLevel)}else if(y.extend){y.collapse(m.node,m.offset);try{y.extend(p.node,p.offset)}catch{}}else{let b=document.createRange();u.anchor>u.head&&([m,p]=[p,m]),b.setEnd(p.node,p.offset),b.setStart(m.node,m.offset),y.removeAllRanges(),y.addRange(b)}c&&this.view.root.activeElement==s&&(s.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(m,p)),this.impreciseAnchor=m.precise?null:new Hs(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new Hs(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Bl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,s=Mi(e.root),{anchorNode:i,anchorOffset:o}=e.observer.selectionRange;if(!s||!t.empty||!t.assoc||!s.modify)return;let c=this.lineAt(t.head,t.assoc);if(!c)return;let d=c.posAtStart;if(t.head==d||t.head==d+c.length)return;let u=this.coordsAt(t.head,-1),m=this.coordsAt(t.head,1);if(!u||!m||u.bottom>m.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);s.collapse(p.node,p.offset),s.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=t.from&&s.collapse(i,o)}posFromDOM(e,t){let s=this.tile.nearest(e);if(!s)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let i=s.posAtStart;if(s.isComposite()){let o;if(e==s.dom)o=s.dom.childNodes[t];else{let c=Ln(e)==0?0:t==0?-1:1;for(;;){let d=e.parentNode;if(d==s.dom)break;c==0&&d.firstChild!=d.lastChild&&(e==d.firstChild?c=-1:c=1),e=d}c<0?o=e:o=e.nextSibling}if(o==s.dom.firstChild)return i;for(;o&&!xt.get(o);)o=o.nextSibling;if(!o)return i+s.length;for(let c=0,d=i;;c++){let u=s.children[c];if(u.dom==o)return d;d+=u.length+u.breakAfter}}else return s.isText()?e==s.dom?i+t:i+(t?s.length:0):i}domAtPos(e,t){let{tile:s,offset:i}=this.tile.resolveBlock(e,t);return s.isWidget()?s.domPosFor(e,t):s.domIn(i,t)}inlineDOMNearPos(e,t){let s,i=-1,o=!1,c,d=-1,u=!1;return this.tile.blockTiles((m,p)=>{if(m.isWidget()){if(m.flags&32&&p>=e)return!0;m.flags&16&&(o=!0)}else{let g=p+m.length;if(p<=e&&(s=m,i=e-p,o=g<e),g>=e&&!c&&(c=m,d=e-p,u=p>e),p>e&&c)return!0}}),!s&&!c?this.domAtPos(e,t):(o&&c?s=null:u&&s&&(c=null),s&&t<0||!c?s.domIn(i,t):c.domIn(d,t))}coordsAt(e,t){let{tile:s,offset:i}=this.tile.resolveBlock(e,t);return s.isWidget()?s.widget instanceof Vh?null:s.coordsInWidget(i,t,!0):s.coordsIn(i,t)}lineAt(e,t){let{tile:s}=this.tile.resolveBlock(e,t);return s.isLine()?s:null}coordsForChar(e){let{tile:t,offset:s}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function i(o,c){if(o.isComposite())for(let d of o.children){if(d.length>=c){let u=i(d,c);if(u)return u}if(c-=d.length,c<0)break}else if(o.isText()&&c<o.length){let d=bt(o.text,c);if(d==c)return null;let u=Ul(o.dom,c,d).getClientRects();for(let m=0;m<u.length;m++){let p=u[m];if(m==u.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return i(t,s)}measureVisibleLineHeights(e){let t=[],{from:s,to:i}=e,o=this.view.contentDOM.clientWidth,c=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,d=-1,u=this.view.textDirection==ut.LTR,m=0,p=(g,y,b)=>{for(let v=0;v<g.children.length&&!(y>i);v++){let j=g.children[v],S=y+j.length,k=j.dom.getBoundingClientRect(),{height:M}=k;if(b&&!v&&(m+=k.top-b.top),j instanceof rr)S>s&&p(j,y,k);else if(y>=s&&(m>0&&t.push(-m),t.push(M+m),m=0,c)){let R=j.dom.lastChild,E=R?_o(R):[];if(E.length){let B=E[E.length-1],I=u?B.right-k.left:k.right-B.left;I>d&&(d=I,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=S)}}b&&v==g.children.length-1&&(m+=b.bottom-k.bottom),y=S+j.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?ut.RTL:ut.LTR}measureTextSize(){let e=this.tile.blockTiles(c=>{if(c.isLine()&&c.children.length&&c.length<=20){let d=0,u;for(let m of c.children){if(!m.isText()||/[^ -~]/.test(m.text))return;let p=_o(m.dom);if(p.length!=1)return;d+=p[0].width,u=p[0].height}if(d)return{lineHeight:c.dom.getBoundingClientRect().height,charWidth:d/c.length,textHeight:u}}});if(e)return e;let t=document.createElement("div"),s,i,o;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let c=_o(t.firstChild)[0];s=t.getBoundingClientRect().height,i=c&&c.width?c.width/27:7,o=c&&c.height?c.height:s,t.remove()}),{lineHeight:s,charWidth:i,textHeight:o}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let s=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],c=o?o.from-1:this.view.state.doc.length;if(c>s){let d=(t.lineBlockAt(c).bottom-t.lineBlockAt(s).top)/this.view.scaleY;e.push(Te.replace({widget:new Vh(d),block:!0,inclusive:!0,isBlockGap:!0}).range(s,c))}if(!o)break;s=o.to+1}return Te.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Tc).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),s=!1,i=this.view.state.facet(Mf).map((o,c)=>{let d=typeof o=="function";return d&&(s=!0),d?o(this.view):o});for(i.length&&(this.dynamicDecorationMap[e++]=s,t.push($e.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(Gy).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let m=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=m.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let m of this.view.state.facet(Vy))try{if(m(this.view,e.range,e))return!0}catch(p){dn(this.view.state,p,"scroll handler")}let{range:t}=e,s=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!s)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(s={left:Math.min(s.left,i.left),top:Math.min(s.top,i.top),right:Math.max(s.right,i.right),bottom:Math.max(s.bottom,i.bottom)});let o=Jy(this.view),c={left:s.left-o.left,top:s.top-o.top,right:s.right+o.right,bottom:s.bottom+o.bottom},{offsetWidth:d,offsetHeight:u}=this.view.scrollDOM;EN(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,d),-d),Math.max(Math.min(e.yMargin,u),-u),this.view.textDirection==ut.LTR)}lineHasWidget(e){let t=s=>s.isWidget()||s.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){zu(this.tile)}}function zu(n,e){let t=e==null?void 0:e.get(n);if(t!=1){t==null&&n.destroy();for(let s of n.children)zu(s,e)}}function n2(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function Xy(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let s=Ly(t.focusNode,t.focusOffset),i=Py(t.focusNode,t.focusOffset),o=s||i;if(i&&s&&i.node!=s.node){let d=xt.get(i.node);if(!d||d.isText()&&d.text!=i.node.nodeValue)o=i;else if(n.docView.lastCompositionAfterCursor){let u=xt.get(s.node);!u||u.isText()&&u.text!=s.node.nodeValue||(o=i)}}if(n.docView.lastCompositionAfterCursor=o!=s,!o)return null;let c=e-o.offset;return{from:c,to:c+o.node.nodeValue.length,node:o.node}}function r2(n,e,t){let s=Xy(n,t);if(!s)return null;let{node:i,from:o,to:c}=s,d=i.nodeValue;if(/[\n\r]/.test(d)||n.state.doc.sliceString(s.from,s.to)!=d)return null;let u=e.invertedDesc;return{range:new As(u.mapPos(o),u.mapPos(c),o,c),text:i}}function i2(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let l2=class{constructor(){this.changes=[]}compareRange(e,t){bi(e,t,this.changes)}comparePoint(e,t){bi(e,t,this.changes)}boundChange(e){bi(e,e,this.changes)}};function a2(n,e,t){let s=new l2;return $e.compare(n,e,t,s),s.changes}class o2{constructor(){this.changes=[]}compareRange(e,t){bi(e,t,this.changes)}comparePoint(){}boundChange(e){bi(e,e,this.changes)}}function c2(n,e,t){let s=new o2;return $e.compare(n,e,t,s),s.changes}function d2(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function h2(n,e){let t=!1;return e&&n.iterChangedRanges((s,i)=>{s<e.to&&i>e.from&&(t=!0)}),t}class Vh extends Pc{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function u2(n,e,t=1){let s=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return X.cursor(e);o==0?t=1:o==i.length&&(t=-1);let c=o,d=o;t<0?c=bt(i.text,o,!1):d=bt(i.text,o);let u=s(i.text.slice(c,d));for(;c>0;){let m=bt(i.text,c,!1);if(s(i.text.slice(m,c))!=u)break;c=m}for(;d<i.length;){let m=bt(i.text,d);if(s(i.text.slice(d,m))!=u)break;d=m}return X.range(c+i.from,d+i.from)}function f2(n,e,t,s,i){let o=Math.round((s-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let d=n.viewState.heightOracle.textHeight,u=Math.floor((i-t.top-(n.defaultLineHeight-d)*.5)/d);o+=u*n.viewState.heightOracle.lineLength}let c=n.state.sliceDoc(t.from,t.to);return t.from+wN(c,o,n.state.tabSize)}function m2(n,e,t){let s=n.lineBlockAt(e);if(Array.isArray(s.type)){let i;for(let o of s.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!i||o.type==ls.Text&&(i.type!=o.type||(t<0?o.from<e:o.to>e)))&&(i=o)}}return i||s}return s}function p2(n,e,t,s){let i=m2(n,e.head,e.assoc||-1),o=!s||i.type!=ls.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let c=n.dom.getBoundingClientRect(),d=n.textDirectionAt(i.from),u=n.posAtCoords({x:t==(d==ut.LTR)?c.right-1:c.left+1,y:(o.top+o.bottom)/2});if(u!=null)return X.cursor(u,t?-1:1)}return X.cursor(t?i.to:i.from,t?-1:1)}function yg(n,e,t,s){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),c=n.textDirectionAt(i.from);for(let d=e,u=null;;){let m=_N(i,o,c,d,t),p=By;if(!m){if(i.number==(t?n.state.doc.lines:1))return d;p=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),m=n.visualLineSide(i,!t)}if(u){if(!u(p))return d}else{if(!s)return m;u=s(p)}d=m}}function x2(n,e,t){let s=n.state.charCategorizer(e),i=s(t);return o=>{let c=s(o);return i==ht.Space&&(i=c),i==c}}function g2(n,e,t,s){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return X.cursor(i,e.assoc);let c=e.goalColumn,d,u=n.contentDOM.getBoundingClientRect(),m=n.coordsAtPos(i,e.assoc||-1),p=n.documentTop;if(m)c==null&&(c=m.left-u.left),d=o<0?m.top:m.bottom;else{let v=n.viewState.lineBlockAt(i);c==null&&(c=Math.min(u.right-u.left,n.defaultCharacterWidth*(i-v.from))),d=(o<0?v.top:v.bottom)+p}let g=u.left+c,y=s??n.viewState.heightOracle.textHeight>>1,b=$u(n,{x:g,y:d+y*o},!1,o);return X.cursor(b.pos,b.assoc,void 0,c)}function Fl(n,e,t){for(;;){let s=0;for(let i of n)i.between(e-1,e+1,(o,c,d)=>{if(e>o&&e<c){let u=s||t||(e-o<c-e?-1:1);e=u<0?o:c,s=u}});if(!s)return e}}function Zy(n,e){let t=null;for(let s=0;s<e.ranges.length;s++){let i=e.ranges[s],o=null;if(i.empty){let c=Fl(n,i.from,0);c!=i.from&&(o=X.cursor(c,-1))}else{let c=Fl(n,i.from,-1),d=Fl(n,i.to,1);(c!=i.from||d!=i.to)&&(o=X.range(i.from==i.anchor?c:d,i.from==i.head?c:d))}o&&(t||(t=e.ranges.slice()),t[s]=o)}return t?X.create(t,e.mainIndex):e}function Uh(n,e,t){let s=Fl(n.state.facet(sa).map(i=>i(n)),t.from,e.head>t.from?-1:1);return s==t.from?t:X.cursor(s,s<t.from?1:-1)}class cn{constructor(e,t){this.pos=e,this.assoc=t}}function $u(n,e,t,s){let i=n.contentDOM.getBoundingClientRect(),o=i.top+n.viewState.paddingTop,{x:c,y:d}=e,u=d-o,m;for(;;){if(u<0)return new cn(0,1);if(u>n.viewState.docHeight)return new cn(n.state.doc.length,-1);if(m=n.elementAtHeight(u),s==null)break;if(m.type==ls.Text){if(s<0?m.to<n.viewport.from:m.from>n.viewport.to)break;let y=n.docView.coordsAt(s<0?m.from:m.to,s);if(y&&(s<0?y.top<=u+o:y.bottom>=u+o))break}let g=n.viewState.heightOracle.textHeight/2;u=s>0?m.bottom+g:m.top-g}if(n.viewport.from>=m.to||n.viewport.to<=m.from){if(t)return null;if(m.type==ls.Text){let g=f2(n,i,m,c,d);return new cn(g,g==m.from?1:-1)}}if(m.type!=ls.Text)return u<(m.top+m.bottom)/2?new cn(m.from,1):new cn(m.to,-1);let p=n.docView.lineAt(m.from,2);return(!p||p.length!=m.length)&&(p=n.docView.lineAt(m.from,-2)),e1(n,p,m.from,c,d)}function e1(n,e,t,s,i){let o=-1,c=null,d=1e9,u=1e9,m=i,p=i,g=(y,b)=>{for(let v=0;v<y.length;v++){let j=y[v];if(j.top==j.bottom)continue;let S=j.left>s?j.left-s:j.right<s?s-j.right:0,k=j.top>i?j.top-i:j.bottom<i?i-j.bottom:0;j.top<=p&&j.bottom>=m&&(m=Math.min(j.top,m),p=Math.max(j.bottom,p),k=0),(o<0||(k-u||S-d)<0)&&(o>=0&&u&&d<S&&c.top<=p-2&&c.bottom>=m+2?u=0:(o=b,d=S,u=k,c=j))}};if(e.isText()){for(let b=0;b<e.length;){let v=bt(e.text,b);if(g(Ul(e.dom,b,v).getClientRects(),b),!d&&!u)break;b=v}return s>(c.left+c.right)/2==(wg(n,o+t)==ut.LTR)?new cn(t+bt(e.text,o),-1):new cn(t+o,1)}else{if(!e.length)return new cn(t,1);for(let j=0;j<e.children.length;j++){let S=e.children[j];if(S.flags&48)continue;let k=(S.dom.nodeType==1?S.dom:Ul(S.dom,0,S.length)).getClientRects();if(g(k,j),!d&&!u)break}let y=e.children[o],b=e.posBefore(y,t);return y.isComposite()||y.isText()?e1(n,y,b,Math.max(c.left,Math.min(c.right,s)),i):s>(c.left+c.right)/2==(wg(n,o+t)==ut.LTR)?new cn(b+y.length,-1):new cn(b,1)}}function wg(n,e){let t=n.state.doc.lineAt(e);return n.bidiSpans(t)[Cn.find(n.bidiSpans(t),e-t.from,-1,1)].dir}const Al="";class y2{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(He.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Al}readRange(e,t){if(!e)return this;let s=e.parentNode;for(let i=e;;){this.findPointBefore(s,i);let o=this.text.length;this.readNode(i);let c=xt.get(i),d=i.nextSibling;if(d==t){c!=null&&c.breakAfter&&!d&&s!=this.view.contentDOM&&this.lineBreak();break}let u=xt.get(d);(c&&u?c.breakAfter:(c?c.breakAfter:nc(i))||nc(d)&&(i.nodeName!="BR"||c!=null&&c.isWidget())&&this.text.length>o)&&!b2(d,t)&&this.lineBreak(),i=d}return this.findPointBefore(s,t),this}readTextNode(e){let t=e.nodeValue;for(let s of this.points)s.node==e&&(s.pos=this.text.length+Math.min(s.offset,t.length));for(let s=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,c=1,d;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,s),c=this.lineSeparator.length):(d=i.exec(t))&&(o=d.index,c=d[0].length),this.append(t.slice(s,o<0?t.length:o)),o<0)break;if(this.lineBreak(),c>1)for(let u of this.points)u.node==e&&u.pos>this.text.length&&(u.pos-=c-1);s=o+c}}readNode(e){let t=xt.get(e),s=t&&t.overrideDOMText;if(s!=null){this.findPointInside(e,s.length);for(let i=s.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let s of this.points)s.node==e&&e.childNodes[s.offset]==t&&(s.pos=this.text.length)}findPointInside(e,t){for(let s of this.points)(e.nodeType==3?s.node==e:e.contains(s.node))&&(s.pos=this.text.length+(w2(e,s.node,s.offset)?t:0))}}function w2(n,e,t){for(;;){if(!e||t<Ln(e))return!1;if(e==n)return!0;t=hr(e)+1,e=e.parentNode}}function b2(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let s=xt.get(n);if(!(s!=null&&s.isWidget()))return!1;s&&(t||(t=[])).push(s)}if(t)for(let s of t){let i=s.overrideDOMText;if(i!=null&&i.length)return!1}return!0}class bg{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class v2{constructor(e,t,s,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:o,impreciseAnchor:c}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=t1(e.docView.tile,t,s,0))){let d=o||c?[]:N2(e),u=new y2(d,e);u.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=u.text,this.newSel=k2(d,this.bounds.from)}else{let d=e.observer.selectionRange,u=o&&o.node==d.focusNode&&o.offset==d.focusOffset||!Ru(e.contentDOM,d.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(d.focusNode,d.focusOffset),m=c&&c.node==d.anchorNode&&c.offset==d.anchorOffset||!Ru(e.contentDOM,d.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(d.anchorNode,d.anchorOffset),p=e.viewport;if((me.ios||me.chrome)&&e.state.selection.main.empty&&u!=m&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(u,m),y=Math.max(u,m),b=p.from-g,v=p.to-y;(b==0||b==1||g==0)&&(v==0||v==-1||y==e.state.doc.length)&&(u=0,m=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(X.range(m,u)):this.newSel=X.single(m,u)}}}function t1(n,e,t,s){if(n.isComposite()){let i=-1,o=-1,c=-1,d=-1;for(let u=0,m=s,p=s;u<n.children.length;u++){let g=n.children[u],y=m+g.length;if(m<e&&y>t)return t1(g,e,t,m);if(y>=e&&i==-1&&(i=u,o=m),m>t&&g.dom.parentNode==n.dom){c=u,d=p;break}p=y,m=y+g.breakAfter}return{from:o,to:d<0?s+n.length:d,startDOM:(i?n.children[i-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:c<n.children.length&&c>=0?n.children[c].dom:null}}else return n.isText()?{from:s,to:s+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function s1(n,e){let t,{newSel:s}=e,i=n.state.selection.main,o=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:c,to:d}=e.bounds,u=i.from,m=null;(o===8||me.android&&e.text.length<d-c)&&(u=i.to,m="end");let p=n1(n.state.doc.sliceString(c,d,Al),e.text,u-c,m);p&&(me.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Al+Al&&p.toB--,t={from:c+p.from,to:c+p.toA,insert:Ve.of(e.text.slice(p.from,p.toB).split(Al))})}else s&&(!n.hasFocus&&n.state.facet(Sn)||oc(s,i))&&(s=null);if(!t&&!s)return!1;if(!t&&e.typeOver&&!i.empty&&s&&s.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(me.mac||me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(s&&t.insert.length==2&&(s=X.single(s.main.anchor-1,s.main.head-1)),t={from:t.from,to:t.to,insert:Ve.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:n.state.doc.lineAt(i.from).to<i.to&&n.docView.lineHasWidget(i.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:i.from,to:i.to,insert:n.state.toText(n.inputState.insertingText)}:me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(s&&(s=X.single(s.main.anchor-1,s.main.head-1)),t={from:i.from,to:i.to,insert:Ve.of([" "])}),t)return Af(n,t,s,o);if(s&&!oc(s,i)){let c=!1,d="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(c=!0),d=n.inputState.lastSelectionOrigin,d=="select.pointer"&&(s=Zy(n.state.facet(sa).map(u=>u(n)),s))),n.dispatch({selection:s,scrollIntoView:c,userEvent:d}),!0}else return!1}function Af(n,e,t,s=-1){if(me.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(me.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&vi(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||s==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&vi(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&vi(n.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let c,d=()=>c||(c=j2(n,e,t));return n.state.facet(_y).some(u=>u(n,e.from,e.to,o,d))||n.dispatch(d()),!0}function j2(n,e,t){let s,i=n.state,o=i.selection.main,c=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let u=e.from<o.from?-1:1,m=u<0?o.from:o.to,p=Fl(i.facet(sa).map(g=>g(n)),m,u);e.from==p&&(c=p)}if(c>-1)s={changes:e,selection:X.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let u=o.from<e.from?i.sliceDoc(o.from,e.from):"",m=o.to>e.to?i.sliceDoc(e.to,o.to):"";s=i.replaceSelection(n.state.toText(u+e.insert.sliceString(0,void 0,n.state.lineBreak)+m))}else{let u=i.changes(e),m=t&&t.main.to<=u.newLength?t.main:void 0;if(i.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=n.state.sliceDoc(e.from,e.to),g,y=t&&Xy(n,t.main.head);if(y){let v=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-v}}else g=n.state.doc.lineAt(o.head);let b=o.to-e.to;s=i.changeByRange(v=>{if(v.from==o.from&&v.to==o.to)return{changes:u,range:m||v.map(u)};let j=v.to-b,S=j-p.length;if(n.state.sliceDoc(S,j)!=p||j>=g.from&&S<=g.to)return{range:v};let k=i.changes({from:S,to:j,insert:e.insert}),M=v.to-o.to;return{changes:k,range:m?X.range(Math.max(0,m.anchor+M),Math.max(0,m.head+M)):v.map(k)}})}else s={changes:u,selection:m&&i.selection.replaceRange(m)}}let d="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,d+=".compose",n.inputState.compositionFirstChange&&(d+=".start",n.inputState.compositionFirstChange=!1)),i.update(s,{userEvent:d,scrollIntoView:!0})}function n1(n,e,t,s){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let c=n.length,d=e.length;for(;c>0&&d>0&&n.charCodeAt(c-1)==e.charCodeAt(d-1);)c--,d--;if(s=="end"){let u=Math.max(0,o-Math.min(c,d));t-=c+u-o}if(c<o&&n.length<e.length){let u=t<=o&&t>=c?o-t:0;o-=u,d=o+(d-c),c=o}else if(d<o){let u=t<=o&&t>=d?o-t:0;o-=u,c=o+(c-d),d=o}return{from:o,toA:c,toB:d}}function N2(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new bg(t,s)),(i!=t||o!=s)&&e.push(new bg(i,o))),e}function k2(n,e){if(n.length==0)return null;let t=n[0].pos,s=n.length==2?n[1].pos:t;return t>-1&&s>-1?X.single(t+e,s+e):null}function oc(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class S2{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,me.safari&&e.contentDOM.addEventListener("input",()=>null),me.gecko&&$2(e.contentDOM.ownerDocument)}handleEvent(e){!D2(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let s=this.handlers[e];if(s){for(let i of s.observers)i(this.view,t);for(let i of s.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=C2(e),s=this.handlers,i=this.view.contentDOM;for(let o in t)if(o!="scroll"){let c=!t[o].handlers.length,d=s[o];d&&c!=!d.handlers.length&&(i.removeEventListener(o,this.handleEvent),d=null),d||i.addEventListener(o,this.handleEvent,{passive:c})}for(let o in s)o!="scroll"&&!t[o]&&i.removeEventListener(o,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&i1.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),me.android&&me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=r1.find(s=>s.keyCode==e.keyCode))&&!e.ctrlKey||M2.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,vi(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:me.safari&&!me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function vg(n,e){return(t,s)=>{try{return e.call(n,s,t)}catch(i){dn(t.state,i)}}}function C2(n){let e=Object.create(null);function t(s){return e[s]||(e[s]={observers:[],handlers:[]})}for(let s of n){let i=s.spec,o=i&&i.plugin.domEventHandlers,c=i&&i.plugin.domEventObservers;if(o)for(let d in o){let u=o[d];u&&t(d).handlers.push(vg(s.value,u))}if(c)for(let d in c){let u=c[d];u&&t(d).observers.push(vg(s.value,u))}}for(let s in Gs)t(s).handlers.push(Gs[s]);for(let s in Ps)t(s).observers.push(Ps[s]);return e}const r1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],M2="dthko",i1=[16,17,18,20,91,92,224,225],vo=6;function jo(n){return Math.max(0,n)*.7+8}function A2(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class E2{constructor(e,t,s,i){this.view=e,this.startEvent=t,this.style=s,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=LN(e.contentDOM),this.atoms=e.state.facet(sa).map(c=>c(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(He.allowMultipleSelections)&&L2(e,t),this.dragging=T2(e,t)&&o1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&A2(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,s=0,i=0,o=0,c=this.view.win.innerWidth,d=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:c}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:d}=this.scrollParents.y.getBoundingClientRect());let u=Jy(this.view);e.clientX-u.left<=i+vo?t=-jo(i-e.clientX):e.clientX+u.right>=c-vo&&(t=jo(e.clientX-c)),e.clientY-u.top<=o+vo?s=-jo(o-e.clientY):e.clientY+u.bottom>=d-vo&&(s=jo(e.clientY-d)),this.setScrollSpeed(t,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,s=Zy(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!s.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:s,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function L2(n,e){let t=n.state.facet(Fy);return t.length?t[0](e):me.mac?e.metaKey:e.ctrlKey}function P2(n,e){let t=n.state.facet(Iy);return t.length?t[0](e):me.mac?!e.altKey:!e.ctrlKey}function T2(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let s=Mi(n.root);if(!s||s.rangeCount==0)return!0;let i=s.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let c=i[o];if(c.left<=e.clientX&&c.right>=e.clientX&&c.top<=e.clientY&&c.bottom>=e.clientY)return!0}return!1}function D2(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,s;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(s=xt.get(t))&&s.isWidget()&&!s.isHidden&&s.widget.ignoreEvent(e))return!1;return!0}const Gs=Object.create(null),Ps=Object.create(null),l1=me.ie&&me.ie_version<15||me.ios&&me.webkit_version<604;function R2(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),a1(n,t.value)},50)}function Oc(n,e,t){for(let s of n.facet(e))t=s(t,n);return t}function a1(n,e){e=Oc(n.state,kf,e);let{state:t}=n,s,i=1,o=t.toText(e),c=o.lines==t.selection.ranges.length;if(_u!=null&&t.selection.ranges.every(u=>u.empty)&&_u==o.toString()){let u=-1;s=t.changeByRange(m=>{let p=t.doc.lineAt(m.from);if(p.from==u)return{range:m};u=p.from;let g=t.toText((c?o.line(i++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:g},range:X.cursor(m.from+g.length)}})}else c?s=t.changeByRange(u=>{let m=o.line(i++);return{changes:{from:u.from,to:u.to,insert:m.text},range:X.cursor(u.from+m.length)}}):s=t.replaceSelection(o);n.dispatch(s,{userEvent:"input.paste",scrollIntoView:!0})}Ps.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Gs.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Ps.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Ps.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Gs.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let s of n.state.facet(zy))if(t=s(n,e),t)break;if(!t&&e.button==0&&(t=B2(n,e)),t){let s=!n.hasFocus;n.inputState.startMouseSelection(new E2(n,e,t,s)),s&&n.observer.ignore(()=>{Ay(n.contentDOM);let o=n.root.activeElement;o&&!o.contains(n.contentDOM)&&o.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function jg(n,e,t,s){if(s==1)return X.cursor(e,t);if(s==2)return u2(n.state,e,t);{let i=n.docView.lineAt(e,t),o=n.state.doc.lineAt(i?i.posAtEnd:e),c=i?i.posAtStart:o.from,d=i?i.posAtEnd:o.to;return d<n.state.doc.length&&d==o.to&&d++,X.range(c,d)}}const O2=me.ie&&me.ie_version<=11;let Ng=null,kg=0,Sg=0;function o1(n){if(!O2)return n.detail;let e=Ng,t=Sg;return Ng=n,Sg=Date.now(),kg=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(kg+1)%3:1}function B2(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),s=o1(e),i=n.state.selection;return{update(o){o.docChanged&&(t.pos=o.changes.mapPos(t.pos),i=i.map(o.changes))},get(o,c,d){let u=n.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),m,p=jg(n,u.pos,u.assoc,s);if(t.pos!=u.pos&&!c){let g=jg(n,t.pos,t.assoc,s),y=Math.min(g.from,p.from),b=Math.max(g.to,p.to);p=y<p.from?X.range(y,b):X.range(b,y)}return c?i.replaceRange(i.main.extend(p.from,p.to)):d&&s==1&&i.ranges.length>1&&(m=F2(i,u.pos))?m:d?i.addRange(p):X.create([p])}}}function F2(n,e){for(let t=0;t<n.ranges.length;t++){let{from:s,to:i}=n.ranges[t];if(s<=e&&i>=e)return X.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Gs.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.tile.nearest(e.target);if(i&&i.isWidget()){let o=i.posAtStart,c=o+i.length;(o>=t.to||c<=t.from)&&(t=X.range(o,c))}}let{inputState:s}=n;return s.mouseSelection&&(s.mouseSelection.dragging=!0),s.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Oc(n.state,Sf,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Gs.dragend=n=>(n.inputState.draggedContent=null,!1);function Cg(n,e,t,s){if(t=Oc(n.state,kf,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=n.inputState,c=s&&o&&P2(n,e)?{from:o.from,to:o.to}:null,d={from:i,insert:t},u=n.state.changes(c?[c,d]:d);n.focus(),n.dispatch({changes:u,selection:{anchor:u.mapPos(i,-1),head:u.mapPos(i,1)},userEvent:c?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Gs.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let s=Array(t.length),i=0,o=()=>{++i==t.length&&Cg(n,e,s.filter(c=>c!=null).join(n.state.lineBreak),!1)};for(let c=0;c<t.length;c++){let d=new FileReader;d.onerror=o,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(s[c]=d.result),o()},d.readAsText(t[c])}return!0}else{let s=e.dataTransfer.getData("Text");if(s)return Cg(n,e,s,!0),!0}return!1};Gs.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=l1?null:e.clipboardData;return t?(a1(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(R2(n),!1)};function I2(n,e){let t=n.dom.parentNode;if(!t)return;let s=t.appendChild(document.createElement("textarea"));s.style.cssText="position: fixed; left: -10000px; top: 10px",s.value=e,s.focus(),s.selectionEnd=e.length,s.selectionStart=0,setTimeout(()=>{s.remove(),n.focus()},50)}function z2(n){let e=[],t=[],s=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let c=n.doc.lineAt(o);c.number>i&&(e.push(c.text),t.push({from:c.from,to:Math.min(n.doc.length,c.to+1)})),i=c.number}s=!0}return{text:Oc(n,Sf,e.join(n.lineBreak)),ranges:t,linewise:s}}let _u=null;Gs.copy=Gs.cut=(n,e)=>{let t=Mi(n.root);if(t&&!Ol(n.contentDOM,t))return!1;let{text:s,ranges:i,linewise:o}=z2(n.state);if(!s&&!o)return!1;_u=o?s:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let c=l1?null:e.clipboardData;return c?(c.clearData(),c.setData("text/plain",s),!0):(I2(n,s),!1)};const c1=fr.define();function d1(n,e){let t=[];for(let s of n.facet(Wy)){let i=s(n,e);i&&t.push(i)}return t.length?n.update({effects:t,annotations:c1.of(!0)}):null}function h1(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=d1(n.state,e);t?n.dispatch(t):n.update([])}},10)}Ps.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),h1(n)};Ps.blur=n=>{n.observer.clearSelectionRange(),h1(n)};Ps.compositionstart=Ps.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Ps.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,me.chrome&&me.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Ps.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Gs.beforeinput=(n,e)=>{var t,s;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let o=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),c=e.getTargetRanges();if(o&&c.length){let d=c[0],u=n.posAtDOM(d.startContainer,d.startOffset),m=n.posAtDOM(d.endContainer,d.endOffset);return Af(n,{from:u,to:m,insert:n.state.toText(o)},null),!0}}let i;if(me.chrome&&me.android&&(i=r1.find(o=>o.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let o=((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0;setTimeout(()=>{var c;(((c=window.visualViewport)===null||c===void 0?void 0:c.height)||0)>o+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return me.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),me.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Ps.compositionend(n,e),20),!1};const Mg=new Set;function $2(n){Mg.has(n)||(Mg.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const Ag=["pre-wrap","normal","pre-line","break-spaces"];let Li=!1;function Eg(){Li=!1}class _2{constructor(e){this.lineWrapping=e,this.doc=Ve.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let s=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(s+=Math.max(0,Math.ceil((t-e-s*this.lineLength*.5)/this.lineLength))),this.lineHeight*s}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Ag.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let s=0;s<e.length;s++){let i=e[s];i<0?s++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,s,i,o,c){let d=Ag.indexOf(e)>-1,u=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=d||Math.abs(s-this.charWidth)>.1;if(this.lineWrapping=d,this.lineHeight=t,this.charWidth=s,this.textHeight=i,this.lineLength=o,u){this.heightSamples={};for(let m=0;m<c.length;m++){let p=c[m];p<0?m++:this.heightSamples[Math.floor(p*10)]=!0}}return u}}class W2{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class _s{constructor(e,t,s,i,o){this.from=e,this.length=t,this.top=s,this.height=i,this._content=o}get type(){return typeof this._content=="number"?ls.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Fr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new _s(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ye=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Ye||(Ye={}));const Wo=.001;class Jt{constructor(e,t,s=2){this.length=e,this.height=t,this.flags=s}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Wo&&(Li=!0),this.height=e)}replace(e,t,s){return Jt.of(s)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,s,i){let o=this,c=s.doc;for(let d=i.length-1;d>=0;d--){let{fromA:u,toA:m,fromB:p,toB:g}=i[d],y=o.lineAt(u,Ye.ByPosNoHeight,s.setDoc(t),0,0),b=y.to>=m?y:o.lineAt(m,Ye.ByPosNoHeight,s,0,0);for(g+=b.to-m,m=b.to;d>0&&y.from<=i[d-1].toA;)u=i[d-1].fromA,p=i[d-1].fromB,d--,u<y.from&&(y=o.lineAt(u,Ye.ByPosNoHeight,s,0,0));p+=y.from-u,u=y.from;let v=Ef.build(s.setDoc(c),e,p,g);o=cc(o,o.replace(u,m,v))}return o.updateHeight(s,0)}static empty(){return new xs(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,s=e.length,i=0,o=0;for(;;)if(t==s)if(i>o*2){let d=e[t-1];d.break?e.splice(--t,1,d.left,null,d.right):e.splice(--t,1,d.left,d.right),s+=1+d.break,i-=d.size}else if(o>i*2){let d=e[s];d.break?e.splice(s,1,d.left,null,d.right):e.splice(s,1,d.left,d.right),s+=2+d.break,o-=d.size}else break;else if(i<o){let d=e[t++];d&&(i+=d.size)}else{let d=e[--s];d&&(o+=d.size)}let c=0;return e[t-1]==null?(c=1,t--):e[t]==null&&(c=1,s++),new V2(Jt.of(e.slice(0,t)),c,Jt.of(e.slice(s)))}}function cc(n,e){return n==e?n:(n.constructor!=e.constructor&&(Li=!0),e)}Jt.prototype.size=1;const H2=Te.replace({});class u1 extends Jt{constructor(e,t,s){super(e,t),this.deco=s,this.spaceAbove=0}mainBlock(e,t){return new _s(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,s,i){return this.spaceAbove&&e<s+this.spaceAbove?new _s(i,0,s,this.spaceAbove,H2):this.mainBlock(s,i)}lineAt(e,t,s,i,o){let c=this.mainBlock(i,o);return this.spaceAbove?this.blockAt(0,s,i,o).join(c):c}forEachLine(e,t,s,i,o,c){e<=o+this.length&&t>=o&&c(this.lineAt(0,Ye.ByPos,s,i,o))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more&&this.setMeasuredHeight(i),this.outdated=!1,this}toString(){return`block(${this.length})`}}class xs extends u1{constructor(e,t,s){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=s}mainBlock(e,t){return new _s(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,s){let i=s[0];return s.length==1&&(i instanceof xs||i instanceof Pt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Pt?i=new xs(i.length,this.height,this.spaceAbove):i.height=this.height,this.outdated||(i.outdated=!1),i):Jt.of(s)}updateHeight(e,t=0,s=!1,i){return i&&i.from<=t&&i.more?this.setMeasuredHeight(i):(s||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pt extends Jt{constructor(e){super(e,0)}heightMetrics(e,t){let s=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-s+1,c,d=0;if(e.lineWrapping){let u=Math.min(this.height,e.lineHeight*o);c=u/o,this.length>o+1&&(d=(this.height-u)/(this.length-o-1))}else c=this.height/o;return{firstLine:s,lastLine:i,perLine:c,perChar:d}}blockAt(e,t,s,i){let{firstLine:o,lastLine:c,perLine:d,perChar:u}=this.heightMetrics(t,i);if(t.lineWrapping){let m=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-s)/this.height))*this.length)),p=t.doc.lineAt(m),g=d+p.length*u,y=Math.max(s,e-g/2);return new _s(p.from,p.length,y,g,0)}else{let m=Math.max(0,Math.min(c-o,Math.floor((e-s)/d))),{from:p,length:g}=t.doc.line(o+m);return new _s(p,g,s+d*m,d,0)}}lineAt(e,t,s,i,o){if(t==Ye.ByHeight)return this.blockAt(e,s,i,o);if(t==Ye.ByPosNoHeight){let{from:b,to:v}=s.doc.lineAt(e);return new _s(b,v-b,0,0,0)}let{firstLine:c,perLine:d,perChar:u}=this.heightMetrics(s,o),m=s.doc.lineAt(e),p=d+m.length*u,g=m.number-c,y=i+d*g+u*(m.from-o-g);return new _s(m.from,m.length,Math.max(i,Math.min(y,i+this.height-p)),p,0)}forEachLine(e,t,s,i,o,c){e=Math.max(e,o),t=Math.min(t,o+this.length);let{firstLine:d,perLine:u,perChar:m}=this.heightMetrics(s,o);for(let p=e,g=i;p<=t;){let y=s.doc.lineAt(p);if(p==e){let v=y.number-d;g+=u*v+m*(e-o-v)}let b=u+m*y.length;c(new _s(y.from,y.length,g,b,0)),g+=b,p=y.to+1}}replace(e,t,s){let i=this.length-t;if(i>0){let o=s[s.length-1];o instanceof Pt?s[s.length-1]=new Pt(o.length+i):s.push(null,new Pt(i-1))}if(e>0){let o=s[0];o instanceof Pt?s[0]=new Pt(e+o.length):s.unshift(new Pt(e-1),null)}return Jt.of(s)}decomposeLeft(e,t){t.push(new Pt(e-1),null)}decomposeRight(e,t){t.push(null,new Pt(this.length-e-1))}updateHeight(e,t=0,s=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let c=[],d=Math.max(t,i.from),u=-1;for(i.from>t&&c.push(new Pt(i.from-t-1).updateHeight(e,t));d<=o&&i.more;){let p=e.doc.lineAt(d).length;c.length&&c.push(null);let g=i.heights[i.index++],y=0;g<0&&(y=-g,g=i.heights[i.index++]),u==-1?u=g:Math.abs(g-u)>=Wo&&(u=-2);let b=new xs(p,g,y);b.outdated=!1,c.push(b),d+=p+1}d<=o&&c.push(null,new Pt(o-d).updateHeight(e,d));let m=Jt.of(c);return(u<0||Math.abs(m.height-this.height)>=Wo||Math.abs(u-this.heightMetrics(e,t).perLine)>=Wo)&&(Li=!0),cc(this,m)}else(s||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class V2 extends Jt{constructor(e,t,s){super(e.length+t+s.length,e.height+s.height,t|(e.outdated||s.outdated?2:0)),this.left=e,this.right=s,this.size=e.size+s.size}get break(){return this.flags&1}blockAt(e,t,s,i){let o=s+this.left.height;return e<o?this.left.blockAt(e,t,s,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,s,i,o){let c=i+this.left.height,d=o+this.left.length+this.break,u=t==Ye.ByHeight?e<c:e<d,m=u?this.left.lineAt(e,t,s,i,o):this.right.lineAt(e,t,s,c,d);if(this.break||(u?m.to<d:m.from>d))return m;let p=t==Ye.ByPosNoHeight?Ye.ByPosNoHeight:Ye.ByPos;return u?m.join(this.right.lineAt(d,p,s,c,d)):this.left.lineAt(d,p,s,i,o).join(m)}forEachLine(e,t,s,i,o,c){let d=i+this.left.height,u=o+this.left.length+this.break;if(this.break)e<u&&this.left.forEachLine(e,t,s,i,o,c),t>=u&&this.right.forEachLine(e,t,s,d,u,c);else{let m=this.lineAt(u,Ye.ByPos,s,i,o);e<m.from&&this.left.forEachLine(e,m.from-1,s,i,o,c),m.to>=e&&m.from<=t&&c(m),t>m.to&&this.right.forEachLine(m.to+1,t,s,d,u,c)}}replace(e,t,s){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,s),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,s));let o=[];e>0&&this.decomposeLeft(e,o);let c=o.length;for(let d of s)o.push(d);if(e>0&&Lg(o,c-1),t<this.length){let d=o.length;this.decomposeRight(t,o),Lg(o,d)}return Jt.of(o)}decomposeLeft(e,t){let s=this.left.length;if(e<=s)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(s++,e>=s&&t.push(null)),e>s&&this.right.decomposeLeft(e-s,t)}decomposeRight(e,t){let s=this.left.length,i=s+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<s&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Jt.of(this.break?[e,null,t]:[e,t]):(this.left=cc(this.left,e),this.right=cc(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,s=!1,i){let{left:o,right:c}=this,d=t+o.length+this.break,u=null;return i&&i.from<=t+o.length&&i.more?u=o=o.updateHeight(e,t,s,i):o.updateHeight(e,t,s),i&&i.from<=d+c.length&&i.more?u=c=c.updateHeight(e,d,s,i):c.updateHeight(e,d,s),u?this.balanced(o,c):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Lg(n,e){let t,s;n[e]==null&&(t=n[e-1])instanceof Pt&&(s=n[e+1])instanceof Pt&&n.splice(e-1,3,new Pt(t.length+1+s.length))}const U2=5;class Ef{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let s=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof xs?i.length+=s-this.pos:(s>this.pos||!this.isCovered)&&this.nodes.push(new xs(s-this.pos,-1,0)),this.writtenTo=s,t>s&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,s){if(e<t||s.heightRelevant){let i=s.widget?s.widget.estimatedHeight:0,o=s.widget?s.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let c=t-e;s.block?this.addBlock(new u1(c,i,s)):(c||o||i>=U2)&&this.addLineDeco(i,o,c)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new xs(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let s=new Pt(t-e);return this.oracle.doc.lineAt(e).to==t&&(s.flags|=4),s}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof xs)return e;let t=new xs(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,s){let i=this.ensureLine();i.length+=s,i.collapsed+=s,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+s}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof xs)&&!this.isCovered?this.nodes.push(new xs(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let s=e;for(let i of this.nodes)i instanceof xs&&i.updateHeight(this.oracle,s),s+=i?i.length:1;return this.nodes}static build(e,t,s,i){let o=new Ef(s,e);return $e.spans(t,s,i,o,0),o.finish(s)}}function q2(n,e,t){let s=new G2;return $e.compare(n,e,t,s,0),s.changes}class G2{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,s,i){(e<t||s&&s.heightRelevant||i&&i.heightRelevant)&&bi(e,t,this.changes,5)}}function K2(n,e){let t=n.getBoundingClientRect(),s=n.ownerDocument,i=s.defaultView||window,o=Math.max(0,t.left),c=Math.min(i.innerWidth,t.right),d=Math.max(0,t.top),u=Math.min(i.innerHeight,t.bottom);for(let m=n.parentNode;m&&m!=s.body;)if(m.nodeType==1){let p=m,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),c=Math.min(c,y.right),d=Math.max(d,y.top),u=Math.min(m==n.parentNode?i.innerHeight:u,y.bottom)}m=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(m.nodeType==11)m=m.host;else break;return{left:o-t.left,right:Math.max(o,c)-t.left,top:d-(t.top+e),bottom:Math.max(d,u)-(t.top+e)}}function Q2(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function J2(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class qh{constructor(e,t,s,i){this.from=e,this.to=t,this.size=s,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let s=0;s<e.length;s++){let i=e[s],o=t[s];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e,t){return Te.replace({widget:new Y2(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Y2 extends Pc{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Pg{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Tg,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ut.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Cf).some(s=>typeof s!="function"&&s.class=="cm-lineWrapping");this.heightOracle=new _2(t),this.stateDeco=Dg(e),this.heightMap=Jt.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle.setDoc(e.doc),[new As(0,0,0,e.doc.length)]);for(let s=0;s<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());s++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Te.set(this.lineGaps.map(s=>s.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let s=0;s<=1;s++){let i=s?t.head:t.anchor;if(!e.some(({from:o,to:c})=>i>=o&&i<=c)){let{from:o,to:c}=this.lineBlockAt(i);e.push(new No(o,c))}}return this.viewports=e.sort((s,i)=>s.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Tg:new Lf(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(El(e,this.scaler))})}update(e,t=null){this.state=e.state;let s=this.stateDeco;this.stateDeco=Dg(this.state);let i=e.changedRanges,o=As.extendWithRanges(i,q2(s,this.stateDeco,e?e.changes:wt.empty(this.state.doc.length))),c=this.heightMap.height,d=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Eg(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=c||Li)&&(e.flags|=2),d?(this.scrollAnchorPos=e.changes.mapPos(d.from,-1),this.scrollAnchorHeight=d.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=c);let u=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<u.from||t.range.head>u.to)||!this.viewportIsAppropriate(u))&&(u=this.getViewport(0,t));let m=u.from!=this.viewport.from||u.to!=this.viewport.to;this.viewport=u,e.flags|=this.updateForViewport(),(m||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(HN)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,s=window.getComputedStyle(t),i=this.heightOracle,o=s.whiteSpace;this.defaultTextDirection=s.direction=="rtl"?ut.RTL:ut.LTR;let c=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,d=t.getBoundingClientRect(),u=c||this.mustMeasureContent||this.contentDOMHeight!=d.height;this.contentDOMHeight=d.height,this.mustMeasureContent=!1;let m=0,p=0;if(d.width&&d.height){let{scaleX:E,scaleY:B}=My(t,d);(E>.005&&Math.abs(this.scaleX-E)>.005||B>.005&&Math.abs(this.scaleY-B)>.005)&&(this.scaleX=E,this.scaleY=B,m|=16,c=u=!0)}let g=(parseInt(s.paddingTop)||0)*this.scaleY,y=(parseInt(s.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,m|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(u=!0),this.editorWidth=e.scrollDOM.clientWidth,m|=16);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=Ey(e.scrollDOM);let v=(this.printing?J2:K2)(t,this.paddingTop),j=v.top-this.pixelViewport.top,S=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(u=!0)),!this.inView&&!this.scrollTarget&&!Q2(e.dom))return 0;let M=d.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=d.width,this.editorHeight=e.scrollDOM.clientHeight,m|=16),u){let E=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(E)&&(c=!0),c||i.lineWrapping&&Math.abs(M-this.contentDOMWidth)>i.charWidth){let{lineHeight:B,charWidth:I,textHeight:O}=e.docView.measureTextSize();c=B>0&&i.refresh(o,B,I,O,Math.max(5,M/I),E),c&&(e.docView.minWidth=0,m|=16)}j>0&&S>0?p=Math.max(j,S):j<0&&S<0&&(p=Math.min(j,S)),Eg();for(let B of this.viewports){let I=B.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(B);this.heightMap=(c?Jt.empty().applyChanges(this.stateDeco,Ve.empty,this.heightOracle,[new As(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,c,new W2(B.from,I))}Li&&(m|=2)}let R=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return R&&(m&2&&(m|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),m|=this.updateForViewport()),(m&2||R)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(c?[]:this.lineGaps,e)),m|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),m}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let s=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.heightOracle,{visibleTop:c,visibleBottom:d}=this,u=new No(i.lineAt(c-s*1e3,Ye.ByHeight,o,0,0).from,i.lineAt(d+(1-s)*1e3,Ye.ByHeight,o,0,0).to);if(t){let{head:m}=t.range;if(m<u.from||m>u.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=i.lineAt(m,Ye.ByPos,o,0,0),y;t.y=="center"?y=(g.top+g.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&m<u.from?y=g.top:y=g.bottom-p,u=new No(i.lineAt(y-1e3/2,Ye.ByHeight,o,0,0).from,i.lineAt(y+p+1e3/2,Ye.ByHeight,o,0,0).to)}}return u}mapViewport(e,t){let s=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new No(this.heightMap.lineAt(s,Ye.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Ye.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},s=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Ye.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(t,Ye.ByPos,this.heightOracle,0,0),{visibleTop:c,visibleBottom:d}=this;return(e==0||i<=c-Math.max(10,Math.min(-s,250)))&&(t==this.state.doc.length||o>=d+Math.max(10,Math.min(s,250)))&&i>c-2*1e3&&o<d+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let s=[];for(let i of e)t.touchesRange(i.from,i.to)||s.push(new qh(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return s}ensureLineGaps(e,t){let s=this.heightOracle.lineWrapping,i=s?1e4:2e3,o=i>>1,c=i<<1;if(this.defaultTextDirection!=ut.LTR&&!s)return[];let d=[],u=(p,g,y,b)=>{if(g-p<o)return;let v=this.state.selection.main,j=[v.from];v.empty||j.push(v.to);for(let k of j)if(k>p&&k<g){u(p,k-10,y,b),u(k+10,g,y,b);return}let S=Z2(e,k=>k.from>=y.from&&k.to<=y.to&&Math.abs(k.from-p)<o&&Math.abs(k.to-g)<o&&!j.some(M=>k.from<M&&k.to>M));if(!S){if(g<y.to&&t&&s&&t.visibleRanges.some(R=>R.from<=g&&R.to>=g)){let R=t.moveToLineBoundary(X.cursor(g),!1,!0).head;R>p&&(g=R)}let k=this.gapSize(y,p,g,b),M=s||k<2e6?k:2e6;S=new qh(p,g,k,M)}d.push(S)},m=p=>{if(p.length<c||p.type!=ls.Text)return;let g=X2(p.from,p.to,this.stateDeco);if(g.total<c)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,b,v;if(s){let j=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,k;if(y!=null){let M=So(g,y),R=((this.visibleBottom-this.visibleTop)/2+j)/p.height;S=M-R,k=M+R}else S=(this.visibleTop-p.top-j)/p.height,k=(this.visibleBottom-p.top+j)/p.height;b=ko(g,S),v=ko(g,k)}else{let j=g.total*this.heightOracle.charWidth,S=i*this.heightOracle.charWidth,k=0;if(j>2e6)for(let I of e)I.from>=p.from&&I.from<p.to&&I.size!=I.displaySize&&I.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=I.size-I.displaySize);let M=this.pixelViewport.left+k,R=this.pixelViewport.right+k,E,B;if(y!=null){let I=So(g,y),O=((R-M)/2+S)/j;E=I-O,B=I+O}else E=(M-S)/j,B=(R+S)/j;b=ko(g,E),v=ko(g,B)}b>p.from&&u(p.from,b,p,g),v<p.to&&u(v,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(m):m(p);return d}gapSize(e,t,s,i){let o=So(i,s)-So(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){qh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Te.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let s=[];$e.spans(t,this.viewport.from,this.viewport.to,{span(o,c){s.push({from:o,to:c})},point(){}},20);let i=0;if(s.length!=this.visibleRanges.length)i=12;else for(let o=0;o<s.length&&!(i&8);o++){let c=this.visibleRanges[o],d=s[o];(c.from!=d.from||c.to!=d.to)&&(i|=4,e&&e.mapPos(c.from,-1)==d.from&&e.mapPos(c.to,1)==d.to||(i|=8))}return this.visibleRanges=s,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||El(this.heightMap.lineAt(e,Ye.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||El(this.heightMap.lineAt(this.scaler.fromDOM(e),Ye.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return El(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class No{constructor(e,t){this.from=e,this.to=t}}function X2(n,e,t){let s=[],i=n,o=0;return $e.spans(t,n,e,{span(){},point(c,d){c>i&&(s.push({from:i,to:c}),o+=c-i),i=d}},20),i<e&&(s.push({from:i,to:e}),o+=e-i),{total:o,ranges:s}}function ko({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let s=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:c}=e[i],d=c-o;if(s<=d)return o+s;s-=d}}function So(n,e){let t=0;for(let{from:s,to:i}of n.ranges){if(e<=i){t+=e-s;break}t+=i-s}return t/n.total}function Z2(n,e){for(let t of n)if(e(t))return t}const Tg={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function Dg(n){let e=n.facet(Tc).filter(s=>typeof s!="function"),t=n.facet(Mf).filter(s=>typeof s!="function");return t.length&&e.push($e.join(t)),e}class Lf{constructor(e,t,s){let i=0,o=0,c=0;this.viewports=s.map(({from:d,to:u})=>{let m=t.lineAt(d,Ye.ByPos,e,0,0).top,p=t.lineAt(u,Ye.ByPos,e,0,0).bottom;return i+=p-m,{from:d,to:u,top:m,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let d of this.viewports)d.domTop=c+(d.top-o)*this.scale,c=d.domBottom=d.domTop+(d.bottom-d.top),o=d.bottom}toDOM(e){for(let t=0,s=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-s)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);s=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,s=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return s+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);s=o.bottom,i=o.domBottom}}eq(e){return e instanceof Lf?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,s)=>t.from==e.viewports[s].from&&t.to==e.viewports[s].to):!1}}function El(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),s=e.toDOM(n.bottom);return new _s(n.from,n.length,t,s-t,Array.isArray(n._content)?n._content.map(i=>El(i,e)):n._content)}const Co=ye.define({combine:n=>n.join(" ")}),Wu=ye.define({combine:n=>n.indexOf(!0)>-1}),Hu=cr.newName(),f1=cr.newName(),m1=cr.newName(),p1={"&light":"."+f1,"&dark":"."+m1};function Vu(n,e,t){return new cr(e,{finish(s){return/&/.test(s)?s.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+s}})}const ek=Vu("."+Hu,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},p1),tk={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Gh=me.ie&&me.ie_version<=11;class sk{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new PN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let s of t)this.queue.push(s);(me.ie&&me.ie_version<=11||me.ios&&e.composing)&&t.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&me.android&&e.constructor.EDIT_CONTEXT!==!1&&!(me.chrome&&me.chrome_version<126)&&(this.editContext=new rk(e),e.state.facet(Sn)&&(e.contentDOM.editContext=this.editContext.editContext)),Gh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,s)=>t!=e[s]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:s}=this,i=this.selectionRange;if(s.state.facet(Sn)?s.root.activeElement!=this.dom:!Ol(this.dom,i))return;let o=i.anchorNode&&s.docView.tile.nearest(i.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(me.ie&&me.ie_version<=11||me.android&&me.chrome)&&!s.state.selection.main.empty&&i.focusNode&&Bl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Mi(e.root);if(!t)return!1;let s=me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&nk(this.view,t)||t;if(!s||this.selectionRange.eq(s))return!1;let i=Ol(this.dom,s);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&DN(this.dom,s)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(s),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let s=this.dom;s;)if(s.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==s?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);for(let s of this.scrollTargets=t)s.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,tk),Gh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Gh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var s;if(!this.delayedAndroidKey){let i=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&vi(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((s=this.delayedAndroidKey)===null||s===void 0)&&s.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,s=-1,i=!1;for(let o of e){let c=this.readMutation(o);c&&(c.typeOver&&(i=!0),t==-1?{from:t,to:s}=c:(t=Math.min(c.from,t),s=Math.max(c.to,s)))}return{from:t,to:s,typeOver:i}}readChange(){let{from:e,to:t,typeOver:s}=this.processRecords(),i=this.selectionChanged&&Ol(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new v2(this.view,e,t,s);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let s=this.view.state,i=s1(this.view,t);return this.view.state==s&&(t.domChanged||t.newSel&&!oc(this.view.state.selection,t.newSel.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let s=Rg(t,e.previousSibling||e.target.previousSibling,-1),i=Rg(t,e.nextSibling||e.target.nextSibling,1);return{from:s?t.posAfter(s):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Sn)!=e.state.facet(Sn)&&(e.view.contentDOM.editContext=e.state.facet(Sn)?this.editContext.editContext:null))}destroy(){var e,t,s;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(s=this.resizeScroll)===null||s===void 0||s.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Rg(n,e,t){for(;e;){let s=xt.get(e);if(s&&s.parent==n)return s;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function Og(n,e){let t=e.startContainer,s=e.startOffset,i=e.endContainer,o=e.endOffset,c=n.docView.domAtPos(n.state.selection.main.anchor,1);return Bl(c.node,c.offset,i,o)&&([t,s,i,o]=[i,o,t,s]),{anchorNode:t,anchorOffset:s,focusNode:i,focusOffset:o}}function nk(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return Og(n,i)}let t=null;function s(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",s,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",s,!0),t?Og(n,t):null}class rk{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=s=>{let i=e.state.selection.main,{anchor:o,head:c}=i,d=this.toEditorPos(s.updateRangeStart),u=this.toEditorPos(s.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:s.updateRangeStart,editorBase:d,drifted:!1});let m=u-d>s.text.length;d==this.from&&o<this.from?d=o:u==this.to&&o>this.to&&(u=o);let p=n1(e.state.sliceDoc(d,u),s.text,(m?i.from:i.to)-d,m?"end":null);if(!p){let y=X.single(this.toEditorPos(s.selectionStart),this.toEditorPos(s.selectionEnd));oc(y,i)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:p.from+d,to:p.toA+d,insert:Ve.of(s.text.slice(p.from,p.toB).split(`
`))};if((me.mac||me.android)&&g.from==c-1&&/^\. ?$/.test(s.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:d,to:u,insert:Ve.of([s.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);Af(e,g,X.single(this.toEditorPos(s.selectionStart,y),this.toEditorPos(s.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,s.updateRangeStart-1),Math.min(t.text.length,s.updateRangeStart+1)))&&this.handlers.compositionend(s)},this.handlers.characterboundsupdate=s=>{let i=[],o=null;for(let c=this.toEditorPos(s.rangeStart),d=this.toEditorPos(s.rangeEnd);c<d;c++){let u=e.coordsForChar(c);o=u&&new DOMRect(u.left,u.top,u.right-u.left,u.bottom-u.top)||o||new DOMRect,i.push(o)}t.updateCharacterBounds(s.rangeStart,i)},this.handlers.textformatupdate=s=>{let i=[];for(let o of s.getTextFormats()){let c=o.underlineStyle,d=o.underlineThickness;if(!/none/i.test(c)&&!/none/i.test(d)){let u=this.toEditorPos(o.rangeStart),m=this.toEditorPos(o.rangeEnd);if(u<m){let p=`text-decoration: underline ${/^[a-z]/.test(c)?c+" ":c=="Dashed"?"dashed ":c=="Squiggle"?"wavy ":""}${/thin/i.test(d)?1:2}px`;i.push(Te.mark({attributes:{style:p}}).range(u,m))}}}e.dispatch({effects:Uy.of(Te.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:s}=this.composing;this.composing=null,s&&this.reset(e.state)}};for(let s in this.handlers)t.addEventListener(s,this.handlers[s]);this.measureReq={read:s=>{this.editContext.updateControlBounds(s.contentDOM.getBoundingClientRect());let i=Mi(s.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,s=!1,i=this.pendingContextChange;return e.changes.iterChanges((o,c,d,u,m)=>{if(s)return;let p=m.length-(c-o);if(i&&c>=i.to)if(i.from==o&&i.to==c&&i.insert.eq(m)){i=this.pendingContextChange=null,t+=p,this.to+=p;return}else i=null,this.revertPending(e.state);if(o+=t,c+=t,c<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||c>this.to||this.to-this.from+m.length>3e4){s=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(c),m.toString()),this.to+=p}t+=p}),i&&!s&&this.revertPending(e.state),!s}update(e){let t=this.pendingContextChange,s=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(s.from,s.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,s=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=s||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(s,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let s=this.composing;return s&&s.drifted?s.editorBase+(e-s.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class ve{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:s}=e;this.dispatchTransactions=e.dispatchTransactions||s&&(i=>i.forEach(o=>s(o,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TN(e.parent)||document,this.viewState=new Pg(e.state||He.create(e)),e.scrollTo&&e.scrollTo.is(bo)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(pi).map(i=>new _h(i));for(let i of this.plugins)i.update(this);this.observer=new sk(this),this.inputState=new S2(this),this.inputState.ensureHandlers(this.plugins),this.docView=new gg(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof vt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,s=!1,i,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let c=this.hasFocus,d=0,u=null;e.some(y=>y.annotation(c1))?(this.inputState.notifiedFocused=c,d=1):c!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=c,u=d1(o,c),u||(d=1));let m=this.observer.delayedAndroidKey,p=null;if(m?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(He.phrases)!=this.state.facet(He.phrases))return this.setState(o);i=ic.create(this,o,e),i.flags|=d;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:b}=y.state.selection;g=new ji(b.empty?b:X.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of y.effects)b.is(bo)&&(g=b.value.clip(this.state))}this.viewState.update(i,g),this.bidiCache=dc.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ml)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Co)!=i.state.facet(Co)&&(this.viewState.mustMeasureContent=!0),(t||s||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let y of this.state.facet(Iu))try{y(i)}catch(b){dn(this.state,b,"update listener")}(u||p)&&Promise.resolve().then(()=>{u&&this.state==u.startState&&this.dispatch(u),p&&!s1(this,p)&&m.force&&vi(this.contentDOM,m.key,m.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new Pg(e),this.plugins=e.facet(pi).map(s=>new _h(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView.destroy(),this.docView=new gg(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(pi),s=e.state.facet(pi);if(t!=s){let i=[];for(let o of s){let c=t.indexOf(o);if(c<0)i.push(new _h(o));else{let d=this.plugins[c];d.mustUpdate=e,i.push(d)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=s&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(s){dn(this.state,s,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,s=this.scrollDOM,i=s.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:c}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(c=-1),this.viewState.scrollAnchorHeight=-1;try{for(let d=0;;d++){if(c<0)if(Ey(s))o=-1,c=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(i);o=b.from,c=b.top}this.updateState=1;let u=this.viewState.measure(this);if(!u&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(d>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let m=[];u&4||([this.measureRequests,m]=[m,this.measureRequests]);let p=m.map(b=>{try{return b.read(this)}catch(v){return dn(this.state,v),Bg}}),g=ic.create(this,this.state,[]),y=!1;g.flags|=u,t?t.flags|=u:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let b=0;b<m.length;b++)if(p[b]!=Bg)try{let v=m[b];v.write&&v.write(p[b],this)}catch(v){dn(this.state,v)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,c=-1;continue}else{let v=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-c;if(v>1||v<-1){i=i+v,s.scrollTop=i/this.scaleY,c=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let d of this.state.facet(Iu))d(t)}get themeClasses(){return Hu+" "+(this.state.facet(Wu)?m1:f1)+" "+this.state.facet(Co)}updateAttrs(){let e=Fg(this,qy,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Sn)?"true":"false",class:"cm-content",style:`${me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Fg(this,Cf,t);let s=this.observer.ignore(()=>{let i=hg(this.contentDOM,this.contentAttrs,t),o=hg(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,s}showAnnouncements(e){let t=!0;for(let s of e)for(let i of s.effects)if(i.is(ve.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ml);let e=this.state.facet(ve.cspNonce);cr.mount(this.root,this.styleModules.concat(ek).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(s=>s.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,s){return Uh(this,e,yg(this,e,t,s))}moveByGroup(e,t){return Uh(this,e,yg(this,e,t,s=>x2(this,e.head,s)))}visualLineSide(e,t){let s=this.bidiSpans(e),i=this.textDirectionAt(e.from),o=s[t?s.length-1:0];return X.cursor(o.side(t,i)+e.from,o.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,s=!0){return p2(this,e,t,s)}moveVertically(e,t,s){return Uh(this,e,g2(this,e,t,s))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let s=$u(this,e,t);return s&&s.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),$u(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let s=this.docView.coordsAt(e,t);if(!s||s.left==s.right)return s;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),c=o[Cn.find(o,e-i.from,-1,t)];return rc(s,c.dir==ut.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Hy)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ik)return Oy(e.length);let t=this.textDirectionAt(e.from),s;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==t&&(o.fresh||Ry(o.isolates,s=mg(this,e))))return o.order;s||(s=mg(this,e));let i=$N(e.text,t,s);return this.bidiCache.push(new dc(e.from,e.to,t,s,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ay(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return bo.of(new ji(typeof e=="number"?X.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,s=this.viewState.scrollAnchorAt(e);return bo.of(new ji(X.cursor(s.from),"start","start",s.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ys.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ys.define(()=>({}),{eventObservers:e})}static theme(e,t){let s=cr.newName(),i=[Co.of(s),Ml.of(Vu(`.${s}`,e))];return t&&t.dark&&i.push(Wu.of(!0)),i}static baseTheme(e){return Mc.lowest(Ml.of(Vu("."+Hu,e,p1)))}static findFromDOM(e){var t;let s=e.querySelector(".cm-content"),i=s&&xt.get(s)||xt.get(e);return((t=i==null?void 0:i.root)===null||t===void 0?void 0:t.view)||null}}ve.styleModule=Ml;ve.inputHandler=_y;ve.clipboardInputFilter=kf;ve.clipboardOutputFilter=Sf;ve.scrollHandler=Vy;ve.focusChangeEffect=Wy;ve.perLineTextDirection=Hy;ve.exceptionSink=$y;ve.updateListener=Iu;ve.editable=Sn;ve.mouseSelectionStyle=zy;ve.dragMovesSelection=Iy;ve.clickAddsSelectionRange=Fy;ve.decorations=Tc;ve.blockWrappers=Gy;ve.outerDecorations=Mf;ve.atomicRanges=sa;ve.bidiIsolatedRanges=Ky;ve.scrollMargins=Qy;ve.darkTheme=Wu;ve.cspNonce=ye.define({combine:n=>n.length?n[0]:""});ve.contentAttributes=Cf;ve.editorAttributes=qy;ve.lineWrapping=ve.contentAttributes.of({class:"cm-lineWrapping"});ve.announce=Ke.define();const ik=4096,Bg={};class dc{constructor(e,t,s,i,o,c){this.from=e,this.to=t,this.dir=s,this.isolates=i,this.fresh=o,this.order=c}static update(e,t){if(t.empty&&!e.some(o=>o.fresh))return e;let s=[],i=e.length?e[e.length-1].dir:ut.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let c=e[o];c.dir==i&&!t.touchesRange(c.from,c.to)&&s.push(new dc(t.mapPos(c.from,1),t.mapPos(c.to,-1),c.dir,c.isolates,!1,c.order))}return s}}function Fg(n,e,t){for(let s=n.state.facet(e),i=s.length-1;i>=0;i--){let o=s[i],c=typeof o=="function"?o(n):o;c&&vf(c,t)}return t}const lk=me.mac?"mac":me.windows?"win":me.linux?"linux":"key";function ak(n,e){const t=n.split(/-(?!$)/);let s=t[t.length-1];s=="Space"&&(s=" ");let i,o,c,d;for(let u=0;u<t.length-1;++u){const m=t[u];if(/^(cmd|meta|m)$/i.test(m))d=!0;else if(/^a(lt)?$/i.test(m))i=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))c=!0;else if(/^mod$/i.test(m))e=="mac"?d=!0:o=!0;else throw new Error("Unrecognized modifier name: "+m)}return i&&(s="Alt-"+s),o&&(s="Ctrl-"+s),d&&(s="Meta-"+s),c&&(s="Shift-"+s),s}function Mo(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const ok=Mc.default(ve.domEventHandlers({keydown(n,e){return y1(g1(e.state),n,e,"editor")}})),x1=ye.define({enables:ok}),Ig=new WeakMap;function g1(n){let e=n.facet(x1),t=Ig.get(e);return t||Ig.set(e,t=hk(e.reduce((s,i)=>s.concat(i),[]))),t}function ck(n,e,t){return y1(g1(n.state),e,n,t)}let er=null;const dk=4e3;function hk(n,e=lk){let t=Object.create(null),s=Object.create(null),i=(c,d)=>{let u=s[c];if(u==null)s[c]=d;else if(u!=d)throw new Error("Key binding "+c+" is used both as a regular binding and as a multi-stroke prefix")},o=(c,d,u,m,p)=>{var g,y;let b=t[c]||(t[c]=Object.create(null)),v=d.split(/ (?!$)/).map(k=>ak(k,e));for(let k=1;k<v.length;k++){let M=v.slice(0,k).join(" ");i(M,!0),b[M]||(b[M]={preventDefault:!0,stopPropagation:!1,run:[R=>{let E=er={view:R,prefix:M,scope:c};return setTimeout(()=>{er==E&&(er=null)},dk),!0}]})}let j=v.join(" ");i(j,!1);let S=b[j]||(b[j]={preventDefault:!1,stopPropagation:!1,run:((y=(g=b._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});u&&S.run.push(u),m&&(S.preventDefault=!0),p&&(S.stopPropagation=!0)};for(let c of n){let d=c.scope?c.scope.split(" "):["editor"];if(c.any)for(let m of d){let p=t[m]||(t[m]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=c;for(let y in p)p[y].run.push(b=>g(b,Uu))}let u=c[e]||c.key;if(u)for(let m of d)o(m,u,c.run,c.preventDefault,c.stopPropagation),c.shift&&o(m,"Shift-"+u,c.shift,c.preventDefault,c.stopPropagation)}return t}let Uu=null;function y1(n,e,t,s){Uu=e;let i=NN(e),o=cy(i,0),c=dy(o)==i.length&&i!=" ",d="",u=!1,m=!1,p=!1;er&&er.view==t&&er.scope==s&&(d=er.prefix+" ",i1.indexOf(e.keyCode)<0&&(m=!0,er=null));let g=new Set,y=S=>{if(S){for(let k of S.run)if(!g.has(k)&&(g.add(k),k(t)))return S.stopPropagation&&(p=!0),!0;S.preventDefault&&(S.stopPropagation&&(p=!0),m=!0)}return!1},b=n[s],v,j;return b&&(y(b[d+Mo(i,e,!c)])?u=!0:c&&(e.altKey||e.metaKey||e.ctrlKey)&&!(me.windows&&e.ctrlKey&&e.altKey)&&!(me.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(v=dr[e.keyCode])&&v!=i?(y(b[d+Mo(v,e,!0)])||e.shiftKey&&(j=Hl[e.keyCode])!=i&&j!=v&&y(b[d+Mo(j,e,!1)]))&&(u=!0):c&&e.shiftKey&&y(b[d+Mo(i,e,!0)])&&(u=!0),!u&&y(b._any)&&(u=!0)),m&&(u=!0),u&&p&&e.stopPropagation(),Uu=null,u}function uk(){return mk}const fk=Te.line({class:"cm-activeLine"}),mk=ys.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let s of n.state.selection.ranges){let i=n.lineBlockAt(s.head);i.from>e&&(t.push(fk.range(i.from)),e=i.from)}return Te.set(t)}},{decorations:n=>n.decorations}),zg=ye.define({combine(n){let e,t;for(let s of n)e=e||s.topContainer,t=t||s.bottomContainer;return{topContainer:e,bottomContainer:t}}});function w1(n,e){let t=n.plugin(b1),s=t?t.specs.indexOf(e):-1;return s>-1?t.panels[s]:null}const b1=ys.fromClass(class{constructor(n){this.input=n.state.facet(hc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(zg);this.top=new Ao(n,!0,e.topContainer),this.bottom=new Ao(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(zg);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ao(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ao(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(hc);if(t!=this.input){let s=t.filter(u=>u),i=[],o=[],c=[],d=[];for(let u of s){let m=this.specs.indexOf(u),p;m<0?(p=u(n.view),d.push(p)):(p=this.panels[m],p.update&&p.update(n)),i.push(p),(p.top?o:c).push(p)}this.specs=s,this.panels=i,this.top.sync(o),this.bottom.sync(c);for(let u of d)u.dom.classList.add("cm-panel"),u.mount&&u.mount()}else for(let s of this.panels)s.update&&s.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ao{constructor(e,t,s){this.view=e,this.top=t,this.container=s,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$g(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$g(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $g(n){let e=n.nextSibling;return n.remove(),e}const hc=ye.define({enables:b1});function pk(n,e){let t,s=new Promise(c=>t=c),i=c=>xk(c,e,t);n.state.field(Kh,!1)?n.dispatch({effects:v1.of(i)}):n.dispatch({effects:Ke.appendConfig.of(Kh.init(()=>[i]))});let o=j1.of(i);return{close:o,result:s.then(c=>((n.win.queueMicrotask||(u=>n.win.setTimeout(u,10)))(()=>{n.state.field(Kh).indexOf(i)>-1&&n.dispatch({effects:o})}),c))}}const Kh=Ks.define({create(){return[]},update(n,e){for(let t of e.effects)t.is(v1)?n=[t.value].concat(n):t.is(j1)&&(n=n.filter(s=>s!=t.value));return n},provide:n=>hc.computeN([n],e=>e.field(n))}),v1=Ke.define(),j1=Ke.define();function xk(n,e,t){let s=e.content?e.content(n,()=>c(null)):null;if(!s){if(s=St("form"),e.input){let d=St("input",e.input);/^(text|password|number|email|tel|url)$/.test(d.type)&&d.classList.add("cm-textfield"),d.name||(d.name="input"),s.appendChild(St("label",(e.label||"")+": ",d))}else s.appendChild(document.createTextNode(e.label||""));s.appendChild(document.createTextNode(" ")),s.appendChild(St("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let i=s.nodeName=="FORM"?[s]:s.querySelectorAll("form");for(let d=0;d<i.length;d++){let u=i[d];u.addEventListener("keydown",m=>{m.keyCode==27?(m.preventDefault(),c(null)):m.keyCode==13&&(m.preventDefault(),c(u))}),u.addEventListener("submit",m=>{m.preventDefault(),c(u)})}let o=St("div",s,St("button",{onclick:()=>c(null),"aria-label":n.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(o.className=e.class),o.classList.add("cm-dialog");function c(d){o.contains(o.ownerDocument.activeElement)&&n.focus(),t(d)}return{dom:o,top:e.top,mount:()=>{if(e.focus){let d;typeof e.focus=="string"?d=s.querySelector(e.focus):d=s.querySelector("input")||s.querySelector("button"),d&&"select"in d?d.select():d&&"focus"in d&&d.focus()}}}}class Pn extends Br{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Pn.prototype.elementClass="";Pn.prototype.toDOM=void 0;Pn.prototype.mapMode=gs.TrackBefore;Pn.prototype.startSide=Pn.prototype.endSide=-1;Pn.prototype.point=!0;const Ho=ye.define(),gk=ye.define(),yk={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>$e.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Il=ye.define();function wk(n){return[N1(),Il.of({...yk,...n})]}const _g=ye.define({combine:n=>n.some(e=>e)});function N1(n){return[bk]}const bk=ys.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Il).map(e=>new Hg(n,e)),this.fixed=!n.state.facet(_g);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,s=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(s<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(_g)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=$e.iter(this.view.state.facet(Ho),this.view.viewport.from),s=[],i=this.gutters.map(o=>new vk(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(s.length&&(s=[]),Array.isArray(o.type)){let c=!0;for(let d of o.type)if(d.type==ls.Text&&c){qu(t,s,d.from);for(let u of i)u.line(this.view,d,s);c=!1}else if(d.widget)for(let u of i)u.widget(this.view,d)}else if(o.type==ls.Text){qu(t,s,o.from);for(let c of i)c.line(this.view,o,s)}else if(o.widget)for(let c of i)c.widget(this.view,o);for(let o of i)o.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(Il),t=n.state.facet(Il),s=n.docChanged||n.heightChanged||n.viewportChanged||!$e.eq(n.startState.facet(Ho),n.state.facet(Ho),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(s=!0);else{s=!0;let i=[];for(let o of t){let c=e.indexOf(o);c<0?i.push(new Hg(this.view,o)):(this.gutters[c].update(n),i.push(this.gutters[c]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=i}return s}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let s=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==ut.LTR?{left:s,right:i}:{right:s,left:i}})});function Wg(n){return Array.isArray(n)?n:[n]}function qu(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class vk{constructor(e,t,s){this.gutter=e,this.height=s,this.i=0,this.cursor=$e.iter(e.markers,t.from)}addElement(e,t,s){let{gutter:i}=this,o=(t.top-this.height)/e.scaleY,c=t.height/e.scaleY;if(this.i==i.elements.length){let d=new k1(e,c,o,s);i.elements.push(d),i.dom.appendChild(d.dom)}else i.elements[this.i].update(e,c,o,s);this.height=t.bottom,this.i++}line(e,t,s){let i=[];qu(this.cursor,i,t.from),s.length&&(i=i.concat(s));let o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let c=this.gutter;i.length==0&&!c.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let s=this.gutter.config.widgetMarker(e,t.widget,t),i=s?[s]:null;for(let o of e.state.facet(gk)){let c=o(e,t.widget,t);c&&(i||(i=[])).push(c)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Hg{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let s in t.domEventHandlers)this.dom.addEventListener(s,i=>{let o=i.target,c;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let u=o.getBoundingClientRect();c=(u.top+u.bottom)/2}else c=i.clientY;let d=e.lineBlockAtHeight(c-e.documentTop);t.domEventHandlers[s](e,d,i)&&i.preventDefault()});this.markers=Wg(t.markers(e)),t.initialSpacer&&(this.spacer=new k1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Wg(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let s=e.view.viewport;return!$e.eq(this.markers,t,s.from,s.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class k1{constructor(e,t,s,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,s,i)}update(e,t,s,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=s&&(this.dom.style.marginTop=(this.above=s)?s+"px":""),jk(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let s="cm-gutterElement",i=this.dom.firstChild;for(let o=0,c=0;;){let d=c,u=o<t.length?t[o++]:null,m=!1;if(u){let p=u.elementClass;p&&(s+=" "+p);for(let g=c;g<this.markers.length;g++)if(this.markers[g].compare(u)){d=g,m=!0;break}}else d=this.markers.length;for(;c<d;){let p=this.markers[c++];if(p.toDOM){p.destroy(i);let g=i.nextSibling;i.remove(),i=g}}if(!u)break;u.toDOM&&(m?i=i.nextSibling:this.dom.insertBefore(u.toDOM(e),i)),m&&c++}this.dom.className=s,this.markers=t}destroy(){this.setMarkers(null,[])}}function jk(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const Nk=ye.define(),kk=ye.define(),xi=ye.define({combine(n){return Zl(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let s=Object.assign({},e);for(let i in t){let o=s[i],c=t[i];s[i]=o?(d,u,m)=>o(d,u,m)||c(d,u,m):c}return s}})}});class Qh extends Pn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Jh(n,e){return n.state.facet(xi).formatNumber(e,n.state)}const Sk=Il.compute([xi],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Nk)},lineMarker(e,t,s){return s.some(i=>i.toDOM)?null:new Qh(Jh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,s)=>{for(let i of e.state.facet(kk)){let o=i(e,t,s);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(xi)!=e.state.facet(xi),initialSpacer(e){return new Qh(Jh(e,Vg(e.state.doc.lines)))},updateSpacer(e,t){let s=Jh(t.view,Vg(t.view.state.doc.lines));return s==e.number?e:new Qh(s)},domEventHandlers:n.facet(xi).domEventHandlers,side:"before"}));function Ck(n={}){return[xi.of(n),N1(),Sk]}function Vg(n){let e=9;for(;e<n;)e=e*10+9;return e}const Mk=new class extends Pn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Ak=Ho.compute(["selection"],n=>{let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.head).from;i>t&&(t=i,e.push(Mk.range(i)))}return $e.of(e)});function Ek(){return Ak}const Lk=1024;let Pk=0;class Es{constructor(e,t){this.from=e,this.to=t}}class Fe{constructor(e={}){this.id=Pk++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=as.match(e)),t=>{let s=e(t);return s===void 0?null:[this,s]}}}Fe.closedBy=new Fe({deserialize:n=>n.split(" ")});Fe.openedBy=new Fe({deserialize:n=>n.split(" ")});Fe.group=new Fe({deserialize:n=>n.split(" ")});Fe.isolate=new Fe({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Fe.contextHash=new Fe({perNode:!0});Fe.lookAhead=new Fe({perNode:!0});Fe.mounted=new Fe({perNode:!0});class Ni{constructor(e,t,s,i=!1){this.tree=e,this.overlay=t,this.parser=s,this.bracketed=i}static get(e){return e&&e.props&&e.props[Fe.mounted.id]}}const Tk=Object.create(null);class as{constructor(e,t,s,i=0){this.name=e,this.props=t,this.id=s,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):Tk,s=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new as(e.name||"",t,e.id,s);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Fe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let s in e)for(let i of s.split(" "))t[i]=e[s];return s=>{for(let i=s.prop(Fe.group),o=-1;o<(i?i.length:0);o++){let c=t[o<0?s.name:i[o]];if(c)return c}}}}as.none=new as("",Object.create(null),0,8);class S1{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let s of this.types){let i=null;for(let o of e){let c=o(s);if(c){i||(i=Object.assign({},s.props));let d=c[1],u=c[0];u.combine&&u.id in i&&(d=u.combine(i[u.id],d)),i[u.id]=d}}t.push(i?new as(s.name,i,s.id,s.flags):s)}return new S1(t)}}const Eo=new WeakMap,Ug=new WeakMap;var Ge;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(Ge||(Ge={}));class mt{constructor(e,t,s,i,o){if(this.type=e,this.children=t,this.positions=s,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[c,d]of o)this.props[typeof c=="number"?c:c.id]=d}}toString(){let e=Ni.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let s of this.children){let i=s.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new uc(this.topNode,e)}cursorAt(e,t=0,s=0){let i=Eo.get(this)||this.topNode,o=new uc(i);return o.moveTo(e,t),Eo.set(this,o._tree),o}get topNode(){return new $t(this,0,0,null)}resolve(e,t=0){let s=ql(Eo.get(this)||this.topNode,e,t,!1);return Eo.set(this,s),s}resolveInner(e,t=0){let s=ql(Ug.get(this)||this.topNode,e,t,!0);return Ug.set(this,s),s}resolveStack(e,t=0){return Ok(this,e,t)}iterate(e){let{enter:t,leave:s,from:i=0,to:o=this.length}=e,c=e.mode||0,d=(c&Ge.IncludeAnonymous)>0;for(let u=this.cursor(c|Ge.IncludeAnonymous);;){let m=!1;if(u.from<=o&&u.to>=i&&(!d&&u.type.isAnonymous||t(u)!==!1)){if(u.firstChild())continue;m=!0}for(;m&&s&&(d||!u.type.isAnonymous)&&s(u),!u.nextSibling();){if(!u.parent())return;m=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Df(as.none,this.children,this.positions,0,this.children.length,0,this.length,(t,s,i)=>new mt(this.type,t,s,i,this.propValues),e.makeTree||((t,s,i)=>new mt(as.none,t,s,i)))}static build(e){return Bk(e)}}mt.empty=new mt(as.none,[],[],0);class Pf{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Pf(this.buffer,this.index)}}class ur{constructor(e,t,s){this.buffer=e,this.length=t,this.set=s}get type(){return as.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],s=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,s==e)return o;let c=[];for(;e<s;)c.push(this.childString(e)),e=this.buffer[e+3];return o+"("+c.join(",")+")"}findChild(e,t,s,i,o){let{buffer:c}=this,d=-1;for(let u=e;u!=t&&!(C1(o,i,c[u+1],c[u+2])&&(d=u,s>0));u=c[u+3]);return d}slice(e,t,s){let i=this.buffer,o=new Uint16Array(t-e),c=0;for(let d=e,u=0;d<t;){o[u++]=i[d++],o[u++]=i[d++]-s;let m=o[u++]=i[d++]-s;o[u++]=i[d++]-e,c=Math.max(c,m)}return new ur(o,c,this.set)}}function C1(n,e,t,s){switch(n){case-2:return t<e;case-1:return s>=e&&t<e;case 0:return t<e&&s>e;case 1:return t<=e&&s>e;case 2:return s>e;case 4:return!0}}function ql(n,e,t,s){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let c=!s&&n instanceof $t&&n.index<0?null:n.parent;if(!c)return n;n=c}let o=s?0:Ge.IgnoreOverlays;if(s)for(let c=n,d=c.parent;d;c=d,d=c.parent)c instanceof $t&&c.index<0&&((i=d.enter(e,t,o))===null||i===void 0?void 0:i.from)!=c.from&&(n=d);for(;;){let c=n.enter(e,t,o);if(!c)return n;n=c}}class M1{cursor(e=0){return new uc(this,e)}getChild(e,t=null,s=null){let i=qg(this,e,t,s);return i.length?i[0]:null}getChildren(e,t=null,s=null){return qg(this,e,t,s)}resolve(e,t=0){return ql(this,e,t,!1)}resolveInner(e,t=0){return ql(this,e,t,!0)}matchContext(e){return Gu(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),s=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(s=t,t=i.prevSibling):t=i}return s}get node(){return this}get next(){return this.parent}}class $t extends M1{constructor(e,t,s,i){super(),this._tree=e,this.from=t,this.index=s,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,s,i,o=0){for(let c=this;;){for(let{children:d,positions:u}=c._tree,m=t>0?d.length:-1;e!=m;e+=t){let p=d[e],g=u[e]+c.from,y;if(!(!(o&Ge.EnterBracketed&&p instanceof mt&&(y=Ni.get(p))&&!y.overlay&&y.bracketed&&s>=g&&s<=g+p.length)&&!C1(i,s,g,g+p.length))){if(p instanceof ur){if(o&Ge.ExcludeBuffers)continue;let b=p.findChild(0,p.buffer.length,t,s-g,i);if(b>-1)return new hn(new Dk(c,p,e,g),null,b)}else if(o&Ge.IncludeAnonymous||!p.type.isAnonymous||Tf(p)){let b;if(!(o&Ge.IgnoreMounts)&&(b=Ni.get(p))&&!b.overlay)return new $t(b.tree,g,e,c);let v=new $t(p,g,e,c);return o&Ge.IncludeAnonymous||!v.type.isAnonymous?v:v.nextChild(t<0?p.children.length-1:0,t,s,i,o)}}}if(o&Ge.IncludeAnonymous||!c.type.isAnonymous||(c.index>=0?e=c.index+t:e=t<0?-1:c._parent._tree.children.length,c=c._parent,!c))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,s=0){let i;if(!(s&Ge.IgnoreOverlays)&&(i=Ni.get(this._tree))&&i.overlay){let o=e-this.from,c=s&Ge.EnterBracketed&&i.bracketed;for(let{from:d,to:u}of i.overlay)if((t>0||c?d<=o:d<o)&&(t<0||c?u>=o:u>o))return new $t(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,s)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function qg(n,e,t,s){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let c=!1;!c;)if(c=i.type.is(t),!i.nextSibling())return o}for(;;){if(s!=null&&i.type.is(s))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return s==null?o:[]}}function Gu(n,e,t=e.length-1){for(let s=n;t>=0;s=s.parent){if(!s)return!1;if(!s.type.isAnonymous){if(e[t]&&e[t]!=s.name)return!1;t--}}return!0}class Dk{constructor(e,t,s,i){this.parent=e,this.buffer=t,this.index=s,this.start=i}}class hn extends M1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,s){super(),this.context=e,this._parent=t,this.index=s,this.type=e.buffer.set.types[e.buffer.buffer[s]]}child(e,t,s){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,s);return o<0?null:new hn(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,s=0){if(s&Ge.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new hn(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new hn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new hn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:s}=this.context,i=this.index+4,o=s.buffer[this.index+3];if(o>i){let c=s.buffer[this.index+1];e.push(s.slice(i,o,c)),t.push(0)}return new mt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function A1(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let c=n[o];(c.from>t.from||c.to<t.to)&&(t=c,e=o)}let s=t instanceof $t&&t.index<0?null:t.parent,i=n.slice();return s?i[e]=s:i.splice(e,1),new Rk(i,t)}class Rk{constructor(e,t){this.heads=e,this.node=t}get next(){return A1(this.heads)}}function Ok(n,e,t){let s=n.resolveInner(e,t),i=null;for(let o=s instanceof $t?s:s.context.parent;o;o=o.parent)if(o.index<0){let c=o.parent;(i||(i=[s])).push(c.resolve(e,t)),o=c}else{let c=Ni.get(o.tree);if(c&&c.overlay&&c.overlay[0].from<=e&&c.overlay[c.overlay.length-1].to>=e){let d=new $t(c.tree,c.overlay[0].from+o.from,-1,o);(i||(i=[s])).push(ql(d,e,t,!1))}}return i?A1(i):s}class uc{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~Ge.EnterBracketed,e instanceof $t)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let s=e._parent;s;s=s._parent)this.stack.unshift(s.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:s,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=s+i.buffer[e+1],this.to=s+i.buffer[e+2],!0}yield(e){return e?e instanceof $t?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,s){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,s,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,s);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,s=this.mode){return this.buffer?s&Ge.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,s))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ge.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ge.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,s=this.stack.length-1;if(e<0){let i=s<0?0:this.stack[s]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(s<0?t.buffer.length:t.buffer[this.stack[s]+3]))return this.yieldBuf(i)}return s<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,s,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:s}=i)}else({index:t,_parent:s}=this._tree);for(;s;{index:t,_parent:s}=s)if(t>-1)for(let o=t+e,c=e<0?-1:s._tree.children.length;o!=c;o+=e){let d=s._tree.children[o];if(this.mode&Ge.IncludeAnonymous||d instanceof ur||!d.type.isAnonymous||Tf(d))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,s=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let c=e;c;c=c._parent)if(c.index==i){if(i==this.index)return c;t=c,s=o+1;break e}i=this.stack[--o]}for(let i=s;i<this.stack.length;i++)t=new hn(this.buffer,t,this.stack[i]);return this.bufferNode=new hn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let s=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){s++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!s)return;if(this.nextSibling())break;this.parent(),s--,i=!0}}}matchContext(e){if(!this.buffer)return Gu(this.node.parent,e);let{buffer:t}=this.buffer,{types:s}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Gu(this._tree,e,i);let c=s[t.buffer[this.stack[o]]];if(!c.isAnonymous){if(e[i]&&e[i]!=c.name)return!1;i--}}return!0}}function Tf(n){return n.children.some(e=>e instanceof ur||!e.type.isAnonymous||Tf(e))}function Bk(n){var e;let{buffer:t,nodeSet:s,maxBufferLength:i=Lk,reused:o=[],minRepeatType:c=s.types.length}=n,d=Array.isArray(t)?new Pf(t,t.length):t,u=s.types,m=0,p=0;function g(B,I,O,ne,$,Z){let{id:_,start:V,end:ee,size:ae}=d,ie=p,U=m;if(ae<0)if(d.next(),ae==-1){let P=o[_];O.push(P),ne.push(V-B);return}else if(ae==-3){m=_;return}else if(ae==-4){p=_;return}else throw new RangeError(`Unrecognized record size: ${ae}`);let de=u[_],K,Q,se=V-B;if(ee-V<=i&&(Q=S(d.pos-I,$))){let P=new Uint16Array(Q.size-Q.skip),H=d.pos-Q.size,q=P.length;for(;d.pos>H;)q=k(Q.start,P,q);K=new ur(P,ee-Q.start,s),se=Q.start-B}else{let P=d.pos-ae;d.next();let H=[],q=[],ce=_>=c?_:-1,xe=0,Ce=ee;for(;d.pos>P;)ce>=0&&d.id==ce&&d.size>=0?(d.end<=Ce-i&&(v(H,q,V,xe,d.end,Ce,ce,ie,U),xe=H.length,Ce=d.end),d.next()):Z>2500?y(V,P,H,q):g(V,P,H,q,ce,Z+1);if(ce>=0&&xe>0&&xe<H.length&&v(H,q,V,xe,V,Ce,ce,ie,U),H.reverse(),q.reverse(),ce>-1&&xe>0){let Re=b(de,U);K=Df(de,H,q,0,H.length,0,ee-V,Re,Re)}else K=j(de,H,q,ee-V,ie-ee,U)}O.push(K),ne.push(se)}function y(B,I,O,ne){let $=[],Z=0,_=-1;for(;d.pos>I;){let{id:V,start:ee,end:ae,size:ie}=d;if(ie>4)d.next();else{if(_>-1&&ee<_)break;_<0&&(_=ae-i),$.push(V,ee,ae),Z++,d.next()}}if(Z){let V=new Uint16Array(Z*4),ee=$[$.length-2];for(let ae=$.length-3,ie=0;ae>=0;ae-=3)V[ie++]=$[ae],V[ie++]=$[ae+1]-ee,V[ie++]=$[ae+2]-ee,V[ie++]=ie;O.push(new ur(V,$[2]-ee,s)),ne.push(ee-B)}}function b(B,I){return(O,ne,$)=>{let Z=0,_=O.length-1,V,ee;if(_>=0&&(V=O[_])instanceof mt){if(!_&&V.type==B&&V.length==$)return V;(ee=V.prop(Fe.lookAhead))&&(Z=ne[_]+V.length+ee)}return j(B,O,ne,$,Z,I)}}function v(B,I,O,ne,$,Z,_,V,ee){let ae=[],ie=[];for(;B.length>ne;)ae.push(B.pop()),ie.push(I.pop()+O-$);B.push(j(s.types[_],ae,ie,Z-$,V-Z,ee)),I.push($-O)}function j(B,I,O,ne,$,Z,_){if(Z){let V=[Fe.contextHash,Z];_=_?[V].concat(_):[V]}if($>25){let V=[Fe.lookAhead,$];_=_?[V].concat(_):[V]}return new mt(B,I,O,ne,_)}function S(B,I){let O=d.fork(),ne=0,$=0,Z=0,_=O.end-i,V={size:0,start:0,skip:0};e:for(let ee=O.pos-B;O.pos>ee;){let ae=O.size;if(O.id==I&&ae>=0){V.size=ne,V.start=$,V.skip=Z,Z+=4,ne+=4,O.next();continue}let ie=O.pos-ae;if(ae<0||ie<ee||O.start<_)break;let U=O.id>=c?4:0,de=O.start;for(O.next();O.pos>ie;){if(O.size<0)if(O.size==-3||O.size==-4)U+=4;else break e;else O.id>=c&&(U+=4);O.next()}$=de,ne+=ae,Z+=U}return(I<0||ne==B)&&(V.size=ne,V.start=$,V.skip=Z),V.size>4?V:void 0}function k(B,I,O){let{id:ne,start:$,end:Z,size:_}=d;if(d.next(),_>=0&&ne<c){let V=O;if(_>4){let ee=d.pos-(_-4);for(;d.pos>ee;)O=k(B,I,O)}I[--O]=V,I[--O]=Z-B,I[--O]=$-B,I[--O]=ne}else _==-3?m=ne:_==-4&&(p=ne);return O}let M=[],R=[];for(;d.pos>0;)g(n.start||0,n.bufferStart||0,M,R,-1,0);let E=(e=n.length)!==null&&e!==void 0?e:M.length?R[0]+M[0].length:0;return new mt(u[n.topID],M.reverse(),R.reverse(),E)}const Gg=new WeakMap;function Vo(n,e){if(!n.isAnonymous||e instanceof ur||e.type!=n)return 1;let t=Gg.get(e);if(t==null){t=1;for(let s of e.children){if(s.type!=n||!(s instanceof mt)){t=1;break}t+=Vo(n,s)}Gg.set(e,t)}return t}function Df(n,e,t,s,i,o,c,d,u){let m=0;for(let v=s;v<i;v++)m+=Vo(n,e[v]);let p=Math.ceil(m*1.5/8),g=[],y=[];function b(v,j,S,k,M){for(let R=S;R<k;){let E=R,B=j[R],I=Vo(n,v[R]);for(R++;R<k;R++){let O=Vo(n,v[R]);if(I+O>=p)break;I+=O}if(R==E+1){if(I>p){let O=v[E];b(O.children,O.positions,0,O.children.length,j[E]+M);continue}g.push(v[E])}else{let O=j[R-1]+v[R-1].length-B;g.push(Df(n,v,j,E,R,B,O,null,u))}y.push(B+M-o)}}return b(e,t,s,i,0),(d||u)(g,y,c)}class j5{constructor(){this.map=new WeakMap}setBuffer(e,t,s){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,s)}getBuffer(e,t){let s=this.map.get(e);return s&&s.get(t)}set(e,t){e instanceof hn?this.setBuffer(e.context.buffer,e.index,t):e instanceof $t&&this.map.set(e.tree,t)}get(e){return e instanceof hn?this.getBuffer(e.context.buffer,e.index):e instanceof $t?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class An{constructor(e,t,s,i,o=!1,c=!1){this.from=e,this.to=t,this.tree=s,this.offset=i,this.open=(o?1:0)|(c?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],s=!1){let i=[new An(0,e.length,e,0,!1,s)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,s=128){if(!t.length)return e;let i=[],o=1,c=e.length?e[0]:null;for(let d=0,u=0,m=0;;d++){let p=d<t.length?t[d]:null,g=p?p.fromA:1e9;if(g-u>=s)for(;c&&c.from<g;){let y=c;if(u>=y.from||g<=y.to||m){let b=Math.max(y.from,u)-m,v=Math.min(y.to,g)-m;y=b>=v?null:new An(b,v,y.tree,y.offset+m,d>0,!!p)}if(y&&i.push(y),c.to>g)break;c=o<e.length?e[o++]:null}if(!p)break;u=p.toA,m=p.toA-p.toB}return i}}class Fk{startParse(e,t,s){return typeof e=="string"&&(e=new Ik(e)),s=s?s.length?s.map(i=>new Es(i.from,i.to)):[new Es(0,0)]:[new Es(0,e.length)],this.createParse(e,t||[],s)}parse(e,t,s){let i=this.startParse(e,t,s);for(;;){let o=i.advance();if(o)return o}}}class Ik{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function N5(n){return(e,t,s,i)=>new $k(e,n,t,s,i)}class Kg{constructor(e,t,s,i,o,c){this.parser=e,this.parse=t,this.overlay=s,this.bracketed=i,this.target=o,this.from=c}}function Qg(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class zk{constructor(e,t,s,i,o,c,d,u){this.parser=e,this.predicate=t,this.mounts=s,this.index=i,this.start=o,this.bracketed=c,this.target=d,this.prev=u,this.depth=0,this.ranges=[]}}const Ku=new Fe({perNode:!0});class $k{constructor(e,t,s,i,o){this.nest=t,this.input=s,this.fragments=i,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let s=this.baseParse.advance();if(!s)return null;if(this.baseParse=null,this.baseTree=s,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let s=this.baseTree;return this.stoppedAt!=null&&(s=new mt(s.type,s.children,s.positions,s.length,s.propValues.concat([[Ku,this.stoppedAt]]))),s}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let s=Object.assign(Object.create(null),e.target.props);s[Fe.mounted.id]=new Ni(t,e.overlay,e.parser,e.bracketed),e.target.props=s}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Hk(this.fragments),t=null,s=null,i=new uc(new $t(this.baseTree,this.ranges[0].from,0,null),Ge.IncludeAnonymous|Ge.IgnoreMounts);e:for(let o,c;;){let d=!0,u;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)d=!1;else if(e.hasNode(i)){if(t){let m=t.mounts.find(p=>p.frag.from<=i.from&&p.frag.to>=i.to&&p.mount.overlay);if(m)for(let p of m.mount.overlay){let g=p.from+m.pos,y=p.to+m.pos;g>=i.from&&y<=i.to&&!t.ranges.some(b=>b.from<y&&b.to>g)&&t.ranges.push({from:g,to:y})}}d=!1}else if(s&&(c=_k(s.ranges,i.from,i.to)))d=c!=2;else if(!i.type.isAnonymous&&(o=this.nest(i,this.input))&&(i.from<i.to||!o.overlay)){i.tree||(Wk(i),t&&t.depth++,s&&s.depth++);let m=e.findMounts(i.from,o.parser);if(typeof o.overlay=="function")t=new zk(o.parser,o.overlay,m,this.inner.length,i.from,!!o.bracketed,i.tree,t);else{let p=Xg(this.ranges,o.overlay||(i.from<i.to?[new Es(i.from,i.to)]:[]));p.length&&Qg(p),(p.length||!o.overlay)&&this.inner.push(new Kg(o.parser,p.length?o.parser.startParse(this.input,Zg(m,p),p):o.parser.startParse(""),o.overlay?o.overlay.map(g=>new Es(g.from-i.from,g.to-i.from)):null,!!o.bracketed,i.tree,p.length?p[0].from:i.from)),o.overlay?p.length&&(s={ranges:p,depth:0,prev:s}):d=!1}}else if(t&&(u=t.predicate(i))&&(u===!0&&(u=new Es(i.from,i.to)),u.from<u.to)){let m=t.ranges.length-1;m>=0&&t.ranges[m].to==u.from?t.ranges[m]={from:t.ranges[m].from,to:u.to}:t.ranges.push(u)}if(d&&i.firstChild())t&&t.depth++,s&&s.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let m=Xg(this.ranges,t.ranges);m.length&&(Qg(m),this.inner.splice(t.index,0,new Kg(t.parser,t.parser.startParse(this.input,Zg(t.mounts,m),m),t.ranges.map(p=>new Es(p.from-t.start,p.to-t.start)),t.bracketed,t.target,m[0].from))),t=t.prev}s&&!--s.depth&&(s=s.prev)}}}}function _k(n,e,t){for(let s of n){if(s.from>=t)break;if(s.to>e)return s.from<=e&&s.to>=t?2:1}return 0}function Jg(n,e,t,s,i,o){if(e<t){let c=n.buffer[e+1];s.push(n.slice(e,t,c)),i.push(c-o)}}function Wk(n){let{node:e}=n,t=[],s=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,o=i.children.indexOf(s),c=i.children[o],d=c.buffer,u=[o];function m(p,g,y,b,v,j){let S=t[j],k=[],M=[];Jg(c,p,S,k,M,b);let R=d[S+1],E=d[S+2];u.push(k.length);let B=j?m(S+4,d[S+3],c.set.types[d[S]],R,E-R,j-1):e.toTree();return k.push(B),M.push(R-b),Jg(c,d[S+3],g,k,M,b),new mt(y,k,M,v)}i.children[o]=m(0,d.length,as.none,0,c.length,t.length-1);for(let p of u){let g=n.tree.children[p],y=n.tree.positions[p];n.yield(new $t(g,y+n.from,p,n._tree))}}class Yg{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Ge.IncludeAnonymous|Ge.IgnoreMounts)}moveTo(e){let{cursor:t}=this,s=e-this.offset;for(;!this.done&&t.from<s;)t.to>=e&&t.enter(s,1,Ge.IgnoreOverlays|Ge.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof mt)t=t.children[0];else break}return!1}}class Hk{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let s=this.curFrag=e[0];this.curTo=(t=s.tree.prop(Ku))!==null&&t!==void 0?t:s.to,this.inner=new Yg(s.tree,-s.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Ku))!==null&&e!==void 0?e:t.to,this.inner=new Yg(t.tree,-t.offset)}}findMounts(e,t){var s;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let c=(s=o.tree)===null||s===void 0?void 0:s.prop(Fe.mounted);if(c&&c.parser==t)for(let d=this.fragI;d<this.fragments.length;d++){let u=this.fragments[d];if(u.from>=o.to)break;u.tree==this.curFrag.tree&&i.push({frag:u,pos:o.from-u.offset,mount:c})}}}return i}}function Xg(n,e){let t=null,s=e;for(let i=1,o=0;i<n.length;i++){let c=n[i-1].to,d=n[i].from;for(;o<s.length;o++){let u=s[o];if(u.from>=d)break;u.to<=c||(t||(s=t=e.slice()),u.from<c?(t[o]=new Es(u.from,c),u.to>d&&t.splice(o+1,0,new Es(d,u.to))):u.to>d?t[o--]=new Es(d,u.to):t.splice(o--,1))}}return s}function Vk(n,e,t,s){let i=0,o=0,c=!1,d=!1,u=-1e9,m=[];for(;;){let p=i==n.length?1e9:c?n[i].to:n[i].from,g=o==e.length?1e9:d?e[o].to:e[o].from;if(c!=d){let y=Math.max(u,t),b=Math.min(p,g,s);y<b&&m.push(new Es(y,b))}if(u=Math.min(p,g),u==1e9)break;p==u&&(c?(c=!1,i++):c=!0),g==u&&(d?(d=!1,o++):d=!0)}return m}function Zg(n,e){let t=[];for(let{pos:s,mount:i,frag:o}of n){let c=s+(i.overlay?i.overlay[0].from:0),d=c+i.tree.length,u=Math.max(o.from,c),m=Math.min(o.to,d);if(i.overlay){let p=i.overlay.map(y=>new Es(y.from+s,y.to+s)),g=Vk(e,p,u,m);for(let y=0,b=u;;y++){let v=y==g.length,j=v?m:g[y].from;if(j>b&&t.push(new An(b,j,i.tree,-c,o.from>=b||o.openStart,o.to<=j||o.openEnd)),v)break;b=g[y].to}}else t.push(new An(u,m,i.tree,-c,o.from>=c||o.openStart,o.to<=d||o.openEnd))}return t}let Uk=0;class Ms{constructor(e,t,s,i){this.name=e,this.set=t,this.base=s,this.modified=i,this.id=Uk++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let s=typeof e=="string"?e:"?";if(e instanceof Ms&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Ms(s,[],null,[]);if(i.set.push(i),t)for(let o of t.set)i.set.push(o);return i}static defineModifier(e){let t=new fc(e);return s=>s.modified.indexOf(t)>-1?s:fc.get(s.base||s,s.modified.concat(t).sort((i,o)=>i.id-o.id))}}let qk=0;class fc{constructor(e){this.name=e,this.instances=[],this.id=qk++}static get(e,t){if(!t.length)return e;let s=t[0].instances.find(d=>d.base==e&&Gk(t,d.modified));if(s)return s;let i=[],o=new Ms(e.name,i,e,t);for(let d of t)d.instances.push(o);let c=Kk(t);for(let d of e.set)if(!d.modified.length)for(let u of c)i.push(fc.get(d,u));return o}}function Gk(n,e){return n.length==e.length&&n.every((t,s)=>t==e[s])}function Kk(n){let e=[[]];for(let t=0;t<n.length;t++)for(let s=0,i=e.length;s<i;s++)e.push(e[s].concat(n[t]));return e.sort((t,s)=>s.length-t.length)}function Qk(n){let e=Object.create(null);for(let t in n){let s=n[t];Array.isArray(s)||(s=[s]);for(let i of t.split(" "))if(i){let o=[],c=2,d=i;for(let g=0;;){if(d=="..."&&g>0&&g+3==i.length){c=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(d);if(!y)throw new RangeError("Invalid path: "+i);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==i.length)break;let b=i[g++];if(g==i.length&&b=="!"){c=0;break}if(b!="/")throw new RangeError("Invalid path: "+i);d=i.slice(g)}let u=o.length-1,m=o[u];if(!m)throw new RangeError("Invalid path: "+i);let p=new Gl(s,c,u>0?o.slice(0,u):null);e[m]=p.sort(e[m])}}return E1.add(e)}const E1=new Fe({combine(n,e){let t,s,i;for(;n||e;){if(!n||e&&n.depth>=e.depth?(i=e,e=e.next):(i=n,n=n.next),t&&t.mode==i.mode&&!i.context&&!t.context)continue;let o=new Gl(i.tags,i.mode,i.context);t?t.next=o:s=o,t=o}return s}});class Gl{constructor(e,t,s,i){this.tags=e,this.mode=t,this.context=s,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Gl.empty=new Gl([],2,null);function L1(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let c of o.tag)t[c.id]=o.class;let{scope:s,all:i=null}=e||{};return{style:o=>{let c=i;for(let d of o)for(let u of d.set){let m=t[u.id];if(m){c=c?c+" "+m:m;break}}return c},scope:s}}function Jk(n,e){let t=null;for(let s of n){let i=s.style(e);i&&(t=t?t+" "+i:i)}return t}function Yk(n,e,t,s=0,i=n.length){let o=new Xk(s,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),s,i,"",o.highlighters),o.flush(i)}class Xk{constructor(e,t,s){this.at=e,this.highlighters=t,this.span=s,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,s,i,o){let{type:c,from:d,to:u}=e;if(d>=s||u<=t)return;c.isTop&&(o=this.highlighters.filter(b=>!b.scope||b.scope(c)));let m=i,p=Zk(e)||Gl.empty,g=Jk(o,p.tags);if(g&&(m&&(m+=" "),m+=g,p.mode==1&&(i+=(i?" ":"")+g)),this.startSpan(Math.max(t,d),m),p.opaque)return;let y=e.tree&&e.tree.prop(Fe.mounted);if(y&&y.overlay){let b=e.node.enter(y.overlay[0].from+d,1),v=this.highlighters.filter(S=>!S.scope||S.scope(y.tree.type)),j=e.firstChild();for(let S=0,k=d;;S++){let M=S<y.overlay.length?y.overlay[S]:null,R=M?M.from+d:u,E=Math.max(t,k),B=Math.min(s,R);if(E<B&&j)for(;e.from<B&&(this.highlightRange(e,E,B,i,o),this.startSpan(Math.min(B,e.to),m),!(e.to>=R||!e.nextSibling())););if(!M||R>s)break;k=M.to+d,k>t&&(this.highlightRange(b.cursor(),Math.max(t,M.from+d),Math.min(s,k),"",v),this.startSpan(Math.min(s,k),m))}j&&e.parent()}else if(e.firstChild()){y&&(i="");do if(!(e.to<=t)){if(e.from>=s)break;this.highlightRange(e,t,s,i,o),this.startSpan(Math.min(s,e.to),m)}while(e.nextSibling());e.parent()}}}function Zk(n){let e=n.type.prop(E1);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const oe=Ms.define,Lo=oe(),Xn=oe(),e0=oe(Xn),t0=oe(Xn),Zn=oe(),Po=oe(Zn),Yh=oe(Zn),an=oe(),Lr=oe(an),rn=oe(),ln=oe(),Qu=oe(),kl=oe(Qu),To=oe(),G={comment:Lo,lineComment:oe(Lo),blockComment:oe(Lo),docComment:oe(Lo),name:Xn,variableName:oe(Xn),typeName:e0,tagName:oe(e0),propertyName:t0,attributeName:oe(t0),className:oe(Xn),labelName:oe(Xn),namespace:oe(Xn),macroName:oe(Xn),literal:Zn,string:Po,docString:oe(Po),character:oe(Po),attributeValue:oe(Po),number:Yh,integer:oe(Yh),float:oe(Yh),bool:oe(Zn),regexp:oe(Zn),escape:oe(Zn),color:oe(Zn),url:oe(Zn),keyword:rn,self:oe(rn),null:oe(rn),atom:oe(rn),unit:oe(rn),modifier:oe(rn),operatorKeyword:oe(rn),controlKeyword:oe(rn),definitionKeyword:oe(rn),moduleKeyword:oe(rn),operator:ln,derefOperator:oe(ln),arithmeticOperator:oe(ln),logicOperator:oe(ln),bitwiseOperator:oe(ln),compareOperator:oe(ln),updateOperator:oe(ln),definitionOperator:oe(ln),typeOperator:oe(ln),controlOperator:oe(ln),punctuation:Qu,separator:oe(Qu),bracket:kl,angleBracket:oe(kl),squareBracket:oe(kl),paren:oe(kl),brace:oe(kl),content:an,heading:Lr,heading1:oe(Lr),heading2:oe(Lr),heading3:oe(Lr),heading4:oe(Lr),heading5:oe(Lr),heading6:oe(Lr),contentSeparator:oe(an),list:oe(an),quote:oe(an),emphasis:oe(an),strong:oe(an),link:oe(an),monospace:oe(an),strikethrough:oe(an),inserted:oe(),deleted:oe(),changed:oe(),invalid:oe(),meta:To,documentMeta:oe(To),annotation:oe(To),processingInstruction:oe(To),definition:Ms.defineModifier("definition"),constant:Ms.defineModifier("constant"),function:Ms.defineModifier("function"),standard:Ms.defineModifier("standard"),local:Ms.defineModifier("local"),special:Ms.defineModifier("special")};for(let n in G){let e=G[n];e instanceof Ms&&(e.name=n)}L1([{tag:G.link,class:"tok-link"},{tag:G.heading,class:"tok-heading"},{tag:G.emphasis,class:"tok-emphasis"},{tag:G.strong,class:"tok-strong"},{tag:G.keyword,class:"tok-keyword"},{tag:G.atom,class:"tok-atom"},{tag:G.bool,class:"tok-bool"},{tag:G.url,class:"tok-url"},{tag:G.labelName,class:"tok-labelName"},{tag:G.inserted,class:"tok-inserted"},{tag:G.deleted,class:"tok-deleted"},{tag:G.literal,class:"tok-literal"},{tag:G.string,class:"tok-string"},{tag:G.number,class:"tok-number"},{tag:[G.regexp,G.escape,G.special(G.string)],class:"tok-string2"},{tag:G.variableName,class:"tok-variableName"},{tag:G.local(G.variableName),class:"tok-variableName tok-local"},{tag:G.definition(G.variableName),class:"tok-variableName tok-definition"},{tag:G.special(G.variableName),class:"tok-variableName2"},{tag:G.definition(G.propertyName),class:"tok-propertyName tok-definition"},{tag:G.typeName,class:"tok-typeName"},{tag:G.namespace,class:"tok-namespace"},{tag:G.className,class:"tok-className"},{tag:G.macroName,class:"tok-macroName"},{tag:G.propertyName,class:"tok-propertyName"},{tag:G.operator,class:"tok-operator"},{tag:G.comment,class:"tok-comment"},{tag:G.meta,class:"tok-meta"},{tag:G.invalid,class:"tok-invalid"},{tag:G.punctuation,class:"tok-punctuation"}]);var Xh;const gi=new Fe;function e4(n){return ye.define({combine:n?e=>e.concat(n):void 0})}const t4=new Fe;class Vs{constructor(e,t,s=[],i=""){this.data=e,this.name=i,He.prototype.hasOwnProperty("tree")||Object.defineProperty(He.prototype,"tree",{get(){return xn(this)}}),this.parser=t,this.extension=[Ti.of(this),He.languageData.of((o,c,d)=>{let u=s0(o,c,d),m=u.type.prop(gi);if(!m)return[];let p=o.facet(m),g=u.type.prop(t4);if(g){let y=u.resolve(c-u.from,d);for(let b of g)if(b.test(y,o)){let v=o.facet(b.facet);return b.type=="replace"?v:v.concat(p)}}return p})].concat(s)}isActiveAt(e,t,s=-1){return s0(e,t,s).type.prop(gi)==this.data}findRegions(e){let t=e.facet(Ti);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let s=[],i=(o,c)=>{if(o.prop(gi)==this.data){s.push({from:c,to:c+o.length});return}let d=o.prop(Fe.mounted);if(d){if(d.tree.prop(gi)==this.data){if(d.overlay)for(let u of d.overlay)s.push({from:u.from+c,to:u.to+c});else s.push({from:c,to:c+o.length});return}else if(d.overlay){let u=s.length;if(i(d.tree,d.overlay[0].from+c),s.length>u)return}}for(let u=0;u<o.children.length;u++){let m=o.children[u];m instanceof mt&&i(m,o.positions[u]+c)}};return i(xn(e),0),s}get allowsNesting(){return!0}}Vs.setState=Ke.define();function s0(n,e,t){let s=n.facet(Ti),i=xn(n).topNode;if(!s||s.allowsNesting)for(let o=i;o;o=o.enter(e,t,Ge.ExcludeBuffers|Ge.EnterBracketed))o.type.isTop&&(i=o);return i}class Ju extends Vs{constructor(e,t,s){super(e,t,[],s),this.parser=t}static define(e){let t=e4(e.languageData);return new Ju(t,e.parser.configure({props:[gi.add(s=>s.isTop?t:void 0)]}),e.name)}configure(e,t){return new Ju(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function xn(n){let e=n.field(Vs.state,!1);return e?e.tree:mt.empty}class s4{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let s=this.cursorPos-this.string.length;return e<s||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-s,t-s)}}let Sl=null;class mc{constructor(e,t,s=[],i,o,c,d,u){this.parser=e,this.state=t,this.fragments=s,this.tree=i,this.treeLen=o,this.viewport=c,this.skipped=d,this.scheduleOn=u,this.parse=null,this.tempSkipped=[]}static create(e,t,s){return new mc(e,t,[],mt.empty,0,s,[],null)}startParse(){return this.parser.startParse(new s4(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=mt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var s;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(An.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(s=this.parse.stoppedAt)!==null&&s!==void 0?s:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(An.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Sl;Sl=this;try{return e()}finally{Sl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=n0(e,t.from,t.to);return e}changes(e,t){let{fragments:s,tree:i,treeLen:o,viewport:c,skipped:d}=this;if(this.takeTree(),!e.empty){let u=[];if(e.iterChangedRanges((m,p,g,y)=>u.push({fromA:m,toA:p,fromB:g,toB:y})),s=An.applyChanges(s,u),i=mt.empty,o=0,c={from:e.mapPos(c.from,-1),to:e.mapPos(c.to,1)},this.skipped.length){d=[];for(let m of this.skipped){let p=e.mapPos(m.from,1),g=e.mapPos(m.to,-1);p<g&&d.push({from:p,to:g})}}}return new mc(this.parser,t,s,i,o,c,d,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let s=0;s<this.skipped.length;s++){let{from:i,to:o}=this.skipped[s];i<e.to&&o>e.from&&(this.fragments=n0(this.fragments,i,o),this.skipped.splice(s--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Fk{createParse(t,s,i){let o=i[0].from,c=i[i.length-1].to;return{parsedPos:o,advance(){let u=Sl;if(u){for(let m of i)u.tempSkipped.push(m);e&&(u.scheduleOn=u.scheduleOn?Promise.all([u.scheduleOn,e]):e)}return this.parsedPos=c,new mt(as.none,[],[],c-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Sl}}function n0(n,e,t){return An.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Pi{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),s=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,s)||t.takeTree(),new Pi(t)}static init(e){let t=Math.min(3e3,e.doc.length),s=mc.create(e.facet(Ti).parser,e,{from:0,to:t});return s.work(20,t)||s.takeTree(),new Pi(s)}}Vs.state=Ks.define({create:Pi.init,update(n,e){for(let t of e.effects)if(t.is(Vs.setState))return t.value;return e.startState.facet(Ti)!=e.state.facet(Ti)?Pi.init(e.state):n.apply(e)}});let P1=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(P1=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Zh=typeof navigator<"u"&&(!((Xh=navigator.scheduling)===null||Xh===void 0)&&Xh.isInputPending)?()=>navigator.scheduling.isInputPending():null,n4=ys.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Vs.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Vs.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=P1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:s,viewport:{to:i}}=this.view,o=s.field(Vs.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let c=Date.now()+Math.min(this.chunkBudget,100,e&&!Zh?Math.max(25,e.timeRemaining()-5):1e9),d=o.context.treeLen<i&&s.doc.length>i+1e3,u=o.context.work(()=>Zh&&Zh()||Date.now()>c,i+(d?0:1e5));this.chunkBudget-=Date.now()-t,(u||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Vs.setState.of(new Pi(o.context))})),this.chunkBudget>0&&!(u&&!d)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>dn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ti=ye.define({combine(n){return n.length?n[0]:null},enables:n=>[Vs.state,n4,ve.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class S5{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class T1{constructor(e,t,s,i,o,c=void 0){this.name=e,this.alias=t,this.extensions=s,this.filename=i,this.loadFunc=o,this.support=c,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:s}=e;if(!t){if(!s)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(s)}return new T1(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,t,s)}static matchFilename(e,t){for(let i of e)if(i.filename&&i.filename.test(t))return i;let s=/\.([^.]+)$/.exec(t);if(s){for(let i of e)if(i.extensions.indexOf(s[1])>-1)return i}return null}static matchLanguageName(e,t,s=!0){t=t.toLowerCase();for(let i of e)if(i.alias.some(o=>o==t))return i;if(s)for(let i of e)for(let o of i.alias){let c=t.indexOf(o);if(c>-1&&(o.length>2||!/\w/.test(t[c-1])&&!/\w/.test(t[c+o.length])))return i}return null}}const r4=ye.define(),Rf=ye.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function pc(n){let e=n.facet(Rf);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function xc(n,e){let t="",s=n.tabSize,i=n.facet(Rf)[0];if(i=="	"){for(;e>=s;)t+="	",e-=s;i=" "}for(let o=0;o<e;o++)t+=i;return t}function D1(n,e){n instanceof He&&(n=new Bc(n));for(let s of n.state.facet(r4)){let i=s(n,e);if(i!==void 0)return i}let t=xn(n.state);return t.length>=e?l4(n,t,e):null}class Bc{constructor(e,t={}){this.state=e,this.options=t,this.unit=pc(e)}lineAt(e,t=1){let s=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=s.from&&i<=s.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:s.text.slice(i-s.from),from:i}:{text:s.text.slice(0,i-s.from),from:s.from}:s}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:s,from:i}=this.lineAt(e,t);return s.slice(e-i,Math.min(s.length,e+100-i))}column(e,t=1){let{text:s,from:i}=this.lineAt(e,t),o=this.countColumn(s,e-i),c=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return c>-1&&(o+=c-this.countColumn(s,s.search(/\S|$/))),o}countColumn(e,t=e.length){return Ec(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:s,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let c=o(i);if(c>-1)return c}return this.countColumn(s,s.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const i4=new Fe;function l4(n,e,t){let s=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=s.node){let o=[];for(let c=i;c&&!(c.from<s.node.from||c.to>s.node.to||c.from==s.node.from&&c.type==s.node.type);c=c.parent)o.push(c);for(let c=o.length-1;c>=0;c--)s={node:o[c],next:s}}return R1(s,n,t)}function R1(n,e,t){for(let s=n;s;s=s.next){let i=o4(s.node);if(i)return i(Of.create(e,t,s))}return 0}function a4(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function o4(n){let e=n.type.prop(i4);if(e)return e;let t=n.firstChild,s;if(t&&(s=t.type.prop(Fe.closedBy))){let i=n.lastChild,o=i&&s.indexOf(i.name)>-1;return c=>O1(c,!0,1,void 0,o&&!a4(c)?i.from:void 0)}return n.parent==null?c4:null}function c4(){return 0}class Of extends Bc{constructor(e,t,s){super(e.state,e.options),this.base=e,this.pos=t,this.context=s}get node(){return this.context.node}static create(e,t,s){return new Of(e,t,s)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let s=e.resolve(t.from);for(;s.parent&&s.parent.from==s.from;)s=s.parent;if(d4(s,e))break;t=this.state.doc.lineAt(s.from)}return this.lineIndent(t.from)}continue(){return R1(this.context.next,this.base,this.pos)}}function d4(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function h4(n){let e=n.node,t=e.childAfter(e.from),s=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),c=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let d=t.to;;){let u=e.childAfter(d);if(!u||u==s)return null;if(!u.type.isSkipped){if(u.from>=c)return null;let m=/^ */.exec(o.text.slice(t.to-o.from))[0].length;return{from:t.from,to:t.to+m}}d=u.to}}function C5({closing:n,align:e=!0,units:t=1}){return s=>O1(s,e,t,n)}function O1(n,e,t,s,i){let o=n.textAfter,c=o.match(/^\s*/)[0].length,d=s&&o.slice(c,c+s.length)==s||i==n.pos+c,u=e?h4(n):null;return u?d?n.column(u.from):n.column(u.to):n.baseIndent+(d?0:n.unit*t)}const M5=n=>n.baseIndent;function A5({except:n,units:e=1}={}){return t=>{let s=n&&n.test(t.textAfter);return t.baseIndent+(s?0:e*t.unit)}}const E5=ye.define(),L5=new Fe;function P5(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class na{constructor(e,t){this.specs=e;let s;function i(d){let u=cr.newName();return(s||(s=Object.create(null)))["."+u]=d,u}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,c=t.scope;this.scope=c instanceof Vs?d=>d.prop(gi)==c.data:c?d=>d==c:void 0,this.style=L1(e.map(d=>({tag:d.tag,class:d.class||i(Object.assign({},d,{tag:null}))})),{all:o}).style,this.module=s?new cr(s):null,this.themeType=t.themeType}static define(e,t){return new na(e,t||{})}}const Yu=ye.define(),B1=ye.define({combine(n){return n.length?[n[0]]:null}});function eu(n){let e=n.facet(Yu);return e.length?e:n.facet(B1)}function F1(n,e){let t=[f4],s;return n instanceof na&&(n.module&&t.push(ve.styleModule.of(n.module)),s=n.themeType),e!=null&&e.fallback?t.push(B1.of(n)):s?t.push(Yu.computeN([ve.darkTheme],i=>i.facet(ve.darkTheme)==(s=="dark")?[n]:[])):t.push(Yu.of(n)),t}class u4{constructor(e){this.markCache=Object.create(null),this.tree=xn(e.state),this.decorations=this.buildDeco(e,eu(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=xn(e.state),s=eu(e.state),i=s!=eu(e.startState),{viewport:o}=e.view,c=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!i&&t.type==this.tree.type&&c>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=c):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,s),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return Te.none;let s=new Ci;for(let{from:i,to:o}of e.visibleRanges)Yk(this.tree,t,(c,d,u)=>{s.add(c,d,this.markCache[u]||(this.markCache[u]=Te.mark({class:u})))},i,o);return s.finish()}}const f4=Mc.high(ys.fromClass(u4,{decorations:n=>n.decorations})),m4=na.define([{tag:G.meta,color:"#404740"},{tag:G.link,textDecoration:"underline"},{tag:G.heading,textDecoration:"underline",fontWeight:"bold"},{tag:G.emphasis,fontStyle:"italic"},{tag:G.strong,fontWeight:"bold"},{tag:G.strikethrough,textDecoration:"line-through"},{tag:G.keyword,color:"#708"},{tag:[G.atom,G.bool,G.url,G.contentSeparator,G.labelName],color:"#219"},{tag:[G.literal,G.inserted],color:"#164"},{tag:[G.string,G.deleted],color:"#a11"},{tag:[G.regexp,G.escape,G.special(G.string)],color:"#e40"},{tag:G.definition(G.variableName),color:"#00f"},{tag:G.local(G.variableName),color:"#30a"},{tag:[G.typeName,G.namespace],color:"#085"},{tag:G.className,color:"#167"},{tag:[G.special(G.variableName),G.macroName],color:"#256"},{tag:G.definition(G.propertyName),color:"#00c"},{tag:G.comment,color:"#940"},{tag:G.invalid,color:"#f00"}]),p4=ve.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),I1=1e4,z1="()[]{}",$1=ye.define({combine(n){return Zl(n,{afterCursor:!0,brackets:z1,maxScanDistance:I1,renderMatch:y4})}}),x4=Te.mark({class:"cm-matchingBracket"}),g4=Te.mark({class:"cm-nonmatchingBracket"});function y4(n){let e=[],t=n.matched?x4:g4;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const w4=Ks.define({create(){return Te.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],s=e.state.facet($1);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=un(e.state,i.head,-1,s)||i.head>0&&un(e.state,i.head-1,1,s)||s.afterCursor&&(un(e.state,i.head,1,s)||i.head<e.state.doc.length&&un(e.state,i.head+1,-1,s));o&&(t=t.concat(s.renderMatch(o,e.state)))}return Te.set(t,!0)},provide:n=>ve.decorations.from(n)}),b4=[w4,p4];function v4(n={}){return[$1.of(n),b4]}const j4=new Fe;function Xu(n,e,t){let s=n.prop(e<0?Fe.openedBy:Fe.closedBy);if(s)return s;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Zu(n){let e=n.type.prop(j4);return e?e(n.node):n}function un(n,e,t,s={}){let i=s.maxScanDistance||I1,o=s.brackets||z1,c=xn(n),d=c.resolveInner(e,t);for(let u=d;u;u=u.parent){let m=Xu(u.type,t,o);if(m&&u.from<u.to){let p=Zu(u);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return N4(n,e,t,u,p,m,o)}}return k4(n,e,t,c,d.type,i,o)}function N4(n,e,t,s,i,o,c){let d=s.parent,u={from:i.from,to:i.to},m=0,p=d==null?void 0:d.cursor();if(p&&(t<0?p.childBefore(s.from):p.childAfter(s.to)))do if(t<0?p.to<=s.from:p.from>=s.to){if(m==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let g=Zu(p);return{start:u,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(Xu(p.type,t,c))m++;else if(Xu(p.type,-t,c)){if(m==0){let g=Zu(p);return{start:u,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}m--}}while(t<0?p.prevSibling():p.nextSibling());return{start:u,matched:!1}}function k4(n,e,t,s,i,o,c){let d=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),u=c.indexOf(d);if(u<0||u%2==0!=t>0)return null;let m={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),g=0;for(let y=0;!p.next().done&&y<=o;){let b=p.value;t<0&&(y+=b.length);let v=e+y*t;for(let j=t>0?0:b.length-1,S=t>0?b.length:-1;j!=S;j+=t){let k=c.indexOf(b[j]);if(!(k<0||s.resolveInner(v+j,1).type!=i))if(k%2==0==t>0)g++;else{if(g==1)return{start:m,end:{from:v+j,to:v+j+1},matched:k>>1==u>>1};g--}}t>0&&(y+=b.length)}return p.done?{start:m,matched:!1}:null}const S4=Object.create(null),r0=[as.none],i0=[],l0=Object.create(null),C4=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])C4[n]=M4(S4,e);function tu(n,e){i0.indexOf(n)>-1||(i0.push(n),console.warn(e))}function M4(n,e){let t=[];for(let d of e.split(" ")){let u=[];for(let m of d.split(".")){let p=n[m]||G[m];p?typeof p=="function"?u.length?u=u.map(p):tu(m,`Modifier ${m} used at start of tag`):u.length?tu(m,`Tag ${m} used as modifier`):u=Array.isArray(p)?p:[p]:tu(m,`Unknown highlighting tag ${m}`)}for(let m of u)t.push(m)}if(!t.length)return 0;let s=e.replace(/ /g,"_"),i=s+" "+t.map(d=>d.id),o=l0[i];if(o)return o.id;let c=l0[i]=as.define({id:r0.length,name:s,props:[Qk({[s]:t})]});return r0.push(c),c.id}ut.RTL,ut.LTR;const A4=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),s=Ff(n.state,t.from);return s.line?E4(n):s.block?P4(n):!1};function Bf(n,e){return({state:t,dispatch:s})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(s(t.update(i)),!0):!1}}const E4=Bf(R4,0),L4=Bf(_1,0),P4=Bf((n,e)=>_1(n,e,D4(e)),0);function Ff(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Cl=50;function T4(n,{open:e,close:t},s,i){let o=n.sliceDoc(s-Cl,s),c=n.sliceDoc(i,i+Cl),d=/\s*$/.exec(o)[0].length,u=/^\s*/.exec(c)[0].length,m=o.length-d;if(o.slice(m-e.length,m)==e&&c.slice(u,u+t.length)==t)return{open:{pos:s-d,margin:d&&1},close:{pos:i+u,margin:u&&1}};let p,g;i-s<=2*Cl?p=g=n.sliceDoc(s,i):(p=n.sliceDoc(s,s+Cl),g=n.sliceDoc(i-Cl,i));let y=/^\s*/.exec(p)[0].length,b=/\s*$/.exec(g)[0].length,v=g.length-b-t.length;return p.slice(y,y+e.length)==e&&g.slice(v,v+t.length)==t?{open:{pos:s+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:i-b-t.length,margin:/\s/.test(g.charAt(v-1))?1:0}}:null}function D4(n){let e=[];for(let t of n.selection.ranges){let s=n.doc.lineAt(t.from),i=t.to<=s.to?s:n.doc.lineAt(t.to);i.from>s.from&&i.from==t.to&&(i=t.to==s.to+1?s:n.doc.lineAt(t.to-1));let o=e.length-1;o>=0&&e[o].to>s.from?e[o].to=i.to:e.push({from:s.from+/^\s*/.exec(s.text)[0].length,to:i.to})}return e}function _1(n,e,t=e.selection.ranges){let s=t.map(o=>Ff(e,o.from).block);if(!s.every(o=>o))return null;let i=t.map((o,c)=>T4(e,s[c],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,c)=>i[c]?[]:[{from:o.from,insert:s[c].open+" "},{from:o.to,insert:" "+s[c].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let c=0,d;c<i.length;c++)if(d=i[c]){let u=s[c],{open:m,close:p}=d;o.push({from:m.pos-u.open.length,to:m.pos+m.margin},{from:p.pos-p.margin,to:p.pos+u.close.length})}return{changes:o}}return null}function R4(n,e,t=e.selection.ranges){let s=[],i=-1;e:for(let{from:o,to:c}of t){let d=s.length,u=1e9,m;for(let p=o;p<=c;){let g=e.doc.lineAt(p);if(m==null&&(m=Ff(e,g.from).line,!m))continue e;if(g.from>i&&(o==c||c>g.from)){i=g.from;let y=/^\s*/.exec(g.text)[0].length,b=y==g.length,v=g.text.slice(y,y+m.length)==m?y:-1;y<g.text.length&&y<u&&(u=y),s.push({line:g,comment:v,token:m,indent:y,empty:b,single:!1})}p=g.to+1}if(u<1e9)for(let p=d;p<s.length;p++)s[p].indent<s[p].line.text.length&&(s[p].indent=u);s.length==d+1&&(s[d].single=!0)}if(n!=2&&s.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:d,token:u,indent:m,empty:p,single:g}of s)(g||!p)&&o.push({from:d.from+m,insert:u+" "});let c=e.changes(o);return{changes:c,selection:e.selection.map(c,1)}}else if(n!=1&&s.some(o=>o.comment>=0)){let o=[];for(let{line:c,comment:d,token:u}of s)if(d>=0){let m=c.from+d,p=m+u.length;c.text[p-c.from]==" "&&p++,o.push({from:m,to:p})}return{changes:o}}return null}const ef=fr.define(),O4=fr.define(),B4=ye.define(),W1=ye.define({combine(n){return Zl(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(s,i)=>e(s,i)||t(s,i)})}}),H1=Ks.define({create(){return fn.empty},update(n,e){let t=e.state.facet(W1),s=e.annotation(ef);if(s){let u=is.fromTransaction(e,s.selection),m=s.side,p=m==0?n.undone:n.done;return u?p=gc(p,p.length,t.minDepth,u):p=q1(p,e.startState.selection),new fn(m==0?s.rest:p,m==0?p:s.rest)}let i=e.annotation(O4);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(vt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=is.fromTransaction(e),c=e.annotation(vt.time),d=e.annotation(vt.userEvent);return o?n=n.addChanges(o,c,d,t,e):e.selection&&(n=n.addSelection(e.startState.selection,c,d,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new fn(n.done.map(is.fromJSON),n.undone.map(is.fromJSON))}});function F4(n={}){return[H1,W1.of(n),ve.domEventHandlers({beforeinput(e,t){let s=e.inputType=="historyUndo"?V1:e.inputType=="historyRedo"?tf:null;return s?(e.preventDefault(),s(t)):!1}})]}function Fc(n,e){return function({state:t,dispatch:s}){if(!e&&t.readOnly)return!1;let i=t.field(H1,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(s(o),!0):!1}}const V1=Fc(0,!1),tf=Fc(1,!1),I4=Fc(0,!0),z4=Fc(1,!0);class is{constructor(e,t,s,i,o){this.changes=e,this.effects=t,this.mapped=s,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new is(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,s;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(s=this.startSelection)===null||s===void 0?void 0:s.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new is(e.changes&&wt.fromJSON(e.changes),[],e.mapped&&mn.fromJSON(e.mapped),e.startSelection&&X.fromJSON(e.startSelection),e.selectionsAfter.map(X.fromJSON))}static fromTransaction(e,t){let s=Ls;for(let i of e.startState.facet(B4)){let o=i(e);o.length&&(s=s.concat(o))}return!s.length&&e.changes.empty?null:new is(e.changes.invert(e.startState.doc),s,void 0,t||e.startState.selection,Ls)}static selection(e){return new is(void 0,Ls,void 0,void 0,e)}}function gc(n,e,t,s){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(s),o}function $4(n,e){let t=[],s=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,c,d)=>{for(let u=0;u<t.length;){let m=t[u++],p=t[u++];d>=m&&c<=p&&(s=!0)}}),s}function _4(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,s)=>t.empty!=e.ranges[s].empty).length===0}function U1(n,e){return n.length?e.length?n.concat(e):n:e}const Ls=[],W4=200;function q1(n,e){if(n.length){let t=n[n.length-1],s=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-W4));return s.length&&s[s.length-1].eq(e)?n:(s.push(e),gc(n,n.length-1,1e9,t.setSelAfter(s)))}else return[is.selection([e])]}function H4(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function su(n,e){if(!n.length)return n;let t=n.length,s=Ls;for(;t;){let i=V4(n[t-1],e,s);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,s=i.selectionsAfter}return s.length?[is.selection(s)]:Ls}function V4(n,e,t){let s=U1(n.selectionsAfter.length?n.selectionsAfter.map(d=>d.map(e)):Ls,t);if(!n.changes)return is.selection(s);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),c=n.mapped?n.mapped.composeDesc(o):o;return new is(i,Ke.mapEffects(n.effects,e),c,n.startSelection.map(o),s)}const U4=/^(input\.type|delete)($|\.)/;class fn{constructor(e,t,s=0,i=void 0){this.done=e,this.undone=t,this.prevTime=s,this.prevUserEvent=i}isolate(){return this.prevTime?new fn(this.done,this.undone):this}addChanges(e,t,s,i,o){let c=this.done,d=c[c.length-1];return d&&d.changes&&!d.changes.empty&&e.changes&&(!s||U4.test(s))&&(!d.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,$4(d.changes,e.changes))||s=="input.type.compose")?c=gc(c,c.length-1,i.minDepth,new is(e.changes.compose(d.changes),U1(Ke.mapEffects(e.effects,d.changes),d.effects),d.mapped,d.startSelection,Ls)):c=gc(c,c.length,i.minDepth,e),new fn(c,Ls,t,s)}addSelection(e,t,s,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Ls;return o.length>0&&t-this.prevTime<i&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&_4(o[o.length-1],e)?this:new fn(q1(this.done,e),this.undone,t,s)}addMapping(e){return new fn(su(this.done,e),su(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,s){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],c=o.selectionsAfter[0]||(o.startSelection?o.startSelection.map(o.changes.invertedDesc,1):t.selection);if(s&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:ef.of({side:e,rest:H4(i),selection:c}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let d=i.length==1?Ls:i.slice(0,i.length-1);return o.mapped&&(d=su(d,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:ef.of({side:e,rest:d,selection:c}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}fn.empty=new fn(Ls,Ls);const q4=[{key:"Mod-z",run:V1,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:tf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:tf,preventDefault:!0},{key:"Mod-u",run:I4,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:z4,preventDefault:!0}];function Oi(n,e){return X.create(n.ranges.map(e),n.mainIndex)}function Qs(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Js({state:n,dispatch:e},t){let s=Oi(n.selection,t);return s.eq(n.selection,!0)?!1:(e(Qs(n,s)),!0)}function Ic(n,e){return X.cursor(e?n.to:n.from)}function G1(n,e){return Js(n,t=>t.empty?n.moveByChar(t,e):Ic(t,e))}function _t(n){return n.textDirectionAt(n.state.selection.main.head)==ut.LTR}const K1=n=>G1(n,!_t(n)),Q1=n=>G1(n,_t(n));function J1(n,e){return Js(n,t=>t.empty?n.moveByGroup(t,e):Ic(t,e))}const G4=n=>J1(n,!_t(n)),K4=n=>J1(n,_t(n));function Q4(n,e,t){if(e.type.prop(t))return!0;let s=e.to-e.from;return s&&(s>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function zc(n,e,t){let s=xn(n).resolveInner(e.head),i=t?Fe.closedBy:Fe.openedBy;for(let u=e.head;;){let m=t?s.childAfter(u):s.childBefore(u);if(!m)break;Q4(n,m,i)?s=m:u=t?m.to:m.from}let o=s.type.prop(i),c,d;return o&&(c=t?un(n,s.from,1):un(n,s.to,-1))&&c.matched?d=t?c.end.to:c.end.from:d=t?s.to:s.from,X.cursor(d,t?-1:1)}const J4=n=>Js(n,e=>zc(n.state,e,!_t(n))),Y4=n=>Js(n,e=>zc(n.state,e,_t(n)));function Y1(n,e){return Js(n,t=>{if(!t.empty)return Ic(t,e);let s=n.moveVertically(t,e);return s.head!=t.head?s:n.moveToLineBoundary(t,e)})}const X1=n=>Y1(n,!1),Z1=n=>Y1(n,!0);function ew(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,s=0,i;if(e){for(let o of n.state.facet(ve.scrollMargins)){let c=o(n);c!=null&&c.top&&(t=Math.max(c==null?void 0:c.top,t)),c!=null&&c.bottom&&(s=Math.max(c==null?void 0:c.bottom,s))}i=n.scrollDOM.clientHeight-t-s}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:s,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function tw(n,e){let t=ew(n),{state:s}=n,i=Oi(s.selection,c=>c.empty?n.moveVertically(c,e,t.height):Ic(c,e));if(i.eq(s.selection))return!1;let o;if(t.selfScroll){let c=n.coordsAtPos(s.selection.main.head),d=n.scrollDOM.getBoundingClientRect(),u=d.top+t.marginTop,m=d.bottom-t.marginBottom;c&&c.top>u&&c.bottom<m&&(o=ve.scrollIntoView(i.main.head,{y:"start",yMargin:c.top-u}))}return n.dispatch(Qs(s,i),{effects:o}),!0}const a0=n=>tw(n,!1),sf=n=>tw(n,!0);function mr(n,e,t){let s=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?s.to:s.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==s.from&&s.length){let o=/^\s*/.exec(n.state.sliceDoc(s.from,Math.min(s.from+100,s.to)))[0].length;o&&e.head!=s.from+o&&(i=X.cursor(s.from+o))}return i}const X4=n=>Js(n,e=>mr(n,e,!0)),Z4=n=>Js(n,e=>mr(n,e,!1)),eS=n=>Js(n,e=>mr(n,e,!_t(n))),tS=n=>Js(n,e=>mr(n,e,_t(n))),sS=n=>Js(n,e=>X.cursor(n.lineBlockAt(e.head).from,1)),nS=n=>Js(n,e=>X.cursor(n.lineBlockAt(e.head).to,-1));function rS(n,e,t){let s=!1,i=Oi(n.selection,o=>{let c=un(n,o.head,-1)||un(n,o.head,1)||o.head>0&&un(n,o.head-1,1)||o.head<n.doc.length&&un(n,o.head+1,-1);if(!c||!c.end)return o;s=!0;let d=c.start.from==o.head?c.end.to:c.end.from;return X.cursor(d)});return s?(e(Qs(n,i)),!0):!1}const iS=({state:n,dispatch:e})=>rS(n,e);function Ts(n,e){let t=Oi(n.state.selection,s=>{let i=e(s);return X.range(s.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Qs(n.state,t)),!0)}function sw(n,e){return Ts(n,t=>n.moveByChar(t,e))}const nw=n=>sw(n,!_t(n)),rw=n=>sw(n,_t(n));function iw(n,e){return Ts(n,t=>n.moveByGroup(t,e))}const lS=n=>iw(n,!_t(n)),aS=n=>iw(n,_t(n)),oS=n=>Ts(n,e=>zc(n.state,e,!_t(n))),cS=n=>Ts(n,e=>zc(n.state,e,_t(n)));function lw(n,e){return Ts(n,t=>n.moveVertically(t,e))}const aw=n=>lw(n,!1),ow=n=>lw(n,!0);function cw(n,e){return Ts(n,t=>n.moveVertically(t,e,ew(n).height))}const o0=n=>cw(n,!1),c0=n=>cw(n,!0),dS=n=>Ts(n,e=>mr(n,e,!0)),hS=n=>Ts(n,e=>mr(n,e,!1)),uS=n=>Ts(n,e=>mr(n,e,!_t(n))),fS=n=>Ts(n,e=>mr(n,e,_t(n))),mS=n=>Ts(n,e=>X.cursor(n.lineBlockAt(e.head).from)),pS=n=>Ts(n,e=>X.cursor(n.lineBlockAt(e.head).to)),d0=({state:n,dispatch:e})=>(e(Qs(n,{anchor:0})),!0),h0=({state:n,dispatch:e})=>(e(Qs(n,{anchor:n.doc.length})),!0),u0=({state:n,dispatch:e})=>(e(Qs(n,{anchor:n.selection.main.anchor,head:0})),!0),f0=({state:n,dispatch:e})=>(e(Qs(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),xS=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),gS=({state:n,dispatch:e})=>{let t=$c(n).map(({from:s,to:i})=>X.range(s,Math.min(i+1,n.doc.length)));return e(n.update({selection:X.create(t),userEvent:"select"})),!0},yS=({state:n,dispatch:e})=>{let t=Oi(n.selection,s=>{let i=xn(n),o=i.resolveStack(s.from,1);if(s.empty){let c=i.resolveStack(s.from,-1);c.node.from>=o.node.from&&c.node.to<=o.node.to&&(o=c)}for(let c=o;c;c=c.next){let{node:d}=c;if((d.from<s.from&&d.to>=s.to||d.to>s.to&&d.from<=s.from)&&c.next)return X.range(d.to,d.from)}return s});return t.eq(n.selection)?!1:(e(Qs(n,t)),!0)};function dw(n,e){let{state:t}=n,s=t.selection,i=t.selection.ranges.slice();for(let o of t.selection.ranges){let c=t.doc.lineAt(o.head);if(e?c.to<n.state.doc.length:c.from>0)for(let d=o;;){let u=n.moveVertically(d,e);if(u.head<c.from||u.head>c.to){i.some(m=>m.head==u.head)||i.push(u);break}else{if(u.head==d.head)break;d=u}}}return i.length==s.ranges.length?!1:(n.dispatch(Qs(t,X.create(i,i.length-1))),!0)}const wS=n=>dw(n,!1),bS=n=>dw(n,!0),vS=({state:n,dispatch:e})=>{let t=n.selection,s=null;return t.ranges.length>1?s=X.create([t.main]):t.main.empty||(s=X.create([X.cursor(t.main.head)])),s?(e(Qs(n,s)),!0):!1};function ra(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:s}=n,i=s.changeByRange(o=>{let{from:c,to:d}=o;if(c==d){let u=e(o);u<c?(t="delete.backward",u=Do(n,u,!1)):u>c&&(t="delete.forward",u=Do(n,u,!0)),c=Math.min(c,u),d=Math.max(d,u)}else c=Do(n,c,!1),d=Do(n,d,!0);return c==d?{range:o}:{changes:{from:c,to:d},range:X.cursor(c,c<o.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(s.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ve.announce.of(s.phrase("Selection deleted")):void 0})),!0)}function Do(n,e,t){if(n instanceof ve)for(let s of n.state.facet(ve.atomicRanges).map(i=>i(n)))s.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const hw=(n,e,t)=>ra(n,s=>{let i=s.from,{state:o}=n,c=o.doc.lineAt(i),d,u;if(t&&!e&&i>c.from&&i<c.from+200&&!/[^ \t]/.test(d=c.text.slice(0,i-c.from))){if(d[d.length-1]=="	")return i-1;let m=Ec(d,o.tabSize),p=m%pc(o)||pc(o);for(let g=0;g<p&&d[d.length-1-g]==" ";g++)i--;u=i}else u=bt(c.text,i-c.from,e,e)+c.from,u==i&&c.number!=(e?o.doc.lines:1)?u+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(c.text.slice(u-c.from,i-c.from))&&(u=bt(c.text,u-c.from,!1,!1)+c.from);return u}),nf=n=>hw(n,!1,!0),uw=n=>hw(n,!0,!1),fw=(n,e)=>ra(n,t=>{let s=t.head,{state:i}=n,o=i.doc.lineAt(s),c=i.charCategorizer(s);for(let d=null;;){if(s==(e?o.to:o.from)){s==t.head&&o.number!=(e?i.doc.lines:1)&&(s+=e?1:-1);break}let u=bt(o.text,s-o.from,e)+o.from,m=o.text.slice(Math.min(s,u)-o.from,Math.max(s,u)-o.from),p=c(m);if(d!=null&&p!=d)break;(m!=" "||s!=t.head)&&(d=p),s=u}return s}),mw=n=>fw(n,!1),jS=n=>fw(n,!0),NS=n=>ra(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),kS=n=>ra(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),SS=n=>ra(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),CS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>({changes:{from:s.from,to:s.to,insert:Ve.of(["",""])},range:X.cursor(s.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},MS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(s=>{if(!s.empty||s.from==0||s.from==n.doc.length)return{range:s};let i=s.from,o=n.doc.lineAt(i),c=i==o.from?i-1:bt(o.text,i-o.from,!1)+o.from,d=i==o.to?i+1:bt(o.text,i-o.from,!0)+o.from;return{changes:{from:c,to:d,insert:n.doc.slice(i,d).append(n.doc.slice(c,i))},range:X.cursor(d)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function $c(n){let e=[],t=-1;for(let s of n.selection.ranges){let i=n.doc.lineAt(s.from),o=n.doc.lineAt(s.to);if(!s.empty&&s.to==o.from&&(o=n.doc.lineAt(s.to-1)),t>=i.number){let c=e[e.length-1];c.to=o.to,c.ranges.push(s)}else e.push({from:i.from,to:o.to,ranges:[s]});t=o.number+1}return e}function pw(n,e,t){if(n.readOnly)return!1;let s=[],i=[];for(let o of $c(n)){if(t?o.to==n.doc.length:o.from==0)continue;let c=n.doc.lineAt(t?o.to+1:o.from-1),d=c.length+1;if(t){s.push({from:o.to,to:c.to},{from:o.from,insert:c.text+n.lineBreak});for(let u of o.ranges)i.push(X.range(Math.min(n.doc.length,u.anchor+d),Math.min(n.doc.length,u.head+d)))}else{s.push({from:c.from,to:o.from},{from:o.to,insert:n.lineBreak+c.text});for(let u of o.ranges)i.push(X.range(u.anchor-d,u.head-d))}}return s.length?(e(n.update({changes:s,scrollIntoView:!0,selection:X.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const AS=({state:n,dispatch:e})=>pw(n,e,!1),ES=({state:n,dispatch:e})=>pw(n,e,!0);function xw(n,e,t){if(n.readOnly)return!1;let s=[];for(let o of $c(n))t?s.push({from:o.from,insert:n.doc.slice(o.from,o.to)+n.lineBreak}):s.push({from:o.to,insert:n.lineBreak+n.doc.slice(o.from,o.to)});let i=n.changes(s);return e(n.update({changes:i,selection:n.selection.map(i,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const LS=({state:n,dispatch:e})=>xw(n,e,!1),PS=({state:n,dispatch:e})=>xw(n,e,!0),TS=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes($c(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),s=Oi(e.selection,i=>{let o;if(n.lineWrapping){let c=n.lineBlockAt(i.head),d=n.coordsAtPos(i.head,i.assoc||1);d&&(o=c.bottom+n.documentTop-d.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,o)}).map(t);return n.dispatch({changes:t,selection:s,scrollIntoView:!0,userEvent:"delete.line"}),!0};function DS(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=xn(n).resolveInner(e),s=t.childBefore(e),i=t.childAfter(e),o;return s&&i&&s.to<=e&&i.from>=e&&(o=s.type.prop(Fe.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(s.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(s.to,i.from))?{from:s.to,to:i.from}:null}const m0=gw(!1),RS=gw(!0);function gw(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let s=e.changeByRange(i=>{let{from:o,to:c}=i,d=e.doc.lineAt(o),u=!n&&o==c&&DS(e,o);n&&(o=c=(c<=d.to?d:e.doc.lineAt(c)).to);let m=new Bc(e,{simulateBreak:o,simulateDoubleBreak:!!u}),p=D1(m,o);for(p==null&&(p=Ec(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));c<d.to&&/\s/.test(d.text[c-d.from]);)c++;u?{from:o,to:c}=u:o>d.from&&o<d.from+100&&!/\S/.test(d.text.slice(0,o))&&(o=d.from);let g=["",xc(e,p)];return u&&g.push(xc(e,m.lineIndent(d.from,-1))),{changes:{from:o,to:c,insert:Ve.of(g)},range:X.cursor(o+1+g[1].length)}});return t(e.update(s,{scrollIntoView:!0,userEvent:"input"})),!0}}function If(n,e){let t=-1;return n.changeByRange(s=>{let i=[];for(let c=s.from;c<=s.to;){let d=n.doc.lineAt(c);d.number>t&&(s.empty||s.to>d.from)&&(e(d,i,s),t=d.number),c=d.to+1}let o=n.changes(i);return{changes:i,range:X.range(o.mapPos(s.anchor,1),o.mapPos(s.head,1))}})}const OS=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),s=new Bc(n,{overrideIndentation:o=>{let c=t[o];return c??-1}}),i=If(n,(o,c,d)=>{let u=D1(s,o.from);if(u==null)return;/\S/.test(o.text)||(u=0);let m=/^\s*/.exec(o.text)[0],p=xc(n,u);(m!=p||d.from<o.from+m.length)&&(t[o.from]=u,c.push({from:o.from,to:o.from+m.length,insert:p}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},BS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(If(n,(t,s)=>{s.push({from:t.from,insert:n.facet(Rf)})}),{userEvent:"input.indent"})),!0),FS=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(If(n,(t,s)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=Ec(i,n.tabSize),c=0,d=xc(n,Math.max(0,o-pc(n)));for(;c<i.length&&c<d.length&&i.charCodeAt(c)==d.charCodeAt(c);)c++;s.push({from:t.from+c,to:t.from+i.length,insert:d.slice(c)})}),{userEvent:"delete.dedent"})),!0),IS=n=>(n.setTabFocusMode(),!0),zS=[{key:"Ctrl-b",run:K1,shift:nw,preventDefault:!0},{key:"Ctrl-f",run:Q1,shift:rw},{key:"Ctrl-p",run:X1,shift:aw},{key:"Ctrl-n",run:Z1,shift:ow},{key:"Ctrl-a",run:sS,shift:mS},{key:"Ctrl-e",run:nS,shift:pS},{key:"Ctrl-d",run:uw},{key:"Ctrl-h",run:nf},{key:"Ctrl-k",run:NS},{key:"Ctrl-Alt-h",run:mw},{key:"Ctrl-o",run:CS},{key:"Ctrl-t",run:MS},{key:"Ctrl-v",run:sf}],$S=[{key:"ArrowLeft",run:K1,shift:nw,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:G4,shift:lS,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:eS,shift:uS,preventDefault:!0},{key:"ArrowRight",run:Q1,shift:rw,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:K4,shift:aS,preventDefault:!0},{mac:"Cmd-ArrowRight",run:tS,shift:fS,preventDefault:!0},{key:"ArrowUp",run:X1,shift:aw,preventDefault:!0},{mac:"Cmd-ArrowUp",run:d0,shift:u0},{mac:"Ctrl-ArrowUp",run:a0,shift:o0},{key:"ArrowDown",run:Z1,shift:ow,preventDefault:!0},{mac:"Cmd-ArrowDown",run:h0,shift:f0},{mac:"Ctrl-ArrowDown",run:sf,shift:c0},{key:"PageUp",run:a0,shift:o0},{key:"PageDown",run:sf,shift:c0},{key:"Home",run:Z4,shift:hS,preventDefault:!0},{key:"Mod-Home",run:d0,shift:u0},{key:"End",run:X4,shift:dS,preventDefault:!0},{key:"Mod-End",run:h0,shift:f0},{key:"Enter",run:m0,shift:m0},{key:"Mod-a",run:xS},{key:"Backspace",run:nf,shift:nf,preventDefault:!0},{key:"Delete",run:uw,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:mw,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:jS,preventDefault:!0},{mac:"Mod-Backspace",run:kS,preventDefault:!0},{mac:"Mod-Delete",run:SS,preventDefault:!0}].concat(zS.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),_S=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:J4,shift:oS},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Y4,shift:cS},{key:"Alt-ArrowUp",run:AS},{key:"Shift-Alt-ArrowUp",run:LS},{key:"Alt-ArrowDown",run:ES},{key:"Shift-Alt-ArrowDown",run:PS},{key:"Mod-Alt-ArrowUp",run:wS},{key:"Mod-Alt-ArrowDown",run:bS},{key:"Escape",run:vS},{key:"Mod-Enter",run:RS},{key:"Alt-l",mac:"Ctrl-l",run:gS},{key:"Mod-i",run:yS,preventDefault:!0},{key:"Mod-[",run:FS},{key:"Mod-]",run:BS},{key:"Mod-Alt-\\",run:OS},{key:"Shift-Mod-k",run:TS},{key:"Shift-Mod-\\",run:iS},{key:"Mod-/",run:A4},{key:"Alt-A",run:L4},{key:"Ctrl-m",mac:"Shift-Alt-m",run:IS}].concat($S),p0=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Di{constructor(e,t,s=0,i=e.length,o,c){this.test=c,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(s,i),this.bufferStart=s,this.normalize=o?d=>o(p0(d)):p0,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return cy(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=lN(e),s=this.bufferStart+this.bufferPos;this.bufferPos+=dy(e);let i=this.normalize(t);if(i.length)for(let o=0,c=s;;o++){let d=i.charCodeAt(o),u=this.match(d,c,this.bufferPos+this.bufferStart);if(o==i.length-1){if(u)return this.value=u,this;break}c==s&&o<t.length&&t.charCodeAt(o)==d&&c++}}}match(e,t,s){let i=null;for(let o=0;o<this.matches.length;o+=2){let c=this.matches[o],d=!1;this.query.charCodeAt(c)==e&&(c==this.query.length-1?i={from:this.matches[o+1],to:s}:(this.matches[o]++,d=!0)),d||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:s}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Di.prototype[Symbol.iterator]=function(){return this});const yw={from:-1,to:-1,match:/.*/.exec("")},zf="gm"+(/x/.unicode==null?"":"u");class ww{constructor(e,t,s,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=yw,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new bw(e,t,s,i,o);this.re=new RegExp(t,zf+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.iter=e.iter();let c=e.lineAt(i);this.curLineStart=c.from,this.matchPos=yc(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let s=this.curLineStart+t.index,i=s+t[0].length;if(this.matchPos=yc(this.text,i+(s==i?1:0)),s==this.curLineStart+this.curLine.length&&this.nextLine(),(s<i||s>this.value.to)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const nu=new WeakMap;class ki{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,s){let i=nu.get(e);if(!i||i.from>=s||i.to<=t){let d=new ki(t,e.sliceString(t,s));return nu.set(e,d),d}if(i.from==t&&i.to==s)return i;let{text:o,from:c}=i;return c>t&&(o=e.sliceString(t,c)+o,c=t),i.to<s&&(o+=e.sliceString(i.to,s)),nu.set(e,new ki(c,o)),new ki(t,o.slice(t-c,s-c))}}class bw{constructor(e,t,s,i,o){this.text=e,this.to=o,this.done=!1,this.value=yw,this.matchPos=yc(e,i),this.re=new RegExp(t,zf+(s!=null&&s.ignoreCase?"i":"")),this.test=s==null?void 0:s.test,this.flat=ki.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let s=this.flat.from+t.index,i=s+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(s,i,t)))return this.value={from:s,to:i,match:t},this.matchPos=yc(this.text,i+(s==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ki.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(ww.prototype[Symbol.iterator]=bw.prototype[Symbol.iterator]=function(){return this});function WS(n){try{return new RegExp(n,zf),!0}catch{return!1}}function yc(n,e){if(e>=n.length)return e;let t=n.lineAt(e),s;for(;e<t.to&&(s=t.text.charCodeAt(e-t.from))>=56320&&s<57344;)e++;return e}const HS=n=>{let{state:e}=n,t=String(e.doc.lineAt(n.state.selection.main.head).number),{close:s,result:i}=pk(n,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:t},focus:!0,submitLabel:e.phrase("go")});return i.then(o=>{let c=o&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.elements.line.value);if(!c){n.dispatch({effects:s});return}let d=e.doc.lineAt(e.selection.main.head),[,u,m,p,g]=c,y=p?+p.slice(1):0,b=m?+m:d.number;if(m&&g){let S=b/100;u&&(S=S*(u=="-"?-1:1)+d.number/e.doc.lines),b=Math.round(e.doc.lines*S)}else m&&u&&(b=b*(u=="-"?-1:1)+d.number);let v=e.doc.line(Math.max(1,Math.min(e.doc.lines,b))),j=X.cursor(v.from+Math.max(0,Math.min(y,v.length)));n.dispatch({effects:[s,ve.scrollIntoView(j.from,{y:"center"})],selection:j})}),!0},VS={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},US=ye.define({combine(n){return Zl(n,VS,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function qS(n){return[YS,JS]}const GS=Te.mark({class:"cm-selectionMatch"}),KS=Te.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function x0(n,e,t,s){return(t==0||n(e.sliceDoc(t-1,t))!=ht.Word)&&(s==e.doc.length||n(e.sliceDoc(s,s+1))!=ht.Word)}function QS(n,e,t,s){return n(e.sliceDoc(t,t+1))==ht.Word&&n(e.sliceDoc(s-1,s))==ht.Word}const JS=ys.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(US),{state:t}=n,s=t.selection;if(s.ranges.length>1)return Te.none;let i=s.main,o,c=null;if(i.empty){if(!e.highlightWordAroundCursor)return Te.none;let u=t.wordAt(i.head);if(!u)return Te.none;c=t.charCategorizer(i.head),o=t.sliceDoc(u.from,u.to)}else{let u=i.to-i.from;if(u<e.minSelectionLength||u>200)return Te.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),c=t.charCategorizer(i.head),!(x0(c,t,i.from,i.to)&&QS(c,t,i.from,i.to)))return Te.none}else if(o=t.sliceDoc(i.from,i.to),!o)return Te.none}let d=[];for(let u of n.visibleRanges){let m=new Di(t.doc,o,u.from,u.to);for(;!m.next().done;){let{from:p,to:g}=m.value;if((!c||x0(c,t,p,g))&&(i.empty&&p<=i.from&&g>=i.to?d.push(KS.range(p,g)):(p>=i.to||g<=i.from)&&d.push(GS.range(p,g)),d.length>e.maxMatches))return Te.none}}return Te.set(d)}},{decorations:n=>n.decorations}),YS=ve.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),XS=({state:n,dispatch:e})=>{let{selection:t}=n,s=X.create(t.ranges.map(i=>n.wordAt(i.head)||X.cursor(i.head)),t.mainIndex);return s.eq(t)?!1:(e(n.update({selection:s})),!0)};function ZS(n,e){let{main:t,ranges:s}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let c=!1,d=new Di(n.doc,e,s[s.length-1].to);;)if(d.next(),d.done){if(c)return null;d=new Di(n.doc,e,0,Math.max(0,s[s.length-1].from-1)),c=!0}else{if(c&&s.some(u=>u.from==d.value.from))continue;if(o){let u=n.wordAt(d.value.from);if(!u||u.from!=d.value.from||u.to!=d.value.to)continue}return d.value}}const eC=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return XS({state:n,dispatch:e});let s=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=s))return!1;let i=ZS(n,s);return i?(e(n.update({selection:n.selection.addRange(X.range(i.from,i.to),!1),effects:ve.scrollIntoView(i.to)})),!0):!1},Bi=ye.define({combine(n){return Zl(n,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new mC(e),scrollToMatch:e=>ve.scrollIntoView(e)})}});class vw{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||WS(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,s)=>s=="n"?`
`:s=="r"?"\r":s=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new lC(this):new nC(this)}getCursor(e,t=0,s){let i=e.doc?e:He.create({doc:e});return s==null&&(s=i.doc.length),this.regexp?fi(this,i,t,s):ui(this,i,t,s)}}class jw{constructor(e){this.spec=e}}function tC(n,e,t){return(s,i,o,c)=>{if(t&&!t(s,i,o,c))return!1;let d=s>=c&&i<=c+o.length?o.slice(s-c,i-c):e.doc.sliceString(s,i);return n(d,e,s,i)}}function ui(n,e,t,s){let i;return n.wholeWord&&(i=sC(e.doc,e.charCategorizer(e.selection.main.head))),n.test&&(i=tC(n.test,e,i)),new Di(e.doc,n.unquoted,t,s,n.caseSensitive?void 0:o=>o.toLowerCase(),i)}function sC(n,e){return(t,s,i,o)=>((o>t||o+i.length<s)&&(o=Math.max(0,t-2),i=n.sliceString(o,Math.min(n.length,s+2))),(e(wc(i,t-o))!=ht.Word||e(bc(i,t-o))!=ht.Word)&&(e(bc(i,s-o))!=ht.Word||e(wc(i,s-o))!=ht.Word))}class nC extends jw{constructor(e){super(e)}nextMatch(e,t,s){let i=ui(this.spec,e,s,e.doc.length).nextOverlapping();if(i.done){let o=Math.min(e.doc.length,t+this.spec.unquoted.length);i=ui(this.spec,e,0,o).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==s?null:i.value}prevMatchInRange(e,t,s){for(let i=s;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),c=ui(this.spec,e,o,i),d=null;for(;!c.nextOverlapping().done;)d=c.value;if(d)return d;if(o==t)return null;i-=1e4}}prevMatch(e,t,s){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,s-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=s)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let s=ui(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let o=ui(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(s+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function rC(n,e,t){return(s,i,o)=>(!t||t(s,i,o))&&n(o[0],e,s,i)}function fi(n,e,t,s){let i;return n.wholeWord&&(i=iC(e.charCategorizer(e.selection.main.head))),n.test&&(i=rC(n.test,e,i)),new ww(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:i},t,s)}function wc(n,e){return n.slice(bt(n,e,!1),e)}function bc(n,e){return n.slice(e,bt(n,e))}function iC(n){return(e,t,s)=>!s[0].length||(n(wc(s.input,s.index))!=ht.Word||n(bc(s.input,s.index))!=ht.Word)&&(n(bc(s.input,s.index+s[0].length))!=ht.Word||n(wc(s.input,s.index+s[0].length))!=ht.Word)}class lC extends jw{nextMatch(e,t,s){let i=fi(this.spec,e,s,e.doc.length).next();return i.done&&(i=fi(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,s){for(let i=1;;i++){let o=Math.max(t,s-i*1e4),c=fi(this.spec,e,o,s),d=null;for(;!c.next().done;)d=c.value;if(d&&(o==t||d.from>o+10))return d;if(o==t)return null}}prevMatch(e,t,s){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,s,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,s)=>{if(s=="&")return e.match[0];if(s=="$")return"$";for(let i=s.length;i>0;i--){let o=+s.slice(0,i);if(o>0&&o<e.match.length)return e.match[o]+s.slice(i)}return t})}matchAll(e,t){let s=fi(this.spec,e,0,e.doc.length),i=[];for(;!s.next().done;){if(i.length>=t)return null;i.push(s.value)}return i}highlight(e,t,s,i){let o=fi(this.spec,e,Math.max(0,t-250),Math.min(s+250,e.doc.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const Kl=Ke.define(),$f=Ke.define(),ir=Ks.define({create(n){return new ru(rf(n).create(),null)},update(n,e){for(let t of e.effects)t.is(Kl)?n=new ru(t.value.create(),n.panel):t.is($f)&&(n=new ru(n.query,t.value?_f:null));return n},provide:n=>hc.from(n,e=>e.panel)});class ru{constructor(e,t){this.query=e,this.panel=t}}const aC=Te.mark({class:"cm-searchMatch"}),oC=Te.mark({class:"cm-searchMatch cm-searchMatch-selected"}),cC=ys.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(ir))}update(n){let e=n.state.field(ir);(e!=n.startState.field(ir)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return Te.none;let{view:t}=this,s=new Ci;for(let i=0,o=t.visibleRanges,c=o.length;i<c;i++){let{from:d,to:u}=o[i];for(;i<c-1&&u>o[i+1].from-500;)u=o[++i].to;n.highlight(t.state,d,u,(m,p)=>{let g=t.state.selection.ranges.some(y=>y.from==m&&y.to==p);s.add(m,p,g?oC:aC)})}return s.finish()}},{decorations:n=>n.decorations});function ia(n){return e=>{let t=e.state.field(ir,!1);return t&&t.query.spec.valid?n(e,t):Sw(e)}}const vc=ia((n,{query:e})=>{let{to:t}=n.state.selection.main,s=e.nextMatch(n.state,t,t);if(!s)return!1;let i=X.single(s.from,s.to),o=n.state.facet(Bi);return n.dispatch({selection:i,effects:[Wf(n,s),o.scrollToMatch(i.main,n)],userEvent:"select.search"}),kw(n),!0}),jc=ia((n,{query:e})=>{let{state:t}=n,{from:s}=t.selection.main,i=e.prevMatch(t,s,s);if(!i)return!1;let o=X.single(i.from,i.to),c=n.state.facet(Bi);return n.dispatch({selection:o,effects:[Wf(n,i),c.scrollToMatch(o.main,n)],userEvent:"select.search"}),kw(n),!0}),dC=ia((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:X.create(t.map(s=>X.range(s.from,s.to))),userEvent:"select.search.matches"}),!0)}),hC=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:s,to:i}=t.main,o=[],c=0;for(let d=new Di(n.doc,n.sliceDoc(s,i));!d.next().done;){if(o.length>1e3)return!1;d.value.from==s&&(c=o.length),o.push(X.range(d.value.from,d.value.to))}return e(n.update({selection:X.create(o,c),userEvent:"select.search.matches"})),!0},g0=ia((n,{query:e})=>{let{state:t}=n,{from:s,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t,s,s);if(!o)return!1;let c=o,d=[],u,m,p=[];c.from==s&&c.to==i&&(m=t.toText(e.getReplacement(c)),d.push({from:c.from,to:c.to,insert:m}),c=e.nextMatch(t,c.from,c.to),p.push(ve.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(s).number)+".")));let g=n.state.changes(d);return c&&(u=X.single(c.from,c.to).map(g),p.push(Wf(n,c)),p.push(t.facet(Bi).scrollToMatch(u.main,n))),n.dispatch({changes:g,selection:u,effects:p,userEvent:"input.replace"}),!0}),uC=ia((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(i=>{let{from:o,to:c}=i;return{from:o,to:c,insert:e.getReplacement(i)}});if(!t.length)return!1;let s=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:ve.announce.of(s),userEvent:"input.replace.all"}),!0});function _f(n){return n.state.facet(Bi).createPanel(n)}function rf(n,e){var t,s,i,o,c;let d=n.selection.main,u=d.empty||d.to>d.from+100?"":n.sliceDoc(d.from,d.to);if(e&&!u)return e;let m=n.facet(Bi);return new vw({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:m.literal)?u:u.replace(/\n/g,"\\n"),caseSensitive:(s=e==null?void 0:e.caseSensitive)!==null&&s!==void 0?s:m.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:m.literal,regexp:(o=e==null?void 0:e.regexp)!==null&&o!==void 0?o:m.regexp,wholeWord:(c=e==null?void 0:e.wholeWord)!==null&&c!==void 0?c:m.wholeWord})}function Nw(n){let e=w1(n,_f);return e&&e.dom.querySelector("[main-field]")}function kw(n){let e=Nw(n);e&&e==n.root.activeElement&&e.select()}const Sw=n=>{let e=n.state.field(ir,!1);if(e&&e.panel){let t=Nw(n);if(t&&t!=n.root.activeElement){let s=rf(n.state,e.query.spec);s.valid&&n.dispatch({effects:Kl.of(s)}),t.focus(),t.select()}}else n.dispatch({effects:[$f.of(!0),e?Kl.of(rf(n.state,e.query.spec)):Ke.appendConfig.of(xC)]});return!0},Cw=n=>{let e=n.state.field(ir,!1);if(!e||!e.panel)return!1;let t=w1(n,_f);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:$f.of(!1)}),!0},fC=[{key:"Mod-f",run:Sw,scope:"editor search-panel"},{key:"F3",run:vc,shift:jc,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:vc,shift:jc,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Cw,scope:"editor search-panel"},{key:"Mod-Shift-l",run:hC},{key:"Mod-Alt-g",run:HS},{key:"Mod-d",run:eC,preventDefault:!0}];class mC{constructor(e){this.view=e;let t=this.query=e.state.field(ir).query.spec;this.commit=this.commit.bind(this),this.searchField=St("input",{value:t.search,placeholder:ms(e,"Find"),"aria-label":ms(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=St("input",{value:t.replace,placeholder:ms(e,"Replace"),"aria-label":ms(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=St("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=St("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=St("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function s(i,o,c){return St("button",{class:"cm-button",name:i,onclick:o,type:"button"},c)}this.dom=St("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,s("next",()=>vc(e),[ms(e,"next")]),s("prev",()=>jc(e),[ms(e,"previous")]),s("select",()=>dC(e),[ms(e,"all")]),St("label",null,[this.caseField,ms(e,"match case")]),St("label",null,[this.reField,ms(e,"regexp")]),St("label",null,[this.wordField,ms(e,"by word")]),...e.state.readOnly?[]:[St("br"),this.replaceField,s("replace",()=>g0(e),[ms(e,"replace")]),s("replaceAll",()=>uC(e),[ms(e,"replace all")])],St("button",{name:"close",onclick:()=>Cw(e),"aria-label":ms(e,"close"),type:"button"},[""])])}commit(){let e=new vw({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Kl.of(e)}))}keydown(e){ck(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?jc:vc)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),g0(this.view))}update(e){for(let t of e.transactions)for(let s of t.effects)s.is(Kl)&&!s.value.eq(this.query)&&this.setQuery(s.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Bi).top}}function ms(n,e){return n.state.phrase(e)}const Ro=30,Oo=/[\s\.,:;?!]/;function Wf(n,{from:e,to:t}){let s=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(s.from,e-Ro),c=Math.min(i,t+Ro),d=n.state.sliceDoc(o,c);if(o!=s.from){for(let u=0;u<Ro;u++)if(!Oo.test(d[u+1])&&Oo.test(d[u])){d=d.slice(u);break}}if(c!=i){for(let u=d.length-1;u>d.length-Ro;u--)if(!Oo.test(d[u-1])&&Oo.test(d[u])){d=d.slice(0,u);break}}return ve.announce.of(`${n.state.phrase("current match")}. ${d} ${n.state.phrase("on line")} ${s.number}.`)}const pC=ve.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),xC=[ir,Mc.low(cC),pC],gC="#e5c07b",y0="#e06c75",yC="#56b6c2",wC="#ffffff",Uo="#abb2bf",lf="#7d8799",bC="#61afef",vC="#98c379",w0="#d19a66",jC="#c678dd",NC="#21252b",b0="#2c313a",v0="#282c34",iu="#353a42",kC="#3E4451",j0="#528bff",SC=ve.theme({"&":{color:Uo,backgroundColor:v0},".cm-content":{caretColor:j0},".cm-cursor, .cm-dropCursor":{borderLeftColor:j0},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:kC},".cm-panels":{backgroundColor:NC,color:Uo},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:v0,color:lf,border:"none"},".cm-activeLineGutter":{backgroundColor:b0},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:iu},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:iu,borderBottomColor:iu},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:b0,color:Uo}}},{dark:!0}),CC=na.define([{tag:G.keyword,color:jC},{tag:[G.name,G.deleted,G.character,G.propertyName,G.macroName],color:y0},{tag:[G.function(G.variableName),G.labelName],color:bC},{tag:[G.color,G.constant(G.name),G.standard(G.name)],color:w0},{tag:[G.definition(G.name),G.separator],color:Uo},{tag:[G.typeName,G.className,G.number,G.changed,G.annotation,G.modifier,G.self,G.namespace],color:gC},{tag:[G.operator,G.operatorKeyword,G.url,G.escape,G.regexp,G.link,G.special(G.string)],color:yC},{tag:[G.meta,G.comment],color:lf},{tag:G.strong,fontWeight:"bold"},{tag:G.emphasis,fontStyle:"italic"},{tag:G.strikethrough,textDecoration:"line-through"},{tag:G.link,color:lf,textDecoration:"underline"},{tag:G.heading,fontWeight:"bold",color:y0},{tag:[G.atom,G.bool,G.special(G.variableName)],color:w0},{tag:[G.processingInstruction,G.string,G.inserted],color:vC},{tag:G.invalid,color:wC}]),MC=[SC,F1(CC)],ns={};async function AC(n){if(ns[n])return ns[n];let e;switch(n){case"javascript":e=await $s(()=>import("./index-DuxxhjhZ.js"),__vite__mapDeps([0,1,2])),ns[n]=e.javascript({jsx:!0,typescript:!0});break;case"python":e=await $s(()=>import("./index-FAZ9K0wx.js"),__vite__mapDeps([3,1,2])),ns[n]=e.python();break;case"go":e=await $s(()=>import("./index-usQU3IiF.js"),__vite__mapDeps([4,1,2])),ns[n]=e.go();break;case"java":e=await $s(()=>import("./index-f1eqPbpq.js"),__vite__mapDeps([5,1])),ns[n]=e.java();break;case"rust":e=await $s(()=>import("./index-DqHUAMjb.js"),__vite__mapDeps([6,1])),ns[n]=e.rust();break;case"php":e=await $s(()=>import("./index-D-0Su16M.js"),__vite__mapDeps([7,1,8,9,0,2])),ns[n]=e.php();break;case"cpp":e=await $s(()=>import("./index-sscL7lFK.js"),__vite__mapDeps([10,1])),ns[n]=e.cpp();break;case"css":e=await $s(()=>import("./index-C5F2v_c2.js"),__vite__mapDeps([9,1])),ns[n]=e.css();break;case"html":e=await $s(()=>import("./index-DhVgXkmM.js"),__vite__mapDeps([8,1,9,0,2])),ns[n]=e.html();break;case"json":e=await $s(()=>import("./index-CwX96fPT.js"),__vite__mapDeps([11,1])),ns[n]=e.json();break;case"markdown":e=await $s(()=>import("./index-XQAohTlC.js"),__vite__mapDeps([12,2,8,1,9,0])),ns[n]=e.markdown();break;default:return null}return ns[n]}const EC=ve.theme({"&":{backgroundColor:"#0d0d0d",color:"#e4e4e7",fontSize:"13px",height:"100%"},".cm-content":{caretColor:"#fdcb0f",fontFamily:'"JetBrains Mono", "Fira Code", "Cascadia Code", monospace'},".cm-cursor":{borderLeftColor:"#fdcb0f"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground":{backgroundColor:"rgba(253, 203, 15, 0.15) !important"},".cm-gutters":{backgroundColor:"#0a0a0a",color:"rgba(255,255,255,0.2)",borderRight:"1px solid rgba(255,255,255,0.06)"},".cm-activeLineGutter":{backgroundColor:"rgba(255,255,255,0.05)",color:"rgba(255,255,255,0.5)"},".cm-activeLine":{backgroundColor:"rgba(255,255,255,0.03)"}}),LC=Te.line({class:"cm-dead-line"}),PC=Te.line({class:"cm-live-line"}),TC=Te.line({class:"cm-target-line"});class DC extends Pn{toDOM(){const e=document.createElement("div");return e.className="cm-target-gutter",e.textContent="",e}}const RC=new DC;function OC(n,e){if(e<1||e>n.lines)return e;const t=n.line(e).text;if(!t.includes("{")&&!t.includes("("))return e;let s=0,i=!1;for(let o=e;o<=Math.min(e+500,n.lines);o++){const c=n.line(o).text;for(const d of c)if((d==="{"||d==="(")&&(s++,i=!0),(d==="}"||d===")")&&s--,i&&s<=0)return o}return e}function qo(n,e){return n.lineEnd&&n.lineEnd>(n.line||0)?n.lineEnd:n.line?OC(e,n.line):0}function N0(n,e,t){const s=[],i=n.state.doc;for(const o of e){if(!o.line)continue;const c=o.line,d=qo(o,i);for(let u=c;u<=d;u++){if(u<1||u>i.lines)continue;const m=i.line(u);if(t.has(u))s.push(TC.range(m.from));else{const p=o.status==="dead"?LC:o.status==="live"?PC:null;p&&s.push(p.range(m.from))}}}return s.sort((o,c)=>o.from-c.from),Te.set(s)}function BC(n,e,t){const s=new Set;if(t){const i=n.find(o=>{if(!o.line)return!1;const c=qo(o,e);return t>=o.line&&t<=c});if(i&&i.line){const o=qo(i,e);for(let c=i.line;c<=o;c++)s.add(c)}else s.add(t)}else for(const i of n)if(i.status==="dead"&&i.line){const o=qo(i,e);for(let c=i.line;c<=o;c++)s.add(c)}return s}function FC(n,e,t){const s=n.split(`
`),i=[];for(const o of e){if(o.status!=="dead"||!o.sourceLine)continue;const c=o.sourceLine.trim();let d=!1;if(o.line&&o.line<=s.length&&s[o.line-1].trim()===c&&(d=!0),!d){for(const u of s)if(u.trim()===c){d=!0;break}}if(!d){const u=o.name.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");d=new RegExp(`export\\b.*\\b${u}\\b`).test(n)}d||i.push({file:t,exportName:o.name})}return i}function IC({projectPath:n,editorFile:e,onClose:t,scanId:s,onExportsResolved:i}){var Z,_,V,ee;const o=C.useRef(null),c=C.useRef(null),{showToast:d}=Xl(),[u,m]=C.useState(!0),[p,g]=C.useState(!1),[y,b]=C.useState(null),[v,j]=C.useState(!1),[S,k]=C.useState(!1),[M,R]=C.useState(""),E=e.relativePath||e.file,B=((Z=e.summary)==null?void 0:Z.deadExports)??((_=e.exports)==null?void 0:_.filter(ae=>ae.status==="dead").length)??0,I=((V=e.summary)==null?void 0:V.liveExports)??((ee=e.exports)==null?void 0:ee.filter(ae=>ae.status==="live").length)??0,O=C.useCallback(async()=>{if(!c.current||p)return;const ae=c.current.state.doc.toString();g(!0);try{await be.saveFile(n,E,ae),R(ae),j(!1);const ie=e.exports||[],U=FC(ae,ie,E);U.length>0&&s?(be.saveResolutions(n,s,U).catch(()=>{}),i==null||i(U),d(`Saved  ${U.length} dead export${U.length!==1?"s":""} resolved`,"success")):d("File saved","success")}catch(ie){d(ie.message||"Failed to save","error")}finally{g(!1)}},[n,E,p,d,s,e.exports,i]),ne=C.useCallback(()=>{v?k(!0):t()},[v,t]),$=C.useCallback(()=>{var ie,U;const ae=(U=(ie=e.exports)==null?void 0:ie.find(de=>de.status==="dead"))==null?void 0:U.line;be.openFile(n,E,ae)},[n,E,e.exports]);return C.useEffect(()=>{let ae=!1;async function ie(){var U,de;m(!0),b(null),j(!1);try{const K=await be.readFile(n,E);if(ae)return;R(K.content);const Q=await AC(K.language);if(ae)return;const P=(e.exports||[]).map(De=>{var At;return{...De,status:De.status||((At=e.summary)!=null&&At.canDeleteFile?"dead":De.status)}}),q=He.create({doc:K.content}).doc,ce=BC(P,q,e.scrollToLine),xe=wk({class:"cm-target-gutter-col",lineMarker:(De,At)=>{const tt=De.state.doc.lineAt(At.from).number;return ce.has(tt)?RC:null}}),Ce=[Ck(),xe,Ek(),uk(),F4(),v4(),qS(),F1(m4,{fallback:!0}),MC,EC,x1.of([..._S,...q4,...fC,{key:"Mod-s",run:()=>(O(),!0)}]),ve.updateListener.of(De=>{De.docChanged&&j(!0)}),ys.fromClass(class{constructor(De){Cx(this,"decorations");this.decorations=N0(De,P,ce)}update(De){De.docChanged&&(this.decorations=N0(De.view,P,ce))}},{decorations:De=>De.decorations})];Q&&Ce.push(Q),o.current&&(o.current.innerHTML=""),c.current&&c.current.destroy();const Re=He.create({doc:K.content,extensions:Ce}),Pe=new ve({state:Re,parent:o.current});c.current=Pe;const Ie=e.scrollToLine||((de=(U=e.exports)==null?void 0:U.find(De=>De.status==="dead"))==null?void 0:de.line);if(Ie&&Ie<=Pe.state.doc.lines){const De=Pe.state.doc.line(Ie);requestAnimationFrame(()=>{Pe.dispatch({effects:ve.scrollIntoView(De.from,{y:"center"})})})}}catch(K){ae||b(K.message||"Failed to load file")}finally{ae||m(!1)}}return ie(),()=>{ae=!0,c.current&&(c.current.destroy(),c.current=null)}},[n,E]),C.useEffect(()=>{const ae=ie=>{ie.key==="Escape"&&(ie.preventDefault(),ne())};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[ne]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:ne}),r.jsxs("div",{className:"fixed right-0 top-0 bottom-0 z-50 w-[60%] min-w-[480px] max-w-[1200px] bg-[#0a0a0a] border-l border-white/10 flex flex-col editor-panel-enter shadow-2xl shadow-black/50",children:[r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10 bg-[#0d0d0d] shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx("button",{onClick:ne,className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors shrink-0",title:"Close (Esc)",children:r.jsx(or,{className:"w-4 h-4 text-white/60"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h2",{className:"text-sm font-semibold text-white truncate",title:E,children:E}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[B>0&&r.jsxs("span",{className:"text-xs text-red-400",children:[B," dead"]}),I>0&&r.jsxs("span",{className:"text-xs text-emerald-400",children:[I," live"]}),v&&r.jsx("span",{className:"text-xs text-primary font-medium",children:"Modified"})]})]})]}),r.jsx("div",{className:"flex items-center gap-2 shrink-0",children:r.jsxs("button",{onClick:O,disabled:!v||p,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-primary/20 text-primary hover:bg-primary/30 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",title:"Save (Ctrl+S)",children:[p?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(mf,{className:"w-3.5 h-3.5"}),"Save"]})})]}),r.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[u&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d0d] z-10",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}),y&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#0d0d0d] z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx(pt,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-red-400",children:y})]})}),r.jsx("div",{ref:o,className:"h-full overflow-auto"})]}),r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t border-white/10 bg-[#0d0d0d] shrink-0",children:[r.jsx("span",{className:"text-xs text-white/30",children:"Ctrl+S to save"}),r.jsxs("button",{onClick:$,className:"flex items-center gap-1.5 text-xs text-white/40 hover:text-white/70 transition-colors",title:"Open in external editor",children:[r.jsx(Jl,{className:"w-3 h-3"}),"Open in Editor"]})]}),S&&r.jsx("div",{className:"absolute inset-0 z-20 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:r.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-xl p-6 max-w-sm mx-4 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(pt,{className:"w-5 h-5 text-primary shrink-0"}),r.jsx("h3",{className:"text-sm font-bold text-white",children:"Unsaved Changes"})]}),r.jsx("p",{className:"text-sm text-white/60 mb-4",children:"You have unsaved changes. Do you want to save before closing?"}),r.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{k(!1),t()},className:"px-3 py-1.5 text-xs font-medium text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:"Discard"}),r.jsx("button",{onClick:()=>k(!1),className:"px-3 py-1.5 text-xs font-medium text-white/60 hover:bg-white/10 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:async()=>{await O(),k(!1),t()},className:"px-3 py-1.5 text-xs font-medium bg-primary text-black hover:bg-primary/90 rounded-lg transition-colors",children:"Save & Close"})]})]})})]})]})}function af({confidence:n}){return r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Safe to Remove"})}function lu({severity:n}){const e=(n==null?void 0:n.toLowerCase())||"low",t={critical:"bg-red-500/20 text-red-400",high:"bg-orange-500/20 text-orange-400",medium:"bg-primary/20 text-primary",low:"bg-white/10 text-white/60"};return r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${t[e]||t.low}`,children:e})}function Ll({status:n,variant:e="neutral"}){const t={success:"bg-emerald-500/20 text-emerald-400",warning:"bg-primary/20 text-primary",danger:"bg-red-500/20 text-red-400",neutral:"bg-white/10 text-white/60"};return r.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded ${t[e]}`,children:n})}function of({code:n,language:e,showLineNumbers:t=!1,highlightLines:s=[],maxHeight:i="300px"}){const[o,c]=C.useState(!1),d=(n==null?void 0:n.split(`
`))||[],u=()=>{navigator.clipboard.writeText(n),c(!0),setTimeout(()=>c(!1),2e3)};return r.jsxs("div",{className:"relative bg-[#0a0a0a] border border-white/10 rounded-lg overflow-hidden my-2",children:[e&&r.jsx("div",{className:"absolute top-2 right-2 text-xs text-white/40 bg-white/10 px-2 py-0.5 rounded",children:e}),r.jsx("button",{onClick:u,className:"absolute top-2 right-16 p-1 hover:bg-white/10 rounded",children:o?r.jsx(zt,{className:"w-3 h-3 text-emerald-400"}):r.jsx(Ct,{className:"w-3 h-3 text-white/40"})}),r.jsx("pre",{className:"p-4 overflow-auto text-sm font-mono",style:{maxHeight:i},children:t?d.map((m,p)=>{const g=p+1,y=s.includes(g);return r.jsxs("div",{className:`flex ${y?"bg-primary/20":""}`,children:[r.jsx("span",{className:"w-8 text-white/30 text-right pr-4 select-none flex-shrink-0",children:g}),r.jsx("span",{className:"text-white/80",children:m})]},p)}):r.jsx("code",{className:"text-white/80",children:n})})]})}function Ws({type:n="info",title:e,description:t,items:s=[],code:i,confidence:o}){const c={usage:r.jsx(Sj,{className:"w-4 h-4"}),file:r.jsx(Kt,{className:"w-4 h-4"}),import:r.jsx(Ux,{className:"w-4 h-4"}),export:r.jsx(Ux,{className:"w-4 h-4"}),warning:r.jsx(pt,{className:"w-4 h-4"}),info:r.jsx(sr,{className:"w-4 h-4"}),success:r.jsx(lr,{className:"w-4 h-4"}),security:r.jsx(pn,{className:"w-4 h-4"}),code:r.jsx(hj,{className:"w-4 h-4"})},d={warning:"border-l-primary",success:"border-l-emerald-500",security:"border-l-red-500",info:"border-l-blue-500"};return r.jsxs("div",{className:`bg-[#141414] border border-white/10 ${d[n]||""} border-l-2 rounded-lg overflow-hidden my-3`,children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx("span",{className:"text-primary",children:c[n]||c.info}),r.jsx("span",{className:"font-medium text-sm flex-1",children:e}),o&&r.jsx(af,{confidence:o})]}),r.jsxs("div",{className:"p-4",children:[t&&r.jsx("p",{className:"text-sm text-white/60 mb-3",children:t}),s.length>0&&r.jsx("ul",{className:"space-y-2",children:s.map((u,m)=>r.jsxs("li",{className:"text-sm text-white/70 flex items-start gap-2",children:[r.jsx("span",{className:"text-white/30 mt-1",children:"-"}),typeof u=="string"?u:u.file?r.jsxs("span",{children:[r.jsx("code",{className:"text-primary bg-primary/10 px-1.5 py-0.5 rounded text-xs",children:u.file}),u.line&&r.jsxs("span",{className:"text-white/40",children:[":",u.line]}),u.context&&r.jsxs("span",{className:"text-white/50 ml-2",children:["- ",u.context]})]}):u.text]},m))}),i&&r.jsx(of,{code:i.content,language:i.language,showLineNumbers:i.showLineNumbers,highlightLines:i.highlightLines})]})]})}function zC({lastModified:n,author:e,commitMessage:t,daysSinceModified:s,addedBy:i,addedDate:o}){if(!n)return null;const c=d=>{try{return new Date(d).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}catch{return d}};return r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(bj,{className:"w-4 h-4 text-orange-400"}),r.jsx("span",{className:"font-medium text-sm",children:"Git History"})]}),r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Last modified:"}),r.jsxs("span",{className:"text-white/80",children:[c(n),s!==void 0&&r.jsxs("span",{className:"text-white/40 ml-2",children:["(",s," days ago)"]})]})]}),e&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Author:"}),r.jsx("span",{className:"text-white/80",children:e})]}),t&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Commit:"}),r.jsx("span",{className:"text-white/60 font-mono text-xs",children:t})]}),i&&r.jsxs("div",{className:"flex text-sm",children:[r.jsx("span",{className:"w-28 text-white/50 flex-shrink-0",children:"Added by:"}),r.jsxs("span",{className:"text-white/80",children:[i,o&&r.jsxs("span",{className:"text-white/40 ml-2",children:["on ",c(o)]})]})]})]})]})}function hi({formula:n,children:e}){const[t,s]=C.useState(!1);return n?r.jsxs("div",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[e,t&&r.jsxs("div",{className:"absolute z-50 bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 p-3 bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl",children:[r.jsx("p",{className:"text-xs font-mono text-primary mb-2 break-all",children:n.formula}),n.breakdown&&n.breakdown.length>0&&r.jsx("ul",{className:"space-y-1",children:n.breakdown.map((i,o)=>r.jsx("li",{className:"text-[10px] text-white/50",children:i},o))}),r.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full",children:r.jsx("div",{className:"border-8 border-transparent border-t-[#1a1a1a]"})})]})]}):r.jsx(r.Fragment,{children:e})}function Go({monthlyCost:n,annualCost:e,potentialSavings:t,potentialSavingsAnnual:s,co2Monthly:i,bandwidth:o,description:c,currency:d,currencySymbol:u="$",formulas:m}){const p=y=>y===void 0?null:u?y<.01?`${u}0.00`:y<100?`${u}${y.toFixed(2)}`:`${u}${y.toFixed(0)}`:new Intl.NumberFormat("en-US",{style:"currency",currency:d||"USD"}).format(y),g=y=>{if(y===void 0)return null;if(y===0)return"0 B";const b=1024,v=["B","KB","MB","GB"],j=Math.floor(Math.log(y)/Math.log(b));return parseFloat((y/Math.pow(b,j)).toFixed(1))+" "+v[j]};return r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(zl,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"font-medium text-sm",children:"Cost Impact"}),m&&r.jsx("span",{className:"text-[10px] text-white/40 ml-auto",children:"Hover for formula"})]}),r.jsxs("div",{className:"p-4",children:[c&&r.jsx("p",{className:"text-sm text-white/60 mb-4",children:c}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n!==void 0&&r.jsx(hi,{formula:m==null?void 0:m.bandwidth,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:p(n)}),r.jsx("p",{className:"text-xs text-white/50",children:"Monthly cost"})]})}),e!==void 0&&r.jsx(hi,{formula:m!=null&&m.bandwidth?{...m.bandwidth,formula:m.bandwidth.formula+"  12"}:null,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:p(e)}),r.jsx("p",{className:"text-xs text-white/50",children:"Annual cost"})]})}),t!==void 0&&r.jsx(hi,{formula:(m==null?void 0:m.wasteBandwidth)||(m==null?void 0:m.wasteStorage),children:r.jsxs("div",{className:"text-center p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg cursor-help hover:bg-emerald-500/20 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["-",p(t)]}),r.jsx("p",{className:"text-xs text-white/50",children:"Monthly savings"})]})}),s!==void 0&&r.jsx(hi,{formula:m!=null&&m.wasteBandwidth?{...m.wasteBandwidth,formula:m.wasteBandwidth.formula+"  12"}:null,children:r.jsxs("div",{className:"text-center p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg cursor-help hover:bg-emerald-500/20 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["-",p(s)]}),r.jsx("p",{className:"text-xs text-white/50",children:"Annual savings"})]})}),i!==void 0&&r.jsx(hi,{formula:m==null?void 0:m.co2,children:r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg cursor-help hover:bg-white/10 transition-colors",children:[r.jsxs("p",{className:"text-lg font-bold text-white",children:[i.toFixed(3)," kg"]}),r.jsx("p",{className:"text-xs text-white/50",children:"CO2/month"})]})}),o!==void 0&&r.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[r.jsx("p",{className:"text-lg font-bold text-white",children:g(o)}),r.jsx("p",{className:"text-xs text-white/50",children:"Bandwidth"})]})]}),(m==null?void 0:m.developerTime)&&m.developerTime.timeHours!==void 0&&m.developerTime.timeHours>0&&r.jsx(hi,{formula:m.developerTime,children:r.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg cursor-help hover:bg-blue-500/20 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-white/70",children:"Estimated cleanup time"}),r.jsx("p",{className:"text-xs text-white/40",children:"Developer cost to remove this waste"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-white",children:[m.developerTime.timeHours.toFixed(1)," hours"]}),r.jsx("p",{className:"text-sm text-blue-400",children:m.developerTime.resultFormatted})]})]})})})]})]})}function En({title:n,description:e,priority:t,effort:s,commands:i=[],steps:o=[],alternatives:c=[],links:d=[]}){const[u,m]=C.useState(null),p=v=>{navigator.clipboard.writeText(v),m(v),setTimeout(()=>m(null),2e3)},g={high:"border-l-red-500",medium:"border-l-primary",low:"border-l-blue-500"},y={high:"bg-red-500/20 text-red-400",medium:"bg-primary/20 text-primary",low:"bg-blue-500/20 text-blue-400"},b={low:"Quick fix",medium:"Some effort",high:"Significant work"};return r.jsxs("div",{className:`bg-[#141414] border border-white/10 ${g[t||"medium"]||""} border-l-2 rounded-lg overflow-hidden my-3`,children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10 flex-wrap",children:[r.jsx(kj,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"font-medium text-sm flex-1",children:n}),t&&r.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded uppercase ${y[t]||y.medium}`,children:t}),s&&r.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded",children:b[s]||s})]}),r.jsxs("div",{className:"p-4",children:[e&&r.jsx("p",{className:"text-sm text-white/60 mb-4",children:e}),o.length>0&&r.jsx("ol",{className:"list-decimal list-inside space-y-2 mb-4",children:o.map((v,j)=>r.jsx("li",{className:"text-sm text-white/70",children:v},j))}),i.length>0&&r.jsx("div",{className:"space-y-2 mb-4",children:i.map((v,j)=>r.jsxs("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-white/10 rounded px-3 py-2",children:[r.jsx("code",{className:"text-sm text-primary flex-1 font-mono",children:v}),r.jsx("button",{onClick:()=>p(v),className:"p-1 hover:bg-white/10 rounded",children:u===v?r.jsx(zt,{className:"w-4 h-4 text-emerald-400"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]},j))}),c.length>0&&r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-4",children:[r.jsx("span",{className:"text-xs text-white/50",children:"Alternatives:"}),c.map((v,j)=>r.jsx("span",{className:"text-xs bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded",children:v},j))]}),d.length>0&&r.jsx("div",{className:"flex gap-4 flex-wrap",children:d.map((v,j)=>r.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[r.jsx(Jl,{className:"w-3 h-3"}),v.text||v.url]},j))})]})]})}function $C({fromVersion:n,toVersion:e,effort:t,steps:s=[],codeChanges:i=[],links:o=[]}){return!s.length&&!i.length?null:r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-lg overflow-hidden my-3",children:[r.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-white/5 border-b border-white/10",children:[r.jsx(oj,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"font-medium text-sm flex-1",children:["Migration Guide: ",n,"  ",e]}),t&&r.jsxs("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-0.5 rounded",children:[t," effort"]})]}),r.jsxs("div",{className:"p-4",children:[s.length>0&&r.jsx("ol",{className:"list-decimal list-inside space-y-2 mb-4",children:s.map((c,d)=>r.jsx("li",{className:"text-sm text-white/70",children:c},d))}),i.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-white/70",children:"Code changes required:"}),i.map((c,d)=>r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Before:"}),r.jsx("div",{className:"bg-[#0a0a0a] border-l-2 border-red-500/50 rounded",children:r.jsx(of,{code:c.before})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"After:"}),r.jsx("div",{className:"bg-[#0a0a0a] border-l-2 border-emerald-500/50 rounded",children:r.jsx(of,{code:c.after})})]})]},d))]}),o.length>0&&r.jsx("div",{className:"flex gap-4 flex-wrap mt-4",children:o.map((c,d)=>r.jsxs("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline",children:[r.jsx(Jl,{className:"w-3 h-3"}),c.text||"Documentation"]},d))})]})]})}function _C(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState([]),[o,c]=C.useState([]),[d,u]=C.useState([]),[m,p]=C.useState(null),[g,y]=C.useState(!1),[b,v]=C.useState(null),[j,S]=C.useState(null),[k,M]=C.useState(!1),[R,E]=C.useState([]),[B,I]=C.useState(null),[O,ne]=C.useState(null),[$,Z]=C.useState(new Set),[_,V]=C.useState(!1),[ee,ae]=C.useState(null),[ie,U]=C.useState(new Set),{showToast:de}=Xl(),[K,Q]=C.useState(!1),[se,P]=C.useState(null),[H,q]=C.useState(!1),ce=()=>{n&&be.getQuarantine(n).then(T=>{E(T.sessions||[])}).catch(()=>{})},xe=async()=>{if(!(!n||o.length===0)){y(!0),v(null),M(!1);try{const T=await be.quarantineDeadCode(n,e==null?void 0:e.id);S(T),e!=null&&e.id&&be.getDeadCode(e.id).then(he=>c([...he.fullyDeadFiles||[],...he.partiallyDeadFiles||[]])).catch(console.error),ce()}catch(T){v(T.message||"Failed to quarantine files")}finally{y(!1)}}},Ce=async T=>{if(n){y(!0),v(null);try{await be.restoreQuarantine(n,T),S(null),e!=null&&e.id&&be.getDeadCode(e.id).then(he=>c([...he.fullyDeadFiles||[],...he.partiallyDeadFiles||[]])).catch(console.error),ce()}catch(he){v(he.message||"Failed to restore files")}finally{y(!1)}}},Re=async T=>{if(n){y(!0),v(null),I(null);try{await be.purgeQuarantine(n,T),ce()}catch(he){v(he.message||"Failed to purge quarantine")}finally{y(!1)}}},Pe=async()=>{if(!(!n||d.length===0)){Q(!0),v(null),q(!1);try{const T=await be.quarantineUnusedAssets(n,e==null?void 0:e.id);P(T),u([]),ce()}catch(T){v(T.message||"Failed to quarantine assets")}finally{Q(!1)}}},Ie=async T=>{if(!(!n||ee)){ae(T.name);try{const he=await be.uninstallDep(n,T.name);U(Ae=>new Set(Ae).add(T.name)),de(`Removed ${T.name} (${he.packageManager})`,"success")}catch(he){de(he.message||`Failed to uninstall ${T.name}`,"error")}finally{ae(null)}}},De=T=>{Z(he=>{const Ae=new Set(he);return T.forEach(Ne=>Ae.add(`${Ne.file}::${Ne.exportName}`)),Ae})};C.useEffect(()=>{var T,he;if(e!=null&&e.id){be.getUnusedDeps(e.id).then(Ne=>i(Ne)).catch(console.error),be.getDeadCode(e.id).then(Ne=>{const Le=[...Ne.fullyDeadFiles||[],...Ne.partiallyDeadFiles||[]];c(Le);const it=new Set;for(const Ht of Le)for(const Vt of Ht.exports||[])Vt.resolved&&it.add(`${Ht.relativePath||Ht.file}::${Vt.name}`);Z(it)}).catch(console.error);const Ae=((he=(T=e.raw)==null?void 0:T.details)==null?void 0:he.unusedAssets)||[];u(Ae)}},[e==null?void 0:e.id]),C.useEffect(()=>{ce()},[n]);const At=(T,he)=>{he==null||he.stopPropagation(),navigator.clipboard.writeText(T),p(T),setTimeout(()=>p(null),2e3)},tt=T=>{if(!T||T===0)return"0 B";const he=1024,Ae=["B","KB","MB","GB"],Ne=Math.floor(Math.log(T)/Math.log(he));return parseFloat((T/Math.pow(he,Ne)).toFixed(1))+" "+Ae[Ne]};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const Me=e.metrics.waste,Wt=o.reduce((T,he)=>T+(he.sizeBytes||0),0),Ys=T=>{var Ne,Le,it,Ht,Vt,ze;const he=[],Ae=[];return T.lastUsed&&Ae.push(`Last used: ${T.lastUsed}`),(Ne=T.searchedPatterns)!=null&&Ne.length&&Ae.push(`Searched for: ${T.searchedPatterns.join(", ")}`),(Le=T.potentialUsage)!=null&&Le.length?Ae.push(`Potential references found but not confirmed: ${T.potentialUsage.length}`):Ae.push("No imports or requires found in codebase"),he.push(r.jsx(Ws,{type:"file",title:"Why We Think It's Unused",items:Ae,confidence:T.confidence},"evidence")),(it=T.git)!=null&&it.lastModified&&he.push(r.jsx(zC,{...T.git},"git")),(T.costImpact||T.sizeBytes)&&he.push(r.jsx(Go,{bandwidth:T.sizeBytes,co2Monthly:(Ht=T.costImpact)==null?void 0:Ht.co2Monthly,potentialSavings:(Vt=T.costImpact)==null?void 0:Vt.monthlySavings,potentialSavingsAnnual:(ze=T.costImpact)==null?void 0:ze.annualSavings,description:`This unused dependency adds ${tt(T.sizeBytes)} to your project.`},"cost")),he.push(r.jsx(En,{title:`Remove ${T.name}`,priority:"medium",effort:"low",commands:[T.command],description:"Remove this unused dependency to reduce bundle size and maintenance burden.",alternatives:T.alternatives},"recommendation")),r.jsx("div",{className:"space-y-4",children:he})},os=T=>{var Ht,Vt;const he=[],Ae=T.exports||[],Ne=Ae.filter(ze=>ze.status==="dead"),Le=Ae.filter(ze=>ze.status==="live"),it=T.status==="fully-dead"||((Ht=T.summary)==null?void 0:Ht.canDeleteFile);return Ae.length>0&&(Ae.some(ze=>ze.sourceLine),he.push(r.jsxs("div",{className:"bg-[#0d0d0d] rounded-lg border border-white/10 overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold text-white",children:it?`${Ae.length} Dead Export${Ae.length!==1?"s":""}`:`${Ne.length} Unused Export${Ne.length!==1?"s":""}`}),r.jsx(af,{confidence:"safe-to-remove"})]}),!it&&r.jsxs("span",{className:"text-xs text-white/40",children:[Le.length," live  ",Ne.length," dead of ",Ae.length," total"]})]}),r.jsx("div",{className:"divide-y divide-white/5",children:Ae.map((ze,la)=>{var Fi;const cs=ze.status==="dead"||it,Ut=$.has(`${T.relativePath||T.file}::${ze.name}`),_c=()=>{if(!ze.sourceLine)return null;const xr=ze.sourceLine,Ii=xr.indexOf(ze.name);return Ii===-1?r.jsx("span",{className:Ut?"text-white/30 line-through":"text-white/60",children:xr}):r.jsxs("span",{className:Ut?"line-through":"",children:[r.jsx("span",{className:"text-white/40",children:xr.slice(0,Ii)}),r.jsx("span",{className:Ut?"text-emerald-400/60 bg-emerald-500/10 px-0.5 rounded":cs?"text-red-400 bg-red-500/20 px-0.5 rounded":"text-emerald-400 bg-emerald-500/15 px-0.5 rounded",children:ze.name}),r.jsx("span",{className:"text-white/40",children:xr.slice(Ii+ze.name.length)})]})};return r.jsxs("div",{className:`${Ut?"bg-emerald-500/5":cs?"bg-red-500/5":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 px-4 py-2",children:[r.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded min-w-[42px] text-center ${Ut?"bg-emerald-500/20 text-emerald-400":cs?"bg-red-500/20 text-red-400":"bg-emerald-500/20 text-emerald-400"}`,children:Ut?"FIXED":cs?"DEAD":"LIVE"}),r.jsx("code",{className:`text-sm font-semibold ${Ut?"text-emerald-400/60 line-through":cs?"text-red-400":"text-emerald-400"}`,children:ze.name}),r.jsx("span",{className:"text-xs text-white/30",children:ze.type||""}),Ut?r.jsx("span",{className:"text-xs text-emerald-400/50 ml-auto",children:"resolved"}):(Fi=ze.importedBy)!=null&&Fi.length?r.jsxs("span",{className:"text-xs text-white/30 ml-auto",children:["imported by ",ze.importedBy.slice(0,2).join(", "),ze.importedBy.length>2?` +${ze.importedBy.length-2}`:""]}):cs?r.jsx("span",{className:"text-xs text-red-400/50 ml-auto",children:"no importers found"}):null]}),ze.sourceLine&&r.jsx("div",{className:`mx-4 mb-2 rounded overflow-x-auto font-mono text-xs ${Ut?"bg-emerald-950/20 border border-emerald-500/10":cs?"bg-red-950/30 border border-red-500/10":"bg-[#111] border border-white/5"}`,children:r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"select-none px-3 py-1.5 text-white/20 border-r border-white/5 min-w-[3.5rem] text-right hover:text-primary cursor-pointer",onClick:()=>ne({file:T.file,relativePath:T.relativePath,exports:T.exports,scrollToLine:ze.line,summary:T.summary}),title:"Open at this line",children:ze.line}),r.jsx("pre",{className:"px-3 py-1.5 whitespace-pre overflow-x-auto",children:_c()})]})})]},la)})})]},"exports-table"))),it&&he.push(r.jsx(Ws,{type:"warning",title:"Entire File Can Be Deleted",description:`All ${((Vt=T.summary)==null?void 0:Vt.totalExports)||Ae.length||0} export(s) are dead. ${T.lineCount?`File has ${T.lineCount} lines.`:""}`,confidence:"safe-to-remove"},"orphan")),T.costImpact&&he.push(r.jsx(Go,{bandwidth:T.costImpact.bundleContribution||T.sizeBytes,description:`This dead code adds ${T.sizeFormatted||tt(T.sizeBytes)} to your codebase. Annual cost: ${T.costImpact.annualCostGBP||"0"}. Monthly CO2: ${T.costImpact.monthlyCO2Kg||"0"} kg.`},"cost")),T.recommendation&&he.push(r.jsx(En,{title:it?"Delete This File":"Remove Unused Exports",priority:"low",effort:"low",description:T.recommendation.reasoning||(it?"This file appears to be completely unused. Consider deleting it after verification.":"Remove the unused exports to reduce bundle size."),commands:T.recommendation.command?[T.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:he})},Tn=T=>{var Ne;const he=[],Ae=[];if(Ae.push(`Path: ${T.file}`),T.dimensions&&Ae.push(`Dimensions: ${T.dimensions.width}  ${T.dimensions.height} (${T.dimensions.aspectRatio||"N/A"})`),T.format&&Ae.push(`Format: ${T.format.toUpperCase()}`),Ae.push(`Size: ${T.sizeFormatted||tt(T.sizeBytes||T.size||0)}`),he.push(r.jsx(Ws,{type:"file",title:"File Details",items:Ae},"info")),T.evidence){const Le=[];Le.push(`Searched ${T.evidence.filesSearched||0} files (${T.evidence.jsFilesSearched||0} JS, ${T.evidence.cssFilesSearched||0} CSS)`),(Ne=T.evidence.searchPatterns)!=null&&Ne.length&&Le.push(`Checked: ${T.evidence.searchPatterns.join(", ")}`),Le.push(`References found: ${T.referenceCount||0}`),he.push(r.jsx(Ws,{type:"warning",title:"No Usage Found",items:Le,confidence:"safe-to-remove"},"evidence"))}return T.costImpact&&he.push(r.jsx(Go,{bandwidth:T.sizeBytes||T.size,description:`Annual cost: ${T.costImpact.annualCostGBP||"0"}. Monthly CO2: ${T.costImpact.monthlyCO2Kg||"0"} kg. Monthly transfer: ${T.costImpact.monthlyTransferGB||"0"} GB.`},"cost")),T.recommendation&&he.push(r.jsx(En,{title:"Remove Unused Asset",priority:"medium",effort:"low",description:T.recommendation.reasoning||"This asset is not referenced anywhere in the codebase.",commands:T.recommendation.command?[T.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:he})},pr=T=>new Date(T).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),ws=R.filter(T=>T.status==="active");return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Mn,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Waste Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-orange-400 mb-2",children:"What is Digital Waste?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Digital waste is code and assets that ship to production but serve no purpose. This includes",r.jsx("strong",{className:"text-white/80",children:" unused dependencies"})," (installed but never imported),",r.jsx("strong",{className:"text-white/80",children:" dead code"})," (functions/files never called), and",r.jsx("strong",{className:"text-white/80",children:" unused assets"})," (images/fonts not referenced). Removing waste reduces bundle size, speeds up builds, and lowers hosting costs."]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:`${Me<2?"bg-emerald-500/10 border-emerald-500/30":"bg-orange-500/10 border-orange-500/30"} border rounded-xl p-6 text-center`,children:[r.jsxs("p",{className:`text-4xl font-bold ${Me<2?"text-emerald-400":"text-orange-400"}`,children:[Me.toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Waste"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:s.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused Deps"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:o.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Dead Code Files"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-4xl font-bold text-white",children:d.length}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused Assets"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"Unused Dependencies"}),s.length>0&&r.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:s.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Version"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Action"}),r.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),r.jsx("tbody",{children:s.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No unused dependencies detected"})}):s.map((T,he)=>{const Ae=ie.has(T.name),Ne=ee===T.name;return r.jsx(qs,{cells:[r.jsxs("span",{className:Ae?"text-white/40 line-through":"text-primary",children:[Ae&&r.jsx(Dr,{className:"w-3.5 h-3.5 text-emerald-400 inline mr-1.5"}),T.name]}),r.jsx("span",{className:"text-white/70",children:T.version}),r.jsx("span",{className:"text-white/70",children:T.sizeFormatted||tt(T.sizeBytes)}),Ae?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Removed"}):r.jsx(af,{confidence:"safe-to-remove"}),r.jsxs("div",{className:"flex items-center gap-2",onClick:Le=>Le.stopPropagation(),children:[!Ae&&r.jsxs("button",{onClick:Le=>{Le.stopPropagation(),Ie(T)},disabled:!!ee,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[Ne?r.jsx(je,{className:"w-3 h-3 animate-spin"}):r.jsx(Mn,{className:"w-3 h-3"}),Ne?"Removing...":"Run"]}),r.jsx("code",{className:"text-xs text-primary bg-primary/10 px-2 py-1 rounded",children:T.command}),r.jsx("button",{onClick:Le=>At(T.command,Le),className:"p-1 hover:bg-white/10 rounded",children:m===T.command?r.jsx(zt,{className:"w-4 h-4 text-emerald-500"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]})],expandedContent:Ys(T)},he)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-bold",children:"Dead Code"}),o.length>0&&r.jsx("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full",children:o.length}),$.size>0&&r.jsxs("span",{className:"text-xs text-emerald-400 font-medium",children:[$.size," resolved"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[$.size>0&&r.jsx("button",{onClick:()=>V(!_),className:"text-xs text-white/40 hover:text-white/70 transition-colors",children:_?"Show resolved":"Hide resolved"}),j&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Dr,{className:"w-3.5 h-3.5 text-emerald-400"}),r.jsxs("span",{className:"text-emerald-400",children:[j.filesQuarantined," files quarantined"]}),r.jsxs("button",{onClick:()=>Ce(j.sessionId),disabled:g,className:"flex items-center gap-1 px-2 py-1 text-xs text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded transition-all",children:[r.jsx(Tl,{className:"w-3 h-3"}),r.jsx("span",{children:"Restore"})]})]}),o.length>0&&!j&&r.jsx("button",{onClick:()=>M(!0),disabled:g,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-lg transition-all disabled:opacity-70 shadow-lg shadow-orange-500/20",children:g?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Quarantining..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(di,{className:"w-4 h-4"}),r.jsx("span",{children:"Quarantine Dead Code"})]})})]})]}),b&&r.jsx("div",{className:"px-6 py-2 bg-red-500/10 border-b border-red-500/20 text-xs text-red-400",children:b}),k&&r.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 border-b border-orange-500/20",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-orange-500/20 rounded-lg",children:r.jsx(di,{className:"w-5 h-5 text-orange-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"Quarantine Dead Code"}),r.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Move ",o.length," file",o.length!==1?"s":""," (",tt(Wt),") to quarantine? These files will be moved to ",r.jsx("code",{className:"text-orange-400 bg-orange-500/10 px-1 rounded",children:".swynx-quarantine/"})," and can be restored at any time."]}),o.length<=15&&r.jsx("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:o.map((T,he)=>r.jsxs("div",{className:"text-orange-400",children:[T.relativePath||T.file,r.jsx("span",{className:"text-white/30 ml-2",children:T.sizeFormatted||tt(T.sizeBytes)})]},he))}),o.length>15&&r.jsxs("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:[o.slice(0,10).map((T,he)=>r.jsxs("div",{className:"text-orange-400",children:[T.relativePath||T.file,r.jsx("span",{className:"text-white/30 ml-2",children:T.sizeFormatted||tt(T.sizeBytes)})]},he)),r.jsxs("div",{className:"text-white/40 mt-1",children:["... and ",o.length-10," more files"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:xe,disabled:g,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-all disabled:opacity-70",children:[g?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(di,{className:"w-4 h-4"}),r.jsxs("span",{children:["Quarantine ",o.length," File",o.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-xs font-medium text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:"Cancel"})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Exports"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Action"})]})}),r.jsx("tbody",{children:o.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No dead code detected"})}):o.map((T,he)=>{var Ht,Vt;const Ae=T.relativePath||T.file,Ne=(T.exports||[]).filter(ze=>ze.status==="dead"),Le=Ne.filter(ze=>$.has(`${Ae}::${ze.name}`)).length,it=Ne.length>0&&Le===Ne.length;return _&&it?null:r.jsx(qs,{cells:[r.jsxs("span",{className:"flex items-center gap-2",children:[it&&r.jsx(Dr,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}),r.jsx("span",{className:`hover:underline cursor-pointer ${it?"text-white/40 line-through":"text-primary"}`,onClick:ze=>{ze.stopPropagation(),ne({file:T.file,relativePath:T.relativePath,exports:T.exports,summary:T.summary})},title:"Open in editor",children:Ae})]}),r.jsx("span",{className:"text-white/70",children:Le>0?r.jsxs("span",{children:[Le,r.jsxs("span",{className:"text-white/30",children:["/",Ne.length]})]}):((Ht=T.summary)==null?void 0:Ht.deadExports)||Ne.length||0}),r.jsx("span",{className:"text-white/70",children:T.sizeFormatted||tt(T.sizeBytes)}),it?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-emerald-500/20 text-emerald-400",children:"Fixed"}):(Vt=T.summary)!=null&&Vt.canDeleteFile||T.status==="fully-dead"?r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-red-500/20 text-red-400",children:"Delete File"}):r.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded uppercase bg-amber-500/20 text-amber-400",children:"Remove Exports"})],expandedContent:os(T)},he)})})]})})]}),ws.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(di,{className:"w-4 h-4 text-orange-400"}),r.jsx("span",{className:"text-sm font-bold",children:"Quarantined Files"})]}),r.jsxs("span",{className:"text-xs text-white/40",children:[ws.reduce((T,he)=>T+he.fileCount,0)," files in ",ws.length," session",ws.length!==1?"s":""]})]}),r.jsx("div",{className:"divide-y divide-white/5",children:ws.map(T=>r.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-white/80",children:pr(T.createdAt)}),r.jsxs("span",{className:"text-xs text-white/40",children:[T.fileCount," file",T.fileCount!==1?"s":""]}),r.jsxs("span",{className:"text-xs text-white/30",children:["(",tt(T.totalSize),")"]})]}),T.reason&&T.reason!=="manual"&&r.jsx("p",{className:"text-xs text-white/30 mt-0.5",children:T.reason})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>Ce(T.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded-lg transition-all disabled:opacity-50",children:[r.jsx(Tl,{className:"w-3.5 h-3.5"}),"Restore"]}),B===T.sessionId?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("button",{onClick:()=>Re(T.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 rounded-lg transition-all disabled:opacity-50",children:[r.jsx(pt,{className:"w-3.5 h-3.5"}),"Confirm Delete"]}),r.jsx("button",{onClick:()=>I(null),className:"p-1.5 text-white/40 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:r.jsx(or,{className:"w-3.5 h-3.5"})})]}):r.jsxs("button",{onClick:()=>I(T.sessionId),disabled:g,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-red-400/60 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all disabled:opacity-50",children:[r.jsx(Mn,{className:"w-3.5 h-3.5"}),"Purge"]})]})]},T.sessionId))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yo,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Unused Assets"}),r.jsxs(hf,{href:"/assets",className:"text-xs text-primary hover:underline flex items-center gap-1 ml-2",children:["Full Asset Analysis ",r.jsx(Ko,{className:"w-3 h-3"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[se&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Dr,{className:"w-3.5 h-3.5 text-emerald-400"}),r.jsxs("span",{className:"text-emerald-400",children:[se.filesQuarantined," assets quarantined"]}),r.jsxs("button",{onClick:()=>Ce(se.sessionId),disabled:K,className:"flex items-center gap-1 px-2 py-1 text-xs text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded transition-all",children:[r.jsx(Tl,{className:"w-3 h-3"}),r.jsx("span",{children:"Restore"})]})]}),d.length>0&&!se&&r.jsx("button",{onClick:()=>q(!0),disabled:K,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-lg transition-all disabled:opacity-70 shadow-lg shadow-blue-500/20",children:K?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{children:"Quarantining..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(di,{className:"w-4 h-4"}),r.jsx("span",{children:"Quarantine Unused Assets"})]})}),d.length>0&&!se&&!H&&r.jsx("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-1 rounded-full",children:d.length})]})]}),H&&r.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border-b border-blue-500/20",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:r.jsx(Yo,{className:"w-5 h-5 text-blue-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-1",children:"Quarantine Unused Assets"}),r.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Move ",d.length," unused asset",d.length!==1?"s":""," (",tt(d.reduce((T,he)=>T+(he.sizeBytes||he.size||0),0)),") to quarantine? These files are not referenced in any code or CSS. They will be moved to ",r.jsx("code",{className:"text-blue-400 bg-blue-500/10 px-1 rounded",children:".swynx-quarantine/"})," and can be restored at any time."]}),r.jsxs("div",{className:"mb-3 p-2 bg-black/20 rounded text-xs font-mono max-h-40 overflow-y-auto",children:[d.slice(0,15).map((T,he)=>r.jsxs("div",{className:"text-blue-400",children:[T.file,r.jsx("span",{className:"text-white/30 ml-2",children:T.sizeFormatted||tt(T.sizeBytes||T.size||0)})]},he)),d.length>15&&r.jsxs("div",{className:"text-white/40 mt-1",children:["... and ",d.length-15," more assets"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:Pe,disabled:K,className:"flex items-center gap-2 px-4 py-2 text-xs font-medium bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all disabled:opacity-70",children:[K?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(di,{className:"w-4 h-4"}),r.jsxs("span",{children:["Quarantine ",d.length," Asset",d.length!==1?"s":""]})]}),r.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 text-xs font-medium text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-all",children:"Cancel"})]})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Path"}),r.jsx("th",{className:"px-6 py-3",children:"Dimensions"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Annual Cost"})]})}),r.jsx("tbody",{children:d.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No unused assets detected"})}):d.map((T,he)=>{var Ae;return r.jsx(qs,{cells:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-white/40 bg-white/10 px-1.5 py-0.5 rounded uppercase",children:T.format||T.type||"?"}),r.jsx("span",{className:"text-primary",children:T.name||(T.file||"Unknown").split("/").pop()})]}),r.jsx("span",{className:"text-white/50 text-xs max-w-[200px] truncate block",title:T.file,children:T.file?T.file.split("/").slice(0,-1).join("/"):"-"}),r.jsx("span",{className:"text-white/70",children:T.dimensions?`${T.dimensions.width}${T.dimensions.height}`:"-"}),r.jsx("span",{className:"text-white/70",children:T.sizeFormatted||tt(T.sizeBytes||T.size)}),r.jsxs("span",{className:"text-orange-400",children:["",((Ae=T.costImpact)==null?void 0:Ae.annualCostGBP)||"0"]})],expandedContent:Tn(T)},he)})})]})})]})]}),O&&n&&r.jsx(IC,{projectPath:n,editorFile:O,onClose:()=>ne(null),scanId:e==null?void 0:e.id,onExportsResolved:De})]})}function WC(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState([]);if(C.useEffect(()=>{e!=null&&e.id&&be.getSecurity(e.id).then(g=>i(g.vulnerabilities||g.allVulnerabilities||[])).catch(console.error)},[e==null?void 0:e.id]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const o=s.filter(g=>g.severity==="critical").length,c=s.filter(g=>g.severity==="high").length,d=s.filter(g=>g.severity==="medium"||g.severity==="moderate").length,u=s.filter(g=>g.severity==="low"||g.severity==="info").length,m=[{count:o,label:"Critical",bg:"bg-red-500/20",border:"border-red-500/30",text:"text-red-400"},{count:c,label:"High",bg:"bg-orange-500/20",border:"border-orange-500/30",text:"text-orange-400"},{count:d,label:"Medium",bg:"bg-primary/20",border:"border-primary/30",text:"text-primary"},{count:u,label:"Low",bg:"bg-white/5",border:"border-white/10",text:"text-white/70"}],p=g=>{var k,M;const y=g.evidence||{},b=[];if(y.actualRisk||y.riskExplanation){const R=y.actualRisk==="none"||y.actualRisk==="low"||!y.packageImported;b.push(r.jsx(Ws,{type:R?"success":"security",title:"Actual Risk Assessment",description:y.riskExplanation||`Risk level: ${y.actualRisk||g.severity}`,confidence:(k=g.recommendation)==null?void 0:k.confidence},"risk"))}if(y.filesSearched){const R=[`Searched ${y.filesSearched} files`];y.searchPatterns&&y.searchPatterns.length>0&&R.push(`Patterns: ${y.searchPatterns.join(", ")}`),R.push(`Matches found: ${y.matchesFound||0}`),y.packageImported!==void 0&&R.push(`Package imported: ${y.packageImported?"Yes":"No"}`),y.vulnerableFunctionUsed!==void 0&&R.push(`Vulnerable function used: ${y.vulnerableFunctionUsed?"Yes":"No"}`),b.push(r.jsx(Ws,{type:"info",title:"Code Analysis",items:R},"search"))}if(y.locations&&y.locations.length>0&&b.push(r.jsx(Ws,{type:"usage",title:"Vulnerable Code Paths",items:y.locations.map(R=>({file:R.file,line:R.line,context:R.code}))},"usage")),y.importLocations&&y.importLocations.length>0&&b.push(r.jsx(Ws,{type:"usage",title:"Import Locations",items:y.importLocations.map(R=>({file:R.file,line:R.line}))},"imports")),g.id||g.cweId||g.severityScore){const R=[];g.id&&R.push(`ID: ${g.id}`),g.cweId&&R.push(`CWE: ${g.cweId}`),g.severityScore&&R.push(`CVSS Score: ${g.severityScore}`),g.installedVersion&&R.push(`Installed: ${g.installedVersion}`),b.push(r.jsx(Ws,{type:"info",title:"Vulnerability Details",items:R},"cve"))}const v=g.fix||{},j=g.recommendation||{},S={title:"Fix This Vulnerability",priority:j.priority||g.severity,effort:v.effort||"low",description:j.reasoning||(v.available?`A fix is available in version ${v.fixedIn||"latest"}. ${v.testingRequired||""}`:"No automatic fix available. Consider alternatives or manual patching."),commands:j.command?[j.command]:v.command?[v.command]:[],links:((M=g.references)==null?void 0:M.slice(0,2).map(R=>({url:R,text:"Reference"})))||[]};return r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Evidence"}),b.length>0?b:r.jsx("p",{className:"text-sm text-white/40",children:"No additional evidence available"})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Recommendation"}),r.jsx(En,{...S})]})]})};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pn,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Security Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-red-400 mb-2",children:"What are Security Vulnerabilities?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["These are known security issues in your dependencies reported by npm audit. Not all vulnerabilities are exploitable -",r.jsx("strong",{className:"text-white/80",children:" actual risk depends on how you use the package"}),". We analyse your code to determine if vulnerable code paths are actually reachable. Critical and High severity issues with confirmed exploitability should be addressed immediately."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(g=>r.jsxs("div",{className:`${g.bg} ${g.border} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${g.text}`,children:g.count}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:g.label})]},g.label))}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Vulnerabilities"})}),s.length===0?r.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center mb-4",children:r.jsx(lr,{className:"w-6 h-6 text-emerald-500"})}),r.jsx("p",{className:"text-white/50",children:"No vulnerabilities detected"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Severity"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Title"}),r.jsx("th",{className:"px-6 py-3",children:"Actual Risk"}),r.jsx("th",{className:"px-6 py-3",children:"Fix"})]})}),r.jsx("tbody",{children:s.map((g,y)=>{var S;const b=g.evidence||{},v=b.actualRisk||g.severity;let j;return b.actualRisk==="none"||!b.packageImported&&b.packageImported!==void 0?j=r.jsx(Ll,{status:"Not Used",variant:"success"}):v&&v!==g.severity?j=r.jsx(lu,{severity:v}):b.actualRisk?j=r.jsx(lu,{severity:b.actualRisk}):j=r.jsx("span",{className:"text-white/30",children:"-"}),r.jsx(qs,{cells:[r.jsx(lu,{severity:g.severity}),r.jsx("span",{className:"text-primary",children:g.package}),r.jsx("span",{className:"text-white/70 max-w-[200px] truncate block",title:g.title,children:g.title}),j,g.fixAvailable||(S=g.fix)!=null&&S.available?r.jsx("span",{className:"text-emerald-400",children:"Yes"}):r.jsx("span",{className:"text-white/40",children:"No"})],expandedContent:p(g)},y)})})]})})]})]})]})}function au({text:n}){return r.jsxs("span",{className:"relative group inline-flex ml-1 cursor-help",children:[r.jsx(sr,{className:"w-3 h-3 text-white/30 hover:text-white/60 transition-colors"}),r.jsx("span",{className:"fixed hidden group-hover:block px-3 py-2 text-xs text-white bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl whitespace-normal w-52 text-center normal-case tracking-normal font-normal z-[9999] mt-6 -ml-24",children:n})]})}function HC(){var b,v,j,S;const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState([]);if(C.useEffect(()=>{e!=null&&e.id&&be.getOutdated(e.id).then(k=>{const R=(k.packages||[]).filter(E=>E&&typeof E.package=="string"&&E.package.length>0&&E.current&&E.latest);i(R)}).catch(()=>{var R,E,B;const k=((E=(R=e.raw)==null?void 0:R.outdated)==null?void 0:E.packages)||((B=e.raw)==null?void 0:B.outdated)||[],M=Array.isArray(k)?k.filter(I=>I&&typeof I.package=="string"&&I.package.length>0):[];i(M)})},[e==null?void 0:e.id]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const o=k=>{var M;return k.updateType||((M=k.effort)==null?void 0:M.updateType)||"patch"},c=s.filter(k=>o(k)==="major"),d=s.filter(k=>o(k)==="minor"),u=s.filter(k=>o(k)==="patch"),m=((v=(b=e.raw)==null?void 0:b.summary)==null?void 0:v.dependencyCount)||0,p=[{count:m,label:"Total Dependencies",bg:"bg-[#141414]",border:"border-white/10",text:"text-white"},{count:c.length,label:"Major Updates",bg:"bg-orange-500/20",border:"border-orange-500/30",text:"text-orange-400"},{count:d.length,label:"Minor Updates",bg:"bg-blue-500/20",border:"border-blue-500/30",text:"text-blue-400"},{count:u.length,label:"Patch Updates",bg:"bg-emerald-500/20",border:"border-emerald-500/30",text:"text-emerald-400"}],g=k=>{switch(k){case"major":return"bg-orange-500/20 text-orange-400";case"minor":return"bg-blue-500/20 text-blue-400";default:return"bg-emerald-500/20 text-emerald-400"}},y=k=>{var I,O,ne,$,Z,_,V,ee,ae,ie;const M=[],R=k.updateType||((I=k.effort)==null?void 0:I.updateType),E=((O=k.effort)==null?void 0:O.level)||(R==="major"?"high":"low");if(k.effort){const U=[];k.effort.estimatedTime&&U.push(`Estimated time: ${k.effort.estimatedTime}`),k.effort.testingRequired&&U.push(`Testing: ${k.effort.testingRequired}`),k.effort.breakingChanges!==void 0&&U.push(`Breaking changes: ${k.effort.breakingChanges?"Yes":"No"}`),k.effort.codeChangesRequired!==void 0&&U.push(`Code changes required: ${k.effort.codeChangesRequired?"Yes":"No"}`),k.effort.dependentsAffected!==void 0&&k.effort.dependentsAffected>0&&U.push(`Dependents affected: ${k.effort.dependentsAffected}`),U.length>0&&M.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Update Effort"}),r.jsx(Ws,{type:"info",title:`${E.charAt(0).toUpperCase()+E.slice(1)} Effort Update`,items:U,confidence:(ne=k.recommendation)==null?void 0:ne.confidence})]},"effort"))}if(($=k.changelog)!=null&&$.available&&((Z=k.changelog.highlights)!=null&&Z.length)){const U=k.changelog.highlights.map(de=>`${de.version}: ${de.summary}`);M.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"What's New"}),r.jsx(Ws,{type:"info",title:"Changelog Highlights",items:U})]},"changelog"))}else k.changelog&&!k.changelog.available&&M.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Changelog"}),r.jsx("p",{className:"text-sm text-white/40",children:k.changelog.reason||"No changelog available"})]},"changelog"));(_=k.majorVersionAvailable)!=null&&_.available&&((V=k.recommendation)!=null&&V.migrationGuide)&&M.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Migration"}),r.jsx($C,{fromVersion:k.current,toVersion:k.majorVersionAvailable.version||k.latest,effort:E,links:[{url:k.recommendation.migrationGuide,text:"Migration Guide"}]})]},"migration"));const B={title:`Update ${k.package}`,priority:((ee=k.recommendation)==null?void 0:ee.priority)||(R==="major"?"low":R==="minor"?"medium":"low"),effort:E,description:((ae=k.recommendation)==null?void 0:ae.reasoning)||(R==="major"?"This is a major version update. Review breaking changes before updating.":"This update should be safe to apply."),commands:(ie=k.recommendation)!=null&&ie.command?[k.recommendation.command]:[`npm install ${k.package}@${k.latest}`]};return M.push(r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-3",children:"Action"}),r.jsx(En,{...B})]},"recommendation")),r.jsx("div",{className:"space-y-6",children:M})};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(It,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Dependencies"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What are Outdated Dependencies?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["These packages have newer versions available. ",r.jsx("strong",{className:"text-white/80",children:"Patch updates"})," are usually safe bug fixes.",r.jsx("strong",{className:"text-white/80",children:" Minor updates"})," add features but shouldn't break anything.",r.jsx("strong",{className:"text-white/80",children:" Major updates"})," may have breaking changes requiring code modifications. Staying current reduces security risk and ensures access to bug fixes and performance improvements."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:p.map(k=>r.jsxs("div",{className:`${k.bg} ${k.border} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${k.text}`,children:k.count}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.label})]},k.label))}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Outdated Dependencies"})}),s.length===0?r.jsxs("div",{className:"p-12 flex flex-col items-center justify-center text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center mb-4",children:r.jsx(lr,{className:"w-6 h-6 text-emerald-500"})}),r.jsx("p",{className:"text-white/50",children:"All dependencies are up to date"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Current"}),r.jsx("th",{className:"px-6 py-3",children:"Latest"}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Type",r.jsx(au,{text:"Major = new version with breaking changes. Minor = new features, backwards compatible. Patch = bug fixes only."})]})}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Effort",r.jsx(au,{text:"High = likely requires code changes and testing. Medium = some review needed. Low = safe to update with minimal risk."})]})}),r.jsx("th",{className:"px-6 py-3",children:r.jsxs("span",{className:"inline-flex items-center",children:["Breaking",r.jsx(au,{text:"Breaking changes may cause your code to fail after updating. Review the changelog and test thoroughly before updating."})]})})]})}),r.jsx("tbody",{children:s.map((k,M)=>{var O,ne;const R=o(k),E=((O=k.effort)==null?void 0:O.level)||(R==="major"?"high":"low");let B;E==="high"?B=r.jsx(Ll,{status:"High Effort",variant:"danger"}):E==="medium"?B=r.jsx(Ll,{status:"Medium",variant:"warning"}):B=r.jsx(Ll,{status:"Low Effort",variant:"success"});const I=(ne=k.effort)!=null&&ne.breakingChanges?r.jsx("span",{className:"text-xs font-bold bg-red-500/20 text-red-400 px-2 py-1 rounded",children:"Breaking"}):r.jsx("span",{className:"text-white/30",children:"-"});return r.jsx(qs,{cells:[r.jsx("span",{className:"text-primary",children:k.package}),r.jsx("span",{className:"text-white/70",children:k.current}),r.jsx("span",{className:"text-white/70",children:k.latest}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${g(R)}`,children:R}),B,I],expandedContent:y(k)},M)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"License Analysis"}),r.jsxs("span",{className:"text-xs text-white/40 bg-white/10 px-2 py-1 rounded",children:[m," packages"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"License"}),r.jsx("th",{className:"px-6 py-3",children:"Packages"}),r.jsx("th",{className:"px-6 py-3",children:"Risk"})]})}),r.jsx("tbody",{children:(S=(j=e.raw)==null?void 0:j.licenses)!=null&&S.byLicense?Object.entries(e.raw.licenses.byLicense).map(([k,M])=>{const R=k.toUpperCase(),E=["GPL","AGPL","LGPL","SSPL"].some(I=>R.includes(I)),B=["MPL","EPL","CDDL"].some(I=>R.includes(I));return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-white",children:k}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:M.length}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(Ll,{status:E?"HIGH":B?"MEDIUM":"LOW",variant:E?"danger":B?"warning":"success"})})]},k)}):r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No license data available"})})})]})})]})]})]})}function VC({isOpen:n,onClose:e}){const[t,s]=C.useState("pdf"),[i,o]=C.useState("preset"),[c,d]=C.useState("90d"),[u,m]=C.useState(""),[p,g]=C.useState(""),[y,b]=C.useState(!1),[v,j]=C.useState([]),[S,k]=C.useState(null);C.useEffect(()=>{n&&be.getESGPresets().then(R=>j(R.presets||[])).catch(()=>{j([{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"this-quarter",label:"This quarter"},{value:"last-quarter",label:"Last quarter"},{value:"this-year",label:"This year"},{value:"last-year",label:"Last year"}])})},[n]);const M=async()=>{b(!0),k(null);try{const R={format:t};if(i==="preset")R.period=c;else{if(!u||!p){k("Please select both start and end dates"),b(!1);return}R.after=u,R.before=p}const E=await be.downloadESGReport(R),B=URL.createObjectURL(E),I=document.createElement("a");I.href=B;const O=t==="pdf"?"pdf":t==="csv"?"csv":"json",ne=new Date().toISOString().split("T")[0];I.download=`swynx-esg-report-${ne}.${O}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(B),e()}catch(R){k(R instanceof Error?R.message:"Failed to generate report")}finally{b(!1)}};return n?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),r.jsxs("div",{className:"relative bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center",children:r.jsx(Jo,{className:"w-5 h-5 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold",children:"ESG Compliance Report"}),r.jsx("p",{className:"text-xs text-white/40",children:"Export emissions data for sustainability reporting"})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(or,{className:"w-5 h-5 text-white/60"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-3",children:"Output Format"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("button",{onClick:()=>s("pdf"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="pdf"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(ar,{className:`w-6 h-6 ${t==="pdf"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"PDF"}),r.jsx("span",{className:"text-xs text-white/40",children:"Report"})]}),r.jsxs("button",{onClick:()=>s("csv"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="csv"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(mu,{className:`w-6 h-6 ${t==="csv"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"CSV"}),r.jsx("span",{className:"text-xs text-white/40",children:"Spreadsheet"})]}),r.jsxs("button",{onClick:()=>s("json"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border transition-all ${t==="json"?"border-emerald-500 bg-emerald-500/10":"border-white/10 hover:border-white/20 hover:bg-white/5"}`,children:[r.jsx(fu,{className:`w-6 h-6 ${t==="json"?"text-emerald-400":"text-white/60"}`}),r.jsx("span",{className:"text-sm",children:"JSON"}),r.jsx("span",{className:"text-xs text-white/40",children:"API"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-3",children:"Report Period"}),r.jsxs("div",{className:"flex gap-2 mb-3",children:[r.jsxs("button",{onClick:()=>o("preset"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${i==="preset"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-white/60 border border-white/10 hover:bg-white/10"}`,children:[r.jsx(yj,{className:"w-4 h-4"}),"Preset"]}),r.jsxs("button",{onClick:()=>o("custom"),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all ${i==="custom"?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-white/5 text-white/60 border border-white/10 hover:bg-white/10"}`,children:[r.jsx(aj,{className:"w-4 h-4"}),"Custom Range"]})]}),i==="preset"?r.jsx("select",{value:c,onChange:R=>d(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500/50",children:v.map(R=>r.jsx("option",{value:R.value,children:R.label},R.value))}):r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/40 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",value:u,onChange:R=>m(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-emerald-500/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-white/40 mb-1",children:"End Date"}),r.jsx("input",{type:"date",value:p,onChange:R=>g(R.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-emerald-500/50"})]})]})]}),r.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4",children:r.jsxs("p",{className:"text-sm text-white/70",children:[r.jsx("strong",{className:"text-emerald-400",children:"GHG Protocol Aligned"}),r.jsx("br",{}),"This report follows the PEER methodology, aligned with GHG Protocol Scope 3. Suitable for CDP, GRI, and internal sustainability disclosures."]})}),S&&r.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:r.jsx("p",{className:"text-sm text-red-400",children:S})})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 text-sm text-white/60 hover:text-white transition-colors",children:"Cancel"}),r.jsx("button",{onClick:M,disabled:y,className:"flex items-center gap-2 px-6 py-2 bg-emerald-500 hover:bg-emerald-600 text-black font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Cc,{className:"w-4 h-4"}),"Export Report"]})})]})]})]}):null}function UC(){var Z,_,V,ee,ae,ie,U,de,K;const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!1),[d,u]=C.useState(1e4),[m,p]=C.useState(!1),[g,y]=C.useState(!1);C.useEffect(()=>{be.getSettings().then(Q=>{var P,H;const se=(H=(P=Q.settings)==null?void 0:P.costAssumptions)==null?void 0:H.monthlyPageLoads;se&&se>0&&u(se),p(!0)}).catch(()=>p(!0))},[]);const b=C.useRef();if(C.useEffect(()=>{var se,P,H;if(!(e!=null&&e.id)||!m)return;const Q=((H=(P=(se=e.raw)==null?void 0:se.emissions)==null?void 0:P.config)==null?void 0:H.monthlyVisitors)||1e4;if(d===Q){be.getEmissions(e.id).then(i).catch(console.error);return}return clearTimeout(b.current),y(!0),b.current=setTimeout(async()=>{try{const q=await be.recalculateEmissions(e.id,d);q.success&&i({...q,recalculated:!0,emissions:q.emissions})}catch(q){console.error("Failed to recalculate emissions:",q)}finally{y(!1)}},400),()=>clearTimeout(b.current)},[e==null?void 0:e.id,d,m]),t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const v=s!=null&&s.recalculated?s.emissions:null,j=v||((Z=e.raw)==null?void 0:Z.emissions),S=v?v.current.monthlyCO2Kg:((_=s==null?void 0:s.co2)==null?void 0:_.monthlyKg)??((V=j==null?void 0:j.current)==null?void 0:V.monthlyCO2Kg)??e.metrics.emissions??0,k=v?v.current.annualCO2Kg:((ee=s==null?void 0:s.co2)==null?void 0:ee.annualKg)??((ae=j==null?void 0:j.current)==null?void 0:ae.annualCO2Kg)??S*12,M=v?v.waste.wastedCO2Kg:((ie=j==null?void 0:j.waste)==null?void 0:ie.wastedCO2Kg)??0,R=S-M,E=v?v.equivalents.treesNeeded:((U=j==null?void 0:j.equivalents)==null?void 0:U.treesNeeded)??(k/21).toFixed(1),B=[{label:"Bandwidth (Waste)",value:`${M.toFixed(3)} kg`,percentage:S>0?M/S*100:0},{label:"Compute",value:`${R.toFixed(2)} kg`,percentage:S>0?R/S*100:100}],I=v?v.optimised.potentialSavingsKg:((de=j==null?void 0:j.optimised)==null?void 0:de.potentialSavingsKg)??M,O=v?v.optimised.potentialSavingsPercent:((K=j==null?void 0:j.optimised)==null?void 0:K.potentialSavingsPercent)??(S>0?M/S*100:0),ne=Q=>{Q>=0&&u(Q)},$=Q=>Q>=1e6?`${(Q/1e6).toFixed(1)}M`:Q>=1e3?`${(Q/1e3).toFixed(0)}k`:Q.toString();return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Environmental Impact"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("p",{className:"text-sm text-white/40",children:n}),r.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-black text-sm font-medium rounded-lg transition-colors",children:[r.jsx(Cc,{className:"w-4 h-4"}),"Export Report"]})]})]}),r.jsx(VC,{isOpen:o,onClose:()=>c(!1)}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(xf,{className:"w-5 h-5 text-blue-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Monthly Visitors"}),r.jsx("p",{className:"text-xs text-white/40",children:"Adjust to match your actual traffic for accurate emissions"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[g&&r.jsx(je,{className:"w-4 h-4 animate-spin text-white/40"}),r.jsx("div",{className:"flex items-center bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[500,5e3,1e4,5e4,1e5].map(Q=>r.jsx("button",{onClick:()=>ne(Q),className:`px-3 py-1.5 text-xs font-medium transition-colors ${d===Q?"bg-emerald-500/20 text-emerald-400":"text-white/50 hover:text-white/70 hover:bg-white/5"}`,children:$(Q)},Q))}),r.jsx("input",{type:"number",value:d,onChange:Q=>ne(parseInt(Q.target.value)||0),className:"w-28 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-sm text-right focus:outline-none focus:border-emerald-500/50",min:"0"})]})]})}),r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-emerald-400 mb-2",children:"What are Carbon Emissions?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every byte transferred uses energy - from data centres, networks, and end-user devices. We calculate your app's",r.jsx("strong",{className:"text-white/80",children:" carbon footprint"})," based on page weight, estimated traffic, and regional grid intensity. Reducing bundle size and removing waste directly lowers your environmental impact. The methodology follows the ",r.jsx("a",{href:"https://oynk.co.uk/methodology",target:"_blank",rel:"noopener noreferrer",className:"text-emerald-400 hover:underline",children:"EcoPigs Methodology v1.0"}),"."]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-8 flex flex-col items-center justify-center",children:[r.jsx(Jo,{className:"w-12 h-12 text-emerald-400 mb-4"}),r.jsxs("p",{className:"text-4xl font-bold text-emerald-400",children:[S.toFixed(2)," kg"]}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Monthly CO2 Emissions"}),r.jsxs("p",{className:"text-xs text-white/40",children:[k.toFixed(2)," kg annually"]}),r.jsxs("p",{className:"text-xs text-white/30 mt-2",children:["Based on ",$(d)," monthly visitors"]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Breakdown"}),r.jsxs("div",{className:"space-y-4",children:[B.map(Q=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-white/70",children:Q.label}),r.jsx("span",{className:"text-white font-medium",children:Q.value})]}),r.jsx("div",{className:"h-2.5 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all",style:{width:`${Math.min(Q.percentage,100)}%`}})})]},Q.label)),r.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-white/10",children:[r.jsx("span",{className:"text-white/70",children:"Equivalent Trees/year"}),r.jsx("span",{className:"text-white font-medium",children:E})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Waste Impact on Emissions"}),r.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Removing waste could reduce emissions by:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[I.toFixed(3)," kg"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"CO2 per month"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[(I*12).toFixed(3)," kg"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"CO2 per year"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-3xl font-bold text-emerald-400",children:[O.toFixed(1),"%"]}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:"Reduction"})]})]})]})]})]})}function qC(){const{selectedProject:n,loading:e}=Mt(),{showToast:t}=Xl(),[s,i]=C.useState([]),[o,c]=C.useState([]),[d,u]=C.useState(null);C.useEffect(()=>{n&&(be.getFixStatus(n).then(y=>i(y.modules||[])).catch(console.error),be.getQuarantine(n).then(y=>c(y.sessions||[])).catch(console.error))},[n]);const m=async(y,b)=>{try{await navigator.clipboard.writeText(y),u(b),t("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>u(null),2e3)}catch{const j=document.createElement("textarea");j.value=y,j.style.position="fixed",j.style.opacity="0",document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j),u(b),t("Copied to clipboard. Paste in terminal to run."),setTimeout(()=>u(null),2e3)}},p=y=>{switch(y==null?void 0:y.toLowerCase()){case"high":return{bg:"bg-emerald-500/20",text:"text-emerald-400"};case"medium":return{bg:"bg-primary/20",text:"text-primary"};default:return{bg:"bg-white/10",text:"text-white/60"}}},g=y=>{var v,j;const b=y;switch(y.id){case"unused-deps":return`npm uninstall ${((v=b.packages)==null?void 0:v.join(" "))||"# no packages listed"}`;case"dead-code":return`# Review and remove dead code files:
${((j=b.files)==null?void 0:j.slice(0,5).map(S=>`rm "${S}"`).join(`
`))||"# no files listed"}`;default:return`swynx fix --module ${y.id} --project "${n}"`}};return e?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Fix Commands"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-5",children:[r.jsx("h2",{className:"text-sm font-bold text-white mb-3",children:"What are Fix Commands?"}),r.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-4",children:"Ready-to-use commands for issues found in your codebase. Copy the command, paste it into your terminal, and run it yourself. We never execute commands on your system  you stay in full control."}),r.jsx("h3",{className:"text-xs font-bold text-white/80 mb-2",children:"Confidence Levels"}),r.jsxs("div",{className:"space-y-2 text-sm text-white/60 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-emerald-400 bg-emerald-500/20 px-2 py-0.5 rounded",children:"HIGH"}),r.jsx("span",{children:"Safe to run, no side effects expected"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-primary bg-primary/20 px-2 py-0.5 rounded",children:"MEDIUM"}),r.jsx("span",{children:"Review the change before running"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold text-white/60 bg-white/10 px-2 py-0.5 rounded",children:"LOW"}),r.jsx("span",{children:"Investigate first, may have dependencies"})]})]}),r.jsx("p",{className:"text-xs text-white/40 italic",children:"For file deletions, we recommend backing up first or using git to track changes."})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4",children:r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(X0,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-sm font-bold",children:"Available Fix Commands"})]}),r.jsx("div",{className:"p-4 space-y-3",children:s.length===0?r.jsx("div",{className:"text-center py-8 text-white/40 text-sm",children:"No fixes available - run a scan first"}):s.map(y=>{const b=p(y.confidence),v=g(y);return r.jsxs("div",{className:"bg-[#0f0f0f] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:y.name}),r.jsx("span",{className:`text-xs font-bold ${b.text} ${b.bg} px-2 py-1 rounded uppercase`,children:y.confidence})]}),r.jsxs("p",{className:"text-xs text-white/50 mb-3",children:[y.issueCount," issues found"]}),r.jsx("div",{className:"bg-black/50 rounded-lg p-3 mb-3",children:r.jsx("pre",{className:"text-xs text-emerald-400 font-mono whitespace-pre-wrap overflow-x-auto",children:v})}),r.jsx("button",{onClick:()=>m(v,y.id),className:`inline-flex items-center gap-2 text-xs font-medium px-4 py-2 rounded transition-all duration-200 ${d===y.id?"bg-emerald-500 text-white scale-105":"bg-primary text-black hover:bg-primary/90"}`,children:d===y.id?r.jsxs(r.Fragment,{children:[r.jsx(zt,{className:"w-3 h-3 animate-pulse"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ct,{className:"w-3 h-3"}),"Copy Command"]})})]},y.id)})})]})}),r.jsx("div",{children:r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Quarantine"})}),o.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("p",{className:"text-white/40 text-sm",children:"No quarantined files"}),r.jsx("p",{className:"text-white/30 text-xs mt-2",children:"Files you delete are backed up here"})]}):r.jsx("div",{className:"p-4 space-y-2",children:o.map(y=>r.jsx("div",{className:"text-xs text-white/60 bg-white/5 rounded p-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[y.fileCount," files"]}),r.jsx("span",{children:new Date(y.timestamp).toLocaleDateString()})]})},y.id))})]})})]})]})]})}function GC(n){if(n===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],s=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,s)).toFixed(1))+" "+t[s]}function KC(){const{selectedProject:n,loading:e}=Mt(),[t,s]=C.useState([]),[i,o]=C.useState(!0),[c,d]=C.useState(null),[u,m]=C.useState(null),[p,g]=C.useState(!1);C.useEffect(()=>{n&&(o(!0),d(null),be.getScans(n,30).then(s).catch(console.error).finally(()=>o(!1)))},[n]);const y=async j=>{if(c===j){d(null),m(null);return}d(j),m(null),g(!0);try{const S=await be.getScan(j);m((S==null?void 0:S.raw)||null)}catch(S){console.error("Failed to load scan detail:",S)}finally{g(!1)}},b=j=>j>=85?"bg-emerald-500":j>=75?"bg-blue-500":j>=65?"bg-primary":"bg-red-500",v=j=>new Date(j).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return e||i?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Q0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Scan History"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-4",children:"Date"}),r.jsx("th",{className:"px-6 py-4",children:"Score"}),r.jsx("th",{className:"px-6 py-4",children:"Waste"}),r.jsx("th",{className:"px-6 py-4",children:"Security"}),r.jsx("th",{className:"px-6 py-4",children:"Outdated"}),r.jsx("th",{className:"px-6 py-4",children:"CO2"}),r.jsx("th",{className:"px-6 py-4"})]})}),r.jsx("tbody",{children:t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-white/40 text-sm",children:"No scan history available"})}):t.map((j,S)=>{const k=c===j.id,M=S<t.length-1?t[S+1]:null;return r.jsxs(C.Fragment,{children:[r.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 cursor-pointer transition-colors ${k?"bg-white/5":""}`,onClick:()=>y(j.id),children:[r.jsx("td",{className:"px-6 py-4 text-sm text-white",children:v(j.timestamp)}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full ${b(j.score)} text-sm font-bold text-white`,children:j.score}),M&&r.jsxs("span",{className:`text-xs font-medium ${j.score>M.score?"text-emerald-400":j.score<M.score?"text-red-400":"text-white/30"}`,children:[j.score>M.score?"+":"",j.score-M.score]})]})}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[j.metrics.waste.toFixed(1),"%"]}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:j.metrics.security}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:j.metrics.outdated}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[j.metrics.emissions.toFixed(2)," kg"]}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{className:`p-2 rounded-lg transition-colors ${k?"bg-primary/20 text-primary":"hover:bg-white/10 text-white/40"}`,children:k?r.jsx(pj,{className:"w-4 h-4"}):r.jsx(U0,{className:"w-4 h-4"})})})]}),k&&r.jsx("tr",{className:"border-b border-white/5",children:r.jsx("td",{colSpan:7,className:"px-6 py-6 bg-[#0d0d0d]",children:p?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(je,{className:"w-5 h-5 animate-spin text-primary"})}):u?r.jsx(QC,{data:u,scan:j}):r.jsx("p",{className:"text-center text-white/40 text-sm py-4",children:"No detailed data available for this scan"})})})]},j.id)})})]})})})})]})}function QC({data:n,scan:e}){var p,g,y,b,v,j,S,k;const t=n.healthScore||{score:e.score,grade:e.grade},s=((p=n.healthScore)==null?void 0:p.deductions)||n.deductions||[],i=n.summary,o=n.security,c=n.emissions,d=n.codePatterns,u=n.deadCode||((g=n.details)==null?void 0:g.deadCode),m=n.duration;return r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:`text-3xl font-bold ${t.score>=85?"text-emerald-400":t.score>=75?"text-blue-400":t.score>=65?"text-primary":"text-red-400"}`,children:[t.score,"/100"]}),r.jsxs("span",{className:"text-lg text-white/50 font-medium",children:["Grade ",t.grade]}),m&&r.jsxs("span",{className:"text-xs text-white/30 ml-auto",children:["Scan took ",(m/1e3).toFixed(1),"s"]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Mn,{className:"w-4 h-4 text-amber-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Waste"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[((i==null?void 0:i.wastePercent)??e.metrics.waste).toFixed(1),"%"]}),(i==null?void 0:i.wasteSizeBytes)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[GC(i.wasteSizeBytes)," wasted"]}),u&&r.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[(u.fullyDeadFiles||u.orphanFiles||[]).length," dead files"]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(pn,{className:"w-4 h-4 text-red-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Security"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.security," issues"]}),o&&r.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap",children:[((y=o.summary)==null?void 0:y.critical)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-500/20 text-red-400",children:[o.summary.critical," critical"]}),((b=o.summary)==null?void 0:b.high)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-orange-500/20 text-orange-400",children:[o.summary.high," high"]}),((v=o.summary)==null?void 0:v.medium)>0&&r.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded bg-yellow-500/20 text-yellow-400",children:[o.summary.medium," med"]})]}),((j=d==null?void 0:d.summary)==null?void 0:j.total)>0&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[d.summary.total," code patterns"]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(It,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"Outdated"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.outdated," packages"]}),n.outdated&&r.jsx("div",{className:"text-xs text-white/40 mt-1",children:Array.isArray(n.outdated)?`${n.outdated.filter(M=>M.updateType==="major").length} major`:`${(n.outdated.major||[]).length} major`})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(nr,{className:"w-4 h-4 text-emerald-400"}),r.jsx("span",{className:"text-xs text-white/40 uppercase tracking-wider",children:"CO2"})]}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[e.metrics.emissions.toFixed(2)," kg/mo"]}),((S=c==null?void 0:c.waste)==null?void 0:S.wastedCO2Kg)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-1",children:[c.waste.wastedCO2Kg.toFixed(2)," kg wasted"]}),((k=c==null?void 0:c.equivalents)==null?void 0:k.treesNeeded)!=null&&r.jsxs("div",{className:"text-xs text-white/40 mt-0.5",children:[c.equivalents.treesNeeded.toFixed(1)," trees needed"]})]})]}),s.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs text-white/40 uppercase tracking-wider mb-2",children:"Score Deductions"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((M,R)=>{var E;return r.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-500/10 text-red-400/80 border border-red-500/10",children:["-",((E=M.points)==null?void 0:E.toFixed(0))||"?"," ",M.reason]},R)})})]}),(i==null?void 0:i.fileCount)!=null&&r.jsxs("div",{className:"text-xs text-white/30 pt-1",children:[i.fileCount.toLocaleString()," files scanned",i.dependencyCount!=null&&`  ${i.dependencyCount} dependencies`]})]})}function JC(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!0);if(C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getBundles(e.id).then(p=>i(p)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const d=s==null?void 0:s.summary,u=d&&(d.entryPoints>0||d.chunks>0||d.totalSizeBytes>0),m=[{value:(d==null?void 0:d.totalSize)||"0 B",label:"Total Size",icon:Fo,bg:"bg-[#141414]"},{value:(d==null?void 0:d.entryPoints)||0,label:"Entry Points",icon:Kt,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(d==null?void 0:d.chunks)||0,label:"Chunks",icon:Nj,bg:"bg-purple-500/20",text:"text-purple-400"},{value:(d==null?void 0:d.buildOutputSize)||"N/A",label:"Build Output",icon:It,bg:"bg-emerald-500/20",text:"text-emerald-400"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Fo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Bundle Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is Bundle Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This shows what gets shipped to users when they visit your app. The ",r.jsx("strong",{className:"text-white/80",children:"Total Size"})," is what users download on first visit. Smaller bundles mean faster load times and lower bandwidth costs. A typical web app should aim for under 500KB total, with critical path under 200KB."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(p=>r.jsxs("div",{className:`${p.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(p.icon,{className:`w-6 h-6 mx-auto mb-2 ${p.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${p.text||"text-white"}`,children:p.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:p.label})]},p.label))}),d&&d.totalSizeBytes>0&&r.jsx("div",{className:`rounded-xl border p-4 ${d.totalSizeBytes>1024*1024?"bg-orange-500/10 border-orange-500/20":d.totalSizeBytes>500*1024?"bg-yellow-500/10 border-yellow-500/20":"bg-emerald-500/10 border-emerald-500/20"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${d.totalSizeBytes>1024*1024?"text-orange-400":d.totalSizeBytes>500*1024?"text-yellow-400":"text-emerald-400"}`,children:d.totalSizeBytes>1024*1024?"Bundle is larger than recommended":d.totalSizeBytes>500*1024?"Bundle size is acceptable but could be improved":"Bundle size is good"}),r.jsx("p",{className:"text-xs text-white/50 mt-1",children:d.totalSizeBytes>1024*1024?"Consider code splitting, tree shaking, or removing unused dependencies":d.totalSizeBytes>500*1024?"Look for opportunities to lazy-load non-critical code":"Your bundle is well-optimised for fast loading"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:d.totalSize}),r.jsx("p",{className:"text-xs text-white/40",children:(d.totalSizeBytes>1024*1024,"Target: < 500KB")})]})]})}),u?r.jsxs(r.Fragment,{children:[(d==null?void 0:d.hasBuildFolder)&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Build Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Source Size"}),r.jsx("p",{className:"text-lg font-bold",children:d.sourceSize})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Build Output"}),r.jsx("p",{className:"text-lg font-bold",children:d.buildOutputSize})]})]})]}),(s==null?void 0:s.largestModules)&&s.largestModules.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10",children:[r.jsx("span",{className:"text-sm font-bold",children:"Largest Modules"}),r.jsx("span",{className:"text-xs text-white/40 ml-2",children:"by size in bundle"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Module"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"% of Total"})]})}),r.jsx("tbody",{children:s.largestModules.map((p,g)=>{var y;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("span",{className:"text-sm text-primary",children:p.name}),p.file&&r.jsx("span",{className:"text-xs text-white/30 ml-2",children:p.file})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:p.sizeFormatted}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-24 h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.min(p.percentage||0,100)}%`}})}),r.jsxs("span",{className:"text-xs text-white/50",children:[(y=p.percentage)==null?void 0:y.toFixed(1),"%"]})]})})]},g)})})]})})]}),(s==null?void 0:s.entryPoints)&&s.entryPoints.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Entry Points"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Name"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Chunks"})]})}),r.jsx("tbody",{children:s.entryPoints.map((p,g)=>{var y;return r.jsx(qs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:p.name}),r.jsx("span",{className:"text-white/50 text-xs",children:p.file}),r.jsx("span",{className:"text-white/70",children:p.sizeFormatted}),r.jsx("span",{className:"text-white/50",children:((y=p.chunks)==null?void 0:y.length)||0})],expandedContent:r.jsx("div",{className:"space-y-4",children:p.chunks&&p.chunks.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Chunks"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.chunks.map((b,v)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:b},v))})]})})},g)})})]})})]}),(s==null?void 0:s.chunks)&&s.chunks.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Chunks"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Name"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Type"})]})}),r.jsx("tbody",{children:s.chunks.map((p,g)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-primary",children:p.name}),r.jsx("td",{className:"px-6 py-4 text-xs text-white/50",children:p.file}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:p.sizeFormatted}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:p.type})})]},g))})]})})]})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Fo,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No detailed bundle analysis available"}),r.jsx("p",{className:"text-sm text-white/30 mb-4",children:"Bundle analysis requires a build folder (dist/, build/, .next/, out/) to analyse what ships to production."}),r.jsxs("div",{className:"text-left max-w-md mx-auto bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider mb-2",children:"To enable detailed analysis:"}),r.jsxs("ul",{className:"text-sm text-white/50 space-y-1",children:[r.jsx("li",{children:"1. Run your build command (npm run build)"}),r.jsx("li",{children:"2. Ensure build output is in the project folder"}),r.jsx("li",{children:"3. Re-scan the project"})]})]})]})]})]})}function YC(){var j,S;const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!0),[d,u]=C.useState("files");if(C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getCssAnalysis(e.id).then(k=>i(k)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=(s==null?void 0:s.files)&&s.files.length>0,g=m&&m.totalFiles>0&&p,y=(m==null?void 0:m.totalFiles)||0,b=[{value:y,label:y===1?"CSS File":"CSS Files",icon:Kt,bg:"bg-[#141414]"},{value:(m==null?void 0:m.totalSize)||"0 B",label:"Total Size",icon:Io,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(m==null?void 0:m.unusedSelectorsCount)||0,label:"Unused Selectors",icon:pt,bg:"bg-orange-500/20",text:"text-orange-400"},{value:(m==null?void 0:m.duplicateRulesCount)||0,label:"Duplicate Rules",icon:Ct,bg:"bg-purple-500/20",text:"text-purple-400"}],v=[{id:"files",label:"Files",count:((j=s==null?void 0:s.files)==null?void 0:j.length)||0},{id:"unused",label:"Unused Selectors",count:(m==null?void 0:m.unusedSelectorsCount)||0},{id:"duplicates",label:"Duplicates",count:(m==null?void 0:m.duplicateRulesCount)||0}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Io,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"CSS Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is CSS Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This identifies ",r.jsx("strong",{className:"text-white/80",children:"unused CSS selectors"})," that add bytes but never match any HTML elements, and ",r.jsx("strong",{className:"text-white/80",children:"duplicate rules"})," that could be consolidated. Removing unused CSS reduces file size and improves page load times. Modern projects often accumulate CSS debt as features are removed but styles remain."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:b.map(k=>r.jsxs("div",{className:`${k.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(k.icon,{className:`w-6 h-6 mx-auto mb-2 ${k.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${k.text||"text-white"}`,children:k.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:k.label})]},k.label))}),m&&m.potentialSavingsBytes>0&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:"Potential Savings"}),r.jsx("p",{className:"text-xs text-white/50",children:"By removing unused selectors and deduplicating rules"})]}),r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:m.potentialSavings})]}),g?r.jsxs(r.Fragment,{children:[(s==null?void 0:s.frameworks)&&s.frameworks.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Frameworks Detected"}),r.jsx("div",{className:"flex gap-2",children:s.frameworks.map((k,M)=>r.jsx("span",{className:"text-sm bg-primary/20 text-primary px-3 py-1 rounded-full",children:k},M))})]}),r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:v.map(k=>r.jsxs("button",{onClick:()=>u(k.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===k.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[k.label,k.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:k.count})]},k.id))}),d==="files"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Selectors"}),r.jsx("th",{className:"px-6 py-3",children:"Unused"}),r.jsx("th",{className:"px-6 py-3",children:"Duplicates"})]})}),r.jsx("tbody",{children:(S=s==null?void 0:s.files)==null?void 0:S.map((k,M)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-primary",children:k.relativePath||k.file})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.sizeFormatted}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.selectors}),r.jsx("td",{className:"px-6 py-4",children:k.unusedSelectors>0?r.jsx("span",{className:"text-sm text-orange-400",children:k.unusedSelectors}):r.jsx("span",{className:"text-sm text-white/30",children:"0"})}),r.jsx("td",{className:"px-6 py-4",children:k.duplicates>0?r.jsx("span",{className:"text-sm text-purple-400",children:k.duplicates}):r.jsx("span",{className:"text-sm text-white/30",children:"0"})})]},M))})]})})}),d==="unused"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.unusedSelectors&&s.unusedSelectors.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Selector"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Line"})]})}),r.jsx("tbody",{children:s.unusedSelectors.map((k,M)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-sm text-orange-400 bg-orange-500/10 px-2 py-1 rounded",children:k.selector})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/50",children:k.file}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/50",children:k.line})]},M))})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No unused selectors detected"})})}),d==="duplicates"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.duplicateRules&&s.duplicateRules.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Selector"}),r.jsx("th",{className:"px-6 py-3",children:"Property"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Files"})]})}),r.jsx("tbody",{children:s.duplicateRules.map((k,M)=>{var R,E;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("code",{className:"text-sm text-purple-400 bg-purple-500/10 px-2 py-1 rounded",children:k.selector})}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:k.property}),r.jsxs("td",{className:"px-6 py-4 text-sm text-white/70",children:[k.count,"x"]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[(R=k.files)==null?void 0:R.slice(0,3).map((B,I)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded",children:B},I)),((E=k.files)==null?void 0:E.length)>3&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",k.files.length-3," more"]})]})})]},M)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No duplicate rules detected"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Io,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No CSS analysis data available"}),r.jsx("p",{className:"text-sm text-white/30",children:y>0?`${y} CSS file${y===1?"":"s"} detected but detailed analysis is not available for this scan`:"CSS analysis requires .css, .scss, or .less files in your project"})]})]})]})}function XC(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!0),[d,u]=C.useState("functions");if(C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getDuplicates(e.id).then(v=>i(v)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=m&&m.totalDuplicates>0,g=[{value:(m==null?void 0:m.totalDuplicates)||0,label:"Total Duplicates",icon:Ct,bg:"bg-[#141414]"},{value:(m==null?void 0:m.duplicateFunctions)||0,label:"Duplicate Functions",icon:Kt,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(m==null?void 0:m.similarBlocks)||0,label:"Similar Blocks",icon:dj,bg:"bg-purple-500/20",text:"text-purple-400"},{value:(m==null?void 0:m.totalFormatted)||"0 B",label:"Duplicate Size",icon:Ct,bg:"bg-orange-500/20",text:"text-orange-400"}],y=[{id:"functions",label:"Duplicate Functions",count:(m==null?void 0:m.duplicateFunctions)||0},{id:"blocks",label:"Similar Blocks",count:(m==null?void 0:m.similarBlocks)||0}],b=v=>"bg-emerald-500/20 text-emerald-400";return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ct,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Duplicate Code"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is Duplicate Code Detection?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This finds ",r.jsx("strong",{className:"text-white/80",children:"similar code blocks"})," and ",r.jsx("strong",{className:"text-white/80",children:"duplicate functions"})," that appear in multiple places. Duplicated code increases maintenance burden - fixing a bug means updating multiple locations. Consolidating into shared utilities reduces code size and makes your codebase easier to maintain."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:g.map(v=>r.jsxs("div",{className:`${v.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(v.icon,{className:`w-6 h-6 mx-auto mb-2 ${v.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${v.text||"text-white"}`,children:v.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:v.label})]},v.label))}),m&&m.potentialSavings&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-emerald-400 font-medium",children:"Potential Savings"}),r.jsx("p",{className:"text-xs text-white/50",children:"By consolidating duplicate code into shared utilities"})]}),r.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:m.potentialSavings})]}),p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:y.map(v=>r.jsxs("button",{onClick:()=>u(v.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===v.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[v.label,v.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:v.count})]},v.id))}),d==="blocks"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.similarBlocks&&s.similarBlocks.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Preview"}),r.jsx("th",{className:"px-6 py-3",children:"Lines"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Confidence"})]})}),r.jsx("tbody",{children:s.similarBlocks.map((v,j)=>{var S,k,M,R,E,B;return r.jsx(qs,{cells:[r.jsxs("code",{className:"text-xs text-purple-400 bg-purple-500/10 px-2 py-1 rounded max-w-xs truncate block",children:[((S=v.preview)==null?void 0:S.substring(0,50))||"Code block","..."]}),r.jsx("span",{className:"text-white/70",children:v.lineCount}),r.jsx("span",{className:"text-white/70",children:v.sizeFormatted}),r.jsxs("span",{className:"text-white/70",children:[((k=v.occurrences)==null?void 0:k.length)||0,"x"]}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${b((M=v.recommendation)==null?void 0:M.confidence)}`,children:"Safe to Remove"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[v.preview&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Code Preview"}),r.jsx("pre",{className:"bg-black/50 rounded-lg p-4 text-xs text-white/70 overflow-x-auto",children:v.preview})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Found In"}),r.jsx("div",{className:"space-y-2",children:(R=v.occurrences)==null?void 0:R.map((I,O)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Kt,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-primary",children:I.relativePath||I.file}),I.startLine&&r.jsxs("span",{className:"text-white/40",children:["lines ",I.startLine,"-",I.endLine]})]},O))})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Action"}),r.jsx(En,{title:((E=v.recommendation)==null?void 0:E.action)||"Extract to shared utility",priority:((B=v.recommendation)==null?void 0:B.confidence)||"medium",effort:"medium",description:"Extract this repeated code into a shared function or module to reduce duplication.",commands:[]})]})]})},j)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No similar code blocks detected"})})}),d==="functions"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:s!=null&&s.duplicateFunctions&&s.duplicateFunctions.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Function"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Match"}),r.jsx("th",{className:"px-6 py-3",children:"Occurrences"}),r.jsx("th",{className:"px-6 py-3",children:"Confidence"})]})}),r.jsx("tbody",{children:s.duplicateFunctions.map((v,j)=>{var S,k,M,R,E;return r.jsx(qs,{cells:[r.jsxs("div",{children:[r.jsx("span",{className:"text-primary font-medium",children:v.name}),r.jsx("code",{className:"block text-xs text-white/40 mt-0.5 truncate max-w-[200px]",children:v.signature})]}),r.jsx("span",{className:"text-white/70",children:v.sizeFormatted}),v.isExactMatch||v.similarity===100?r.jsx("span",{className:"text-xs font-bold bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded",children:"EXACT"}):r.jsxs("span",{className:"text-xs font-bold bg-blue-500/20 text-blue-400 px-2 py-1 rounded",children:[v.similarity,"%"]}),r.jsxs("span",{className:"text-white/70",children:[((S=v.occurrences)==null?void 0:S.length)||0,"x"]}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded uppercase ${b((k=v.recommendation)==null?void 0:k.confidence)}`,children:"Safe to Remove"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Found In"}),r.jsx("div",{className:"space-y-2",children:(M=v.occurrences)==null?void 0:M.map((B,I)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Kt,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-primary",children:B.relativePath||B.file}),B.line&&r.jsx("span",{className:"text-white/40",children:B.endLine?`lines ${B.line}-${B.endLine}`:`line ${B.line}`}),B.sizeFormatted&&r.jsx("span",{className:"text-blue-400 text-xs",children:B.sizeFormatted})]},I))})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Action"}),r.jsx(En,{title:((R=v.recommendation)==null?void 0:R.action)||"Consolidate into single function",priority:((E=v.recommendation)==null?void 0:E.confidence)||"medium",effort:"low",description:"These functions are nearly identical. Consolidate into a single shared function.",commands:[]})]})]})},j)})})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No duplicate functions detected"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Ct,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No duplicate code detected"}),r.jsx("p",{className:"text-sm text-white/30",children:"Your codebase appears to be well-factored"})]})]})]})}function ZC(){var j,S,k;const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!0),[d,u]=C.useState("overview");if(C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getLicenses(e.id).then(M=>i(M)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const m=s==null?void 0:s.summary,p=m&&m.totalPackages>0,g=M=>{switch(M){case"high":return r.jsx(pt,{className:"w-4 h-4 text-red-400"});case"medium":return r.jsx(Qo,{className:"w-4 h-4 text-orange-400"});case"low":return r.jsx(lr,{className:"w-4 h-4 text-emerald-400"});default:return r.jsx(H0,{className:"w-4 h-4 text-white/40"})}},y=M=>{switch(M){case"high":return"bg-red-500/20 text-red-400 border-red-500/30";case"medium":return"bg-orange-500/20 text-orange-400 border-orange-500/30";case"low":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";default:return"bg-white/10 text-white/50 border-white/20"}},b=[{value:(m==null?void 0:m.totalPackages)||0,label:"Total Packages",color:"text-white"},{value:(m==null?void 0:m.highRisk)||0,label:"High Risk",color:"text-red-400",bg:"bg-red-500/20"},{value:(m==null?void 0:m.mediumRisk)||0,label:"Medium Risk",color:"text-orange-400",bg:"bg-orange-500/20"},{value:(m==null?void 0:m.lowRisk)||0,label:"Low Risk",color:"text-emerald-400",bg:"bg-emerald-500/20"}],v=[{id:"overview",label:"All Licenses",count:(m==null?void 0:m.totalLicenses)||0},{id:"high",label:"High Risk",count:(m==null?void 0:m.highRisk)||0,color:"text-red-400"},{id:"medium",label:"Medium Risk",count:(m==null?void 0:m.mediumRisk)||0,color:"text-orange-400"},{id:"low",label:"Low Risk",count:(m==null?void 0:m.lowRisk)||0,color:"text-emerald-400"},{id:"unknown",label:"Unknown",count:(m==null?void 0:m.unknown)||0,color:"text-white/50"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Us,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"License Compliance"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is License Compliance?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Every npm package has a license that defines how you can use it. ",r.jsx("strong",{className:"text-white/80",children:"Permissive licenses"})," (MIT, Apache, BSD) allow almost any use. ",r.jsx("strong",{className:"text-white/80",children:"Copyleft licenses"})," (GPL, AGPL) may require you to open-source your own code. Understanding your license obligations helps avoid legal issues and ensures compliance with company policies."]})]}),m&&r.jsx("div",{className:`rounded-xl border p-4 flex items-center gap-4 ${m.compliant?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:m.compliant?r.jsxs(r.Fragment,{children:[r.jsx(lr,{className:"w-8 h-8 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-emerald-400",children:"No High-Risk Licenses Detected"}),r.jsx("p",{className:"text-sm text-white/50",children:"All dependencies use permissive or weak copyleft licenses"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(pt,{className:"w-8 h-8 text-red-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-400",children:"High-Risk Licenses Found"}),r.jsxs("p",{className:"text-sm text-white/50",children:[m.highRisk," package(s) use copyleft licenses that may require source disclosure"]})]})]})}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:b.map(M=>r.jsxs("div",{className:`${M.bg||"bg-[#141414]"} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-4xl font-bold ${M.color}`,children:M.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:M.label})]},M.label))}),(s==null?void 0:s.recommendations)&&s.recommendations.length>0&&r.jsx("div",{className:"space-y-3",children:s.recommendations.map((M,R)=>r.jsx("div",{className:`rounded-xl border p-4 ${M.priority==="high"?"bg-red-500/10 border-red-500/30":"bg-orange-500/10 border-orange-500/30"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(pt,{className:`w-5 h-5 mt-0.5 ${M.priority==="high"?"text-red-400":"text-orange-400"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${M.priority==="high"?"text-red-400":"text-orange-400"}`,children:M.title}),r.jsx("p",{className:"text-sm text-white/50 mt-1",children:M.description}),M.packages&&M.packages.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:M.packages.map((E,B)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded",children:E},B))}),r.jsx("p",{className:"text-xs text-white/40 mt-2",children:M.action})]})]})},R))}),p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex gap-2 border-b border-white/10",children:v.map(M=>r.jsxs("button",{onClick:()=>u(M.id),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${d===M.id?"border-primary text-primary":"border-transparent text-white/50 hover:text-white/80"}`,children:[r.jsx("span",{className:M.color,children:M.label}),M.count>0&&r.jsx("span",{className:"ml-2 text-xs bg-white/10 px-2 py-0.5 rounded-full",children:M.count})]},M.id))}),d==="overview"&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"License"}),r.jsx("th",{className:"px-6 py-3",children:"Packages"}),r.jsx("th",{className:"px-6 py-3",children:"Risk"}),r.jsx("th",{className:"px-6 py-3",children:"Attribution"}),r.jsx("th",{className:"px-6 py-3",children:"Source Disclosure"})]})}),r.jsx("tbody",{children:(j=s==null?void 0:s.byLicense)==null?void 0:j.map((M,R)=>r.jsx(qs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:M.license}),r.jsx("span",{className:"text-white/70",children:M.count}),r.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded border ${y(M.risk)}`,children:M.risk.toUpperCase()}),M.compliance.attribution?r.jsx("span",{className:"text-orange-400 text-xs",children:"Required"}):r.jsx("span",{className:"text-white/30 text-xs",children:"Not required"}),M.compliance.sourceDisclosure?r.jsx("span",{className:"text-red-400 text-xs",children:"Required"}):r.jsx("span",{className:"text-white/30 text-xs",children:"Not required"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Risk Assessment"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[g(M.risk),r.jsx("span",{className:"text-white/70",children:M.riskReason})]})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Compliance Requirements"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Attribution"}),r.jsx("p",{className:`text-sm font-medium ${M.compliance.attribution?"text-orange-400":"text-white/30"}`,children:M.compliance.attribution?"Required":"Not required"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Source Disclosure"}),r.jsx("p",{className:`text-sm font-medium ${M.compliance.sourceDisclosure?"text-red-400":"text-white/30"}`,children:M.compliance.sourceDisclosure?"Required":"Not required"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Modifications"}),r.jsx("p",{className:`text-sm font-medium ${M.compliance.modifications?"text-orange-400":"text-white/30"}`,children:M.compliance.modifications?"Must disclose":"Not required"})]})]})]}),r.jsxs("div",{children:[r.jsxs("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:["Packages (",M.count,")"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.packages.slice(0,20).map((E,B)=>r.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:E},B)),M.packages.length>20&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",M.packages.length-20," more"]})]})]})]})},R))})]})})}),["high","medium","low","unknown"].includes(d)&&r.jsx("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:((k=(S=s==null?void 0:s.byRisk)==null?void 0:S[d])==null?void 0:k.length)>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"License"})]})}),r.jsx("tbody",{children:s.byRisk[d].map((M,R)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-primary",children:M.package}),r.jsx("td",{className:"px-6 py-4 text-sm text-white/70",children:M.license})]},R))})]})}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-white/50",children:"No packages in this risk category"})})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No license data available"}),r.jsx("p",{className:"text-sm text-white/30",children:"License analysis requires package.json dependencies"})]})]})]})}function e5(){var p;const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!0);if(C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getHeavyDeps(e.id).then(g=>i(g)).catch(()=>i(null)).finally(()=>c(!1)))},[e==null?void 0:e.id]),t||!e||o)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const d=s==null?void 0:s.summary,u=d&&d.totalDependencies>0,m=[{value:(d==null?void 0:d.totalDependencies)||0,label:"Total Dependencies",icon:It,bg:"bg-[#141414]"},{value:(d==null?void 0:d.totalSize)||"0 B",label:"Total Size",icon:Us,bg:"bg-blue-500/20",text:"text-blue-400"},{value:(d==null?void 0:d.top10Size)||"0 B",label:"Top 10 Size",icon:It,bg:"bg-orange-500/20",text:"text-orange-400"},{value:`${(d==null?void 0:d.top10Percentage)||0}%`,label:"Top 10 %",icon:$l,bg:"bg-purple-500/20",text:"text-purple-400"}];return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Us,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Dependencies by Size"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-orange-400 mb-2",children:"What are Heavy Dependencies?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["This shows your dependencies sorted by size. A few large packages often account for most of your node_modules.",r.jsx("strong",{className:"text-white/80",children:" Heavy dependencies"})," increase install times, CI build times, and can bloat your bundle if not tree-shaken properly. Many have lighter alternatives that provide the same functionality with a fraction of the size."]})]}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.map(g=>r.jsxs("div",{className:`${g.bg} border border-white/10 rounded-xl p-6 text-center`,children:[r.jsx(g.icon,{className:`w-6 h-6 mx-auto mb-2 ${g.text||"text-white/60"}`}),r.jsx("p",{className:`text-3xl font-bold ${g.text||"text-white"}`,children:g.value}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:g.label})]},g.label))}),(s==null?void 0:s.quickWins)&&s.quickWins.length>0&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx($l,{className:"w-5 h-5 text-emerald-400"}),r.jsx("span",{className:"font-medium text-emerald-400",children:"Quick Wins"})]}),s.quickWins.map((g,y)=>{var b;return r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-white/70",children:g.title}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(b=g.packages)==null?void 0:b.map((v,j)=>r.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-sm text-orange-400",children:v.from}),r.jsx(Ko,{className:"w-4 h-4 text-white/30"}),r.jsx("span",{className:"text-sm text-emerald-400",children:v.to}),r.jsxs("span",{className:"text-xs text-white/40",children:["(",v.savings," smaller)"]})]},j))})]},y)})]}),u?r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-bold",children:"Dependencies by Size"}),r.jsx("span",{className:"text-xs text-white/40",children:"Sorted largest to smallest"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"Package"}),r.jsx("th",{className:"px-6 py-3",children:"Version"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"% of Total"}),r.jsx("th",{className:"px-6 py-3",children:"Alternatives"})]})}),r.jsx("tbody",{children:(p=s==null?void 0:s.dependencies)==null?void 0:p.map((g,y)=>{var b,v,j,S;return r.jsx(qs,{cells:[r.jsx("span",{className:"text-primary font-medium",children:g.name}),r.jsx("span",{className:"text-white/50",children:g.version}),r.jsx("span",{className:"text-white/70 font-mono",children:g.sizeFormatted}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.min(parseFloat(g.percentage),100)}%`}})}),r.jsxs("span",{className:"text-xs text-white/50",children:[g.percentage,"%"]})]}),g.alternatives&&g.alternatives.length>0?r.jsxs("span",{className:"text-xs text-emerald-400 bg-emerald-500/20 px-2 py-1 rounded",children:[g.alternatives.length," lighter option",g.alternatives.length>1?"s":""]}):r.jsx("span",{className:"text-xs text-white/30",children:"-"})],expandedContent:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Size Details"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Package Size"}),r.jsx("p",{className:"text-lg font-bold text-white",children:g.sizeFormatted})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"% of node_modules"}),r.jsxs("p",{className:"text-lg font-bold text-white",children:[g.percentage,"%"]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Sub-dependencies"}),r.jsx("p",{className:"text-lg font-bold text-white",children:g.dependencies})]})]})]}),g.alternatives&&g.alternatives.length>0&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Lighter Alternatives"}),r.jsx("div",{className:"space-y-2",children:g.alternatives.map((k,M)=>r.jsxs("div",{className:"flex items-center gap-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3",children:[r.jsx(Ko,{className:"w-4 h-4 text-emerald-400"}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:"text-sm font-medium text-emerald-400",children:k.name})}),r.jsxs("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded",children:[k.savings," smaller"]})]},M))})]}),g.recommendation&&r.jsxs("div",{children:[r.jsx("h6",{className:"text-xs font-bold text-white/50 uppercase mb-2",children:"Recommendation"}),r.jsx(En,{title:g.recommendation.action,priority:((b=g.alternatives)==null?void 0:b.length)>0?"medium":"low",effort:((v=g.alternatives)==null?void 0:v.length)>0?"medium":"low",description:((j=g.alternatives)==null?void 0:j.length)>0?`Consider replacing ${g.name} with ${g.alternatives[0].name} to reduce bundle size by ${g.alternatives[0].savings}.`:"This dependency is large but there are no known lighter alternatives.",commands:((S=g.alternatives)==null?void 0:S.length)>0?[`npm uninstall ${g.name}`,`npm install ${g.alternatives[0].name}`]:[]})]})]})},y)})})]})})]}):r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-12 text-center",children:[r.jsx(Us,{className:"w-12 h-12 mx-auto mb-4 text-white/20"}),r.jsx("p",{className:"text-white/50 mb-2",children:"No dependency size data available"}),r.jsx("p",{className:"text-sm text-white/30",children:"Run a scan to analyse dependency sizes"})]})]})]})}function t5(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!1),[d,u]=C.useState({}),[m,p]=C.useState({}),[g,y]=C.useState({});C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getAssets(e.id).then(E=>{i(E),c(!1)}).catch(E=>{console.error("Failed to load assets:",E),c(!1)}))},[e==null?void 0:e.id]);const b=E=>{if(!E||E===0)return"0 B";const B=1024,I=["B","KB","MB","GB"],O=Math.floor(Math.log(E)/Math.log(B));return parseFloat((E/Math.pow(B,O)).toFixed(1))+" "+I[O]},v=async E=>{var O;const B=E.file||E.relativePath||"";if(!n||!B)return;const I=typeof((O=E.optimisation)==null?void 0:O.suggestedFormat)=="string"?E.optimisation.suggestedFormat.toLowerCase():"webp";u(ne=>({...ne,[B]:!0})),y(ne=>{const $={...ne};return delete $[B],$});try{const ne=await be.optimiseImage(n,B,I);ne.success&&p($=>({...$,[B]:{savings:ne.savings.formatted,percent:ne.savings.percent}}))}catch(ne){y($=>({...$,[B]:ne.message||"Conversion failed"}))}finally{u(ne=>({...ne,[B]:!1}))}},j=E=>{switch(E==null?void 0:E.toLowerCase()){case"image":return r.jsx(xj,{className:"w-4 h-4"});case"font":return r.jsx(Oj,{className:"w-4 h-4"});case"video":return r.jsx(gj,{className:"w-4 h-4"});case"audio":return r.jsx(Ej,{className:"w-4 h-4"});default:return r.jsx(ar,{className:"w-4 h-4"})}},S=E=>{var I,O,ne;const B=[];if(E.optimisation){const $=E.optimisation;B.push(r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-blue-400 mb-3",children:"Optimisation Opportunity"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Current Format"}),r.jsx("p",{className:"text-white font-medium",children:(typeof $.currentFormat=="string"?$.currentFormat:typeof E.format=="string"?E.format:"Unknown").toUpperCase()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Suggested Format"}),r.jsx("p",{className:"text-emerald-400 font-medium",children:typeof $.suggestedFormat=="string"?$.suggestedFormat.toUpperCase():"WebP/AVIF"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Current Size"}),r.jsx("p",{className:"text-white font-medium",children:b($.currentSize||E.sizeBytes)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white/40",children:"Estimated After"}),r.jsxs("p",{className:"text-emerald-400 font-medium",children:[b($.estimatedSize)," (",$.savingsPercent||0,"% smaller)"]})]})]}),$.reason&&r.jsx("p",{className:"text-white/60 text-sm mt-3",children:$.reason})]},"optimisation"))}return E.dimensions&&B.push(r.jsxs("div",{className:"bg-[#1a1a1a] border border-white/10 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-white/80 mb-2",children:"Image Dimensions"}),r.jsxs("p",{className:"text-white/60 text-sm",children:[E.dimensions.width," x ",E.dimensions.height," px",E.dimensions.aspectRatio&&` (${E.dimensions.aspectRatio})`]})]},"dimensions")),E.costImpact&&B.push(r.jsx(Go,{bandwidth:E.sizeBytes,description:`Monthly transfer: ${E.costImpact.monthlyTransferGB||"0"} GB. Annual cost: ${E.costImpact.annualCostGBP||"0"}. Monthly CO2: ${E.costImpact.monthlyCO2Kg||"0"} kg.`},"cost")),(E.recommendation||E.optimisation)&&B.push(r.jsx(En,{title:"Optimise This Asset",priority:"low",effort:"low",description:((I=E.recommendation)==null?void 0:I.reasoning)||((O=E.optimisation)==null?void 0:O.reason)||"Convert to a modern format for smaller file size.",commands:(ne=E.recommendation)!=null&&ne.command?[E.recommendation.command]:void 0},"recommendation")),r.jsx("div",{className:"space-y-4",children:B})};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const k=(s==null?void 0:s.summary)||{totalAssets:0,totalSize:0,unusedAssets:0,optimisableAssets:0,potentialSavings:0},M=(s==null?void 0:s.optimisableAssets)||[],R=(s==null?void 0:s.byType)||{};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Yo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Asset Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-blue-400 mb-2",children:"What is Asset Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Asset analysis scans your images, fonts, videos, and other media files for optimisation opportunities.",r.jsx("strong",{className:"text-white/80",children:" Modern formats"})," like WebP and AVIF can reduce image sizes by 30-80%.",r.jsx("strong",{className:"text-white/80",children:" Font subsetting"})," removes unused characters.",r.jsx("strong",{className:"text-white/80",children:" Lazy loading"})," defers off-screen assets. These optimisations reduce bandwidth, improve Core Web Vitals, and lower carbon emissions."]})]}),o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:k.totalAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Assets"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:b(k.totalSize)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Size"})]}),r.jsxs("div",{className:`${k.optimisableAssets>0?"bg-blue-500/10 border-blue-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.optimisableAssets>0?"text-blue-400":"text-white"}`,children:k.optimisableAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Can Optimise"})]}),r.jsxs("div",{className:`${k.potentialSavings>0?"bg-emerald-500/10 border-emerald-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.potentialSavings>0?"text-emerald-400":"text-white"}`,children:b(k.potentialSavings)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Potential Savings"})]}),r.jsxs("div",{className:`${k.unusedAssets>0?"bg-orange-500/10 border-orange-500/30":"bg-[#141414] border-white/10"} border rounded-xl p-6 text-center`,children:[r.jsx("p",{className:`text-3xl font-bold ${k.unusedAssets>0?"text-orange-400":"text-white"}`,children:k.unusedAssets}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Unused"}),r.jsxs(hf,{href:"/waste",className:"text-xs text-primary hover:underline mt-1 inline-flex items-center gap-1",children:["View in Waste ",r.jsx(Ko,{className:"w-3 h-3"})]})]})]}),Object.keys(R).length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Assets by Type"}),r.jsx("div",{className:"grid grid-cols-5 gap-4",children:Object.entries(R).map(([E,B])=>r.jsxs("div",{className:"flex items-center gap-3 bg-[#1a1a1a] rounded-lg p-3",children:[r.jsx("div",{className:"p-2 bg-white/5 rounded-lg text-white/60",children:j(E)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white capitalize",children:E}),r.jsxs("p",{className:"text-xs text-white/40",children:[B.count," files  ",B.size]})]})]},E))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pt,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-bold",children:"Optimisable Assets"})]}),M.length>0&&r.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:M.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-4 py-3 w-10"}),r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Type"}),r.jsx("th",{className:"px-6 py-3",children:"Current Size"}),r.jsx("th",{className:"px-6 py-3",children:"Potential Savings"}),r.jsx("th",{className:"px-6 py-3",children:"Suggestion"})]})}),r.jsx("tbody",{children:M.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-white/40 text-sm",children:"No optimisable assets detected - your assets are already well-optimised!"})}):M.map((E,B)=>{var I;return r.jsx(qs,{cells:[r.jsx("span",{className:"text-primary truncate max-w-[300px]",title:E.relativePath||E.file,children:E.relativePath||E.file}),r.jsxs("span",{className:"text-white/70 capitalize flex items-center gap-2",children:[j(E.type),typeof E.format=="string"?E.format.toUpperCase():E.type]}),r.jsx("span",{className:"text-white/70",children:E.sizeFormatted||b(E.sizeBytes)}),r.jsx("span",{className:"text-emerald-400 font-medium",children:(I=E.optimisation)!=null&&I.savingsPercent?`${E.optimisation.savingsPercent}%`:"-"}),(()=>{var ne,$;const O=E.file||E.relativePath||"";return m[O]?r.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-400 text-xs font-medium",children:[r.jsx(Dr,{className:"w-3.5 h-3.5"}),"Done (",m[O].savings," saved)"]}):g[O]?r.jsxs("span",{className:"flex items-center gap-1.5 text-red-400 text-xs",title:g[O],children:[r.jsx(V0,{className:"w-3.5 h-3.5"}),"Failed"]}):E.type==="image"?r.jsxs("button",{onClick:Z=>{Z.stopPropagation(),v(E)},disabled:d[O],className:"flex items-center gap-1.5 px-2.5 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded-lg hover:bg-blue-500/30 transition-colors disabled:opacity-50",children:[d[O]?r.jsx(je,{className:"w-3.5 h-3.5 animate-spin"}):r.jsx(Xo,{className:"w-3.5 h-3.5"}),(ne=E.optimisation)!=null&&ne.suggestedFormat&&typeof E.optimisation.suggestedFormat=="string"?`Convert to ${E.optimisation.suggestedFormat.toUpperCase()}`:"Convert to WebP"]}):r.jsx("span",{className:"text-blue-400 text-sm",children:($=E.optimisation)!=null&&$.suggestedFormat&&typeof E.optimisation.suggestedFormat=="string"?`Convert to ${E.optimisation.suggestedFormat.toUpperCase()}`:"Optimise"})})()],expandedContent:S(E)},B)})})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Quick Optimisation Tips"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Images"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use WebP/AVIF for photos (97%+ browser support)"}),r.jsx("li",{children:"Use SVG for icons and logos"}),r.jsx("li",{children:"Implement lazy loading for below-fold images"}),r.jsx("li",{children:"Serve responsive images with srcset"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Fonts"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use WOFF2 format (best compression)"}),r.jsx("li",{children:"Subset fonts to only used characters"}),r.jsx("li",{children:"Use font-display: swap for faster text"}),r.jsx("li",{children:"Limit font weights/styles loaded"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Video/Audio"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Use MP4 (H.264) for broad support"}),r.jsx("li",{children:"Consider WebM for smaller sizes"}),r.jsx("li",{children:'Lazy load with loading="lazy"'}),r.jsx("li",{children:"Use poster images for videos"})]})]})]})]})]})]})]})}function s5(){const{selectedProject:n,currentScan:e,loading:t}=Mt(),[s,i]=C.useState(null),[o,c]=C.useState(!1),[d,u]=C.useState(null);C.useEffect(()=>{e!=null&&e.id&&(c(!0),be.getBuildLogs(e.id).then(v=>{i(v),c(!1)}).catch(v=>{console.error("Failed to load build logs:",v),c(!1)}))},[e==null?void 0:e.id]);const m=v=>{navigator.clipboard.writeText(v),u(v),setTimeout(()=>u(null),2e3)},p=v=>{if(!v||v===0)return"0 B";const j=1024,S=["B","KB","MB","GB"],k=Math.floor(Math.log(v)/Math.log(j));return parseFloat((v/Math.pow(j,k)).toFixed(1))+" "+S[k]},g=v=>{switch(v){case"error":return r.jsx(pt,{className:"w-4 h-4 text-red-400"});case"warning":return r.jsx(pt,{className:"w-4 h-4 text-orange-400"});default:return r.jsx(sr,{className:"w-4 h-4 text-blue-400"})}},y=v=>{switch(v){case"error":return"bg-red-500/10 border-red-500/20 text-red-400";case"warning":return"bg-orange-500/10 border-orange-500/20 text-orange-400";default:return"bg-blue-500/10 border-blue-500/20 text-blue-400"}};if(t||!e)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})});const b=(s==null?void 0:s.summary)||{totalLogBytes:0,logFileCount:0,logDirectoryCount:0};return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ar,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Build Logs Analysis"})]}),r.jsx("p",{className:"text-sm text-white/40",children:n})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-purple-400 mb-2",children:"What is Build Log Analysis?"}),r.jsxs("p",{className:"text-sm text-white/60 leading-relaxed",children:["Build log analysis scans your project for log files, debug outputs, and build artifacts that shouldn't be in production.",r.jsx("strong",{className:"text-white/80",children:" Log files"})," can contain sensitive data and increase deployment size.",r.jsx("strong",{className:"text-white/80",children:" Debug artifacts"})," may expose internal details.",r.jsx("strong",{className:"text-white/80",children:" Source maps"})," in production can reveal your source code."]})]}),o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:`${s!=null&&s.hasIssues?"bg-orange-500/10 border-orange-500/30":"bg-emerald-500/10 border-emerald-500/30"} border rounded-xl p-6 text-center`,children:[r.jsx("div",{className:"flex items-center justify-center mb-2",children:s!=null&&s.hasIssues?r.jsx(pt,{className:"w-6 h-6 text-orange-400"}):r.jsx(lr,{className:"w-6 h-6 text-emerald-400"})}),r.jsx("p",{className:`text-sm font-medium ${s!=null&&s.hasIssues?"text-orange-400":"text-emerald-400"}`,children:s!=null&&s.hasIssues?"Issues Found":"All Clear"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:b.logFileCount}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Log Files"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:b.logDirectoryCount}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Log Directories"})]}),r.jsxs("div",{className:"bg-[#141414] border border-white/10 rounded-xl p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-white",children:b.totalLogFormatted||p(b.totalLogBytes)}),r.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Total Size"})]})]}),(s==null?void 0:s.findings)&&s.findings.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("span",{className:"text-sm font-bold",children:"Findings"})}),r.jsx("div",{className:"p-4 space-y-3",children:s.findings.map((v,j)=>r.jsx("div",{className:`rounded-lg border p-4 ${y(v.severity)}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[g(v.severity),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-white",children:v.message}),v.files&&v.files.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs text-white/40 mb-1",children:"Affected files:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.files.slice(0,5).map((S,k)=>r.jsx("span",{className:"text-xs bg-black/30 px-2 py-0.5 rounded text-white/60",children:S},k)),v.files.length>5&&r.jsxs("span",{className:"text-xs text-white/40",children:["+",v.files.length-5," more"]})]})]}),v.solutions&&r.jsxs("div",{className:"mt-3 space-y-2",children:[v.solutions.immediate&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-white/40",children:"Quick fix:"}),r.jsx("code",{className:"text-xs bg-black/30 px-2 py-1 rounded text-primary",children:v.solutions.immediate}),r.jsx("button",{onClick:()=>m(v.solutions.immediate),className:"p-1 hover:bg-white/10 rounded",children:d===v.solutions.immediate?r.jsx(zt,{className:"w-3 h-3 text-emerald-500"}):r.jsx(Ct,{className:"w-3 h-3 text-white/40"})})]}),v.solutions.permanent&&r.jsxs("p",{className:"text-xs text-white/50",children:["Permanent solution: ",v.solutions.permanent]})]})]})]})},j))})]}),(s==null?void 0:s.logDirectories)&&s.logDirectories.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(G0,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Log Directories"}),r.jsx("span",{className:"bg-white/10 text-white/60 text-xs px-2 py-0.5 rounded-full ml-auto",children:s.logDirectories.length})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"Directory"}),r.jsx("th",{className:"px-6 py-3",children:"Files"}),r.jsx("th",{className:"px-6 py-3",children:"Total Size"})]})}),r.jsx("tbody",{children:s.logDirectories.map((v,j)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-3 text-primary text-sm",children:v.relativePath||v.path}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.fileCount}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.sizeFormatted||p(v.totalSize)})]},j))})]})})]}),(s==null?void 0:s.logFiles)&&s.logFiles.length>0&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(q0,{className:"w-4 h-4 text-white/60"}),r.jsx("span",{className:"text-sm font-bold",children:"Log Files"}),r.jsx("span",{className:"bg-white/10 text-white/60 text-xs px-2 py-0.5 rounded-full ml-auto",children:s.logFiles.length})]}),r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-xs text-white/40 uppercase tracking-wider border-b border-white/10",children:[r.jsx("th",{className:"px-6 py-3",children:"File"}),r.jsx("th",{className:"px-6 py-3",children:"Type"}),r.jsx("th",{className:"px-6 py-3",children:"Size"}),r.jsx("th",{className:"px-6 py-3",children:"Last Modified"})]})}),r.jsx("tbody",{children:s.logFiles.slice(0,50).map((v,j)=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[r.jsx("td",{className:"px-6 py-3 text-primary text-sm truncate max-w-[400px]",title:v.path,children:v.relativePath||v.path}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.type||"log"}),r.jsx("td",{className:"px-6 py-3 text-white/70 text-sm",children:v.sizeFormatted||p(v.sizeBytes)}),r.jsx("td",{className:"px-6 py-3 text-white/50 text-sm",children:v.lastModified||"-"})]},j))})]}),s.logFiles.length>50&&r.jsxs("div",{className:"px-6 py-3 text-center text-white/40 text-sm border-t border-white/10",children:["Showing 50 of ",s.logFiles.length," files"]})]})]}),!(s!=null&&s.hasIssues)&&(!(s!=null&&s.logFiles)||s.logFiles.length===0)&&r.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-8 text-center",children:[r.jsx(lr,{className:"w-12 h-12 text-emerald-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-bold text-emerald-400 mb-2",children:"No Log Issues Detected"}),r.jsx("p",{className:"text-sm text-white/60",children:"Your project doesn't have any log files or build artifacts that need attention."})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6",children:[r.jsx("h3",{className:"text-sm font-bold mb-4",children:"Best Practices for Log Management"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Git Ignore"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Add *.log to .gitignore"}),r.jsx("li",{children:"Ignore /logs/ directories"}),r.jsx("li",{children:"Exclude npm-debug.log"}),r.jsx("li",{children:"Exclude .env files"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Production Builds"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Disable source maps in prod"}),r.jsx("li",{children:"Remove console.log statements"}),r.jsx("li",{children:"Use environment-based logging"}),r.jsx("li",{children:"Clean build artifacts before deploy"})]})]}),r.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"CI/CD"}),r.jsxs("ul",{className:"text-xs text-white/60 space-y-1",children:[r.jsx("li",{children:"Add log cleanup step"}),r.jsx("li",{children:"Validate no logs in dist/"}),r.jsx("li",{children:"Check for sensitive data"}),r.jsx("li",{children:"Archive logs separately"})]})]})]})]})]})]})]})}function ps({text:n}){const[e,t]=C.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx("button",{type:"button",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),onFocus:()=>t(!0),onBlur:()=>t(!1),className:"text-white/30 hover:text-white/60 transition-colors ml-1.5",children:r.jsx(H0,{className:"w-3.5 h-3.5"})}),e&&r.jsxs("div",{className:"absolute z-50 left-full top-1/2 -translate-y-1/2 ml-2 px-3 py-2 bg-[#1a1a1a] border border-white/20 rounded-lg shadow-xl text-xs text-white/80 w-64 text-left",children:[n,r.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-white/20"})]})]})}const n5=[{code:"GBP",symbol:"",name:"British Pound"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"}],Bo={maxCriticalVulnerabilities:0,maxHighVulnerabilities:0,maxExploitableVulnerabilities:0,maxUnusedDeps:5,maxDeadCodePercent:10,maxDeadFiles:3,maxWasteMb:50,failOnWastePercent:20,maxOutdatedMajor:5,maxOutdatedCritical:0,requireLicenseCompliance:!0},ou={currency:"GBP",monthlyPageLoads:1e4,bandwidthCostPerGb:.08,cacheHitRate:.8,storageCostPerGb:.023,developerHourlyRate:75,co2PerGb:.5,costMode:"served"},cu={port:9e3,autoOpen:!0},du={workers:0},hu={includeAiPrompt:!1};function r5(){const[n,e]=C.useState(!0),[t,s]=C.useState(!1),[i,o]=C.useState(!1),[c,d]=C.useState(null),[u,m]=C.useState(Bo),[p,g]=C.useState(ou),[y,b]=C.useState(cu),[v,j]=C.useState(du),[S,k]=C.useState(null),[M,R]=C.useState(hu),[E,B]=C.useState({maxCriticalVulnerabilities:!0,maxHighVulnerabilities:!0,maxExploitableVulnerabilities:!0,maxUnusedDeps:!0,maxDeadCodePercent:!0,maxDeadFiles:!0,maxWasteMb:!0,failOnWastePercent:!0,maxOutdatedMajor:!0,maxOutdatedCritical:!0,requireLicenseCompliance:!0});C.useEffect(()=>{I()},[]);const I=async()=>{e(!0);try{const V=(await be.getSettings()).settings||{};V.thresholds&&m({...Bo,...V.thresholds}),V.costAssumptions&&g({...ou,...V.costAssumptions}),V.dashboard&&b({...cu,...V.dashboard}),V.output&&R({...hu,...V.output}),V.performance&&j({...du,...V.performance});try{const ee=await be.getSystemInfo();ee.success&&k(ee)}catch{}}catch(_){console.error("Failed to load settings:",_)}finally{e(!1)}},O=async()=>{s(!0),d(null),o(!1);try{const _={};Object.keys(E).forEach(V=>{E[V]&&(_[V]=u[V])}),await be.saveSettings({thresholds:_,costAssumptions:p,dashboard:y,performance:v,output:M}),o(!0),setTimeout(()=>o(!1),3e3)}catch(_){d(_ instanceof Error?_.message:"Failed to save settings")}finally{s(!1)}},ne=()=>{m(Bo),g(ou),b(cu),j(du),R(hu);const _={};Object.keys(Bo).forEach(V=>_[V]=!0),B(_)},$=_=>{B(V=>({...V,[_]:!V[_]}))},Z=({thresholdKey:_,label:V,description:ee,tooltip:ae,isBoolean:ie=!1,min:U=0,max:de,step:K=1,suffix:Q=""})=>r.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>$(_),className:`w-10 h-6 rounded-full transition-colors flex-shrink-0 ${E[_]?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${E[_]?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:V}),r.jsx(ps,{text:ae})]}),r.jsx("p",{className:"text-xs text-white/40",children:ee})]})]}),ie?r.jsx("div",{className:`px-3 py-1 rounded text-xs font-bold ${u[_]&&E[_]?"bg-red-500/20 text-red-400":"bg-white/10 text-white/40"}`,children:u[_]?"ENABLED":"DISABLED"}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",value:u[_],onChange:se=>m(P=>({...P,[_]:Number(se.target.value)})),disabled:!E[_],className:"w-20 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-right disabled:opacity-30",min:U,max:de,step:K}),Q&&r.jsx("span",{className:"text-xs text-white/40 w-8",children:Q})]})]});return n?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zo,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Settings"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:ne,className:"px-4 py-2 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Tl,{className:"w-4 h-4"}),"Reset"]}),r.jsxs("button",{onClick:O,disabled:t,className:"px-4 py-2 text-sm bg-primary text-black font-bold rounded-lg hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50",children:[t?r.jsx(je,{className:"w-4 h-4 animate-spin"}):i?r.jsx(zt,{className:"w-4 h-4"}):r.jsx(mf,{className:"w-4 h-4"}),i?"Saved!":"Save"]})]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[c&&r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 flex items-center gap-3",children:[r.jsx(pt,{className:"w-5 h-5 text-red-400"}),r.jsx("p",{className:"text-sm text-red-400",children:c})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-blue-400 font-medium mb-2",children:"CI/CD Quality Gate"}),r.jsxs("p",{className:"text-xs text-white/60",children:["These settings map to CLI options. Use ",r.jsx("code",{className:"bg-black/30 px-1 rounded",children:"swynx check"})," with flags like ",r.jsx("code",{className:"bg-black/30 px-1 rounded",children:"--max-critical-vulnerabilities 0"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(pn,{className:"w-5 h-5 text-red-400"}),r.jsx("h2",{className:"font-bold",children:"Security"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-critical-vulnerabilities"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(Z,{thresholdKey:"maxCriticalVulnerabilities",label:"Max Critical Vulnerabilities",description:"Fail if critical security issues exceed this count",tooltip:"Critical vulnerabilities are the most severe security flaws - they can allow attackers to take control of your system, steal data, or cause major damage. Setting this to 0 means your build fails if any critical issues are found. This is strongly recommended for production code."}),r.jsx(Z,{thresholdKey:"maxHighVulnerabilities",label:"Max High Vulnerabilities",description:"Fail if high severity issues exceed this count",tooltip:"High severity vulnerabilities are serious security issues that could be exploited under the right conditions. They're not as immediately dangerous as critical ones, but should still be fixed promptly. Set a low number to keep your codebase secure."}),r.jsx(Z,{thresholdKey:"maxExploitableVulnerabilities",label:"Max Exploitable Vulnerabilities",description:"Fail if exploitable vulnerabilities exceed this count",tooltip:"Exploitable vulnerabilities have known, working attack methods that hackers can use right now. These are actively dangerous - even if rated lower severity, they should be treated as urgent because real attacks exist for them."})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-5 h-5 text-orange-400"}),r.jsx("h2",{className:"font-bold",children:"Code Quality"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-unused-deps"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(Z,{thresholdKey:"maxUnusedDeps",label:"Max Unused Dependencies",description:"Fail if unused dependencies exceed this count",tooltip:"Unused dependencies are packages listed in your package.json that your code never actually imports or uses. They bloat your node_modules, slow down installs, and increase your attack surface. Removing them makes your project leaner and safer."}),r.jsx(Z,{thresholdKey:"maxDeadCodePercent",label:"Max Dead Code Percent",description:"Fail if dead code exceeds this percentage",max:100,suffix:"%",tooltip:"Dead code is functions, variables, or exports that exist in your codebase but are never called or used anywhere. It clutters your project, confuses developers, and wastes storage/bandwidth. A lower percentage means a cleaner, more maintainable codebase."}),r.jsx(Z,{thresholdKey:"maxDeadFiles",label:"Max Dead Files",description:"Fail if completely dead files exceed this count",tooltip:"Dead files are entire source files that contain no exported code used anywhere else in your project. They're often leftover from refactoring or deleted features. These files can usually be safely deleted to reduce confusion and project size."}),r.jsx(Z,{thresholdKey:"maxWasteMb",label:"Max Waste Size",description:"Fail if total waste size exceeds this value",suffix:"MB",tooltip:"Total waste size combines unused dependencies, dead code, and oversized assets into one number. It represents how much bloat your project is carrying. Keeping this low means faster builds, smaller bundles, and lower hosting costs."}),r.jsx(Z,{thresholdKey:"failOnWastePercent",label:"Fail on Waste Percent",description:"Fail if waste percentage exceeds this value",max:100,suffix:"%",tooltip:"Waste percentage shows what portion of your project is unnecessary bloat compared to the useful code. For example, 20% means one-fifth of your project could be removed. This relative measure helps catch waste regardless of project size."})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(It,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"font-bold",children:"Dependencies"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--max-outdated-major"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx(Z,{thresholdKey:"maxOutdatedMajor",label:"Max Outdated Major Versions",description:"Fail if major version updates exceed this count",tooltip:"Major version updates (like React 17 to 18) often include breaking changes that require code modifications. While not always urgent, falling too far behind makes future upgrades much harder and may leave you without security patches. Keep this number low to stay current."}),r.jsx(Z,{thresholdKey:"maxOutdatedCritical",label:"Max Outdated Critical",description:"Fail if critically outdated packages exceed this count",tooltip:"Critically outdated packages are so old they're likely missing years of security fixes and bug patches. They may even be abandoned. Using them is risky - setting this to 0 ensures your CI fails if any packages are dangerously out of date."})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Us,{className:"w-5 h-5 text-purple-400"}),r.jsx("h2",{className:"font-bold",children:"License"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--require-license-compliance"})]}),r.jsx("div",{className:"p-6",children:r.jsx(Z,{thresholdKey:"requireLicenseCompliance",label:"Require License Compliance",description:"Fail if restrictive licenses (GPL/AGPL) are detected",isBoolean:!0,tooltip:"GPL and AGPL licenses are 'copyleft' - they require you to release your own source code if you use them. This can be a serious legal issue for commercial or proprietary software. Enable this to catch these licenses before they become a problem."})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(zl,{className:"w-5 h-5 text-emerald-400"}),r.jsx("h2",{className:"font-bold",children:"Cost Assumptions"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--bandwidth-cost 0.08"})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Currency",r.jsx(ps,{text:"The currency used for all cost calculations and reports. Choose the currency your team budgets in."})]}),r.jsx("select",{value:p.currency,onChange:_=>g(V=>({...V,currency:_.target.value})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",children:n5.map(_=>r.jsxs("option",{value:_.code,children:[_.symbol," ",_.name]},_.code))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Monthly Page Loads",r.jsx(ps,{text:"How many times per month users load pages on your site. This multiplies with asset sizes to calculate real bandwidth costs. Check your analytics for this number - 10,000 is typical for a small business site."})]}),r.jsx("input",{type:"number",value:p.monthlyPageLoads,onChange:_=>g(V=>({...V,monthlyPageLoads:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Bandwidth Cost per GB",r.jsx(ps,{text:"What your hosting provider charges per gigabyte of data transferred. AWS CloudFront is ~$0.085/GB, Vercel varies by plan, Cloudflare is often free. Check your hosting bill or use 0.08 as a reasonable estimate."})]}),r.jsx("input",{type:"number",step:"0.01",value:p.bandwidthCostPerGb,onChange:_=>g(V=>({...V,bandwidthCostPerGb:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Cache Hit Rate",r.jsx(ps,{text:"How often browsers use cached files instead of downloading again (0.0 to 1.0). A value of 0.80 means 80% of requests are served from cache. Higher rates reduce bandwidth costs. Most sites with good caching achieve 0.7-0.9."})]}),r.jsx("input",{type:"number",step:"0.01",value:p.cacheHitRate,onChange:_=>g(V=>({...V,cacheHitRate:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0",max:"1"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Storage Cost per GB/month",r.jsx(ps,{text:"What you pay to store files on your server or CDN per month. AWS S3 is ~$0.023/GB, most cloud storage is similar. This affects how much it costs to keep large, unused assets around."})]}),r.jsx("input",{type:"number",step:"0.001",value:p.storageCostPerGb,onChange:_=>g(V=>({...V,storageCostPerGb:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Developer Hourly Rate",r.jsx(ps,{text:"The average hourly cost of a developer on your team (salary + benefits + overhead). Used to estimate how much developer time issues might cost to fix, helping prioritize what's worth addressing."})]}),r.jsx("input",{type:"number",value:p.developerHourlyRate,onChange:_=>g(V=>({...V,developerHourlyRate:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["CO2 per GB (kg)",r.jsx(ps,{text:"Kilograms of CO2 emitted per gigabyte of data transferred. The internet has a carbon footprint - data centres and networks use electricity. The default 0.5 kg/GB is a commonly cited estimate. Used for environmental impact reports."})]}),r.jsx("input",{type:"number",step:"0.1",value:p.co2PerGb,onChange:_=>g(V=>({...V,co2PerGb:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Cost Mode",r.jsx(ps,{text:"'Served' calculates costs based on bandwidth used when serving files to users, plus storage. 'Storage only' just counts what it costs to store your files. Use 'Served' for public websites, 'Storage' for internal tools or APIs with low traffic."})]}),r.jsxs("select",{value:p.costMode,onChange:_=>g(V=>({...V,costMode:_.target.value})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",children:[r.jsx("option",{value:"served",children:"Served (bandwidth + storage)"}),r.jsx("option",{value:"storage",children:"Storage only"})]})]})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(pf,{className:"w-5 h-5 text-blue-400"}),r.jsx("h2",{className:"font-bold",children:"Dashboard"})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Port",r.jsx(ps,{text:"The network port where the dashboard web server runs. Default is 9000. If you get 'port in use' errors, change this to another number like 9001 or 3000. Must be between 1024 and 65535."})]}),r.jsx("input",{type:"number",value:y.port,onChange:_=>b(V=>({...V,port:Number(_.target.value)})),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg",min:"1024",max:"65535"})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[r.jsx("button",{onClick:()=>b(_=>({..._,autoOpen:!_.autoOpen})),className:`w-10 h-6 rounded-full transition-colors ${y.autoOpen?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${y.autoOpen?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:"Auto-open Browser"}),r.jsx(ps,{text:"When enabled, running 'swynx dashboard' will automatically open the dashboard in your default web browser. Disable this if you prefer to manually navigate to the URL or if you're running headless/in CI."})]}),r.jsx("p",{className:"text-xs text-white/40",children:"Open dashboard on start"})]})]})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(uj,{className:"w-5 h-5 text-cyan-400"}),r.jsx("h2",{className:"font-bold",children:"Performance"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"SWYNX_WORKERS"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[S&&r.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-cyan-400 font-medium mb-2",children:"System detected"}),r.jsxs("p",{className:"text-xs text-white/60",children:[S.cpuCount," CPU cores  ",S.totalMemoryGb," GB RAM (",S.freeMemoryGb," GB free)  Suggested: ",r.jsxs("strong",{className:"text-cyan-400",children:[S.suggestedWorkers," workers"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center text-sm text-white/60 mb-2",children:["Parser Workers",r.jsx(ps,{text:"Number of CPU cores used for parallel file parsing during scans. More workers = faster scans on large codebases. Each worker uses ~300-500MB RAM for big repos. Set to 0 for auto-detect (recommended). The system will leave cores free for the OS and dashboard."})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("input",{type:"range",min:"0",max:(S==null?void 0:S.maxWorkers)||8,step:"1",value:v.workers,onChange:_=>j(V=>({...V,workers:Number(_.target.value)})),className:"flex-1 accent-cyan-400"}),r.jsxs("div",{className:"w-24 text-center",children:[r.jsx("span",{className:"text-lg font-bold text-cyan-400",children:v.workers===0?"Auto":v.workers}),r.jsx("p",{className:"text-[10px] text-white/40",children:v.workers===0?`(${(S==null?void 0:S.suggestedWorkers)||"?"} cores)`:v.workers===1?"Single core":`${v.workers} cores`})]})]}),v.workers>0&&S&&v.workers>S.suggestedWorkers&&r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-amber-400",children:[r.jsx(pt,{className:"w-3.5 h-3.5"}),"Using more than ",S.suggestedWorkers," workers may cause memory pressure (",S.freeMemoryGb," GB free). Each worker uses ~300-500 MB on large repos."]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(_0,{className:"w-5 h-5 text-purple-400"}),r.jsx("h2",{className:"font-bold",children:"Output"}),r.jsx("code",{className:"ml-auto text-xs text-white/30 bg-white/5 px-2 py-1 rounded",children:"--ai-prompt"})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>R(_=>({..._,includeAiPrompt:!_.includeAiPrompt})),className:`w-10 h-6 rounded-full transition-colors ${M.includeAiPrompt?"bg-primary":"bg-white/20"}`,children:r.jsx("div",{className:`w-4 h-4 rounded-full bg-white transition-transform mx-1 ${M.includeAiPrompt?"translate-x-4":""}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm font-medium",children:"Include AI Fix Prompt"}),r.jsx(ps,{text:"When enabled, CI output includes a ready-to-copy prompt you can paste into AI coding assistants (like Claude, ChatGPT, or Copilot). The prompt lists all issues found and asks the AI to fix them - security vulnerabilities, unused dependencies, dead code, and unused assets."})]}),r.jsx("p",{className:"text-xs text-white/40",children:"Generate copy-paste prompt for AI assistants in CI output"})]})]})})]})]})]})}const k0={slack:{enabled:!1,webhook:null,notify:"on-failure"},github:{enabled:!1,annotations:{enabled:!1,maxAnnotations:50},summary:{enabled:!1}},gitlab:{enabled:!1,codequality:{enabled:!1,outputPath:"gl-code-quality-report.json"}},jenkins:{enabled:!1,console:{enabled:!1,format:"structured"}}};function i5(){const{selectedProject:n}=Mt(),{showToast:e}=Xl(),[t,s]=C.useState(!0),[i,o]=C.useState(k0),[c,d]=C.useState(null);C.useEffect(()=>{n&&(s(!0),be.getConfig(n).then(p=>{const g=p.config;g!=null&&g.ci&&o({...k0,...g.ci})}).catch(console.error).finally(()=>s(!1)))},[n]);const u=async p=>{if(n)try{await be.saveConfig(n,{ci:p}),o(p),e("Integration settings saved")}catch{e("Failed to save settings")}},m=(p,g)=>{navigator.clipboard.writeText(p),d(g),e(`Copied ${g} command`),setTimeout(()=>d(null),2e3)};return t?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Y0,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"CI/CD Integrations"})]}),r.jsx("p",{className:"text-sm text-white/40 mt-1",children:"Configure notifications and reporting for your CI/CD pipelines"})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#4A154B]/20 flex items-center justify-center",children:r.jsx(Aj,{className:"w-5 h-5 text-[#E01E5A]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Slack"}),r.jsx("p",{className:"text-sm text-white/40",children:"Get scan results in your Slack channel"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.slack.enabled,onChange:p=>u({...i,slack:{...i.slack,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.slack.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Webhook URL"}),r.jsx("input",{type:"text",placeholder:"https://hooks.slack.com/services/...",value:i.slack.webhook||"",onChange:p=>o({...i,slack:{...i.slack,webhook:p.target.value}}),onBlur:()=>u(i),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary"}),r.jsxs("p",{className:"text-xs text-white/30 mt-1",children:["Or set ",r.jsx("code",{className:"bg-white/10 px-1 rounded",children:"SWYNX_SLACK_WEBHOOK"})," env var"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Notify when"}),r.jsxs("select",{value:i.slack.notify,onChange:p=>u({...i,slack:{...i.slack,notify:p.target.value}}),className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary",children:[r.jsx("option",{value:"always",children:"Always"}),r.jsx("option",{value:"on-failure",children:"On failure (critical issues or low score)"}),r.jsx("option",{value:"on-regression",children:"On regression (score dropped)"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --slack-webhook $SLACK_WEBHOOK"}),r.jsx("button",{onClick:()=>m("swynx scan . --slack-webhook $SLACK_WEBHOOK","Slack"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="Slack"?r.jsx(zt,{className:"w-4 h-4 text-green-400"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/10 flex items-center justify-center",children:r.jsx(jj,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"GitHub Actions"}),r.jsx("p",{className:"text-sm text-white/40",children:"Annotations and job summaries"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.enabled,onChange:p=>u({...i,github:{...i.github,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.github.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"PR Annotations"}),r.jsx("p",{className:"text-xs text-white/40",children:"Show issues inline in PR diffs"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.annotations.enabled,onChange:p=>u({...i,github:{...i.github,annotations:{...i.github.annotations,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Job Summary"}),r.jsx("p",{className:"text-xs text-white/40",children:"Rich summary in Actions tab"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.github.summary.enabled,onChange:p=>u({...i,github:{...i.github,summary:{...i.github.summary,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --github-annotations --github-summary"}),r.jsx("button",{onClick:()=>m("swynx scan . --github-annotations --github-summary","GitHub"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="GitHub"?r.jsx(zt,{className:"w-4 h-4 text-green-400"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]})]}),r.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-400",children:r.jsxs("a",{href:"https://github.com/features/actions",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 hover:underline",children:["View GitHub Actions docs ",r.jsx(Jl,{className:"w-3 h-3"})]})})})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#FC6D26]/20 flex items-center justify-center",children:r.jsx(pf,{className:"w-5 h-5 text-[#FC6D26]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"GitLab CI"}),r.jsx("p",{className:"text-sm text-white/40",children:"Code Quality reports for merge requests"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.gitlab.enabled,onChange:p=>u({...i,gitlab:{...i.gitlab,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.gitlab.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Code Quality Report"}),r.jsx("p",{className:"text-xs text-white/40",children:"Generate gl-code-quality-report.json"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.gitlab.codequality.enabled,onChange:p=>u({...i,gitlab:{...i.gitlab,codequality:{...i.gitlab.codequality,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"Output Path"}),r.jsx("input",{type:"text",value:i.gitlab.codequality.outputPath,onChange:p=>o({...i,gitlab:{...i.gitlab,codequality:{...i.gitlab.codequality,outputPath:p.target.value}}}),onBlur:()=>u(i),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2.5 text-sm focus:outline-none focus:border-primary font-mono"})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --gitlab-codequality"}),r.jsx("button",{onClick:()=>m("swynx scan . --gitlab-codequality","GitLab"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="GitLab"?r.jsx(zt,{className:"w-4 h-4 text-green-400"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]})]})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#D24939]/20 flex items-center justify-center",children:r.jsx(X0,{className:"w-5 h-5 text-[#D24939]"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Jenkins"}),r.jsx("p",{className:"text-sm text-white/40",children:"Structured console output for parsing"})]})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.jenkins.enabled,onChange:p=>u({...i,jenkins:{...i.jenkins,enabled:p.target.checked}}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:ring-2 peer-focus:ring-primary/50 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})}),i.jenkins.enabled&&r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Structured Console Output"}),r.jsx("p",{className:"text-xs text-white/40",children:"SWYNX_* key=value format"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i.jenkins.console.enabled,onChange:p=>u({...i,jenkins:{...i.jenkins,console:{...i.jenkins.console,enabled:p.target.checked}}}),className:"sr-only peer"}),r.jsx("div",{className:"w-9 h-5 bg-white/10 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"CLI Usage:"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"flex-1 bg-black/30 text-primary text-xs font-mono px-3 py-2 rounded overflow-x-auto",children:"swynx scan . --jenkins-console"}),r.jsx("button",{onClick:()=>m("swynx scan . --jenkins-console","Jenkins"),className:"p-2 hover:bg-white/10 rounded transition-colors",children:c==="Jenkins"?r.jsx(zt,{className:"w-4 h-4 text-green-400"}):r.jsx(Ct,{className:"w-4 h-4 text-white/40"})})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-white/40 mb-2",children:"Example Output:"}),r.jsx("pre",{className:"text-xs text-white/60 font-mono overflow-x-auto",children:`SWYNX_SCORE=78
SWYNX_GRADE=C
SWYNX_WASTE_PERCENT=4.2
SWYNX_CRITICAL_COUNT=2
SWYNX_WARNING_COUNT=5`})]})]})]}),r.jsxs("div",{className:"bg-white/5 rounded-xl p-5 border border-white/10",children:[r.jsx("h4",{className:"text-sm font-bold mb-2",children:"Configuration File"}),r.jsxs("p",{className:"text-sm text-white/50 mb-3",children:["Settings are saved to ",r.jsx("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-primary",children:".swynx.json"})," in your project root."]}),r.jsx("pre",{className:"text-xs text-white/40 font-mono bg-black/30 p-3 rounded-lg overflow-x-auto",children:`{
  "ci": {
    "slack": { "enabled": true, "webhook": "\${SWYNX_SLACK_WEBHOOK}" },
    "github": { "annotations": { "enabled": true } }
  }
}`})]})]})]})}function l5({children:n}){var K,Q,se,P,H,q,ce,xe,Ce,Re,Pe,Ie,De,At,tt;const[e]=Ri(),{currentScan:t,runStreamingScan:s,scanning:i}=Mt(),{license:o,slots:c,registeredProjects:d,selectedProjectId:u,setSelectedProjectId:m,goToProjectSelection:p,removeProject:g}=Yl(),[y,b]=C.useState(null);C.useEffect(()=>{be.getVersion().then(Me=>{Me.version&&b(Me.version)}).catch(()=>{})},[]);const[v,j]=C.useState(null),[S,k]=C.useState(null),[M,R]=C.useState(null),[E,B]=C.useState(!1);C.useEffect(()=>{S?(B(!0),R(null),be.getProjectFiles(S).then(Me=>{R(Me),B(!1)}).catch(Me=>{console.error("Failed to load file tree:",Me),R({error:Me.message||"Failed to load files"}),B(!1)})):R(null)},[S]);const I=d.find(Me=>Me.id===u),O=t==null?void 0:t.raw,ne=((se=(Q=(K=O==null?void 0:O.details)==null?void 0:K.deadCode)==null?void 0:Q.fullyDeadFiles)==null?void 0:se.length)||((q=(H=(P=O==null?void 0:O.details)==null?void 0:P.deadCode)==null?void 0:H.orphanFiles)==null?void 0:q.length)||0,$=((xe=(ce=O==null?void 0:O.details)==null?void 0:ce.unusedDeps)==null?void 0:xe.length)||0,Z=ne+$,_=((Ce=O==null?void 0:O.licenses)==null?void 0:Ce.byLicense)||{},V=["GPL","AGPL","LGPL","SSPL"];let ee=0;Object.keys(_).forEach(Me=>{V.some(Wt=>Me.toUpperCase().includes(Wt))&&(ee+=_[Me].length)});const ae=(((Pe=(Re=O==null?void 0:O.duplicates)==null?void 0:Re.similarBlocks)==null?void 0:Pe.length)||0)+(((De=(Ie=O==null?void 0:O.duplicates)==null?void 0:Ie.duplicateFunctions)==null?void 0:De.length)||0),ie=[{icon:W0,label:"Overview",href:"/",badge:null},{icon:Cj,label:"Action List",href:"/action-list",badge:null},{icon:Mn,label:"Waste",href:"/waste",badge:Z>0?Z:null},{icon:pn,label:"Security",href:"/security",badge:((At=t==null?void 0:t.metrics)==null?void 0:At.security)||null},{icon:It,label:"Dependencies",href:"/dependencies",badge:((tt=t==null?void 0:t.metrics)==null?void 0:tt.outdated)||null},{icon:nr,label:"Emissions",href:"/emissions",badge:null},{icon:Fo,label:"Bundles",href:"/bundles",badge:null},{icon:Io,label:"CSS Analysis",href:"/css",badge:null},{icon:Ct,label:"Duplicates",href:"/duplicates",badge:ae>0?ae:null},{icon:Us,label:"Licenses",href:"/licenses",badge:ee>0?ee:null},{icon:Us,label:"Heavy Deps",href:"/heavy-deps",badge:null},{icon:Yo,label:"Assets",href:"/assets",badge:null},{icon:ar,label:"Build Logs",href:"/build-logs",badge:null},{icon:Z0,label:"Fix Commands",href:"/quick-fixes",badge:null},{icon:Zo,label:"Settings",href:"/settings",badge:null},{icon:Y0,label:"Integrations",href:"/integrations",badge:null},{icon:Q0,label:"History",href:"/history",badge:null}],U=Me=>Me?new Date(Me).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",de=async Me=>{confirm("Remove this project? This will release the license slot.")&&await g(Me),j(null)};return r.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex",children:[r.jsxs("aside",{className:"w-56 bg-[#0f0f0f] border-r border-white/10 flex flex-col fixed h-screen",children:[r.jsx("div",{className:"px-4 py-1 border-b border-white/10",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("img",{src:"/swynx-white.svg",alt:"Swynx",className:"w-40 h-auto"}),r.jsxs("p",{className:"text-[10px] text-white/40 -mt-1",children:[(o==null?void 0:o.tierName)||"Dashboard","  ",(o==null?void 0:o.daysRemaining)||0," days"]})]})}),r.jsxs("div",{className:"p-3 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("p",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:["Projects (",(c==null?void 0:c.slotsUsed)||0,"/",(c==null?void 0:c.slotsTotal)||0,")"]}),((c==null?void 0:c.slotsRemaining)||0)>0&&r.jsx("button",{onClick:p,className:"p-1 hover:bg-white/10 rounded transition-colors",title:"Add project",children:r.jsx(yi,{className:"w-3.5 h-3.5 text-white/40"})})]}),r.jsxs("div",{className:"space-y-1",children:[d.map(Me=>{var Ys;const Wt=Me.id===u;return r.jsxs("div",{className:`group relative px-2 py-2 rounded-lg cursor-pointer transition-colors ${Wt?"bg-primary/20 text-primary":"hover:bg-white/5 text-white/70"}`,onClick:()=>m(Me.id),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(pu,{className:`w-4 h-4 flex-shrink-0 ${Wt?"text-primary":"text-white/40"}`}),r.jsx("span",{className:"text-sm truncate flex-1 font-medium",children:Me.name}),r.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-white/10 rounded transition-all",onClick:os=>{os.stopPropagation(),j(v===Me.id?null:Me.id)},children:r.jsx(mj,{className:"w-3.5 h-3.5 text-white/40"})})]}),r.jsx("p",{className:"text-[10px] text-white/30 truncate mt-0.5 pl-6",title:Me.path,children:Me.path}),v===Me.id&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-[#1a1a1a] border border-white/10 rounded-lg shadow-xl py-1 min-w-[140px]",children:[r.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm text-white/70 hover:bg-white/10 flex items-center gap-2",onClick:os=>{os.stopPropagation(),k(Me.path),j(null)},children:[r.jsx(wj,{className:"w-4 h-4"}),"View Files"]}),((Ys=o==null?void 0:o.tierName)==null?void 0:Ys.toLowerCase())==="enterprise"&&r.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm text-red-400 hover:bg-red-500/10 flex items-center gap-2",onClick:os=>{os.stopPropagation(),de(Me.id)},children:[r.jsx(or,{className:"w-4 h-4"}),"Remove"]})]})]},Me.id)}),d.length===0&&r.jsxs("button",{onClick:p,className:"w-full flex items-center gap-2 px-2 py-2 rounded-lg text-white/40 hover:bg-white/5 hover:text-white/60 transition-colors",children:[r.jsx(yi,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:"Add a project"})]}),d.length>0&&r.jsxs("button",{onClick:p,className:"w-full mt-2 flex items-center gap-2 px-3 py-2 rounded-lg border border-dashed border-white/20 text-white/50 hover:border-primary/50 hover:text-primary hover:bg-primary/5 transition-colors text-sm",children:[r.jsx(yi,{className:"w-4 h-4"}),r.jsx("span",{children:"Add New Project"})]})]})]}),r.jsx("nav",{className:"flex-1 p-2 overflow-y-auto",children:ie.map(Me=>{const Wt=e===Me.href;return r.jsx(hf,{href:Me.href,children:r.jsxs("a",{className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm mb-1 transition-colors relative ${Wt?"bg-primary/20 text-primary font-medium":"text-white/60 hover:bg-white/5 hover:text-white/80"}`,children:[r.jsx(Me.icon,{className:"w-4 h-4"}),Me.label,Me.badge!==null&&Me.badge>0&&r.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:Me.badge})]})},Me.label)})}),r.jsxs("div",{className:"p-4 border-t border-white/10",children:[r.jsx("button",{onClick:s,disabled:i||!I,className:"w-full btn btn-primary py-2 text-sm disabled:opacity-50 flex items-center justify-center",children:i?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 mr-2 animate-spin"}),"Scanning..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Tj,{className:"w-4 h-4 mr-2"}),"Rescan Project"]})}),t&&r.jsxs("p",{className:"text-[10px] text-white/30 mt-3 text-center",children:["Last scan: ",U(t==null?void 0:t.timestamp)]}),y&&r.jsxs("p",{className:"text-[10px] text-white/20 mt-2 text-center",children:["v",y]})]})]}),r.jsx("main",{className:"flex-1 ml-56 overflow-auto",children:n}),v&&r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>j(null)}),S&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 w-full max-w-lg max-h-[80vh] flex flex-col mx-4",children:[r.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold",children:"Project Files"}),r.jsx("p",{className:"text-xs text-white/40 mt-1 font-mono",children:S})]}),r.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(or,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4",children:E?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-white/40"})}):M!=null&&M.error?r.jsx("p",{className:"text-red-400 text-center py-8",children:M.error}):M!=null&&M.tree?r.jsx(Mw,{items:M.tree}):r.jsx("p",{className:"text-white/40 text-center py-8",children:"Failed to load files"})}),(M==null?void 0:M.truncated)&&r.jsx("p",{className:"p-3 text-xs text-white/30 border-t border-white/10 text-center",children:"Showing first 100 files. Use terminal for full listing."})]})})]})}function Mw({items:n,depth:e=0}){const[t,s]=C.useState({});return!n||n.length===0?r.jsx("p",{className:"text-white/30 text-sm",children:"Empty directory"}):r.jsx("div",{className:"space-y-0.5",children:n.map((i,o)=>{const c=`${e}-${o}-${i.name}`,d=t[c]??e<1;return i.type==="directory"?r.jsxs("div",{children:[r.jsxs("button",{className:"w-full flex items-center gap-1.5 py-1 px-1 hover:bg-white/5 rounded text-left text-sm",style:{paddingLeft:`${e*16+4}px`},onClick:()=>s(u=>({...u,[c]:!d})),children:[r.jsx(Sc,{className:`w-3.5 h-3.5 text-white/30 transition-transform ${d?"rotate-90":""}`}),r.jsx(G0,{className:"w-4 h-4 text-yellow-500/70"}),r.jsx("span",{className:i.collapsed?"text-white/30":"text-white/80",children:i.name}),i.collapsed&&r.jsx("span",{className:"text-[10px] text-white/20 ml-1",children:"(ignored)"})]}),d&&i.children&&i.children.length>0&&r.jsx(Mw,{items:i.children,depth:e+1})]},c):r.jsxs("div",{className:"flex items-center gap-1.5 py-1 px-1 text-sm text-white/60",style:{paddingLeft:`${e*16+22}px`},children:[r.jsx(q0,{className:"w-4 h-4 text-white/30"}),r.jsx("span",{className:"truncate",children:i.name})]},c)})})}const S0={Discovering:{icon:Kt,color:"text-blue-400",bg:"bg-blue-500/20"},Parsing:{icon:Kt,color:"text-cyan-400",bg:"bg-cyan-500/20"},JavaScript:{icon:Kt,color:"text-yellow-400",bg:"bg-yellow-500/20"},TypeScript:{icon:Kt,color:"text-blue-400",bg:"bg-blue-500/20"},CSS:{icon:Kt,color:"text-pink-400",bg:"bg-pink-500/20"},assets:{icon:Kt,color:"text-purple-400",bg:"bg-purple-500/20"},Dependencies:{icon:It,color:"text-orange-400",bg:"bg-orange-500/20"},import:{icon:$l,color:"text-amber-400",bg:"bg-amber-500/20"},dead:{icon:pt,color:"text-red-400",bg:"bg-red-500/20"},Dead:{icon:pt,color:"text-red-400",bg:"bg-red-500/20"},duplicate:{icon:Kt,color:"text-violet-400",bg:"bg-violet-500/20"},Duplicate:{icon:Kt,color:"text-violet-400",bg:"bg-violet-500/20"},security:{icon:pn,color:"text-red-400",bg:"bg-red-500/20"},Security:{icon:pn,color:"text-red-400",bg:"bg-red-500/20"},vulnerabilities:{icon:ij,color:"text-red-400",bg:"bg-red-500/20"},license:{icon:Us,color:"text-emerald-400",bg:"bg-emerald-500/20"},License:{icon:Us,color:"text-emerald-400",bg:"bg-emerald-500/20"},outdated:{icon:It,color:"text-orange-400",bg:"bg-orange-500/20"},Outdated:{icon:It,color:"text-orange-400",bg:"bg-orange-500/20"},Analysing:{icon:It,color:"text-blue-400",bg:"bg-blue-500/20"},bundle:{icon:It,color:"text-indigo-400",bg:"bg-indigo-500/20"},Bundle:{icon:It,color:"text-indigo-400",bg:"bg-indigo-500/20"},emission:{icon:nr,color:"text-green-400",bg:"bg-green-500/20"},Emission:{icon:nr,color:"text-green-400",bg:"bg-green-500/20"},carbon:{icon:nr,color:"text-green-400",bg:"bg-green-500/20"},Finaliz:{icon:zt,color:"text-emerald-400",bg:"bg-emerald-500/20"},default:{icon:je,color:"text-primary",bg:"bg-primary/20"}};function a5(n){for(const[e,t]of Object.entries(S0))if(n.includes(e))return t;return S0.default}function o5({entries:n}){const e=C.useRef(null);return C.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[n]),r.jsxs("div",{ref:e,className:"font-mono text-xs space-y-1 h-[320px] overflow-y-auto scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent pr-2",children:[n.map((t,s)=>{const i=a5(t.phase),o=i.icon,c=t.status==="active",d=s===n.length-1;return r.jsxs("div",{className:`
              flex items-center gap-2 py-1.5 px-2 rounded-lg transition-all duration-300
              ${c?"bg-white/5 border border-white/10":"opacity-50"}
              ${d&&c?"ring-1 ring-primary/30":""}
            `,children:[r.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center shrink-0 ${i.bg}`,children:t.status==="complete"?r.jsx(zt,{className:"w-3 h-3 text-emerald-400"}):r.jsx(o,{className:`w-3 h-3 ${i.color} ${c?"animate-pulse":""}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`text-[10px] uppercase tracking-wider ${i.color} font-semibold shrink-0`,children:t.phase.split(" ")[0]}),r.jsx("span",{className:"text-white/70 truncate text-xs",children:t.detail})]}),c&&r.jsx("div",{className:"mt-1 h-1 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${Math.max(t.progress,5)}%`}})})]}),r.jsx("div",{className:"shrink-0 w-12 text-right",children:t.status==="complete"?r.jsx("span",{className:"text-emerald-400/60 text-[10px]",children:"done"}):r.jsxs("span",{className:"text-white/40 text-[10px]",children:[Math.round(t.progress),"%"]})})]},t.id)}),n.length===0&&r.jsxs("div",{className:"flex items-center justify-center h-full text-white/30",children:[r.jsx(je,{className:"w-4 h-4 animate-spin mr-2"}),r.jsx("span",{children:"Initializing scan engine..."})]})]})}function uu({icon:n,label:e,value:t,color:s}){return r.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/10",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg ${s} flex items-center justify-center`,children:r.jsx(n,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold font-mono text-white",children:t.toLocaleString()}),r.jsx("div",{className:"text-[10px] text-white/40 uppercase tracking-wider",children:e})]})]})})}function c5({scanProgress:n}){const e=n.percent||0,t=n.phase||"Initializing",s=n.detail||"",i=n.stats||{filesAnalyzed:0,functionsFound:0,issuesFound:0},o=n.current||0,c=n.total||0,[d,u]=C.useState([]),m=C.useRef(""),p=C.useRef(""),g=C.useRef(0),y=C.useRef(null);return C.useEffect(()=>{const b=Date.now();if(t!==p.current){y.current&&u(j=>j.map(S=>S.id===y.current?{...S,status:"complete",progress:100}:S));const v=`entry-${g.current++}`;y.current=v,u(j=>[...j,{id:v,phase:t,detail:s||"Starting...",status:"active",progress:0,timestamp:b}].slice(-50)),p.current=t,m.current=s;return}if(s&&s!==m.current){y.current&&u(k=>k.map(M=>M.id===y.current?{...M,status:"complete",progress:100}:M));const v=`entry-${g.current++}`;y.current=v;const j=e,S=s.includes("/")&&s.split("/").pop()||s;u(k=>[...k,{id:v,phase:t,detail:S,status:"active",progress:j,timestamp:b}].slice(-50)),m.current=s}else y.current&&u(v=>v.map(j=>j.id===y.current?{...j,progress:Math.max(j.progress,e),timestamp:b}:j))},[t,s,o,c,e,n]),r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a]/90 backdrop-blur-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-emerald-500/5"}),r.jsxs("div",{className:"relative z-10 w-full max-w-3xl px-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"flex items-center justify-center mb-3",children:r.jsx("img",{src:"/favicon.svg",alt:"Swynx",className:"w-16 h-16"})}),r.jsx("p",{className:"text-white/40 text-sm",children:t==="Complete"?"Analysis Complete":"Deep Code Analysis in Progress"})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-white",children:t}),r.jsxs("span",{className:"text-xs text-white/50 font-mono",children:[Math.round(e),"%"]})]}),r.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${t==="Complete"?"bg-emerald-500":"bg-gradient-to-r from-primary via-emerald-500 to-primary bg-[length:200%_100%] animate-[gradient_2s_ease-in-out_infinite]"}`,style:{width:`${Math.max(e,2)}%`}})}),c>0&&r.jsxs("div",{className:"text-xs text-white/40 mt-1 font-mono",children:[o," / ",c]})]}),r.jsxs("div",{className:"px-4 py-4 bg-black/40",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),r.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/40",children:"Live Activity"})]}),r.jsx(o5,{entries:d})]}),r.jsxs("div",{className:"px-5 py-4 border-t border-white/10 grid grid-cols-3 gap-3",children:[r.jsx(uu,{icon:Kt,label:"Files",value:i.filesAnalyzed||o,color:"bg-blue-500/30"}),r.jsx(uu,{icon:fj,label:"Functions",value:i.functionsFound,color:"bg-emerald-500/30"}),r.jsx(uu,{icon:pt,label:"Issues",value:i.issuesFound||0,color:"bg-orange-500/30"})]})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-white/30",children:[r.jsx(Mj,{className:"w-3 h-3"}),r.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Air-Gapped  Secure  Local Analysis Only"}),r.jsx(pn,{className:"w-3 h-3"})]})]})]})}function d5(){const{activateLicense:n,error:e}=Yl(),[t,s]=C.useState(""),[i,o]=C.useState(""),[c,d]=C.useState(!1),[u,m]=C.useState(null),[p,g]=C.useState(!1);C.useEffect(()=>{const b=new URLSearchParams(window.location.search),v=b.get("key")||b.get("license");v&&s(v)},[]);const y=async b=>{b.preventDefault(),m(null),d(!0);try{await n(t.trim(),i.trim()||void 0)?g(!0):m(e||"Activation failed. Please check your license key.")}catch(v){m(v instanceof Error?v.message:"Activation failed")}finally{d(!1)}};return p?r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(lr,{className:"w-8 h-8 text-emerald-500"})}),r.jsx("h2",{className:"text-xl font-bold mb-2",children:"License Activated!"}),r.jsx("p",{className:"text-white/60",children:"Redirecting to project selection..."})]})}):r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:"/swynx-white.svg",alt:"Swynx",className:"h-20 mx-auto mb-4"}),r.jsx("p",{className:"text-white/50",children:"Dead code detection that learns"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-2xl border border-white/10 p-6",children:[r.jsxs("form",{onSubmit:y,children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"License Key"}),r.jsxs("div",{className:"relative",children:[r.jsx(J0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/30"}),r.jsx("input",{type:"text",value:t,onChange:b=>s(b.target.value),placeholder:"TRIAL-XXXX-XXXX-XXXX",className:"w-full bg-white/5 border border-white/10 rounded-lg pl-11 pr-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary",autoFocus:!0})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-sm font-medium text-white/70 mb-2",children:["Email ",r.jsx("span",{className:"text-white/30",children:"(optional)"})]}),r.jsx("input",{type:"email",value:i,onChange:b=>o(b.target.value),placeholder:"your@email.com",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary"})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Qo,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-400",children:u})]}),r.jsx("button",{type:"submit",disabled:c||!t.trim(),className:"w-full bg-primary text-black font-bold py-3 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Activating..."]}):"Activate License"})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[r.jsx("p",{className:"text-center text-sm text-white/40 mb-4",children:"Don't have a license?"}),r.jsxs("a",{href:"https://swynx.io",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-primary hover:text-primary/80",children:[r.jsx(Jl,{className:"w-4 h-4"}),"Get a license at swynx.io"]})]})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4 text-center",children:[r.jsxs("div",{className:"p-4 bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("p",{className:"text-2xl font-bold text-primary mb-1",children:"Air-Gapped"}),r.jsx("p",{className:"text-xs text-white/40",children:"Your code never leaves"})]}),r.jsxs("div",{className:"p-4 bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-400 mb-1",children:"Self-Hosted"}),r.jsx("p",{className:"text-xs text-white/40",children:"100% on your infra"})]})]})]})})}function h5(){const{slots:n,registeredProjects:e,registerProject:t,goToDashboard:s,license:i,setSelectedProjectId:o}=Yl(),[c,d]=C.useState(""),[u,m]=C.useState(""),[p,g]=C.useState(!1),[y,b]=C.useState(null),[v,j]=C.useState(!1),[S,k]=C.useState(!1),M=C.useRef(null),R=async O=>{O.preventDefault(),c.trim()&&j(!0)},E=async()=>{j(!1),b(null),g(!0);try{const O=await t(c.trim(),u.trim()||void 0);O.success||b(O.error||"Failed to register project")}catch(O){b(O instanceof Error?O.message:"Failed to register project")}finally{g(!1)}},B=O=>{var $;O.preventDefault(),k(!1);const ne=O.dataTransfer.items;if(ne&&ne.length>0){const Z=ne[0];if(Z.kind==="file"){const _=($=Z.webkitGetAsEntry)==null?void 0:$.call(Z);_!=null&&_.isDirectory&&b("Drag & drop not supported in browser. Please paste the full project path.")}}},I=()=>{var O;(O=M.current)==null||O.focus(),b("Paste the full path to your project directory (e.g., /Users/john/my-project)"),setTimeout(()=>b(null),5e3)};return r.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-6",children:[r.jsxs("div",{className:"w-full max-w-xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Select a Project to Scan"}),i&&r.jsxs("p",{className:"text-sm text-white/40",children:[i.tierName," License  ",i.daysRemaining," days remaining"]})]}),e.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-sm font-medium text-white/60 mb-3",children:"Your Projects"}),r.jsx("div",{className:"space-y-2",children:e.map(O=>r.jsxs("button",{onClick:()=>{o(O.id),s()},className:"w-full flex items-center gap-3 p-4 bg-[#141414] rounded-xl border border-white/10 hover:border-primary/50 transition-colors text-left",children:[r.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center",children:r.jsx(pu,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:O.name}),r.jsx("p",{className:"text-xs text-white/40 truncate",children:O.path})]}),O.lastScanAt&&r.jsxs("span",{className:"text-xs text-white/30",children:["Last scan: ",new Date(O.lastScanAt).toLocaleDateString()]})]},O.id))}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-px bg-white/10"}),r.jsx("span",{className:"text-xs text-white/30",children:"or add another project"}),r.jsx("div",{className:"flex-1 h-px bg-white/10"})]})]}),r.jsx("div",{className:`bg-[#141414] rounded-2xl border-2 border-dashed transition-colors p-6 ${S?"border-primary bg-primary/5":"border-white/10"}`,onDragOver:O=>{O.preventDefault(),k(!0)},onDragLeave:()=>k(!1),onDrop:B,children:r.jsxs("form",{onSubmit:R,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Project Name"}),r.jsx("input",{type:"text",value:u,onChange:O=>m(O.target.value),placeholder:"My Awesome Project",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary text-sm",autoFocus:!0})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Project Path"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:M,type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"/Users/john/projects/my-app",className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-primary font-mono text-sm"}),r.jsx("button",{type:"button",onClick:I,className:"px-4 py-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors",children:r.jsx(pu,{className:"w-5 h-5 text-white/60"})})]})]}),r.jsx("p",{className:"text-sm text-white/40 mb-6 text-center",children:"Or drag and drop a folder here"}),y&&r.jsxs("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Qo,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-400",children:y})]}),r.jsxs("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(sr,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-white/60",children:[r.jsx("p",{className:"mb-1",children:(n==null?void 0:n.slotsTotal)===-1?r.jsx(r.Fragment,{children:"Unlimited project slots available."}):r.jsxs(r.Fragment,{children:["This will use ",r.jsxs("strong",{className:"text-white",children:["1 of ",(n==null?void 0:n.slotsTotal)||0]})," project slots."]})}),r.jsxs("p",{className:"text-white/40",children:[(n==null?void 0:n.slotsUsed)||0," slot",(n==null?void 0:n.slotsUsed)!==1?"s":""," used  ",(n==null?void 0:n.slotsRemaining)===-1?"unlimited":(n==null?void 0:n.slotsRemaining)||0," remaining"]})]})]}),r.jsx("button",{type:"submit",disabled:p||!c.trim()||(n==null?void 0:n.slotsRemaining)!==-1&&((n==null?void 0:n.slotsRemaining)||0)<=0,className:"w-full bg-primary text-black font-bold py-3 rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-5 h-5 animate-spin"}),"Adding Project..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yi,{className:"w-5 h-5"}),"Scan This Project"]})})]})}),n&&n.slotsRemaining!==-1&&n.slotsRemaining<=0&&r.jsxs("div",{className:"mt-4 p-4 bg-orange-500/10 border border-orange-500/20 rounded-lg flex items-start gap-3",children:[r.jsx(Qo,{className:"w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"text-orange-400 font-medium",children:"No slots available"}),r.jsx("p",{className:"text-white/50",children:"Remove an existing project to add a new one, or upgrade your license."})]})]})]}),v&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/10 p-6 max-w-md w-full mx-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Add Project?"}),r.jsxs("p",{className:"text-white/60 mb-4",children:["This will use ",r.jsx("strong",{className:"text-white",children:"1 project slot"})," from your license."]}),r.jsx("div",{className:"p-4 bg-white/5 rounded-lg mb-6 font-mono text-sm text-white/80 truncate",children:c}),r.jsx("p",{className:"text-sm text-white/40 mb-6",children:"Projects are locked to your license for the license period. You can release a slot by removing a project."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors flex items-center justify-center gap-2",children:[r.jsx(or,{className:"w-4 h-4"}),"Cancel"]}),r.jsxs("button",{onClick:E,className:"flex-1 px-4 py-3 bg-primary text-black font-bold rounded-lg hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[r.jsx(zt,{className:"w-4 h-4"}),"Yes, Add Project"]})]})]})})]})}function u5(){const[,n]=Ri(),[e,t]=C.useState([]),[s,i]=C.useState(!0),[o,c]=C.useState(""),[d,u]=C.useState("");C.useEffect(()=>{m()},[o]);async function m(){i(!0);try{const g=await Cs.getCustomers(o||void 0);t(g.customers)}catch(g){console.error("Failed to load customers:",g)}finally{i(!1)}}function p(g){g.preventDefault(),c(d)}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(xf,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Customers"})]}),r.jsxs("button",{onClick:()=>n("/admin/customers/new"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 transition-colors",children:[r.jsx(yi,{className:"w-4 h-4"}),"New Customer"]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("form",{onSubmit:p,className:"flex gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Dj,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),r.jsx("input",{type:"text",value:d,onChange:g=>u(g.target.value),placeholder:"Search by name, email, or company...",className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder:text-white/30 focus:outline-none focus:border-primary/50"})]}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"Search"})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsx("div",{className:"px-6 py-4 border-b border-white/10",children:r.jsx("h2",{className:"font-bold",children:s?"Loading...":`${e.length} Customer${e.length!==1?"s":""}`})}),s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(je,{className:"w-6 h-6 animate-spin text-white/40"})}):e.length===0?r.jsx("div",{className:"px-6 py-12 text-center text-white/40",children:o?"No customers match your search":"No customers yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:e.map(g=>r.jsxs("button",{onClick:()=>n(`/admin/customers/${g.id}`),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-white truncate",children:g.name}),r.jsx("div",{className:"text-sm text-white/50 truncate",children:g.email}),g.company&&r.jsx("div",{className:"text-sm text-white/30 truncate",children:g.company})]}),r.jsxs("div",{className:"flex items-center gap-4 ml-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"text-primary font-medium",children:g.activeLicenseCount||0}),r.jsx("span",{className:"text-white/40",children:" active"})]}),r.jsxs("div",{className:"text-xs text-white/30",children:[g.licenseCount||0," total license",(g.licenseCount||0)!==1?"s":""]})]}),r.jsx(Sc,{className:"w-4 h-4 text-white/30"})]})]},g.id))})]})]})]})}function f5(){const[,n]=Ri(),t=B0().id,[s,i]=C.useState(null),[o,c]=C.useState([]),[d,u]=C.useState([]),[m,p]=C.useState(!0),[g,y]=C.useState(!1),[b,v]=C.useState({name:"",email:"",company:"",notes:""}),[j,S]=C.useState(!1),[k,M]=C.useState([]),[R,E]=C.useState(null),[B,I]=C.useState(!1),[O,ne]=C.useState("starter");C.useEffect(()=>{$(),Z()},[t]);async function $(){if(t){p(!0);try{const U=await Cs.getCustomer(t);i(U.customer),c(U.licenses),u(U.emailHistory),v({name:U.customer.name,email:U.customer.email,company:U.customer.company||"",notes:U.customer.notes||""})}catch(U){console.error("Failed to load customer:",U)}finally{p(!1)}}}async function Z(){try{const U=await Cs.getEmailTemplates();M(U.templates)}catch(U){console.error("Failed to load templates:",U)}}async function _(){if(t){S(!0);try{await Cs.updateCustomer(t,b),await $(),y(!1)}catch(U){console.error("Failed to update customer:",U)}finally{S(!1)}}}async function V(){if(!(!t||!s)&&confirm(`Delete customer "${s.name}"? This cannot be undone.`))try{await Cs.deleteCustomer(t),n("/admin/customers")}catch(U){alert(U.message||"Failed to delete customer")}}async function ee(U,de){E(`${U}-${de}`);try{await Cs.sendEmail(U,de),await $(),alert("Email sent successfully!")}catch(K){alert(K.message||"Failed to send email")}finally{E(null)}}async function ae(){if(t)try{await Cs.addLicenseToCustomer(t,{tier:O}),I(!1),await $()}catch(U){alert(U.message||"Failed to add license")}}async function ie(U){if(t&&confirm("Remove this license from the customer?"))try{await Cs.removeLicenseFromCustomer(t,U),await $()}catch(de){alert(de.message||"Failed to remove license")}}return m?r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx(je,{className:"w-8 h-8 animate-spin text-primary"})}):s?r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(uf,{className:"w-5 h-5 text-white/60"})}),r.jsx(qx,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:s.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-2 px-3 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[r.jsx(Lj,{className:"w-4 h-4"}),"Edit"]}),r.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:[r.jsx(Mn,{className:"w-4 h-4"}),"Delete"]})]})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-4xl",children:[r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(qx,{className:"w-5 h-5 text-primary"}),r.jsx("h2",{className:"font-bold",children:"Customer Information"})]}),r.jsx("div",{className:"p-6",children:g?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:b.name,onChange:U=>v({...b,name:U.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:b.email,onChange:U=>v({...b,email:U.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Company"}),r.jsx("input",{type:"text",value:b.company,onChange:U=>v({...b,company:U.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Notes"}),r.jsx("textarea",{value:b.notes,onChange:U=>v({...b,notes:U.target.value}),rows:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:_,disabled:j,className:"px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90 disabled:opacity-50",children:j?"Saving...":"Save Changes"}),r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20",children:"Cancel"})]})]}):r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Vx,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-white/60",children:s.email})]}),s.company&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(lj,{className:"w-4 h-4 text-white/40"}),r.jsx("span",{className:"text-white/60",children:s.company})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(cj,{className:"w-4 h-4 text-white/40"}),r.jsxs("span",{className:"text-white/60",children:["Created ",new Date(s.createdAt).toLocaleDateString()]})]}),s.notes&&r.jsx("div",{className:"mt-4 p-3 bg-white/5 rounded-lg text-white/60 text-sm",children:s.notes})]})})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(J0,{className:"w-5 h-5 text-emerald-400"}),r.jsxs("h2",{className:"font-bold",children:["Licenses (",o.length,")"]})]}),r.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-1 px-3 py-1 text-sm bg-white/10 rounded-lg hover:bg-white/20",children:[r.jsx(yi,{className:"w-3 h-3"}),"Add License"]})]}),B&&r.jsx("div",{className:"px-6 py-4 border-b border-white/10 bg-white/5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("select",{value:O,onChange:U=>ne(U.target.value),className:"px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",children:[r.jsx("option",{value:"trial",children:"Trial"}),r.jsx("option",{value:"starter",children:"Starter"}),r.jsx("option",{value:"team",children:"Team"}),r.jsx("option",{value:"enterprise",children:"Enterprise"})]}),r.jsx("button",{onClick:ae,className:"px-4 py-2 bg-primary text-black font-medium rounded-lg hover:bg-primary/90",children:"Create License"}),r.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20",children:"Cancel"})]})}),o.length===0?r.jsx("div",{className:"px-6 py-8 text-center text-white/40",children:"No licenses yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:o.map(U=>r.jsx("div",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("code",{className:"text-primary text-sm",children:U.key}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${U.status==="active"?"bg-emerald-500/20 text-emerald-400":U.status==="expired"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:U.status}),r.jsx("span",{className:"text-sm text-white/40",children:U.tier}),U.cicdEnabled&&r.jsx("span",{className:"text-xs text-blue-400",children:"CI/CD"})]}),r.jsxs("div",{className:"text-xs text-white/30 mt-1",children:["Expires: ",new Date(U.expires).toLocaleDateString(),U.daysRemaining!==void 0&&U.daysRemaining>0&&r.jsxs("span",{children:[" (",U.daysRemaining," days)"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("select",{className:"px-2 py-1 text-xs bg-white/5 border border-white/10 rounded focus:outline-none",onChange:de=>{de.target.value&&(ee(de.target.value,U.key),de.target.value="")},disabled:R!==null,value:"",children:[r.jsx("option",{value:"",children:"Send Email..."}),k.map(de=>r.jsx("option",{value:de.name,children:de.name},de.name))]}),r.jsx("button",{onClick:()=>ie(U.key),className:"p-1 text-white/30 hover:text-red-400 transition-colors",title:"Remove license",children:r.jsx(Mn,{className:"w-4 h-4"})})]})]})},U.key))})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center gap-2",children:[r.jsx(Vx,{className:"w-5 h-5 text-blue-400"}),r.jsxs("h2",{className:"font-bold",children:["Email History (",d.length,")"]})]}),d.length===0?r.jsx("div",{className:"px-6 py-8 text-center text-white/40",children:"No emails sent yet"}):r.jsx("div",{className:"divide-y divide-white/10",children:d.map((U,de)=>r.jsxs("div",{className:"px-6 py-3 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:U.template}),U.licenseKey&&r.jsxs("div",{className:"text-xs text-white/30",children:["To: ",U.licenseKey]})]}),r.jsx("div",{className:"text-xs text-white/40",children:new Date(U.sentAt).toLocaleString()})]},de))})]})]})]}):r.jsx("div",{className:"p-6 text-center text-white/40",children:"Customer not found"})}function m5(){const[,n]=Ri(),[e,t]=C.useState(!1),[s,i]=C.useState(null),[o,c]=C.useState({name:"",email:"",company:"",notes:"",createLicense:!1,tier:"starter",cicdEnabled:!1});async function d(u){u.preventDefault(),i(null),t(!0);try{const m=await Cs.createCustomer({name:o.name,email:o.email,company:o.company||void 0,notes:o.notes||void 0,createLicenseWith:o.createLicense?{tier:o.tier,cicdEnabled:o.cicdEnabled}:void 0});n(`/admin/customers/${m.customer.id}`)}catch(m){i(m.message||"Failed to create customer")}finally{t(!1)}}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(uf,{className:"w-5 h-5 text-white/60"})}),r.jsx(Bj,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"New Customer"})]}),r.jsx("div",{className:"p-6 max-w-xl",children:r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s&&r.jsx("div",{className:"px-4 py-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:s}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsx("h2",{className:"font-bold mb-4",children:"Customer Information"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm text-white/60 mb-1",children:["Name ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"text",required:!0,value:o.name,onChange:u=>c({...o,name:u.target.value}),placeholder:"John Smith",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm text-white/60 mb-1",children:["Email ",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("input",{type:"email",required:!0,value:o.email,onChange:u=>c({...o,email:u.target.value}),placeholder:"john@example.com",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Company"}),r.jsx("input",{type:"text",value:o.company,onChange:u=>c({...o,company:u.target.value}),placeholder:"Acme Inc",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Notes"}),r.jsx("textarea",{value:o.notes,onChange:u=>c({...o,notes:u.target.value}),placeholder:"How did they find us? What are they interested in?",rows:3,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none"})]})]}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"font-bold",children:"Create License"}),r.jsx("button",{type:"button",onClick:()=>c({...o,createLicense:!o.createLicense}),className:`relative w-10 h-6 rounded-full transition-colors ${o.createLicense?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${o.createLicense?"translate-x-4":""}`})})]}),o.createLicense&&r.jsxs("div",{className:"space-y-4 pt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Tier"}),r.jsxs("select",{value:o.tier,onChange:u=>c({...o,tier:u.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",children:[r.jsx("option",{value:"trial",children:"Trial (14 days)"}),r.jsx("option",{value:"starter",children:"Starter (1 year)"}),r.jsx("option",{value:"team",children:"Team (1 year)"}),r.jsx("option",{value:"enterprise",children:"Enterprise (1 year)"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Enable CI/CD"}),r.jsx("div",{className:"text-xs text-white/40",children:"Allow license to be used in CI/CD pipelines"})]}),r.jsx("button",{type:"button",onClick:()=>c({...o,cicdEnabled:!o.cicdEnabled}),className:`relative w-10 h-6 rounded-full transition-colors ${o.cicdEnabled?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${o.cicdEnabled?"translate-x-4":""}`})})]})]})]}),r.jsx("button",{type:"submit",disabled:e,className:"w-full flex items-center justify-center gap-2 py-3 bg-primary text-black font-bold rounded-lg hover:bg-primary/90 disabled:opacity-50",children:e?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):"Create Customer"})]})})]})}function p5(){const[,n]=Ri(),[e,t]=C.useState([]),[s,i]=C.useState(!0),[o,c]=C.useState(!1),[d,u]=C.useState(!1),[m,p]=C.useState(null),[g,y]=C.useState(null),[b,v]=C.useState({template:"version-release",version:"",changelog:"",downloadUrl:"",dryRun:!0});C.useEffect(()=>{j()},[]);async function j(){try{const M=await Cs.getEmailTemplates();t(M.templates)}catch(M){console.error("Failed to load templates:",M)}finally{i(!1)}}async function S(){u(!0);try{const M=await Cs.previewEmail(b.template);p(M.html)}catch(M){console.error("Failed to preview:",M)}finally{u(!1)}}async function k(){if(!(!b.dryRun&&!confirm("Send this email to ALL active license holders?"))){c(!0),y(null);try{const M=await Cs.broadcastEmail({template:b.template,version:b.version||void 0,changelog:b.changelog||void 0,downloadUrl:b.downloadUrl||void 0,dryRun:b.dryRun});y({sent:M.sent,errors:M.errors})}catch(M){alert(M.message||"Broadcast failed")}finally{c(!1)}}}return r.jsxs(r.Fragment,{children:[r.jsxs("header",{className:"sticky top-0 z-10 bg-[#0a0a0a]/80 backdrop-blur-sm border-b border-white/10 px-6 py-4 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n("/admin/customers"),className:"p-2 -ml-2 hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(uf,{className:"w-5 h-5 text-white/60"})}),r.jsx(Pj,{className:"w-5 h-5 text-white/60"}),r.jsx("h1",{className:"text-lg font-bold",children:"Broadcast Email"})]}),r.jsxs("div",{className:"p-6 space-y-6 max-w-2xl",children:[r.jsx("div",{className:"px-4 py-3 bg-orange-500/20 border border-orange-500/30 rounded-lg text-orange-400 text-sm",children:"This will send an email to all active license holders. Use dry run mode first to see how many recipients there are."}),r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Template"}),r.jsx("select",{value:b.template,onChange:M=>v({...b,template:M.target.value}),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none",disabled:s,children:e.map(M=>r.jsxs("option",{value:M.name,children:[M.name," - ",M.subject]},M.name))})]}),b.template==="version-release"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Version"}),r.jsx("input",{type:"text",value:b.version,onChange:M=>v({...b,version:M.target.value}),placeholder:"1.0.6",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Changelog"}),r.jsx("textarea",{value:b.changelog,onChange:M=>v({...b,changelog:M.target.value}),placeholder:`- New feature A
- Bug fix B
- Improvement C`,rows:5,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50 resize-none font-mono text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-white/60 mb-1",children:"Download URL"}),r.jsx("input",{type:"url",value:b.downloadUrl,onChange:M=>v({...b,downloadUrl:M.target.value}),placeholder:"https://github.com/...",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary/50"})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm",children:"Dry Run Mode"}),r.jsx("div",{className:"text-xs text-white/40",children:"Simulates sending without actually emailing anyone"})]}),r.jsx("button",{type:"button",onClick:()=>v({...b,dryRun:!b.dryRun}),className:`relative w-10 h-6 rounded-full transition-colors ${b.dryRun?"bg-primary":"bg-white/20"}`,children:r.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${b.dryRun?"translate-x-4":""}`})})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:S,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 disabled:opacity-50",children:[d?r.jsx(je,{className:"w-4 h-4 animate-spin"}):r.jsx(U0,{className:"w-4 h-4"}),"Preview"]}),r.jsx("button",{onClick:k,disabled:o,className:`flex-1 flex items-center justify-center gap-2 py-2 font-medium rounded-lg disabled:opacity-50 ${b.dryRun?"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30":"bg-primary text-black hover:bg-primary/90"}`,children:o?r.jsxs(r.Fragment,{children:[r.jsx(je,{className:"w-4 h-4 animate-spin"}),b.dryRun?"Simulating...":"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Rj,{className:"w-4 h-4"}),b.dryRun?"Run Simulation":"Send Broadcast"]})})]}),g&&r.jsxs("div",{className:`px-4 py-3 rounded-lg ${b.dryRun?"bg-blue-500/20 border border-blue-500/30 text-blue-400":"bg-emerald-500/20 border border-emerald-500/30 text-emerald-400"}`,children:[r.jsx("div",{className:"font-medium",children:b.dryRun?"Simulation Complete":"Broadcast Complete"}),r.jsxs("div",{className:"text-sm mt-1",children:[b.dryRun?`Would send to ${g.sent} recipients`:`Sent to ${g.sent} recipients`,g.errors>0&&`, ${g.errors} errors`]})]}),m&&r.jsxs("div",{className:"bg-[#141414] rounded-xl border border-white/10 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold",children:"Email Preview"}),r.jsx("button",{onClick:()=>p(null),className:"text-sm text-white/40 hover:text-white",children:"Close"})]}),r.jsx("iframe",{srcDoc:m,className:"w-full h-[600px] bg-white",title:"Email preview"})]})]})]})}function C0(){return r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(je,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-4"}),r.jsx("p",{className:"text-white/60",children:"Loading Swynx..."})]})})}function x5(){const{scanning:n,scanProgress:e}=Mt();return r.jsxs(r.Fragment,{children:[n&&e&&r.jsx(c5,{scanProgress:e}),r.jsx(l5,{children:r.jsxs(z0,{children:[r.jsx(ct,{path:"/",component:Gj}),r.jsx(ct,{path:"/action-list",component:Qj}),r.jsx(ct,{path:"/waste",component:_C}),r.jsx(ct,{path:"/security",component:WC}),r.jsx(ct,{path:"/dependencies",component:HC}),r.jsx(ct,{path:"/emissions",component:UC}),r.jsx(ct,{path:"/bundles",component:JC}),r.jsx(ct,{path:"/css",component:YC}),r.jsx(ct,{path:"/duplicates",component:XC}),r.jsx(ct,{path:"/licenses",component:ZC}),r.jsx(ct,{path:"/heavy-deps",component:e5}),r.jsx(ct,{path:"/assets",component:t5}),r.jsx(ct,{path:"/build-logs",component:s5}),r.jsx(ct,{path:"/quick-fixes",component:qC}),r.jsx(ct,{path:"/settings",component:r5}),r.jsx(ct,{path:"/integrations",component:i5}),r.jsx(ct,{path:"/history",component:KC})]})})]})}function g5(){return r.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:r.jsxs(z0,{children:[r.jsx(ct,{path:"/admin/customers/new",component:m5}),r.jsx(ct,{path:"/admin/customers/:id",component:f5}),r.jsx(ct,{path:"/admin/customers",component:u5}),r.jsx(ct,{path:"/admin/broadcast",component:p5})]})})}function y5(){const{state:n}=Yl(),[e]=Ri();if(e.startsWith("/admin"))return r.jsx(g5,{});switch(n){case"loading":return r.jsx(C0,{});case"activation":return r.jsx(d5,{});case"project-selection":return r.jsx(h5,{});case"dashboard":case"scanning":return r.jsx(x5,{});default:return r.jsx(C0,{})}}function w5(){return r.jsx(_j,{children:r.jsx(Wj,{children:r.jsx(Hj,{children:r.jsx(y5,{})})})})}Ov.createRoot(document.getElementById("root")).render(r.jsx(A0.StrictMode,{children:r.jsx(w5,{})}));export{mc as A,j4 as B,t4 as C,vt as D,X as E,Ve as F,fr as G,Te as H,Ge as I,Ks as J,ye as K,S5 as L,gs as M,j5 as N,Lk as O,Fk as P,Br as R,Ke as S,Ms as T,Pc as W,xn as a,Ju as b,P5 as c,C5 as d,M5 as e,L5 as f,A5 as g,as as h,i4 as i,Fe as j,S1 as k,mt as l,Ec as m,Mc as n,x1 as o,N5 as p,ve as q,Vs as r,Qk as s,G as t,Rf as u,E5 as v,e4 as w,He as x,gi as y,T1 as z};
